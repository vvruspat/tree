{
  "version": 3,
  "sources": ["../../pixi.js/src/rendering/batcher/gpu/getTextureBatchBindGroup.ts"],
  "sourcesContent": ["import { BindGroup } from '../../renderers/gpu/shader/BindGroup';\nimport { Texture } from '../../renderers/shared/texture/Texture';\n\nimport type { TextureSource } from '../../renderers/shared/texture/sources/TextureSource';\n\nconst cachedGroups: Record<number, BindGroup> = {};\n\n/**\n * @param textures\n * @param size\n * @param maxTextures\n * @internal\n */\nexport function getTextureBatchBindGroup(textures: TextureSource[], size: number, maxTextures: number)\n{\n    let uid = 2166136261; // FNV-1a 32-bit offset basis\n\n    for (let i = 0; i < size; i++)\n    {\n        uid ^= textures[i].uid;\n        uid = Math.imul(uid, 16777619);\n        uid >>>= 0;\n    }\n\n    return cachedGroups[uid] || generateTextureBatchBindGroup(textures, size, uid, maxTextures);\n}\n\nfunction generateTextureBatchBindGroup(textures: TextureSource[], size: number, key: number, maxTextures: number): BindGroup\n{\n    const bindGroupResources: Record<string, any> = {};\n\n    let bindIndex = 0;\n\n    for (let i = 0; i < maxTextures; i++)\n    {\n        const texture = i < size ? textures[i] : Texture.EMPTY.source;\n\n        bindGroupResources[bindIndex++] = texture.source;\n        bindGroupResources[bindIndex++] = texture.style;\n    }\n\n    // pad out with empty textures\n    const bindGroup = new BindGroup(bindGroupResources);\n\n    cachedGroups[key] = bindGroup;\n\n    return bindGroup;\n}\n\n"],
  "mappings": ";;;;;;AAKA,IAAM,eAA0C,CAAA;AAQzC,SAAS,yBAAyB,UAA2B,MAAc,aAClF;AACI,MAAI,MAAM;AAEV,WAAS,IAAI,GAAG,IAAI,MAAM,KAC1B;AACI,WAAO,SAAS,CAAC,EAAE;AACnB,UAAM,KAAK,KAAK,KAAK,QAAQ;AAC7B,aAAS;EACb;AAEA,SAAO,aAAa,GAAG,KAAK,8BAA8B,UAAU,MAAM,KAAK,WAAW;AAC9F;AAEA,SAAS,8BAA8B,UAA2B,MAAc,KAAa,aAC7F;AACI,QAAM,qBAA0C,CAAA;AAEhD,MAAI,YAAY;AAEhB,WAAS,IAAI,GAAG,IAAI,aAAa,KACjC;AACI,UAAM,UAAU,IAAI,OAAO,SAAS,CAAC,IAAI,QAAQ,MAAM;AAEvD,uBAAmB,WAAW,IAAI,QAAQ;AAC1C,uBAAmB,WAAW,IAAI,QAAQ;EAC9C;AAGA,QAAM,YAAY,IAAI,UAAU,kBAAkB;AAElD,eAAa,GAAG,IAAI;AAEpB,SAAO;AACX;",
  "names": []
}
