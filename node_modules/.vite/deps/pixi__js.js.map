{
  "version": 3,
  "sources": ["../../@xmldom/xmldom/lib/conventions.js", "../../@xmldom/xmldom/lib/dom.js", "../../@xmldom/xmldom/lib/entities.js", "../../@xmldom/xmldom/lib/sax.js", "../../@xmldom/xmldom/lib/dom-parser.js", "../../@xmldom/xmldom/lib/index.js", "../../pixi.js/src/environment-browser/browserExt.ts", "../../pixi.js/src/environment-webworker/webworkerExt.ts", "../../pixi.js/lib/filters/blend-modes/blend-template.frag.mjs", "../../pixi.js/lib/filters/blend-modes/blend-template.vert.mjs", "../../pixi.js/lib/filters/blend-modes/blend-template.wgsl.mjs", "../../pixi.js/src/filters/blend-modes/BlendModeFilter.ts", "../../pixi.js/src/filters/blend-modes/hls/GLhls.ts", "../../pixi.js/src/filters/blend-modes/hls/GPUhls.ts", "../../pixi.js/src/advanced-blend-modes/ColorBlend.ts", "../../pixi.js/src/advanced-blend-modes/ColorBurnBlend.ts", "../../pixi.js/src/advanced-blend-modes/ColorDodgeBlend.ts", "../../pixi.js/src/advanced-blend-modes/DarkenBlend.ts", "../../pixi.js/src/advanced-blend-modes/DifferenceBlend.ts", "../../pixi.js/src/advanced-blend-modes/DivideBlend.ts", "../../pixi.js/src/advanced-blend-modes/ExclusionBlend.ts", "../../pixi.js/src/advanced-blend-modes/HardLightBlend.ts", "../../pixi.js/src/advanced-blend-modes/HardMixBlend.ts", "../../pixi.js/src/advanced-blend-modes/LightenBlend.ts", "../../pixi.js/src/advanced-blend-modes/LinearBurnBlend.ts", "../../pixi.js/src/advanced-blend-modes/LinearDodgeBlend.ts", "../../pixi.js/src/advanced-blend-modes/LinearLightBlend.ts", "../../pixi.js/src/advanced-blend-modes/LuminosityBlend.ts", "../../pixi.js/src/advanced-blend-modes/NegationBlend.ts", "../../pixi.js/src/advanced-blend-modes/OverlayBlend.ts", "../../pixi.js/src/advanced-blend-modes/PinLightBlend.ts", "../../pixi.js/src/advanced-blend-modes/SaturationBlend.ts", "../../pixi.js/src/advanced-blend-modes/SoftLightBlend.ts", "../../pixi.js/src/advanced-blend-modes/SubtractBlend.ts", "../../pixi.js/src/advanced-blend-modes/VividLightBlend.ts", "../../pixi.js/src/utils/browser/isWebGLSupported.ts", "../../pixi.js/src/utils/browser/isWebGPUSupported.ts", "../../pixi.js/src/rendering/renderers/autoDetectRenderer.ts", "../../pixi.js/src/app/ResizePlugin.ts", "../../pixi.js/src/app/TickerPlugin.ts", "../../pixi.js/src/app/init.ts", "../../pixi.js/src/app/Application.ts", "../../pixi.js/src/scene/text-bitmap/asset/bitmapFontTextParser.ts", "../../pixi.js/src/scene/text-bitmap/asset/bitmapFontXMLParser.ts", "../../pixi.js/src/scene/text-bitmap/asset/bitmapFontXMLStringParser.ts", "../../pixi.js/src/scene/text-bitmap/asset/loadBitmapFont.ts", "../../pixi.js/src/assets/BackgroundLoader.ts", "../../pixi.js/src/assets/cache/parsers/cacheTextureArray.ts", "../../pixi.js/src/assets/detections/utils/testImageFormat.ts", "../../pixi.js/src/assets/detections/parsers/detectAvif.ts", "../../pixi.js/src/assets/detections/parsers/detectDefaults.ts", "../../pixi.js/src/assets/detections/utils/testVideoFormat.ts", "../../pixi.js/src/assets/detections/parsers/detectMp4.ts", "../../pixi.js/src/assets/detections/parsers/detectOgv.ts", "../../pixi.js/src/assets/detections/parsers/detectWebm.ts", "../../pixi.js/src/assets/detections/parsers/detectWebp.ts", "../../pixi.js/src/assets/loader/Loader.ts", "../../pixi.js/src/assets/utils/checkDataUrl.ts", "../../pixi.js/src/assets/utils/checkExtension.ts", "../../pixi.js/src/assets/loader/parsers/loadJson.ts", "../../pixi.js/src/assets/loader/parsers/loadTxt.ts", "../../pixi.js/src/assets/loader/parsers/loadWebFont.ts", "../../pixi.js/src/utils/network/getResolutionOfUrl.ts", "../../pixi.js/src/assets/loader/parsers/textures/utils/createTexture.ts", "../../pixi.js/src/assets/loader/parsers/textures/loadSVG.ts", "../../pixi.js/lib/_virtual/checkImageBitmap.worker.mjs", "../../pixi.js/lib/_virtual/loadImageBitmap.worker.mjs", "../../pixi.js/src/assets/loader/workers/WorkerManager.ts", "../../pixi.js/src/assets/loader/parsers/textures/loadTextures.ts", "../../pixi.js/src/assets/loader/parsers/textures/loadVideoTextures.ts", "../../pixi.js/src/assets/resolver/parsers/resolveTextureUrl.ts", "../../pixi.js/src/assets/resolver/parsers/resolveJsonUrl.ts", "../../pixi.js/src/assets/Assets.ts", "../../pixi.js/src/compressed-textures/basis/detectBasis.ts", "../../pixi.js/src/rendering/renderers/shared/texture/sources/CompressedSource.ts", "../../pixi.js/src/rendering/renderers/gl/texture/utils/getSupportedGlCompressedTextureFormats.ts", "../../pixi.js/src/rendering/renderers/gpu/texture/utils/getSupportedGPUCompressedTextureFormats.ts", "../../pixi.js/src/rendering/renderers/shared/texture/utils/getSupportedCompressedTextureFormats.ts", "../../pixi.js/src/rendering/renderers/shared/texture/utils/getSupportedTextureFormats.ts", "../../pixi.js/lib/_virtual/basis.worker.mjs", "../../pixi.js/src/compressed-textures/basis/utils/setBasisTranscoderPath.ts", "../../pixi.js/src/compressed-textures/basis/worker/loadBasisOnWorker.ts", "../../pixi.js/src/compressed-textures/basis/loadBasis.ts", "../../pixi.js/src/compressed-textures/basis/utils/createLevelBuffers.ts", "../../pixi.js/src/compressed-textures/basis/utils/gpuFormatToBasisTranscoderFormat.ts", "../../pixi.js/src/compressed-textures/dds/const.ts", "../../pixi.js/src/compressed-textures/dds/parseDDS.ts", "../../pixi.js/src/compressed-textures/dds/loadDDS.ts", "../../pixi.js/src/compressed-textures/ktx2/const.ts", "../../pixi.js/src/compressed-textures/ktx/parseKTX.ts", "../../pixi.js/src/compressed-textures/ktx/loadKTX.ts", "../../pixi.js/lib/_virtual/ktx.worker.mjs", "../../pixi.js/src/compressed-textures/ktx2/utils/setKTXTranscoderPath.ts", "../../pixi.js/src/compressed-textures/ktx2/worker/loadKTX2onWorker.ts", "../../pixi.js/src/compressed-textures/ktx2/loadKTX2.ts", "../../pixi.js/src/compressed-textures/ktx2/utils/convertFormatIfRequired.ts", "../../pixi.js/src/compressed-textures/ktx2/utils/createLevelBuffersFromKTX.ts", "../../pixi.js/src/compressed-textures/ktx2/utils/glFormatToGPUFormat.ts", "../../pixi.js/src/compressed-textures/ktx2/utils/vkFormatToGPUFormat.ts", "../../pixi.js/src/compressed-textures/ktx2/utils/getTextureFormatFromKTXTexture.ts", "../../pixi.js/src/compressed-textures/ktx2/utils/gpuFormatToKTXBasisTranscoderFormat.ts", "../../pixi.js/src/compressed-textures/shared/resolveCompressedTextureUrl.ts", "../../pixi.js/src/compressed-textures/shared/detectCompressed.ts", "../../pixi.js/src/culling/Culler.ts", "../../pixi.js/src/culling/CullerPlugin.ts", "../../pixi.js/src/dom/DOMPipe.ts", "../../pixi.js/src/dom/DOMContainer.ts", "../../pixi.js/src/environment-webworker/WebWorkerAdapter.ts", "../../pixi.js/lib/filters/defaults/alpha/alpha.frag.mjs", "../../pixi.js/lib/filters/defaults/alpha/alpha.wgsl.mjs", "../../pixi.js/src/filters/defaults/alpha/AlphaFilter.ts", "../../pixi.js/src/filters/defaults/blur/const.ts", "../../pixi.js/src/filters/defaults/blur/gl/generateBlurFragSource.ts", "../../pixi.js/src/filters/defaults/blur/gl/generateBlurVertSource.ts", "../../pixi.js/src/filters/defaults/blur/gl/generateBlurGlProgram.ts", "../../pixi.js/lib/filters/defaults/blur/gpu/blur-template.wgsl.mjs", "../../pixi.js/src/filters/defaults/blur/gpu/generateBlurProgram.ts", "../../pixi.js/src/filters/defaults/blur/BlurFilterPass.ts", "../../pixi.js/src/filters/defaults/blur/BlurFilter.ts", "../../pixi.js/lib/filters/defaults/color-matrix/colorMatrixFilter.frag.mjs", "../../pixi.js/lib/filters/defaults/color-matrix/colorMatrixFilter.wgsl.mjs", "../../pixi.js/src/filters/defaults/color-matrix/ColorMatrixFilter.ts", "../../pixi.js/lib/filters/defaults/displacement/displacement.frag.mjs", "../../pixi.js/lib/filters/defaults/displacement/displacement.vert.mjs", "../../pixi.js/lib/filters/defaults/displacement/displacement.wgsl.mjs", "../../pixi.js/src/filters/defaults/displacement/DisplacementFilter.ts", "../../pixi.js/lib/filters/defaults/noise/noise.frag.mjs", "../../pixi.js/lib/filters/defaults/noise/noise.wgsl.mjs", "../../pixi.js/src/filters/defaults/noise/NoiseFilter.ts", "../../pixi.js/lib/filters/blend-modes/hsl.wgsl.mjs", "../../pixi.js/src/prepare/PrepareBase.ts", "../../pixi.js/src/scene/mesh/shared/MeshGeometry.ts", "../../pixi.js/src/scene/mesh/shared/BatchableMesh.ts", "../../pixi.js/src/scene/mesh/shared/MeshPipe.ts", "../../pixi.js/src/scene/mesh/init.ts", "../../pixi.js/src/scene/mesh/shared/Mesh.ts", "../../pixi.js/src/scene/sprite-animated/AnimatedSprite.ts", "../../pixi.js/src/utils/misc/Transform.ts", "../../pixi.js/src/scene/sprite-tiling/canvas/CanvasTilingSpritePipe.ts", "../../pixi.js/src/scene/sprite-tiling/shader/tilingBit.ts", "../../pixi.js/src/scene/sprite-tiling/shader/TilingSpriteShader.ts", "../../pixi.js/src/scene/sprite-tiling/utils/QuadGeometry.ts", "../../pixi.js/src/scene/sprite-tiling/utils/setPositions.ts", "../../pixi.js/src/scene/sprite-tiling/utils/applyMatrix.ts", "../../pixi.js/src/scene/sprite-tiling/utils/setUvs.ts", "../../pixi.js/src/scene/sprite-tiling/TilingSpritePipe.ts", "../../pixi.js/src/scene/sprite-tiling/init.ts", "../../pixi.js/src/scene/sprite-tiling/TilingSprite.ts", "../../pixi.js/src/scene/text/AbstractText.ts", "../../pixi.js/src/utils/canvas/getCanvasBoundingBox.ts", "../../pixi.js/src/scene/text/canvas/CanvasTextGenerator.ts", "../../pixi.js/src/scene/text/utils/updateTextBounds.ts", "../../pixi.js/src/scene/text/canvas/BatchableText.ts", "../../pixi.js/src/scene/text/canvas/CanvasTextPipe.ts", "../../pixi.js/src/scene/text/utils/getPo2TextureFromSource.ts", "../../pixi.js/src/scene/text/shared/AbstractTextSystem.ts", "../../pixi.js/src/scene/text/canvas/CanvasTextSystem.ts", "../../pixi.js/src/scene/text/shared/GpuTextSystem.ts", "../../pixi.js/src/scene/text/init.ts", "../../pixi.js/src/scene/text/Text.ts", "../../pixi.js/src/prepare/PrepareQueue.ts", "../../pixi.js/src/scene/text-bitmap/AbstractBitmapTextPipe.ts", "../../pixi.js/src/scene/text-bitmap/CanvasBitmapTextPipe.ts", "../../pixi.js/src/scene/text/sdfShader/shader-bits/localUniformMSDFBit.ts", "../../pixi.js/src/scene/text/sdfShader/shader-bits/mSDFBit.ts", "../../pixi.js/src/scene/text/sdfShader/SdfShader.ts", "../../pixi.js/src/scene/text-bitmap/GpuBitmapTextPipe.ts", "../../pixi.js/src/scene/text-bitmap/init.ts", "../../pixi.js/src/scene/text-bitmap/BitmapText.ts", "../../pixi.js/src/scene/text-html/utils/textStyleToCSS.ts", "../../pixi.js/src/scene/text-html/HTMLTextStyle.ts", "../../pixi.js/src/scene/text-html/HTMLTextRenderData.ts", "../../pixi.js/src/scene/text-html/utils/measureHtmlText.ts", "../../pixi.js/src/scene/text-html/BatchableHTMLText.ts", "../../pixi.js/src/scene/text-html/HTMLTextPipe.ts", "../../pixi.js/src/scene/text-html/utils/extractFontFamilies.ts", "../../pixi.js/src/scene/text-html/utils/loadFontAsBase64.ts", "../../pixi.js/src/scene/text-html/utils/loadFontCSS.ts", "../../pixi.js/src/scene/text-html/utils/getFontCss.ts", "../../pixi.js/src/scene/text-html/utils/getSVGUrl.ts", "../../pixi.js/src/scene/text-html/utils/getTemporaryCanvasFromImage.ts", "../../pixi.js/src/scene/text-html/utils/loadSVGImage.ts", "../../pixi.js/src/scene/text-html/HTMLTextSystem.ts", "../../pixi.js/src/scene/text-html/init.ts", "../../pixi.js/src/scene/text-html/HTMLText.ts", "../../pixi.js/src/prepare/PrepareUpload.ts", "../../pixi.js/src/prepare/PrepareSystem.ts", "../../pixi.js/src/rendering/batcher/gpu/generateGPULayout.ts", "../../pixi.js/src/rendering/batcher/gpu/generateLayout.ts", "../../pixi.js/src/rendering/high-shader/compiler/utils/formatShader.ts", "../../pixi.js/src/rendering/mask/scissor/ScissorMask.ts", "../../pixi.js/src/rendering/renderers/canvas/CanvasFilterSystem.ts", "../../pixi.js/src/rendering/renderers/gl/shader/migrateFragmentFromV7toV8.ts", "../../pixi.js/src/rendering/renderers/gl/shader/program/mapSize.ts", "../../pixi.js/src/rendering/renderers/shared/geometry/const.ts", "../../pixi.js/src/rendering/renderers/shared/texture/const.ts", "../../pixi.js/src/rendering/renderers/shared/texture/sources/CubeTextureSource.ts", "../../pixi.js/src/rendering/renderers/shared/texture/CubeTexture.ts", "../../pixi.js/src/rendering/renderers/shared/texture/sources/ExternalSource.ts", "../../pixi.js/src/rendering/renderers/shared/texture/TextureUvs.ts", "../../pixi.js/src/rendering/renderers/shared/utils/parseFunctionBody.ts", "../../pixi.js/src/scene/container/bounds/getFastGlobalBounds.ts", "../../pixi.js/src/scene/container/RenderContainer.ts", "../../pixi.js/src/scene/container/utils/collectAllRenderables.ts", "../../pixi.js/src/scene/container/utils/updateLocalTransform.ts", "../../pixi.js/src/scene/container/utils/updateWorldTransform.ts", "../../pixi.js/src/scene/graphics/shared/utils/buildGeometryFromPath.ts", "../../pixi.js/src/scene/layers/RenderLayer.ts", "../../pixi.js/src/scene/mesh-plane/PlaneGeometry.ts", "../../pixi.js/src/scene/mesh-perspective/utils/applyProjectiveTransformationToPlane.ts", "../../pixi.js/src/scene/mesh-perspective/utils/compute2DProjections.ts", "../../pixi.js/src/scene/mesh-perspective/PerspectivePlaneGeometry.ts", "../../pixi.js/src/scene/mesh-perspective/PerspectiveMesh.ts", "../../pixi.js/src/scene/mesh-plane/MeshPlane.ts", "../../pixi.js/src/scene/mesh-simple/RopeGeometry.ts", "../../pixi.js/src/scene/mesh-simple/MeshRope.ts", "../../pixi.js/src/scene/mesh-simple/MeshSimple.ts", "../../pixi.js/src/scene/mesh/shared/getTextureDefaultMatrix.ts", "../../pixi.js/src/scene/particle-container/canvas/CanvasParticleContainerAdaptor.ts", "../../pixi.js/src/scene/particle-container/shared/utils/createIndicesForQuads.ts", "../../pixi.js/src/scene/particle-container/shared/utils/generateParticleUpdateFunction.ts", "../../pixi.js/src/scene/particle-container/shared/ParticleBuffer.ts", "../../pixi.js/lib/scene/particle-container/shared/shader/particles.frag.mjs", "../../pixi.js/lib/scene/particle-container/shared/shader/particles.vert.mjs", "../../pixi.js/lib/scene/particle-container/shared/shader/particles.wgsl.mjs", "../../pixi.js/src/scene/particle-container/shared/shader/ParticleShader.ts", "../../pixi.js/src/scene/particle-container/shared/ParticleContainerPipe.ts", "../../pixi.js/src/scene/particle-container/canvas/CanvasParticleContainerPipe.ts", "../../pixi.js/src/scene/particle-container/gl/GlParticleContainerAdaptor.ts", "../../pixi.js/src/scene/particle-container/gl/GlParticleContainerPipe.ts", "../../pixi.js/src/scene/particle-container/gpu/GpuParticleContainerAdaptor.ts", "../../pixi.js/src/scene/particle-container/gpu/GpuParticleContainerPipe.ts", "../../pixi.js/src/scene/particle-container/shared/Particle.ts", "../../pixi.js/src/scene/particle-container/shared/particleData.ts", "../../pixi.js/src/scene/particle-container/init.ts", "../../pixi.js/src/scene/particle-container/shared/ParticleContainer.ts", "../../pixi.js/src/scene/sprite-nine-slice/canvas/CanvasNineSliceSpritePipe.ts", "../../pixi.js/src/scene/sprite-nine-slice/NineSliceGeometry.ts", "../../pixi.js/src/scene/sprite-nine-slice/NineSliceSpritePipe.ts", "../../pixi.js/src/scene/sprite-nine-slice/init.ts", "../../pixi.js/src/scene/sprite-nine-slice/NineSliceSprite.ts", "../../pixi.js/src/scene/text-bitmap/utils/bitmapTextSplit.ts", "../../pixi.js/src/scene/text-split/AbstractSplitText.ts", "../../pixi.js/src/scene/text-split/SplitBitmapText.ts", "../../pixi.js/src/scene/text/utils/canvasTextSplit.ts", "../../pixi.js/src/scene/text-split/SplitText.ts", "../../pixi.js/src/scene/text/utils/generateTextStyleKey.ts", "../../pixi.js/src/utils/logging/logDebugTexture.ts", "../../pixi.js/src/utils/logging/logScene.ts", "../../pixi.js/src/index.ts"],
  "sourcesContent": ["'use strict'\n\n/**\n * Ponyfill for `Array.prototype.find` which is only available in ES6 runtimes.\n *\n * Works with anything that has a `length` property and index access properties, including NodeList.\n *\n * @template {unknown} T\n * @param {Array<T> | ({length:number, [number]: T})} list\n * @param {function (item: T, index: number, list:Array<T> | ({length:number, [number]: T})):boolean} predicate\n * @param {Partial<Pick<ArrayConstructor['prototype'], 'find'>>?} ac `Array.prototype` by default,\n * \t\t\t\tallows injecting a custom implementation in tests\n * @returns {T | undefined}\n *\n * @see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/find\n * @see https://tc39.es/ecma262/multipage/indexed-collections.html#sec-array.prototype.find\n */\nfunction find(list, predicate, ac) {\n\tif (ac === undefined) {\n\t\tac = Array.prototype;\n\t}\n\tif (list && typeof ac.find === 'function') {\n\t\treturn ac.find.call(list, predicate);\n\t}\n\tfor (var i = 0; i < list.length; i++) {\n\t\tif (Object.prototype.hasOwnProperty.call(list, i)) {\n\t\t\tvar item = list[i];\n\t\t\tif (predicate.call(undefined, item, i, list)) {\n\t\t\t\treturn item;\n\t\t\t}\n\t\t}\n\t}\n}\n\n/**\n * \"Shallow freezes\" an object to render it immutable.\n * Uses `Object.freeze` if available,\n * otherwise the immutability is only in the type.\n *\n * Is used to create \"enum like\" objects.\n *\n * @template T\n * @param {T} object the object to freeze\n * @param {Pick<ObjectConstructor, 'freeze'> = Object} oc `Object` by default,\n * \t\t\t\tallows to inject custom object constructor for tests\n * @returns {Readonly<T>}\n *\n * @see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/freeze\n */\nfunction freeze(object, oc) {\n\tif (oc === undefined) {\n\t\toc = Object\n\t}\n\treturn oc && typeof oc.freeze === 'function' ? oc.freeze(object) : object\n}\n\n/**\n * Since we can not rely on `Object.assign` we provide a simplified version\n * that is sufficient for our needs.\n *\n * @param {Object} target\n * @param {Object | null | undefined} source\n *\n * @returns {Object} target\n * @throws TypeError if target is not an object\n *\n * @see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/assign\n * @see https://tc39.es/ecma262/multipage/fundamental-objects.html#sec-object.assign\n */\nfunction assign(target, source) {\n\tif (target === null || typeof target !== 'object') {\n\t\tthrow new TypeError('target is not an object')\n\t}\n\tfor (var key in source) {\n\t\tif (Object.prototype.hasOwnProperty.call(source, key)) {\n\t\t\ttarget[key] = source[key]\n\t\t}\n\t}\n\treturn target\n}\n\n/**\n * All mime types that are allowed as input to `DOMParser.parseFromString`\n *\n * @see https://developer.mozilla.org/en-US/docs/Web/API/DOMParser/parseFromString#Argument02 MDN\n * @see https://html.spec.whatwg.org/multipage/dynamic-markup-insertion.html#domparsersupportedtype WHATWG HTML Spec\n * @see DOMParser.prototype.parseFromString\n */\nvar MIME_TYPE = freeze({\n\t/**\n\t * `text/html`, the only mime type that triggers treating an XML document as HTML.\n\t *\n\t * @see DOMParser.SupportedType.isHTML\n\t * @see https://www.iana.org/assignments/media-types/text/html IANA MimeType registration\n\t * @see https://en.wikipedia.org/wiki/HTML Wikipedia\n\t * @see https://developer.mozilla.org/en-US/docs/Web/API/DOMParser/parseFromString MDN\n\t * @see https://html.spec.whatwg.org/multipage/dynamic-markup-insertion.html#dom-domparser-parsefromstring WHATWG HTML Spec\n\t */\n\tHTML: 'text/html',\n\n\t/**\n\t * Helper method to check a mime type if it indicates an HTML document\n\t *\n\t * @param {string} [value]\n\t * @returns {boolean}\n\t *\n\t * @see https://www.iana.org/assignments/media-types/text/html IANA MimeType registration\n\t * @see https://en.wikipedia.org/wiki/HTML Wikipedia\n\t * @see https://developer.mozilla.org/en-US/docs/Web/API/DOMParser/parseFromString MDN\n\t * @see https://html.spec.whatwg.org/multipage/dynamic-markup-insertion.html#dom-domparser-parsefromstring \t */\n\tisHTML: function (value) {\n\t\treturn value === MIME_TYPE.HTML\n\t},\n\n\t/**\n\t * `application/xml`, the standard mime type for XML documents.\n\t *\n\t * @see https://www.iana.org/assignments/media-types/application/xml IANA MimeType registration\n\t * @see https://tools.ietf.org/html/rfc7303#section-9.1 RFC 7303\n\t * @see https://en.wikipedia.org/wiki/XML_and_MIME Wikipedia\n\t */\n\tXML_APPLICATION: 'application/xml',\n\n\t/**\n\t * `text/html`, an alias for `application/xml`.\n\t *\n\t * @see https://tools.ietf.org/html/rfc7303#section-9.2 RFC 7303\n\t * @see https://www.iana.org/assignments/media-types/text/xml IANA MimeType registration\n\t * @see https://en.wikipedia.org/wiki/XML_and_MIME Wikipedia\n\t */\n\tXML_TEXT: 'text/xml',\n\n\t/**\n\t * `application/xhtml+xml`, indicates an XML document that has the default HTML namespace,\n\t * but is parsed as an XML document.\n\t *\n\t * @see https://www.iana.org/assignments/media-types/application/xhtml+xml IANA MimeType registration\n\t * @see https://dom.spec.whatwg.org/#dom-domimplementation-createdocument WHATWG DOM Spec\n\t * @see https://en.wikipedia.org/wiki/XHTML Wikipedia\n\t */\n\tXML_XHTML_APPLICATION: 'application/xhtml+xml',\n\n\t/**\n\t * `image/svg+xml`,\n\t *\n\t * @see https://www.iana.org/assignments/media-types/image/svg+xml IANA MimeType registration\n\t * @see https://www.w3.org/TR/SVG11/ W3C SVG 1.1\n\t * @see https://en.wikipedia.org/wiki/Scalable_Vector_Graphics Wikipedia\n\t */\n\tXML_SVG_IMAGE: 'image/svg+xml',\n})\n\n/**\n * Namespaces that are used in this code base.\n *\n * @see http://www.w3.org/TR/REC-xml-names\n */\nvar NAMESPACE = freeze({\n\t/**\n\t * The XHTML namespace.\n\t *\n\t * @see http://www.w3.org/1999/xhtml\n\t */\n\tHTML: 'http://www.w3.org/1999/xhtml',\n\n\t/**\n\t * Checks if `uri` equals `NAMESPACE.HTML`.\n\t *\n\t * @param {string} [uri]\n\t *\n\t * @see NAMESPACE.HTML\n\t */\n\tisHTML: function (uri) {\n\t\treturn uri === NAMESPACE.HTML\n\t},\n\n\t/**\n\t * The SVG namespace.\n\t *\n\t * @see http://www.w3.org/2000/svg\n\t */\n\tSVG: 'http://www.w3.org/2000/svg',\n\n\t/**\n\t * The `xml:` namespace.\n\t *\n\t * @see http://www.w3.org/XML/1998/namespace\n\t */\n\tXML: 'http://www.w3.org/XML/1998/namespace',\n\n\t/**\n\t * The `xmlns:` namespace\n\t *\n\t * @see https://www.w3.org/2000/xmlns/\n\t */\n\tXMLNS: 'http://www.w3.org/2000/xmlns/',\n})\n\nexports.assign = assign;\nexports.find = find;\nexports.freeze = freeze;\nexports.MIME_TYPE = MIME_TYPE;\nexports.NAMESPACE = NAMESPACE;\n", "var conventions = require(\"./conventions\");\n\nvar find = conventions.find;\nvar NAMESPACE = conventions.NAMESPACE;\n\n/**\n * A prerequisite for `[].filter`, to drop elements that are empty\n * @param {string} input\n * @returns {boolean}\n */\nfunction notEmptyString (input) {\n\treturn input !== ''\n}\n/**\n * @see https://infra.spec.whatwg.org/#split-on-ascii-whitespace\n * @see https://infra.spec.whatwg.org/#ascii-whitespace\n *\n * @param {string} input\n * @returns {string[]} (can be empty)\n */\nfunction splitOnASCIIWhitespace(input) {\n\t// U+0009 TAB, U+000A LF, U+000C FF, U+000D CR, U+0020 SPACE\n\treturn input ? input.split(/[\\t\\n\\f\\r ]+/).filter(notEmptyString) : []\n}\n\n/**\n * Adds element as a key to current if it is not already present.\n *\n * @param {Record<string, boolean | undefined>} current\n * @param {string} element\n * @returns {Record<string, boolean | undefined>}\n */\nfunction orderedSetReducer (current, element) {\n\tif (!current.hasOwnProperty(element)) {\n\t\tcurrent[element] = true;\n\t}\n\treturn current;\n}\n\n/**\n * @see https://infra.spec.whatwg.org/#ordered-set\n * @param {string} input\n * @returns {string[]}\n */\nfunction toOrderedSet(input) {\n\tif (!input) return [];\n\tvar list = splitOnASCIIWhitespace(input);\n\treturn Object.keys(list.reduce(orderedSetReducer, {}))\n}\n\n/**\n * Uses `list.indexOf` to implement something like `Array.prototype.includes`,\n * which we can not rely on being available.\n *\n * @param {any[]} list\n * @returns {function(any): boolean}\n */\nfunction arrayIncludes (list) {\n\treturn function(element) {\n\t\treturn list && list.indexOf(element) !== -1;\n\t}\n}\n\nfunction copy(src,dest){\n\tfor(var p in src){\n\t\tif (Object.prototype.hasOwnProperty.call(src, p)) {\n\t\t\tdest[p] = src[p];\n\t\t}\n\t}\n}\n\n/**\n^\\w+\\.prototype\\.([_\\w]+)\\s*=\\s*((?:.*\\{\\s*?[\\r\\n][\\s\\S]*?^})|\\S.*?(?=[;\\r\\n]));?\n^\\w+\\.prototype\\.([_\\w]+)\\s*=\\s*(\\S.*?(?=[;\\r\\n]));?\n */\nfunction _extends(Class,Super){\n\tvar pt = Class.prototype;\n\tif(!(pt instanceof Super)){\n\t\tfunction t(){};\n\t\tt.prototype = Super.prototype;\n\t\tt = new t();\n\t\tcopy(pt,t);\n\t\tClass.prototype = pt = t;\n\t}\n\tif(pt.constructor != Class){\n\t\tif(typeof Class != 'function'){\n\t\t\tconsole.error(\"unknown Class:\"+Class)\n\t\t}\n\t\tpt.constructor = Class\n\t}\n}\n\n// Node Types\nvar NodeType = {}\nvar ELEMENT_NODE                = NodeType.ELEMENT_NODE                = 1;\nvar ATTRIBUTE_NODE              = NodeType.ATTRIBUTE_NODE              = 2;\nvar TEXT_NODE                   = NodeType.TEXT_NODE                   = 3;\nvar CDATA_SECTION_NODE          = NodeType.CDATA_SECTION_NODE          = 4;\nvar ENTITY_REFERENCE_NODE       = NodeType.ENTITY_REFERENCE_NODE       = 5;\nvar ENTITY_NODE                 = NodeType.ENTITY_NODE                 = 6;\nvar PROCESSING_INSTRUCTION_NODE = NodeType.PROCESSING_INSTRUCTION_NODE = 7;\nvar COMMENT_NODE                = NodeType.COMMENT_NODE                = 8;\nvar DOCUMENT_NODE               = NodeType.DOCUMENT_NODE               = 9;\nvar DOCUMENT_TYPE_NODE          = NodeType.DOCUMENT_TYPE_NODE          = 10;\nvar DOCUMENT_FRAGMENT_NODE      = NodeType.DOCUMENT_FRAGMENT_NODE      = 11;\nvar NOTATION_NODE               = NodeType.NOTATION_NODE               = 12;\n\n// ExceptionCode\nvar ExceptionCode = {}\nvar ExceptionMessage = {};\nvar INDEX_SIZE_ERR              = ExceptionCode.INDEX_SIZE_ERR              = ((ExceptionMessage[1]=\"Index size error\"),1);\nvar DOMSTRING_SIZE_ERR          = ExceptionCode.DOMSTRING_SIZE_ERR          = ((ExceptionMessage[2]=\"DOMString size error\"),2);\nvar HIERARCHY_REQUEST_ERR       = ExceptionCode.HIERARCHY_REQUEST_ERR       = ((ExceptionMessage[3]=\"Hierarchy request error\"),3);\nvar WRONG_DOCUMENT_ERR          = ExceptionCode.WRONG_DOCUMENT_ERR          = ((ExceptionMessage[4]=\"Wrong document\"),4);\nvar INVALID_CHARACTER_ERR       = ExceptionCode.INVALID_CHARACTER_ERR       = ((ExceptionMessage[5]=\"Invalid character\"),5);\nvar NO_DATA_ALLOWED_ERR         = ExceptionCode.NO_DATA_ALLOWED_ERR         = ((ExceptionMessage[6]=\"No data allowed\"),6);\nvar NO_MODIFICATION_ALLOWED_ERR = ExceptionCode.NO_MODIFICATION_ALLOWED_ERR = ((ExceptionMessage[7]=\"No modification allowed\"),7);\nvar NOT_FOUND_ERR               = ExceptionCode.NOT_FOUND_ERR               = ((ExceptionMessage[8]=\"Not found\"),8);\nvar NOT_SUPPORTED_ERR           = ExceptionCode.NOT_SUPPORTED_ERR           = ((ExceptionMessage[9]=\"Not supported\"),9);\nvar INUSE_ATTRIBUTE_ERR         = ExceptionCode.INUSE_ATTRIBUTE_ERR         = ((ExceptionMessage[10]=\"Attribute in use\"),10);\n//level2\nvar INVALID_STATE_ERR        \t= ExceptionCode.INVALID_STATE_ERR        \t= ((ExceptionMessage[11]=\"Invalid state\"),11);\nvar SYNTAX_ERR               \t= ExceptionCode.SYNTAX_ERR               \t= ((ExceptionMessage[12]=\"Syntax error\"),12);\nvar INVALID_MODIFICATION_ERR \t= ExceptionCode.INVALID_MODIFICATION_ERR \t= ((ExceptionMessage[13]=\"Invalid modification\"),13);\nvar NAMESPACE_ERR            \t= ExceptionCode.NAMESPACE_ERR           \t= ((ExceptionMessage[14]=\"Invalid namespace\"),14);\nvar INVALID_ACCESS_ERR       \t= ExceptionCode.INVALID_ACCESS_ERR      \t= ((ExceptionMessage[15]=\"Invalid access\"),15);\n\n/**\n * DOM Level 2\n * Object DOMException\n * @see http://www.w3.org/TR/2000/REC-DOM-Level-2-Core-20001113/ecma-script-binding.html\n * @see http://www.w3.org/TR/REC-DOM-Level-1/ecma-script-language-binding.html\n */\nfunction DOMException(code, message) {\n\tif(message instanceof Error){\n\t\tvar error = message;\n\t}else{\n\t\terror = this;\n\t\tError.call(this, ExceptionMessage[code]);\n\t\tthis.message = ExceptionMessage[code];\n\t\tif(Error.captureStackTrace) Error.captureStackTrace(this, DOMException);\n\t}\n\terror.code = code;\n\tif(message) this.message = this.message + \": \" + message;\n\treturn error;\n};\nDOMException.prototype = Error.prototype;\ncopy(ExceptionCode,DOMException)\n\n/**\n * @see http://www.w3.org/TR/2000/REC-DOM-Level-2-Core-20001113/core.html#ID-536297177\n * The NodeList interface provides the abstraction of an ordered collection of nodes, without defining or constraining how this collection is implemented. NodeList objects in the DOM are live.\n * The items in the NodeList are accessible via an integral index, starting from 0.\n */\nfunction NodeList() {\n};\nNodeList.prototype = {\n\t/**\n\t * The number of nodes in the list. The range of valid child node indices is 0 to length-1 inclusive.\n\t * @standard level1\n\t */\n\tlength:0,\n\t/**\n\t * Returns the indexth item in the collection. If index is greater than or equal to the number of nodes in the list, this returns null.\n\t * @standard level1\n\t * @param index  unsigned long\n\t *   Index into the collection.\n\t * @return Node\n\t * \tThe node at the indexth position in the NodeList, or null if that is not a valid index.\n\t */\n\titem: function(index) {\n\t\treturn index >= 0 && index < this.length ? this[index] : null;\n\t},\n\ttoString:function(isHTML,nodeFilter){\n\t\tfor(var buf = [], i = 0;i<this.length;i++){\n\t\t\tserializeToString(this[i],buf,isHTML,nodeFilter);\n\t\t}\n\t\treturn buf.join('');\n\t},\n\t/**\n\t * @private\n\t * @param {function (Node):boolean} predicate\n\t * @returns {Node[]}\n\t */\n\tfilter: function (predicate) {\n\t\treturn Array.prototype.filter.call(this, predicate);\n\t},\n\t/**\n\t * @private\n\t * @param {Node} item\n\t * @returns {number}\n\t */\n\tindexOf: function (item) {\n\t\treturn Array.prototype.indexOf.call(this, item);\n\t},\n};\n\nfunction LiveNodeList(node,refresh){\n\tthis._node = node;\n\tthis._refresh = refresh\n\t_updateLiveList(this);\n}\nfunction _updateLiveList(list){\n\tvar inc = list._node._inc || list._node.ownerDocument._inc;\n\tif (list._inc !== inc) {\n\t\tvar ls = list._refresh(list._node);\n\t\t__set__(list,'length',ls.length);\n\t\tif (!list.$$length || ls.length < list.$$length) {\n\t\t\tfor (var i = ls.length; i in list; i++) {\n\t\t\t\tif (Object.prototype.hasOwnProperty.call(list, i)) {\n\t\t\t\t\tdelete list[i];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tcopy(ls,list);\n\t\tlist._inc = inc;\n\t}\n}\nLiveNodeList.prototype.item = function(i){\n\t_updateLiveList(this);\n\treturn this[i] || null;\n}\n\n_extends(LiveNodeList,NodeList);\n\n/**\n * Objects implementing the NamedNodeMap interface are used\n * to represent collections of nodes that can be accessed by name.\n * Note that NamedNodeMap does not inherit from NodeList;\n * NamedNodeMaps are not maintained in any particular order.\n * Objects contained in an object implementing NamedNodeMap may also be accessed by an ordinal index,\n * but this is simply to allow convenient enumeration of the contents of a NamedNodeMap,\n * and does not imply that the DOM specifies an order to these Nodes.\n * NamedNodeMap objects in the DOM are live.\n * used for attributes or DocumentType entities\n */\nfunction NamedNodeMap() {\n};\n\nfunction _findNodeIndex(list,node){\n\tvar i = list.length;\n\twhile(i--){\n\t\tif(list[i] === node){return i}\n\t}\n}\n\nfunction _addNamedNode(el,list,newAttr,oldAttr){\n\tif(oldAttr){\n\t\tlist[_findNodeIndex(list,oldAttr)] = newAttr;\n\t}else{\n\t\tlist[list.length++] = newAttr;\n\t}\n\tif(el){\n\t\tnewAttr.ownerElement = el;\n\t\tvar doc = el.ownerDocument;\n\t\tif(doc){\n\t\t\toldAttr && _onRemoveAttribute(doc,el,oldAttr);\n\t\t\t_onAddAttribute(doc,el,newAttr);\n\t\t}\n\t}\n}\nfunction _removeNamedNode(el,list,attr){\n\t//console.log('remove attr:'+attr)\n\tvar i = _findNodeIndex(list,attr);\n\tif(i>=0){\n\t\tvar lastIndex = list.length-1\n\t\twhile(i<lastIndex){\n\t\t\tlist[i] = list[++i]\n\t\t}\n\t\tlist.length = lastIndex;\n\t\tif(el){\n\t\t\tvar doc = el.ownerDocument;\n\t\t\tif(doc){\n\t\t\t\t_onRemoveAttribute(doc,el,attr);\n\t\t\t\tattr.ownerElement = null;\n\t\t\t}\n\t\t}\n\t}else{\n\t\tthrow new DOMException(NOT_FOUND_ERR,new Error(el.tagName+'@'+attr))\n\t}\n}\nNamedNodeMap.prototype = {\n\tlength:0,\n\titem:NodeList.prototype.item,\n\tgetNamedItem: function(key) {\n//\t\tif(key.indexOf(':')>0 || key == 'xmlns'){\n//\t\t\treturn null;\n//\t\t}\n\t\t//console.log()\n\t\tvar i = this.length;\n\t\twhile(i--){\n\t\t\tvar attr = this[i];\n\t\t\t//console.log(attr.nodeName,key)\n\t\t\tif(attr.nodeName == key){\n\t\t\t\treturn attr;\n\t\t\t}\n\t\t}\n\t},\n\tsetNamedItem: function(attr) {\n\t\tvar el = attr.ownerElement;\n\t\tif(el && el!=this._ownerElement){\n\t\t\tthrow new DOMException(INUSE_ATTRIBUTE_ERR);\n\t\t}\n\t\tvar oldAttr = this.getNamedItem(attr.nodeName);\n\t\t_addNamedNode(this._ownerElement,this,attr,oldAttr);\n\t\treturn oldAttr;\n\t},\n\t/* returns Node */\n\tsetNamedItemNS: function(attr) {// raises: WRONG_DOCUMENT_ERR,NO_MODIFICATION_ALLOWED_ERR,INUSE_ATTRIBUTE_ERR\n\t\tvar el = attr.ownerElement, oldAttr;\n\t\tif(el && el!=this._ownerElement){\n\t\t\tthrow new DOMException(INUSE_ATTRIBUTE_ERR);\n\t\t}\n\t\toldAttr = this.getNamedItemNS(attr.namespaceURI,attr.localName);\n\t\t_addNamedNode(this._ownerElement,this,attr,oldAttr);\n\t\treturn oldAttr;\n\t},\n\n\t/* returns Node */\n\tremoveNamedItem: function(key) {\n\t\tvar attr = this.getNamedItem(key);\n\t\t_removeNamedNode(this._ownerElement,this,attr);\n\t\treturn attr;\n\n\n\t},// raises: NOT_FOUND_ERR,NO_MODIFICATION_ALLOWED_ERR\n\n\t//for level2\n\tremoveNamedItemNS:function(namespaceURI,localName){\n\t\tvar attr = this.getNamedItemNS(namespaceURI,localName);\n\t\t_removeNamedNode(this._ownerElement,this,attr);\n\t\treturn attr;\n\t},\n\tgetNamedItemNS: function(namespaceURI, localName) {\n\t\tvar i = this.length;\n\t\twhile(i--){\n\t\t\tvar node = this[i];\n\t\t\tif(node.localName == localName && node.namespaceURI == namespaceURI){\n\t\t\t\treturn node;\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t}\n};\n\n/**\n * The DOMImplementation interface represents an object providing methods\n * which are not dependent on any particular document.\n * Such an object is returned by the `Document.implementation` property.\n *\n * __The individual methods describe the differences compared to the specs.__\n *\n * @constructor\n *\n * @see https://developer.mozilla.org/en-US/docs/Web/API/DOMImplementation MDN\n * @see https://www.w3.org/TR/REC-DOM-Level-1/level-one-core.html#ID-102161490 DOM Level 1 Core (Initial)\n * @see https://www.w3.org/TR/DOM-Level-2-Core/core.html#ID-102161490 DOM Level 2 Core\n * @see https://www.w3.org/TR/DOM-Level-3-Core/core.html#ID-102161490 DOM Level 3 Core\n * @see https://dom.spec.whatwg.org/#domimplementation DOM Living Standard\n */\nfunction DOMImplementation() {\n}\n\nDOMImplementation.prototype = {\n\t/**\n\t * The DOMImplementation.hasFeature() method returns a Boolean flag indicating if a given feature is supported.\n\t * The different implementations fairly diverged in what kind of features were reported.\n\t * The latest version of the spec settled to force this method to always return true, where the functionality was accurate and in use.\n\t *\n\t * @deprecated It is deprecated and modern browsers return true in all cases.\n\t *\n\t * @param {string} feature\n\t * @param {string} [version]\n\t * @returns {boolean} always true\n\t *\n\t * @see https://developer.mozilla.org/en-US/docs/Web/API/DOMImplementation/hasFeature MDN\n\t * @see https://www.w3.org/TR/REC-DOM-Level-1/level-one-core.html#ID-5CED94D7 DOM Level 1 Core\n\t * @see https://dom.spec.whatwg.org/#dom-domimplementation-hasfeature DOM Living Standard\n\t */\n\thasFeature: function(feature, version) {\n\t\t\treturn true;\n\t},\n\t/**\n\t * Creates an XML Document object of the specified type with its document element.\n\t *\n\t * __It behaves slightly different from the description in the living standard__:\n\t * - There is no interface/class `XMLDocument`, it returns a `Document` instance.\n\t * - `contentType`, `encoding`, `mode`, `origin`, `url` fields are currently not declared.\n\t * - this implementation is not validating names or qualified names\n\t *   (when parsing XML strings, the SAX parser takes care of that)\n\t *\n\t * @param {string|null} namespaceURI\n\t * @param {string} qualifiedName\n\t * @param {DocumentType=null} doctype\n\t * @returns {Document}\n\t *\n\t * @see https://developer.mozilla.org/en-US/docs/Web/API/DOMImplementation/createDocument MDN\n\t * @see https://www.w3.org/TR/DOM-Level-2-Core/core.html#Level-2-Core-DOM-createDocument DOM Level 2 Core (initial)\n\t * @see https://dom.spec.whatwg.org/#dom-domimplementation-createdocument  DOM Level 2 Core\n\t *\n\t * @see https://dom.spec.whatwg.org/#validate-and-extract DOM: Validate and extract\n\t * @see https://www.w3.org/TR/xml/#NT-NameStartChar XML Spec: Names\n\t * @see https://www.w3.org/TR/xml-names/#ns-qualnames XML Namespaces: Qualified names\n\t */\n\tcreateDocument: function(namespaceURI,  qualifiedName, doctype){\n\t\tvar doc = new Document();\n\t\tdoc.implementation = this;\n\t\tdoc.childNodes = new NodeList();\n\t\tdoc.doctype = doctype || null;\n\t\tif (doctype){\n\t\t\tdoc.appendChild(doctype);\n\t\t}\n\t\tif (qualifiedName){\n\t\t\tvar root = doc.createElementNS(namespaceURI, qualifiedName);\n\t\t\tdoc.appendChild(root);\n\t\t}\n\t\treturn doc;\n\t},\n\t/**\n\t * Returns a doctype, with the given `qualifiedName`, `publicId`, and `systemId`.\n\t *\n\t * __This behavior is slightly different from the in the specs__:\n\t * - this implementation is not validating names or qualified names\n\t *   (when parsing XML strings, the SAX parser takes care of that)\n\t *\n\t * @param {string} qualifiedName\n\t * @param {string} [publicId]\n\t * @param {string} [systemId]\n\t * @returns {DocumentType} which can either be used with `DOMImplementation.createDocument` upon document creation\n\t * \t\t\t\t  or can be put into the document via methods like `Node.insertBefore()` or `Node.replaceChild()`\n\t *\n\t * @see https://developer.mozilla.org/en-US/docs/Web/API/DOMImplementation/createDocumentType MDN\n\t * @see https://www.w3.org/TR/DOM-Level-2-Core/core.html#Level-2-Core-DOM-createDocType DOM Level 2 Core\n\t * @see https://dom.spec.whatwg.org/#dom-domimplementation-createdocumenttype DOM Living Standard\n\t *\n\t * @see https://dom.spec.whatwg.org/#validate-and-extract DOM: Validate and extract\n\t * @see https://www.w3.org/TR/xml/#NT-NameStartChar XML Spec: Names\n\t * @see https://www.w3.org/TR/xml-names/#ns-qualnames XML Namespaces: Qualified names\n\t */\n\tcreateDocumentType: function(qualifiedName, publicId, systemId){\n\t\tvar node = new DocumentType();\n\t\tnode.name = qualifiedName;\n\t\tnode.nodeName = qualifiedName;\n\t\tnode.publicId = publicId || '';\n\t\tnode.systemId = systemId || '';\n\n\t\treturn node;\n\t}\n};\n\n\n/**\n * @see http://www.w3.org/TR/2000/REC-DOM-Level-2-Core-20001113/core.html#ID-1950641247\n */\n\nfunction Node() {\n};\n\nNode.prototype = {\n\tfirstChild : null,\n\tlastChild : null,\n\tpreviousSibling : null,\n\tnextSibling : null,\n\tattributes : null,\n\tparentNode : null,\n\tchildNodes : null,\n\townerDocument : null,\n\tnodeValue : null,\n\tnamespaceURI : null,\n\tprefix : null,\n\tlocalName : null,\n\t// Modified in DOM Level 2:\n\tinsertBefore:function(newChild, refChild){//raises\n\t\treturn _insertBefore(this,newChild,refChild);\n\t},\n\treplaceChild:function(newChild, oldChild){//raises\n\t\t_insertBefore(this, newChild,oldChild, assertPreReplacementValidityInDocument);\n\t\tif(oldChild){\n\t\t\tthis.removeChild(oldChild);\n\t\t}\n\t},\n\tremoveChild:function(oldChild){\n\t\treturn _removeChild(this,oldChild);\n\t},\n\tappendChild:function(newChild){\n\t\treturn this.insertBefore(newChild,null);\n\t},\n\thasChildNodes:function(){\n\t\treturn this.firstChild != null;\n\t},\n\tcloneNode:function(deep){\n\t\treturn cloneNode(this.ownerDocument||this,this,deep);\n\t},\n\t// Modified in DOM Level 2:\n\tnormalize:function(){\n\t\tvar child = this.firstChild;\n\t\twhile(child){\n\t\t\tvar next = child.nextSibling;\n\t\t\tif(next && next.nodeType == TEXT_NODE && child.nodeType == TEXT_NODE){\n\t\t\t\tthis.removeChild(next);\n\t\t\t\tchild.appendData(next.data);\n\t\t\t}else{\n\t\t\t\tchild.normalize();\n\t\t\t\tchild = next;\n\t\t\t}\n\t\t}\n\t},\n  \t// Introduced in DOM Level 2:\n\tisSupported:function(feature, version){\n\t\treturn this.ownerDocument.implementation.hasFeature(feature,version);\n\t},\n    // Introduced in DOM Level 2:\n    hasAttributes:function(){\n    \treturn this.attributes.length>0;\n    },\n\t/**\n\t * Look up the prefix associated to the given namespace URI, starting from this node.\n\t * **The default namespace declarations are ignored by this method.**\n\t * See Namespace Prefix Lookup for details on the algorithm used by this method.\n\t *\n\t * _Note: The implementation seems to be incomplete when compared to the algorithm described in the specs._\n\t *\n\t * @param {string | null} namespaceURI\n\t * @returns {string | null}\n\t * @see https://www.w3.org/TR/DOM-Level-3-Core/core.html#Node3-lookupNamespacePrefix\n\t * @see https://www.w3.org/TR/DOM-Level-3-Core/namespaces-algorithms.html#lookupNamespacePrefixAlgo\n\t * @see https://dom.spec.whatwg.org/#dom-node-lookupprefix\n\t * @see https://github.com/xmldom/xmldom/issues/322\n\t */\n    lookupPrefix:function(namespaceURI){\n    \tvar el = this;\n    \twhile(el){\n    \t\tvar map = el._nsMap;\n    \t\t//console.dir(map)\n    \t\tif(map){\n    \t\t\tfor(var n in map){\n\t\t\t\t\t\tif (Object.prototype.hasOwnProperty.call(map, n) && map[n] === namespaceURI) {\n\t\t\t\t\t\t\treturn n;\n\t\t\t\t\t\t}\n    \t\t\t}\n    \t\t}\n    \t\tel = el.nodeType == ATTRIBUTE_NODE?el.ownerDocument : el.parentNode;\n    \t}\n    \treturn null;\n    },\n    // Introduced in DOM Level 3:\n    lookupNamespaceURI:function(prefix){\n    \tvar el = this;\n    \twhile(el){\n    \t\tvar map = el._nsMap;\n    \t\t//console.dir(map)\n    \t\tif(map){\n    \t\t\tif(Object.prototype.hasOwnProperty.call(map, prefix)){\n    \t\t\t\treturn map[prefix] ;\n    \t\t\t}\n    \t\t}\n    \t\tel = el.nodeType == ATTRIBUTE_NODE?el.ownerDocument : el.parentNode;\n    \t}\n    \treturn null;\n    },\n    // Introduced in DOM Level 3:\n    isDefaultNamespace:function(namespaceURI){\n    \tvar prefix = this.lookupPrefix(namespaceURI);\n    \treturn prefix == null;\n    }\n};\n\n\nfunction _xmlEncoder(c){\n\treturn c == '<' && '&lt;' ||\n         c == '>' && '&gt;' ||\n         c == '&' && '&amp;' ||\n         c == '\"' && '&quot;' ||\n         '&#'+c.charCodeAt()+';'\n}\n\n\ncopy(NodeType,Node);\ncopy(NodeType,Node.prototype);\n\n/**\n * @param callback return true for continue,false for break\n * @return boolean true: break visit;\n */\nfunction _visitNode(node,callback){\n\tif(callback(node)){\n\t\treturn true;\n\t}\n\tif(node = node.firstChild){\n\t\tdo{\n\t\t\tif(_visitNode(node,callback)){return true}\n        }while(node=node.nextSibling)\n    }\n}\n\n\n\nfunction Document(){\n\tthis.ownerDocument = this;\n}\n\nfunction _onAddAttribute(doc,el,newAttr){\n\tdoc && doc._inc++;\n\tvar ns = newAttr.namespaceURI ;\n\tif(ns === NAMESPACE.XMLNS){\n\t\t//update namespace\n\t\tel._nsMap[newAttr.prefix?newAttr.localName:''] = newAttr.value\n\t}\n}\n\nfunction _onRemoveAttribute(doc,el,newAttr,remove){\n\tdoc && doc._inc++;\n\tvar ns = newAttr.namespaceURI ;\n\tif(ns === NAMESPACE.XMLNS){\n\t\t//update namespace\n\t\tdelete el._nsMap[newAttr.prefix?newAttr.localName:'']\n\t}\n}\n\n/**\n * Updates `el.childNodes`, updating the indexed items and it's `length`.\n * Passing `newChild` means it will be appended.\n * Otherwise it's assumed that an item has been removed,\n * and `el.firstNode` and it's `.nextSibling` are used\n * to walk the current list of child nodes.\n *\n * @param {Document} doc\n * @param {Node} el\n * @param {Node} [newChild]\n * @private\n */\nfunction _onUpdateChild (doc, el, newChild) {\n\tif(doc && doc._inc){\n\t\tdoc._inc++;\n\t\t//update childNodes\n\t\tvar cs = el.childNodes;\n\t\tif (newChild) {\n\t\t\tcs[cs.length++] = newChild;\n\t\t} else {\n\t\t\tvar child = el.firstChild;\n\t\t\tvar i = 0;\n\t\t\twhile (child) {\n\t\t\t\tcs[i++] = child;\n\t\t\t\tchild = child.nextSibling;\n\t\t\t}\n\t\t\tcs.length = i;\n\t\t\tdelete cs[cs.length];\n\t\t}\n\t}\n}\n\n/**\n * Removes the connections between `parentNode` and `child`\n * and any existing `child.previousSibling` or `child.nextSibling`.\n *\n * @see https://github.com/xmldom/xmldom/issues/135\n * @see https://github.com/xmldom/xmldom/issues/145\n *\n * @param {Node} parentNode\n * @param {Node} child\n * @returns {Node} the child that was removed.\n * @private\n */\nfunction _removeChild (parentNode, child) {\n\tvar previous = child.previousSibling;\n\tvar next = child.nextSibling;\n\tif (previous) {\n\t\tprevious.nextSibling = next;\n\t} else {\n\t\tparentNode.firstChild = next;\n\t}\n\tif (next) {\n\t\tnext.previousSibling = previous;\n\t} else {\n\t\tparentNode.lastChild = previous;\n\t}\n\tchild.parentNode = null;\n\tchild.previousSibling = null;\n\tchild.nextSibling = null;\n\t_onUpdateChild(parentNode.ownerDocument, parentNode);\n\treturn child;\n}\n\n/**\n * Returns `true` if `node` can be a parent for insertion.\n * @param {Node} node\n * @returns {boolean}\n */\nfunction hasValidParentNodeType(node) {\n\treturn (\n\t\tnode &&\n\t\t(node.nodeType === Node.DOCUMENT_NODE || node.nodeType === Node.DOCUMENT_FRAGMENT_NODE || node.nodeType === Node.ELEMENT_NODE)\n\t);\n}\n\n/**\n * Returns `true` if `node` can be inserted according to it's `nodeType`.\n * @param {Node} node\n * @returns {boolean}\n */\nfunction hasInsertableNodeType(node) {\n\treturn (\n\t\tnode &&\n\t\t(isElementNode(node) ||\n\t\t\tisTextNode(node) ||\n\t\t\tisDocTypeNode(node) ||\n\t\t\tnode.nodeType === Node.DOCUMENT_FRAGMENT_NODE ||\n\t\t\tnode.nodeType === Node.COMMENT_NODE ||\n\t\t\tnode.nodeType === Node.PROCESSING_INSTRUCTION_NODE)\n\t);\n}\n\n/**\n * Returns true if `node` is a DOCTYPE node\n * @param {Node} node\n * @returns {boolean}\n */\nfunction isDocTypeNode(node) {\n\treturn node && node.nodeType === Node.DOCUMENT_TYPE_NODE;\n}\n\n/**\n * Returns true if the node is an element\n * @param {Node} node\n * @returns {boolean}\n */\nfunction isElementNode(node) {\n\treturn node && node.nodeType === Node.ELEMENT_NODE;\n}\n/**\n * Returns true if `node` is a text node\n * @param {Node} node\n * @returns {boolean}\n */\nfunction isTextNode(node) {\n\treturn node && node.nodeType === Node.TEXT_NODE;\n}\n\n/**\n * Check if en element node can be inserted before `child`, or at the end if child is falsy,\n * according to the presence and position of a doctype node on the same level.\n *\n * @param {Document} doc The document node\n * @param {Node} child the node that would become the nextSibling if the element would be inserted\n * @returns {boolean} `true` if an element can be inserted before child\n * @private\n * https://dom.spec.whatwg.org/#concept-node-ensure-pre-insertion-validity\n */\nfunction isElementInsertionPossible(doc, child) {\n\tvar parentChildNodes = doc.childNodes || [];\n\tif (find(parentChildNodes, isElementNode) || isDocTypeNode(child)) {\n\t\treturn false;\n\t}\n\tvar docTypeNode = find(parentChildNodes, isDocTypeNode);\n\treturn !(child && docTypeNode && parentChildNodes.indexOf(docTypeNode) > parentChildNodes.indexOf(child));\n}\n\n/**\n * Check if en element node can be inserted before `child`, or at the end if child is falsy,\n * according to the presence and position of a doctype node on the same level.\n *\n * @param {Node} doc The document node\n * @param {Node} child the node that would become the nextSibling if the element would be inserted\n * @returns {boolean} `true` if an element can be inserted before child\n * @private\n * https://dom.spec.whatwg.org/#concept-node-ensure-pre-insertion-validity\n */\nfunction isElementReplacementPossible(doc, child) {\n\tvar parentChildNodes = doc.childNodes || [];\n\n\tfunction hasElementChildThatIsNotChild(node) {\n\t\treturn isElementNode(node) && node !== child;\n\t}\n\n\tif (find(parentChildNodes, hasElementChildThatIsNotChild)) {\n\t\treturn false;\n\t}\n\tvar docTypeNode = find(parentChildNodes, isDocTypeNode);\n\treturn !(child && docTypeNode && parentChildNodes.indexOf(docTypeNode) > parentChildNodes.indexOf(child));\n}\n\n/**\n * @private\n * Steps 1-5 of the checks before inserting and before replacing a child are the same.\n *\n * @param {Node} parent the parent node to insert `node` into\n * @param {Node} node the node to insert\n * @param {Node=} child the node that should become the `nextSibling` of `node`\n * @returns {Node}\n * @throws DOMException for several node combinations that would create a DOM that is not well-formed.\n * @throws DOMException if `child` is provided but is not a child of `parent`.\n * @see https://dom.spec.whatwg.org/#concept-node-ensure-pre-insertion-validity\n * @see https://dom.spec.whatwg.org/#concept-node-replace\n */\nfunction assertPreInsertionValidity1to5(parent, node, child) {\n\t// 1. If `parent` is not a Document, DocumentFragment, or Element node, then throw a \"HierarchyRequestError\" DOMException.\n\tif (!hasValidParentNodeType(parent)) {\n\t\tthrow new DOMException(HIERARCHY_REQUEST_ERR, 'Unexpected parent node type ' + parent.nodeType);\n\t}\n\t// 2. If `node` is a host-including inclusive ancestor of `parent`, then throw a \"HierarchyRequestError\" DOMException.\n\t// not implemented!\n\t// 3. If `child` is non-null and its parent is not `parent`, then throw a \"NotFoundError\" DOMException.\n\tif (child && child.parentNode !== parent) {\n\t\tthrow new DOMException(NOT_FOUND_ERR, 'child not in parent');\n\t}\n\tif (\n\t\t// 4. If `node` is not a DocumentFragment, DocumentType, Element, or CharacterData node, then throw a \"HierarchyRequestError\" DOMException.\n\t\t!hasInsertableNodeType(node) ||\n\t\t// 5. If either `node` is a Text node and `parent` is a document,\n\t\t// the sax parser currently adds top level text nodes, this will be fixed in 0.9.0\n\t\t// || (node.nodeType === Node.TEXT_NODE && parent.nodeType === Node.DOCUMENT_NODE)\n\t\t// or `node` is a doctype and `parent` is not a document, then throw a \"HierarchyRequestError\" DOMException.\n\t\t(isDocTypeNode(node) && parent.nodeType !== Node.DOCUMENT_NODE)\n\t) {\n\t\tthrow new DOMException(\n\t\t\tHIERARCHY_REQUEST_ERR,\n\t\t\t'Unexpected node type ' + node.nodeType + ' for parent node type ' + parent.nodeType\n\t\t);\n\t}\n}\n\n/**\n * @private\n * Step 6 of the checks before inserting and before replacing a child are different.\n *\n * @param {Document} parent the parent node to insert `node` into\n * @param {Node} node the node to insert\n * @param {Node | undefined} child the node that should become the `nextSibling` of `node`\n * @returns {Node}\n * @throws DOMException for several node combinations that would create a DOM that is not well-formed.\n * @throws DOMException if `child` is provided but is not a child of `parent`.\n * @see https://dom.spec.whatwg.org/#concept-node-ensure-pre-insertion-validity\n * @see https://dom.spec.whatwg.org/#concept-node-replace\n */\nfunction assertPreInsertionValidityInDocument(parent, node, child) {\n\tvar parentChildNodes = parent.childNodes || [];\n\tvar nodeChildNodes = node.childNodes || [];\n\n\t// DocumentFragment\n\tif (node.nodeType === Node.DOCUMENT_FRAGMENT_NODE) {\n\t\tvar nodeChildElements = nodeChildNodes.filter(isElementNode);\n\t\t// If node has more than one element child or has a Text node child.\n\t\tif (nodeChildElements.length > 1 || find(nodeChildNodes, isTextNode)) {\n\t\t\tthrow new DOMException(HIERARCHY_REQUEST_ERR, 'More than one element or text in fragment');\n\t\t}\n\t\t// Otherwise, if `node` has one element child and either `parent` has an element child,\n\t\t// `child` is a doctype, or `child` is non-null and a doctype is following `child`.\n\t\tif (nodeChildElements.length === 1 && !isElementInsertionPossible(parent, child)) {\n\t\t\tthrow new DOMException(HIERARCHY_REQUEST_ERR, 'Element in fragment can not be inserted before doctype');\n\t\t}\n\t}\n\t// Element\n\tif (isElementNode(node)) {\n\t\t// `parent` has an element child, `child` is a doctype,\n\t\t// or `child` is non-null and a doctype is following `child`.\n\t\tif (!isElementInsertionPossible(parent, child)) {\n\t\t\tthrow new DOMException(HIERARCHY_REQUEST_ERR, 'Only one element can be added and only after doctype');\n\t\t}\n\t}\n\t// DocumentType\n\tif (isDocTypeNode(node)) {\n\t\t// `parent` has a doctype child,\n\t\tif (find(parentChildNodes, isDocTypeNode)) {\n\t\t\tthrow new DOMException(HIERARCHY_REQUEST_ERR, 'Only one doctype is allowed');\n\t\t}\n\t\tvar parentElementChild = find(parentChildNodes, isElementNode);\n\t\t// `child` is non-null and an element is preceding `child`,\n\t\tif (child && parentChildNodes.indexOf(parentElementChild) < parentChildNodes.indexOf(child)) {\n\t\t\tthrow new DOMException(HIERARCHY_REQUEST_ERR, 'Doctype can only be inserted before an element');\n\t\t}\n\t\t// or `child` is null and `parent` has an element child.\n\t\tif (!child && parentElementChild) {\n\t\t\tthrow new DOMException(HIERARCHY_REQUEST_ERR, 'Doctype can not be appended since element is present');\n\t\t}\n\t}\n}\n\n/**\n * @private\n * Step 6 of the checks before inserting and before replacing a child are different.\n *\n * @param {Document} parent the parent node to insert `node` into\n * @param {Node} node the node to insert\n * @param {Node | undefined} child the node that should become the `nextSibling` of `node`\n * @returns {Node}\n * @throws DOMException for several node combinations that would create a DOM that is not well-formed.\n * @throws DOMException if `child` is provided but is not a child of `parent`.\n * @see https://dom.spec.whatwg.org/#concept-node-ensure-pre-insertion-validity\n * @see https://dom.spec.whatwg.org/#concept-node-replace\n */\nfunction assertPreReplacementValidityInDocument(parent, node, child) {\n\tvar parentChildNodes = parent.childNodes || [];\n\tvar nodeChildNodes = node.childNodes || [];\n\n\t// DocumentFragment\n\tif (node.nodeType === Node.DOCUMENT_FRAGMENT_NODE) {\n\t\tvar nodeChildElements = nodeChildNodes.filter(isElementNode);\n\t\t// If `node` has more than one element child or has a Text node child.\n\t\tif (nodeChildElements.length > 1 || find(nodeChildNodes, isTextNode)) {\n\t\t\tthrow new DOMException(HIERARCHY_REQUEST_ERR, 'More than one element or text in fragment');\n\t\t}\n\t\t// Otherwise, if `node` has one element child and either `parent` has an element child that is not `child` or a doctype is following `child`.\n\t\tif (nodeChildElements.length === 1 && !isElementReplacementPossible(parent, child)) {\n\t\t\tthrow new DOMException(HIERARCHY_REQUEST_ERR, 'Element in fragment can not be inserted before doctype');\n\t\t}\n\t}\n\t// Element\n\tif (isElementNode(node)) {\n\t\t// `parent` has an element child that is not `child` or a doctype is following `child`.\n\t\tif (!isElementReplacementPossible(parent, child)) {\n\t\t\tthrow new DOMException(HIERARCHY_REQUEST_ERR, 'Only one element can be added and only after doctype');\n\t\t}\n\t}\n\t// DocumentType\n\tif (isDocTypeNode(node)) {\n\t\tfunction hasDoctypeChildThatIsNotChild(node) {\n\t\t\treturn isDocTypeNode(node) && node !== child;\n\t\t}\n\n\t\t// `parent` has a doctype child that is not `child`,\n\t\tif (find(parentChildNodes, hasDoctypeChildThatIsNotChild)) {\n\t\t\tthrow new DOMException(HIERARCHY_REQUEST_ERR, 'Only one doctype is allowed');\n\t\t}\n\t\tvar parentElementChild = find(parentChildNodes, isElementNode);\n\t\t// or an element is preceding `child`.\n\t\tif (child && parentChildNodes.indexOf(parentElementChild) < parentChildNodes.indexOf(child)) {\n\t\t\tthrow new DOMException(HIERARCHY_REQUEST_ERR, 'Doctype can only be inserted before an element');\n\t\t}\n\t}\n}\n\n/**\n * @private\n * @param {Node} parent the parent node to insert `node` into\n * @param {Node} node the node to insert\n * @param {Node=} child the node that should become the `nextSibling` of `node`\n * @returns {Node}\n * @throws DOMException for several node combinations that would create a DOM that is not well-formed.\n * @throws DOMException if `child` is provided but is not a child of `parent`.\n * @see https://dom.spec.whatwg.org/#concept-node-ensure-pre-insertion-validity\n */\nfunction _insertBefore(parent, node, child, _inDocumentAssertion) {\n\t// To ensure pre-insertion validity of a node into a parent before a child, run these steps:\n\tassertPreInsertionValidity1to5(parent, node, child);\n\n\t// If parent is a document, and any of the statements below, switched on the interface node implements,\n\t// are true, then throw a \"HierarchyRequestError\" DOMException.\n\tif (parent.nodeType === Node.DOCUMENT_NODE) {\n\t\t(_inDocumentAssertion || assertPreInsertionValidityInDocument)(parent, node, child);\n\t}\n\n\tvar cp = node.parentNode;\n\tif(cp){\n\t\tcp.removeChild(node);//remove and update\n\t}\n\tif(node.nodeType === DOCUMENT_FRAGMENT_NODE){\n\t\tvar newFirst = node.firstChild;\n\t\tif (newFirst == null) {\n\t\t\treturn node;\n\t\t}\n\t\tvar newLast = node.lastChild;\n\t}else{\n\t\tnewFirst = newLast = node;\n\t}\n\tvar pre = child ? child.previousSibling : parent.lastChild;\n\n\tnewFirst.previousSibling = pre;\n\tnewLast.nextSibling = child;\n\n\n\tif(pre){\n\t\tpre.nextSibling = newFirst;\n\t}else{\n\t\tparent.firstChild = newFirst;\n\t}\n\tif(child == null){\n\t\tparent.lastChild = newLast;\n\t}else{\n\t\tchild.previousSibling = newLast;\n\t}\n\tdo{\n\t\tnewFirst.parentNode = parent;\n\t\t// Update ownerDocument for each node being inserted\n\t\tvar targetDoc = parent.ownerDocument || parent;\n\t\t_updateOwnerDocument(newFirst, targetDoc);\n\t}while(newFirst !== newLast && (newFirst= newFirst.nextSibling))\n\t_onUpdateChild(parent.ownerDocument||parent, parent);\n\t//console.log(parent.lastChild.nextSibling == null)\n\tif (node.nodeType == DOCUMENT_FRAGMENT_NODE) {\n\t\tnode.firstChild = node.lastChild = null;\n\t}\n\treturn node;\n}\n\n/**\n * Recursively updates the ownerDocument property for a node and all its descendants\n * @param {Node} node\n * @param {Document} newOwnerDocument\n * @private\n */\nfunction _updateOwnerDocument(node, newOwnerDocument) {\n\tif (node.ownerDocument === newOwnerDocument) {\n\t\treturn;\n\t}\n\t\n\tnode.ownerDocument = newOwnerDocument;\n\t\n\t// Update attributes if this is an element\n\tif (node.nodeType === ELEMENT_NODE && node.attributes) {\n\t\tfor (var i = 0; i < node.attributes.length; i++) {\n\t\t\tvar attr = node.attributes.item(i);\n\t\t\tif (attr) {\n\t\t\t\tattr.ownerDocument = newOwnerDocument;\n\t\t\t}\n\t\t}\n\t}\n\t\n\t// Recursively update child nodes\n\tvar child = node.firstChild;\n\twhile (child) {\n\t\t_updateOwnerDocument(child, newOwnerDocument);\n\t\tchild = child.nextSibling;\n\t}\n}\n\n/**\n * Appends `newChild` to `parentNode`.\n * If `newChild` is already connected to a `parentNode` it is first removed from it.\n *\n * @see https://github.com/xmldom/xmldom/issues/135\n * @see https://github.com/xmldom/xmldom/issues/145\n * @param {Node} parentNode\n * @param {Node} newChild\n * @returns {Node}\n * @private\n */\nfunction _appendSingleChild (parentNode, newChild) {\n\tif (newChild.parentNode) {\n\t\tnewChild.parentNode.removeChild(newChild);\n\t}\n\tnewChild.parentNode = parentNode;\n\tnewChild.previousSibling = parentNode.lastChild;\n\tnewChild.nextSibling = null;\n\tif (newChild.previousSibling) {\n\t\tnewChild.previousSibling.nextSibling = newChild;\n\t} else {\n\t\tparentNode.firstChild = newChild;\n\t}\n\tparentNode.lastChild = newChild;\n\t_onUpdateChild(parentNode.ownerDocument, parentNode, newChild);\n\t\n\t// Update ownerDocument for the new child and all its descendants\n\tvar targetDoc = parentNode.ownerDocument || parentNode;\n\t_updateOwnerDocument(newChild, targetDoc);\n\t\n\treturn newChild;\n}\n\nDocument.prototype = {\n\t//implementation : null,\n\tnodeName :  '#document',\n\tnodeType :  DOCUMENT_NODE,\n\t/**\n\t * The DocumentType node of the document.\n\t *\n\t * @readonly\n\t * @type DocumentType\n\t */\n\tdoctype :  null,\n\tdocumentElement :  null,\n\t_inc : 1,\n\n\tinsertBefore :  function(newChild, refChild){//raises\n\t\tif(newChild.nodeType == DOCUMENT_FRAGMENT_NODE){\n\t\t\tvar child = newChild.firstChild;\n\t\t\twhile(child){\n\t\t\t\tvar next = child.nextSibling;\n\t\t\t\tthis.insertBefore(child,refChild);\n\t\t\t\tchild = next;\n\t\t\t}\n\t\t\treturn newChild;\n\t\t}\n\t\t_insertBefore(this, newChild, refChild);\n\t\t_updateOwnerDocument(newChild, this);\n\t\tif (this.documentElement === null && newChild.nodeType === ELEMENT_NODE) {\n\t\t\tthis.documentElement = newChild;\n\t\t}\n\n\t\treturn newChild;\n\t},\n\tremoveChild :  function(oldChild){\n\t\tif(this.documentElement == oldChild){\n\t\t\tthis.documentElement = null;\n\t\t}\n\t\treturn _removeChild(this,oldChild);\n\t},\n\treplaceChild: function (newChild, oldChild) {\n\t\t//raises\n\t\t_insertBefore(this, newChild, oldChild, assertPreReplacementValidityInDocument);\n\t\t_updateOwnerDocument(newChild, this);\n\t\tif (oldChild) {\n\t\t\tthis.removeChild(oldChild);\n\t\t}\n\t\tif (isElementNode(newChild)) {\n\t\t\tthis.documentElement = newChild;\n\t\t}\n\t},\n\t// Introduced in DOM Level 2:\n\timportNode : function(importedNode,deep){\n\t\treturn importNode(this,importedNode,deep);\n\t},\n\t// Introduced in DOM Level 2:\n\tgetElementById :\tfunction(id){\n\t\tvar rtv = null;\n\t\t_visitNode(this.documentElement,function(node){\n\t\t\tif(node.nodeType == ELEMENT_NODE){\n\t\t\t\tif(node.getAttribute('id') == id){\n\t\t\t\t\trtv = node;\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t})\n\t\treturn rtv;\n\t},\n\n\t/**\n\t * The `getElementsByClassName` method of `Document` interface returns an array-like object\n\t * of all child elements which have **all** of the given class name(s).\n\t *\n\t * Returns an empty list if `classeNames` is an empty string or only contains HTML white space characters.\n\t *\n\t *\n\t * Warning: This is a live LiveNodeList.\n\t * Changes in the DOM will reflect in the array as the changes occur.\n\t * If an element selected by this array no longer qualifies for the selector,\n\t * it will automatically be removed. Be aware of this for iteration purposes.\n\t *\n\t * @param {string} classNames is a string representing the class name(s) to match; multiple class names are separated by (ASCII-)whitespace\n\t *\n\t * @see https://developer.mozilla.org/en-US/docs/Web/API/Document/getElementsByClassName\n\t * @see https://dom.spec.whatwg.org/#concept-getelementsbyclassname\n\t */\n\tgetElementsByClassName: function(classNames) {\n\t\tvar classNamesSet = toOrderedSet(classNames)\n\t\treturn new LiveNodeList(this, function(base) {\n\t\t\tvar ls = [];\n\t\t\tif (classNamesSet.length > 0) {\n\t\t\t\t_visitNode(base.documentElement, function(node) {\n\t\t\t\t\tif(node !== base && node.nodeType === ELEMENT_NODE) {\n\t\t\t\t\t\tvar nodeClassNames = node.getAttribute('class')\n\t\t\t\t\t\t// can be null if the attribute does not exist\n\t\t\t\t\t\tif (nodeClassNames) {\n\t\t\t\t\t\t\t// before splitting and iterating just compare them for the most common case\n\t\t\t\t\t\t\tvar matches = classNames === nodeClassNames;\n\t\t\t\t\t\t\tif (!matches) {\n\t\t\t\t\t\t\t\tvar nodeClassNamesSet = toOrderedSet(nodeClassNames)\n\t\t\t\t\t\t\t\tmatches = classNamesSet.every(arrayIncludes(nodeClassNamesSet))\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(matches) {\n\t\t\t\t\t\t\t\tls.push(node);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn ls;\n\t\t});\n\t},\n\n\t//document factory method:\n\tcreateElement :\tfunction(tagName){\n\t\tvar node = new Element();\n\t\tnode.ownerDocument = this;\n\t\tnode.nodeName = tagName;\n\t\tnode.tagName = tagName;\n\t\tnode.localName = tagName;\n\t\tnode.childNodes = new NodeList();\n\t\tvar attrs\t= node.attributes = new NamedNodeMap();\n\t\tattrs._ownerElement = node;\n\t\treturn node;\n\t},\n\tcreateDocumentFragment :\tfunction(){\n\t\tvar node = new DocumentFragment();\n\t\tnode.ownerDocument = this;\n\t\tnode.childNodes = new NodeList();\n\t\treturn node;\n\t},\n\tcreateTextNode :\tfunction(data){\n\t\tvar node = new Text();\n\t\tnode.ownerDocument = this;\n\t\tnode.appendData(data)\n\t\treturn node;\n\t},\n\tcreateComment :\tfunction(data){\n\t\tvar node = new Comment();\n\t\tnode.ownerDocument = this;\n\t\tnode.appendData(data)\n\t\treturn node;\n\t},\n\tcreateCDATASection :\tfunction(data){\n\t\tvar node = new CDATASection();\n\t\tnode.ownerDocument = this;\n\t\tnode.appendData(data)\n\t\treturn node;\n\t},\n\tcreateProcessingInstruction :\tfunction(target,data){\n\t\tvar node = new ProcessingInstruction();\n\t\tnode.ownerDocument = this;\n\t\tnode.tagName = node.nodeName = node.target = target;\n\t\tnode.nodeValue = node.data = data;\n\t\treturn node;\n\t},\n\tcreateAttribute :\tfunction(name){\n\t\tvar node = new Attr();\n\t\tnode.ownerDocument\t= this;\n\t\tnode.name = name;\n\t\tnode.nodeName\t= name;\n\t\tnode.localName = name;\n\t\tnode.specified = true;\n\t\treturn node;\n\t},\n\tcreateEntityReference :\tfunction(name){\n\t\tvar node = new EntityReference();\n\t\tnode.ownerDocument\t= this;\n\t\tnode.nodeName\t= name;\n\t\treturn node;\n\t},\n\t// Introduced in DOM Level 2:\n\tcreateElementNS :\tfunction(namespaceURI,qualifiedName){\n\t\tvar node = new Element();\n\t\tvar pl = qualifiedName.split(':');\n\t\tvar attrs\t= node.attributes = new NamedNodeMap();\n\t\tnode.childNodes = new NodeList();\n\t\tnode.ownerDocument = this;\n\t\tnode.nodeName = qualifiedName;\n\t\tnode.tagName = qualifiedName;\n\t\tnode.namespaceURI = namespaceURI;\n\t\tif(pl.length == 2){\n\t\t\tnode.prefix = pl[0];\n\t\t\tnode.localName = pl[1];\n\t\t}else{\n\t\t\t//el.prefix = null;\n\t\t\tnode.localName = qualifiedName;\n\t\t}\n\t\tattrs._ownerElement = node;\n\t\treturn node;\n\t},\n\t// Introduced in DOM Level 2:\n\tcreateAttributeNS :\tfunction(namespaceURI,qualifiedName){\n\t\tvar node = new Attr();\n\t\tvar pl = qualifiedName.split(':');\n\t\tnode.ownerDocument = this;\n\t\tnode.nodeName = qualifiedName;\n\t\tnode.name = qualifiedName;\n\t\tnode.namespaceURI = namespaceURI;\n\t\tnode.specified = true;\n\t\tif(pl.length == 2){\n\t\t\tnode.prefix = pl[0];\n\t\t\tnode.localName = pl[1];\n\t\t}else{\n\t\t\t//el.prefix = null;\n\t\t\tnode.localName = qualifiedName;\n\t\t}\n\t\treturn node;\n\t}\n};\n_extends(Document,Node);\n\n\nfunction Element() {\n\tthis._nsMap = {};\n};\nElement.prototype = {\n\tnodeType : ELEMENT_NODE,\n\thasAttribute : function(name){\n\t\treturn this.getAttributeNode(name)!=null;\n\t},\n\tgetAttribute : function(name){\n\t\tvar attr = this.getAttributeNode(name);\n\t\treturn attr && attr.value || '';\n\t},\n\tgetAttributeNode : function(name){\n\t\treturn this.attributes.getNamedItem(name);\n\t},\n\tsetAttribute : function(name, value){\n\t\tvar attr = this.ownerDocument.createAttribute(name);\n\t\tattr.value = attr.nodeValue = \"\" + value;\n\t\tthis.setAttributeNode(attr)\n\t},\n\tremoveAttribute : function(name){\n\t\tvar attr = this.getAttributeNode(name)\n\t\tattr && this.removeAttributeNode(attr);\n\t},\n\n\t//four real opeartion method\n\tappendChild:function(newChild){\n\t\tif(newChild.nodeType === DOCUMENT_FRAGMENT_NODE){\n\t\t\treturn this.insertBefore(newChild,null);\n\t\t}else{\n\t\t\treturn _appendSingleChild(this,newChild);\n\t\t}\n\t},\n\tsetAttributeNode : function(newAttr){\n\t\treturn this.attributes.setNamedItem(newAttr);\n\t},\n\tsetAttributeNodeNS : function(newAttr){\n\t\treturn this.attributes.setNamedItemNS(newAttr);\n\t},\n\tremoveAttributeNode : function(oldAttr){\n\t\t//console.log(this == oldAttr.ownerElement)\n\t\treturn this.attributes.removeNamedItem(oldAttr.nodeName);\n\t},\n\t//get real attribute name,and remove it by removeAttributeNode\n\tremoveAttributeNS : function(namespaceURI, localName){\n\t\tvar old = this.getAttributeNodeNS(namespaceURI, localName);\n\t\told && this.removeAttributeNode(old);\n\t},\n\n\thasAttributeNS : function(namespaceURI, localName){\n\t\treturn this.getAttributeNodeNS(namespaceURI, localName)!=null;\n\t},\n\tgetAttributeNS : function(namespaceURI, localName){\n\t\tvar attr = this.getAttributeNodeNS(namespaceURI, localName);\n\t\treturn attr && attr.value || '';\n\t},\n\tsetAttributeNS : function(namespaceURI, qualifiedName, value){\n\t\tvar attr = this.ownerDocument.createAttributeNS(namespaceURI, qualifiedName);\n\t\tattr.value = attr.nodeValue = \"\" + value;\n\t\tthis.setAttributeNode(attr)\n\t},\n\tgetAttributeNodeNS : function(namespaceURI, localName){\n\t\treturn this.attributes.getNamedItemNS(namespaceURI, localName);\n\t},\n\n\tgetElementsByTagName : function(tagName){\n\t\treturn new LiveNodeList(this,function(base){\n\t\t\tvar ls = [];\n\t\t\t_visitNode(base,function(node){\n\t\t\t\tif(node !== base && node.nodeType == ELEMENT_NODE && (tagName === '*' || node.tagName == tagName)){\n\t\t\t\t\tls.push(node);\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn ls;\n\t\t});\n\t},\n\tgetElementsByTagNameNS : function(namespaceURI, localName){\n\t\treturn new LiveNodeList(this,function(base){\n\t\t\tvar ls = [];\n\t\t\t_visitNode(base,function(node){\n\t\t\t\tif(node !== base && node.nodeType === ELEMENT_NODE && (namespaceURI === '*' || node.namespaceURI === namespaceURI) && (localName === '*' || node.localName == localName)){\n\t\t\t\t\tls.push(node);\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn ls;\n\n\t\t});\n\t}\n};\nDocument.prototype.getElementsByTagName = Element.prototype.getElementsByTagName;\nDocument.prototype.getElementsByTagNameNS = Element.prototype.getElementsByTagNameNS;\n\n\n_extends(Element,Node);\nfunction Attr() {\n};\nAttr.prototype.nodeType = ATTRIBUTE_NODE;\n_extends(Attr,Node);\n\n\nfunction CharacterData() {\n};\nCharacterData.prototype = {\n\tdata : '',\n\tsubstringData : function(offset, count) {\n\t\treturn this.data.substring(offset, offset+count);\n\t},\n\tappendData: function(text) {\n\t\ttext = this.data+text;\n\t\tthis.nodeValue = this.data = text;\n\t\tthis.length = text.length;\n\t},\n\tinsertData: function(offset,text) {\n\t\tthis.replaceData(offset,0,text);\n\n\t},\n\tappendChild:function(newChild){\n\t\tthrow new Error(ExceptionMessage[HIERARCHY_REQUEST_ERR])\n\t},\n\tdeleteData: function(offset, count) {\n\t\tthis.replaceData(offset,count,\"\");\n\t},\n\treplaceData: function(offset, count, text) {\n\t\tvar start = this.data.substring(0,offset);\n\t\tvar end = this.data.substring(offset+count);\n\t\ttext = start + text + end;\n\t\tthis.nodeValue = this.data = text;\n\t\tthis.length = text.length;\n\t}\n}\n_extends(CharacterData,Node);\nfunction Text() {\n};\nText.prototype = {\n\tnodeName : \"#text\",\n\tnodeType : TEXT_NODE,\n\tsplitText : function(offset) {\n\t\tvar text = this.data;\n\t\tvar newText = text.substring(offset);\n\t\ttext = text.substring(0, offset);\n\t\tthis.data = this.nodeValue = text;\n\t\tthis.length = text.length;\n\t\tvar newNode = this.ownerDocument.createTextNode(newText);\n\t\tif(this.parentNode){\n\t\t\tthis.parentNode.insertBefore(newNode, this.nextSibling);\n\t\t}\n\t\treturn newNode;\n\t}\n}\n_extends(Text,CharacterData);\nfunction Comment() {\n};\nComment.prototype = {\n\tnodeName : \"#comment\",\n\tnodeType : COMMENT_NODE\n}\n_extends(Comment,CharacterData);\n\nfunction CDATASection() {\n};\nCDATASection.prototype = {\n\tnodeName : \"#cdata-section\",\n\tnodeType : CDATA_SECTION_NODE\n}\n_extends(CDATASection,CharacterData);\n\n\nfunction DocumentType() {\n};\nDocumentType.prototype.nodeType = DOCUMENT_TYPE_NODE;\n_extends(DocumentType,Node);\n\nfunction Notation() {\n};\nNotation.prototype.nodeType = NOTATION_NODE;\n_extends(Notation,Node);\n\nfunction Entity() {\n};\nEntity.prototype.nodeType = ENTITY_NODE;\n_extends(Entity,Node);\n\nfunction EntityReference() {\n};\nEntityReference.prototype.nodeType = ENTITY_REFERENCE_NODE;\n_extends(EntityReference,Node);\n\nfunction DocumentFragment() {\n};\nDocumentFragment.prototype.nodeName =\t\"#document-fragment\";\nDocumentFragment.prototype.nodeType =\tDOCUMENT_FRAGMENT_NODE;\n_extends(DocumentFragment,Node);\n\n\nfunction ProcessingInstruction() {\n}\nProcessingInstruction.prototype.nodeType = PROCESSING_INSTRUCTION_NODE;\n_extends(ProcessingInstruction,Node);\nfunction XMLSerializer(){}\nXMLSerializer.prototype.serializeToString = function(node,isHtml,nodeFilter){\n\treturn nodeSerializeToString.call(node,isHtml,nodeFilter);\n}\nNode.prototype.toString = nodeSerializeToString;\nfunction nodeSerializeToString(isHtml,nodeFilter){\n\tvar buf = [];\n\tvar refNode = this.nodeType == 9 && this.documentElement || this;\n\tvar prefix = refNode.prefix;\n\tvar uri = refNode.namespaceURI;\n\n\tif(uri && prefix == null){\n\t\t//console.log(prefix)\n\t\tvar prefix = refNode.lookupPrefix(uri);\n\t\tif(prefix == null){\n\t\t\t//isHTML = true;\n\t\t\tvar visibleNamespaces=[\n\t\t\t{namespace:uri,prefix:null}\n\t\t\t//{namespace:uri,prefix:''}\n\t\t\t]\n\t\t}\n\t}\n\tserializeToString(this,buf,isHtml,nodeFilter,visibleNamespaces);\n\t//console.log('###',this.nodeType,uri,prefix,buf.join(''))\n\treturn buf.join('');\n}\n\nfunction needNamespaceDefine(node, isHTML, visibleNamespaces) {\n\tvar prefix = node.prefix || '';\n\tvar uri = node.namespaceURI;\n\t// According to [Namespaces in XML 1.0](https://www.w3.org/TR/REC-xml-names/#ns-using) ,\n\t// and more specifically https://www.w3.org/TR/REC-xml-names/#nsc-NoPrefixUndecl :\n\t// > In a namespace declaration for a prefix [...], the attribute value MUST NOT be empty.\n\t// in a similar manner [Namespaces in XML 1.1](https://www.w3.org/TR/xml-names11/#ns-using)\n\t// and more specifically https://www.w3.org/TR/xml-names11/#nsc-NSDeclared :\n\t// > [...] Furthermore, the attribute value [...] must not be an empty string.\n\t// so serializing empty namespace value like xmlns:ds=\"\" would produce an invalid XML document.\n\tif (!uri) {\n\t\treturn false;\n\t}\n\tif (prefix === \"xml\" && uri === NAMESPACE.XML || uri === NAMESPACE.XMLNS) {\n\t\treturn false;\n\t}\n\n\tvar i = visibleNamespaces.length\n\twhile (i--) {\n\t\tvar ns = visibleNamespaces[i];\n\t\t// get namespace prefix\n\t\tif (ns.prefix === prefix) {\n\t\t\treturn ns.namespace !== uri;\n\t\t}\n\t}\n\treturn true;\n}\n/**\n * Well-formed constraint: No < in Attribute Values\n * > The replacement text of any entity referred to directly or indirectly\n * > in an attribute value must not contain a <.\n * @see https://www.w3.org/TR/xml11/#CleanAttrVals\n * @see https://www.w3.org/TR/xml11/#NT-AttValue\n *\n * Literal whitespace other than space that appear in attribute values\n * are serialized as their entity references, so they will be preserved.\n * (In contrast to whitespace literals in the input which are normalized to spaces)\n * @see https://www.w3.org/TR/xml11/#AVNormalize\n * @see https://w3c.github.io/DOM-Parsing/#serializing-an-element-s-attributes\n */\nfunction addSerializedAttribute(buf, qualifiedName, value) {\n\tbuf.push(' ', qualifiedName, '=\"', value.replace(/[<>&\"\\t\\n\\r]/g, _xmlEncoder), '\"')\n}\n\nfunction serializeToString(node,buf,isHTML,nodeFilter,visibleNamespaces){\n\tif (!visibleNamespaces) {\n\t\tvisibleNamespaces = [];\n\t}\n\n\tif(nodeFilter){\n\t\tnode = nodeFilter(node);\n\t\tif(node){\n\t\t\tif(typeof node == 'string'){\n\t\t\t\tbuf.push(node);\n\t\t\t\treturn;\n\t\t\t}\n\t\t}else{\n\t\t\treturn;\n\t\t}\n\t\t//buf.sort.apply(attrs, attributeSorter);\n\t}\n\n\tswitch(node.nodeType){\n\tcase ELEMENT_NODE:\n\t\tvar attrs = node.attributes;\n\t\tvar len = attrs.length;\n\t\tvar child = node.firstChild;\n\t\tvar nodeName = node.tagName;\n\n\t\tisHTML = NAMESPACE.isHTML(node.namespaceURI) || isHTML\n\n\t\tvar prefixedNodeName = nodeName\n\t\tif (!isHTML && !node.prefix && node.namespaceURI) {\n\t\t\tvar defaultNS\n\t\t\t// lookup current default ns from `xmlns` attribute\n\t\t\tfor (var ai = 0; ai < attrs.length; ai++) {\n\t\t\t\tif (attrs.item(ai).name === 'xmlns') {\n\t\t\t\t\tdefaultNS = attrs.item(ai).value\n\t\t\t\t\tbreak\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (!defaultNS) {\n\t\t\t\t// lookup current default ns in visibleNamespaces\n\t\t\t\tfor (var nsi = visibleNamespaces.length - 1; nsi >= 0; nsi--) {\n\t\t\t\t\tvar namespace = visibleNamespaces[nsi]\n\t\t\t\t\tif (namespace.prefix === '' && namespace.namespace === node.namespaceURI) {\n\t\t\t\t\t\tdefaultNS = namespace.namespace\n\t\t\t\t\t\tbreak\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (defaultNS !== node.namespaceURI) {\n\t\t\t\tfor (var nsi = visibleNamespaces.length - 1; nsi >= 0; nsi--) {\n\t\t\t\t\tvar namespace = visibleNamespaces[nsi]\n\t\t\t\t\tif (namespace.namespace === node.namespaceURI) {\n\t\t\t\t\t\tif (namespace.prefix) {\n\t\t\t\t\t\t\tprefixedNodeName = namespace.prefix + ':' + nodeName\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tbuf.push('<', prefixedNodeName);\n\n\t\tfor(var i=0;i<len;i++){\n\t\t\t// add namespaces for attributes\n\t\t\tvar attr = attrs.item(i);\n\t\t\tif (attr.prefix == 'xmlns') {\n\t\t\t\tvisibleNamespaces.push({ prefix: attr.localName, namespace: attr.value });\n\t\t\t}else if(attr.nodeName == 'xmlns'){\n\t\t\t\tvisibleNamespaces.push({ prefix: '', namespace: attr.value });\n\t\t\t}\n\t\t}\n\n\t\tfor(var i=0;i<len;i++){\n\t\t\tvar attr = attrs.item(i);\n\t\t\tif (needNamespaceDefine(attr,isHTML, visibleNamespaces)) {\n\t\t\t\tvar prefix = attr.prefix||'';\n\t\t\t\tvar uri = attr.namespaceURI;\n\t\t\t\taddSerializedAttribute(buf, prefix ? 'xmlns:' + prefix : \"xmlns\", uri);\n\t\t\t\tvisibleNamespaces.push({ prefix: prefix, namespace:uri });\n\t\t\t}\n\t\t\tserializeToString(attr,buf,isHTML,nodeFilter,visibleNamespaces);\n\t\t}\n\n\t\t// add namespace for current node\n\t\tif (nodeName === prefixedNodeName && needNamespaceDefine(node, isHTML, visibleNamespaces)) {\n\t\t\tvar prefix = node.prefix||'';\n\t\t\tvar uri = node.namespaceURI;\n\t\t\taddSerializedAttribute(buf, prefix ? 'xmlns:' + prefix : \"xmlns\", uri);\n\t\t\tvisibleNamespaces.push({ prefix: prefix, namespace:uri });\n\t\t}\n\n\t\tif(child || isHTML && !/^(?:meta|link|img|br|hr|input)$/i.test(nodeName)){\n\t\t\tbuf.push('>');\n\t\t\t//if is cdata child node\n\t\t\tif(isHTML && /^script$/i.test(nodeName)){\n\t\t\t\twhile(child){\n\t\t\t\t\tif(child.data){\n\t\t\t\t\t\tbuf.push(child.data);\n\t\t\t\t\t}else{\n\t\t\t\t\t\tserializeToString(child, buf, isHTML, nodeFilter, visibleNamespaces.slice());\n\t\t\t\t\t}\n\t\t\t\t\tchild = child.nextSibling;\n\t\t\t\t}\n\t\t\t}else\n\t\t\t{\n\t\t\t\twhile(child){\n\t\t\t\t\tserializeToString(child, buf, isHTML, nodeFilter, visibleNamespaces.slice());\n\t\t\t\t\tchild = child.nextSibling;\n\t\t\t\t}\n\t\t\t}\n\t\t\tbuf.push('</',prefixedNodeName,'>');\n\t\t}else{\n\t\t\tbuf.push('/>');\n\t\t}\n\t\t// remove added visible namespaces\n\t\t//visibleNamespaces.length = startVisibleNamespaces;\n\t\treturn;\n\tcase DOCUMENT_NODE:\n\tcase DOCUMENT_FRAGMENT_NODE:\n\t\tvar child = node.firstChild;\n\t\twhile(child){\n\t\t\tserializeToString(child, buf, isHTML, nodeFilter, visibleNamespaces.slice());\n\t\t\tchild = child.nextSibling;\n\t\t}\n\t\treturn;\n\tcase ATTRIBUTE_NODE:\n\t\treturn addSerializedAttribute(buf, node.name, node.value);\n\tcase TEXT_NODE:\n\t\t/**\n\t\t * The ampersand character (&) and the left angle bracket (<) must not appear in their literal form,\n\t\t * except when used as markup delimiters, or within a comment, a processing instruction, or a CDATA section.\n\t\t * If they are needed elsewhere, they must be escaped using either numeric character references or the strings\n\t\t * `&amp;` and `&lt;` respectively.\n\t\t * The right angle bracket (>) may be represented using the string \" &gt; \", and must, for compatibility,\n\t\t * be escaped using either `&gt;` or a character reference when it appears in the string `]]>` in content,\n\t\t * when that string is not marking the end of a CDATA section.\n\t\t *\n\t\t * In the content of elements, character data is any string of characters\n\t\t * which does not contain the start-delimiter of any markup\n\t\t * and does not include the CDATA-section-close delimiter, `]]>`.\n\t\t *\n\t\t * @see https://www.w3.org/TR/xml/#NT-CharData\n\t\t * @see https://w3c.github.io/DOM-Parsing/#xml-serializing-a-text-node\n\t\t */\n\t\treturn buf.push(node.data\n\t\t\t.replace(/[<&>]/g,_xmlEncoder)\n\t\t);\n\tcase CDATA_SECTION_NODE:\n\t\treturn buf.push( '<![CDATA[',node.data,']]>');\n\tcase COMMENT_NODE:\n\t\treturn buf.push( \"<!--\",node.data,\"-->\");\n\tcase DOCUMENT_TYPE_NODE:\n\t\tvar pubid = node.publicId;\n\t\tvar sysid = node.systemId;\n\t\tbuf.push('<!DOCTYPE ',node.name);\n\t\tif(pubid){\n\t\t\tbuf.push(' PUBLIC ', pubid);\n\t\t\tif (sysid && sysid!='.') {\n\t\t\t\tbuf.push(' ', sysid);\n\t\t\t}\n\t\t\tbuf.push('>');\n\t\t}else if(sysid && sysid!='.'){\n\t\t\tbuf.push(' SYSTEM ', sysid, '>');\n\t\t}else{\n\t\t\tvar sub = node.internalSubset;\n\t\t\tif(sub){\n\t\t\t\tbuf.push(\" [\",sub,\"]\");\n\t\t\t}\n\t\t\tbuf.push(\">\");\n\t\t}\n\t\treturn;\n\tcase PROCESSING_INSTRUCTION_NODE:\n\t\treturn buf.push( \"<?\",node.target,\" \",node.data,\"?>\");\n\tcase ENTITY_REFERENCE_NODE:\n\t\treturn buf.push( '&',node.nodeName,';');\n\t//case ENTITY_NODE:\n\t//case NOTATION_NODE:\n\tdefault:\n\t\tbuf.push('??',node.nodeName);\n\t}\n}\nfunction importNode(doc,node,deep){\n\tvar node2;\n\tswitch (node.nodeType) {\n\tcase ELEMENT_NODE:\n\t\tnode2 = node.cloneNode(false);\n\t\tnode2.ownerDocument = doc;\n\t\t//var attrs = node2.attributes;\n\t\t//var len = attrs.length;\n\t\t//for(var i=0;i<len;i++){\n\t\t\t//node2.setAttributeNodeNS(importNode(doc,attrs.item(i),deep));\n\t\t//}\n\tcase DOCUMENT_FRAGMENT_NODE:\n\t\tbreak;\n\tcase ATTRIBUTE_NODE:\n\t\tdeep = true;\n\t\tbreak;\n\t//case ENTITY_REFERENCE_NODE:\n\t//case PROCESSING_INSTRUCTION_NODE:\n\t////case TEXT_NODE:\n\t//case CDATA_SECTION_NODE:\n\t//case COMMENT_NODE:\n\t//\tdeep = false;\n\t//\tbreak;\n\t//case DOCUMENT_NODE:\n\t//case DOCUMENT_TYPE_NODE:\n\t//cannot be imported.\n\t//case ENTITY_NODE:\n\t//case NOTATION_NODE\n\t//can not hit in level3\n\t//default:throw e;\n\t}\n\tif(!node2){\n\t\tnode2 = node.cloneNode(false);//false\n\t}\n\tnode2.ownerDocument = doc;\n\tnode2.parentNode = null;\n\tif(deep){\n\t\tvar child = node.firstChild;\n\t\twhile(child){\n\t\t\tnode2.appendChild(importNode(doc,child,deep));\n\t\t\tchild = child.nextSibling;\n\t\t}\n\t}\n\treturn node2;\n}\n//\n//var _relationMap = {firstChild:1,lastChild:1,previousSibling:1,nextSibling:1,\n//\t\t\t\t\tattributes:1,childNodes:1,parentNode:1,documentElement:1,doctype,};\nfunction cloneNode(doc,node,deep){\n\tvar node2 = new node.constructor();\n\tfor (var n in node) {\n\t\tif (Object.prototype.hasOwnProperty.call(node, n)) {\n\t\t\tvar v = node[n];\n\t\t\tif (typeof v != \"object\") {\n\t\t\t\tif (v != node2[n]) {\n\t\t\t\t\tnode2[n] = v;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tif(node.childNodes){\n\t\tnode2.childNodes = new NodeList();\n\t}\n\tnode2.ownerDocument = doc;\n\tswitch (node2.nodeType) {\n\tcase ELEMENT_NODE:\n\t\tvar attrs\t= node.attributes;\n\t\tvar attrs2\t= node2.attributes = new NamedNodeMap();\n\t\tvar len = attrs.length\n\t\tattrs2._ownerElement = node2;\n\t\tfor(var i=0;i<len;i++){\n\t\t\tnode2.setAttributeNode(cloneNode(doc,attrs.item(i),true));\n\t\t}\n\t\tbreak;;\n\tcase ATTRIBUTE_NODE:\n\t\tdeep = true;\n\t}\n\tif(deep){\n\t\tvar child = node.firstChild;\n\t\twhile(child){\n\t\t\tnode2.appendChild(cloneNode(doc,child,deep));\n\t\t\tchild = child.nextSibling;\n\t\t}\n\t}\n\treturn node2;\n}\n\nfunction __set__(object,key,value){\n\tobject[key] = value\n}\n//do dynamic\ntry{\n\tif(Object.defineProperty){\n\t\tObject.defineProperty(LiveNodeList.prototype,'length',{\n\t\t\tget:function(){\n\t\t\t\t_updateLiveList(this);\n\t\t\t\treturn this.$$length;\n\t\t\t}\n\t\t});\n\n\t\tObject.defineProperty(Node.prototype,'textContent',{\n\t\t\tget:function(){\n\t\t\t\treturn getTextContent(this);\n\t\t\t},\n\n\t\t\tset:function(data){\n\t\t\t\tswitch(this.nodeType){\n\t\t\t\tcase ELEMENT_NODE:\n\t\t\t\tcase DOCUMENT_FRAGMENT_NODE:\n\t\t\t\t\twhile(this.firstChild){\n\t\t\t\t\t\tthis.removeChild(this.firstChild);\n\t\t\t\t\t}\n\t\t\t\t\tif(data || String(data)){\n\t\t\t\t\t\tthis.appendChild(this.ownerDocument.createTextNode(data));\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tthis.data = data;\n\t\t\t\t\tthis.value = data;\n\t\t\t\t\tthis.nodeValue = data;\n\t\t\t\t}\n\t\t\t}\n\t\t})\n\n\t\tfunction getTextContent(node){\n\t\t\tswitch(node.nodeType){\n\t\t\tcase ELEMENT_NODE:\n\t\t\tcase DOCUMENT_FRAGMENT_NODE:\n\t\t\t\tvar buf = [];\n\t\t\t\tnode = node.firstChild;\n\t\t\t\twhile(node){\n\t\t\t\t\tif(node.nodeType!==7 && node.nodeType !==8){\n\t\t\t\t\t\tbuf.push(getTextContent(node));\n\t\t\t\t\t}\n\t\t\t\t\tnode = node.nextSibling;\n\t\t\t\t}\n\t\t\t\treturn buf.join('');\n\t\t\tdefault:\n\t\t\t\treturn node.nodeValue;\n\t\t\t}\n\t\t}\n\n\t\t__set__ = function(object,key,value){\n\t\t\t//console.log(value)\n\t\t\tobject['$$'+key] = value\n\t\t}\n\t}\n}catch(e){//ie8\n}\n\n//if(typeof require == 'function'){\n\texports.DocumentType = DocumentType;\n\texports.DOMException = DOMException;\n\texports.DOMImplementation = DOMImplementation;\n\texports.Element = Element;\n\texports.Node = Node;\n\texports.NodeList = NodeList;\n\texports.XMLSerializer = XMLSerializer;\n//}\n", "'use strict';\n\nvar freeze = require('./conventions').freeze;\n\n/**\n * The entities that are predefined in every XML document.\n *\n * @see https://www.w3.org/TR/2006/REC-xml11-20060816/#sec-predefined-ent W3C XML 1.1\n * @see https://www.w3.org/TR/2008/REC-xml-20081126/#sec-predefined-ent W3C XML 1.0\n * @see https://en.wikipedia.org/wiki/List_of_XML_and_HTML_character_entity_references#Predefined_entities_in_XML Wikipedia\n */\nexports.XML_ENTITIES = freeze({\n\tamp: '&',\n\tapos: \"'\",\n\tgt: '>',\n\tlt: '<',\n\tquot: '\"',\n});\n\n/**\n * A map of all entities that are detected in an HTML document.\n * They contain all entries from `XML_ENTITIES`.\n *\n * @see XML_ENTITIES\n * @see DOMParser.parseFromString\n * @see DOMImplementation.prototype.createHTMLDocument\n * @see https://html.spec.whatwg.org/#named-character-references WHATWG HTML(5) Spec\n * @see https://html.spec.whatwg.org/entities.json JSON\n * @see https://www.w3.org/TR/xml-entity-names/ W3C XML Entity Names\n * @see https://www.w3.org/TR/html4/sgml/entities.html W3C HTML4/SGML\n * @see https://en.wikipedia.org/wiki/List_of_XML_and_HTML_character_entity_references#Character_entity_references_in_HTML Wikipedia (HTML)\n * @see https://en.wikipedia.org/wiki/List_of_XML_and_HTML_character_entity_references#Entities_representing_special_characters_in_XHTML Wikpedia (XHTML)\n */\nexports.HTML_ENTITIES = freeze({\n\tAacute: '\\u00C1',\n\taacute: '\\u00E1',\n\tAbreve: '\\u0102',\n\tabreve: '\\u0103',\n\tac: '\\u223E',\n\tacd: '\\u223F',\n\tacE: '\\u223E\\u0333',\n\tAcirc: '\\u00C2',\n\tacirc: '\\u00E2',\n\tacute: '\\u00B4',\n\tAcy: '\\u0410',\n\tacy: '\\u0430',\n\tAElig: '\\u00C6',\n\taelig: '\\u00E6',\n\taf: '\\u2061',\n\tAfr: '\\uD835\\uDD04',\n\tafr: '\\uD835\\uDD1E',\n\tAgrave: '\\u00C0',\n\tagrave: '\\u00E0',\n\talefsym: '\\u2135',\n\taleph: '\\u2135',\n\tAlpha: '\\u0391',\n\talpha: '\\u03B1',\n\tAmacr: '\\u0100',\n\tamacr: '\\u0101',\n\tamalg: '\\u2A3F',\n\tAMP: '\\u0026',\n\tamp: '\\u0026',\n\tAnd: '\\u2A53',\n\tand: '\\u2227',\n\tandand: '\\u2A55',\n\tandd: '\\u2A5C',\n\tandslope: '\\u2A58',\n\tandv: '\\u2A5A',\n\tang: '\\u2220',\n\tange: '\\u29A4',\n\tangle: '\\u2220',\n\tangmsd: '\\u2221',\n\tangmsdaa: '\\u29A8',\n\tangmsdab: '\\u29A9',\n\tangmsdac: '\\u29AA',\n\tangmsdad: '\\u29AB',\n\tangmsdae: '\\u29AC',\n\tangmsdaf: '\\u29AD',\n\tangmsdag: '\\u29AE',\n\tangmsdah: '\\u29AF',\n\tangrt: '\\u221F',\n\tangrtvb: '\\u22BE',\n\tangrtvbd: '\\u299D',\n\tangsph: '\\u2222',\n\tangst: '\\u00C5',\n\tangzarr: '\\u237C',\n\tAogon: '\\u0104',\n\taogon: '\\u0105',\n\tAopf: '\\uD835\\uDD38',\n\taopf: '\\uD835\\uDD52',\n\tap: '\\u2248',\n\tapacir: '\\u2A6F',\n\tapE: '\\u2A70',\n\tape: '\\u224A',\n\tapid: '\\u224B',\n\tapos: '\\u0027',\n\tApplyFunction: '\\u2061',\n\tapprox: '\\u2248',\n\tapproxeq: '\\u224A',\n\tAring: '\\u00C5',\n\taring: '\\u00E5',\n\tAscr: '\\uD835\\uDC9C',\n\tascr: '\\uD835\\uDCB6',\n\tAssign: '\\u2254',\n\tast: '\\u002A',\n\tasymp: '\\u2248',\n\tasympeq: '\\u224D',\n\tAtilde: '\\u00C3',\n\tatilde: '\\u00E3',\n\tAuml: '\\u00C4',\n\tauml: '\\u00E4',\n\tawconint: '\\u2233',\n\tawint: '\\u2A11',\n\tbackcong: '\\u224C',\n\tbackepsilon: '\\u03F6',\n\tbackprime: '\\u2035',\n\tbacksim: '\\u223D',\n\tbacksimeq: '\\u22CD',\n\tBackslash: '\\u2216',\n\tBarv: '\\u2AE7',\n\tbarvee: '\\u22BD',\n\tBarwed: '\\u2306',\n\tbarwed: '\\u2305',\n\tbarwedge: '\\u2305',\n\tbbrk: '\\u23B5',\n\tbbrktbrk: '\\u23B6',\n\tbcong: '\\u224C',\n\tBcy: '\\u0411',\n\tbcy: '\\u0431',\n\tbdquo: '\\u201E',\n\tbecaus: '\\u2235',\n\tBecause: '\\u2235',\n\tbecause: '\\u2235',\n\tbemptyv: '\\u29B0',\n\tbepsi: '\\u03F6',\n\tbernou: '\\u212C',\n\tBernoullis: '\\u212C',\n\tBeta: '\\u0392',\n\tbeta: '\\u03B2',\n\tbeth: '\\u2136',\n\tbetween: '\\u226C',\n\tBfr: '\\uD835\\uDD05',\n\tbfr: '\\uD835\\uDD1F',\n\tbigcap: '\\u22C2',\n\tbigcirc: '\\u25EF',\n\tbigcup: '\\u22C3',\n\tbigodot: '\\u2A00',\n\tbigoplus: '\\u2A01',\n\tbigotimes: '\\u2A02',\n\tbigsqcup: '\\u2A06',\n\tbigstar: '\\u2605',\n\tbigtriangledown: '\\u25BD',\n\tbigtriangleup: '\\u25B3',\n\tbiguplus: '\\u2A04',\n\tbigvee: '\\u22C1',\n\tbigwedge: '\\u22C0',\n\tbkarow: '\\u290D',\n\tblacklozenge: '\\u29EB',\n\tblacksquare: '\\u25AA',\n\tblacktriangle: '\\u25B4',\n\tblacktriangledown: '\\u25BE',\n\tblacktriangleleft: '\\u25C2',\n\tblacktriangleright: '\\u25B8',\n\tblank: '\\u2423',\n\tblk12: '\\u2592',\n\tblk14: '\\u2591',\n\tblk34: '\\u2593',\n\tblock: '\\u2588',\n\tbne: '\\u003D\\u20E5',\n\tbnequiv: '\\u2261\\u20E5',\n\tbNot: '\\u2AED',\n\tbnot: '\\u2310',\n\tBopf: '\\uD835\\uDD39',\n\tbopf: '\\uD835\\uDD53',\n\tbot: '\\u22A5',\n\tbottom: '\\u22A5',\n\tbowtie: '\\u22C8',\n\tboxbox: '\\u29C9',\n\tboxDL: '\\u2557',\n\tboxDl: '\\u2556',\n\tboxdL: '\\u2555',\n\tboxdl: '\\u2510',\n\tboxDR: '\\u2554',\n\tboxDr: '\\u2553',\n\tboxdR: '\\u2552',\n\tboxdr: '\\u250C',\n\tboxH: '\\u2550',\n\tboxh: '\\u2500',\n\tboxHD: '\\u2566',\n\tboxHd: '\\u2564',\n\tboxhD: '\\u2565',\n\tboxhd: '\\u252C',\n\tboxHU: '\\u2569',\n\tboxHu: '\\u2567',\n\tboxhU: '\\u2568',\n\tboxhu: '\\u2534',\n\tboxminus: '\\u229F',\n\tboxplus: '\\u229E',\n\tboxtimes: '\\u22A0',\n\tboxUL: '\\u255D',\n\tboxUl: '\\u255C',\n\tboxuL: '\\u255B',\n\tboxul: '\\u2518',\n\tboxUR: '\\u255A',\n\tboxUr: '\\u2559',\n\tboxuR: '\\u2558',\n\tboxur: '\\u2514',\n\tboxV: '\\u2551',\n\tboxv: '\\u2502',\n\tboxVH: '\\u256C',\n\tboxVh: '\\u256B',\n\tboxvH: '\\u256A',\n\tboxvh: '\\u253C',\n\tboxVL: '\\u2563',\n\tboxVl: '\\u2562',\n\tboxvL: '\\u2561',\n\tboxvl: '\\u2524',\n\tboxVR: '\\u2560',\n\tboxVr: '\\u255F',\n\tboxvR: '\\u255E',\n\tboxvr: '\\u251C',\n\tbprime: '\\u2035',\n\tBreve: '\\u02D8',\n\tbreve: '\\u02D8',\n\tbrvbar: '\\u00A6',\n\tBscr: '\\u212C',\n\tbscr: '\\uD835\\uDCB7',\n\tbsemi: '\\u204F',\n\tbsim: '\\u223D',\n\tbsime: '\\u22CD',\n\tbsol: '\\u005C',\n\tbsolb: '\\u29C5',\n\tbsolhsub: '\\u27C8',\n\tbull: '\\u2022',\n\tbullet: '\\u2022',\n\tbump: '\\u224E',\n\tbumpE: '\\u2AAE',\n\tbumpe: '\\u224F',\n\tBumpeq: '\\u224E',\n\tbumpeq: '\\u224F',\n\tCacute: '\\u0106',\n\tcacute: '\\u0107',\n\tCap: '\\u22D2',\n\tcap: '\\u2229',\n\tcapand: '\\u2A44',\n\tcapbrcup: '\\u2A49',\n\tcapcap: '\\u2A4B',\n\tcapcup: '\\u2A47',\n\tcapdot: '\\u2A40',\n\tCapitalDifferentialD: '\\u2145',\n\tcaps: '\\u2229\\uFE00',\n\tcaret: '\\u2041',\n\tcaron: '\\u02C7',\n\tCayleys: '\\u212D',\n\tccaps: '\\u2A4D',\n\tCcaron: '\\u010C',\n\tccaron: '\\u010D',\n\tCcedil: '\\u00C7',\n\tccedil: '\\u00E7',\n\tCcirc: '\\u0108',\n\tccirc: '\\u0109',\n\tCconint: '\\u2230',\n\tccups: '\\u2A4C',\n\tccupssm: '\\u2A50',\n\tCdot: '\\u010A',\n\tcdot: '\\u010B',\n\tcedil: '\\u00B8',\n\tCedilla: '\\u00B8',\n\tcemptyv: '\\u29B2',\n\tcent: '\\u00A2',\n\tCenterDot: '\\u00B7',\n\tcenterdot: '\\u00B7',\n\tCfr: '\\u212D',\n\tcfr: '\\uD835\\uDD20',\n\tCHcy: '\\u0427',\n\tchcy: '\\u0447',\n\tcheck: '\\u2713',\n\tcheckmark: '\\u2713',\n\tChi: '\\u03A7',\n\tchi: '\\u03C7',\n\tcir: '\\u25CB',\n\tcirc: '\\u02C6',\n\tcirceq: '\\u2257',\n\tcirclearrowleft: '\\u21BA',\n\tcirclearrowright: '\\u21BB',\n\tcircledast: '\\u229B',\n\tcircledcirc: '\\u229A',\n\tcircleddash: '\\u229D',\n\tCircleDot: '\\u2299',\n\tcircledR: '\\u00AE',\n\tcircledS: '\\u24C8',\n\tCircleMinus: '\\u2296',\n\tCirclePlus: '\\u2295',\n\tCircleTimes: '\\u2297',\n\tcirE: '\\u29C3',\n\tcire: '\\u2257',\n\tcirfnint: '\\u2A10',\n\tcirmid: '\\u2AEF',\n\tcirscir: '\\u29C2',\n\tClockwiseContourIntegral: '\\u2232',\n\tCloseCurlyDoubleQuote: '\\u201D',\n\tCloseCurlyQuote: '\\u2019',\n\tclubs: '\\u2663',\n\tclubsuit: '\\u2663',\n\tColon: '\\u2237',\n\tcolon: '\\u003A',\n\tColone: '\\u2A74',\n\tcolone: '\\u2254',\n\tcoloneq: '\\u2254',\n\tcomma: '\\u002C',\n\tcommat: '\\u0040',\n\tcomp: '\\u2201',\n\tcompfn: '\\u2218',\n\tcomplement: '\\u2201',\n\tcomplexes: '\\u2102',\n\tcong: '\\u2245',\n\tcongdot: '\\u2A6D',\n\tCongruent: '\\u2261',\n\tConint: '\\u222F',\n\tconint: '\\u222E',\n\tContourIntegral: '\\u222E',\n\tCopf: '\\u2102',\n\tcopf: '\\uD835\\uDD54',\n\tcoprod: '\\u2210',\n\tCoproduct: '\\u2210',\n\tCOPY: '\\u00A9',\n\tcopy: '\\u00A9',\n\tcopysr: '\\u2117',\n\tCounterClockwiseContourIntegral: '\\u2233',\n\tcrarr: '\\u21B5',\n\tCross: '\\u2A2F',\n\tcross: '\\u2717',\n\tCscr: '\\uD835\\uDC9E',\n\tcscr: '\\uD835\\uDCB8',\n\tcsub: '\\u2ACF',\n\tcsube: '\\u2AD1',\n\tcsup: '\\u2AD0',\n\tcsupe: '\\u2AD2',\n\tctdot: '\\u22EF',\n\tcudarrl: '\\u2938',\n\tcudarrr: '\\u2935',\n\tcuepr: '\\u22DE',\n\tcuesc: '\\u22DF',\n\tcularr: '\\u21B6',\n\tcularrp: '\\u293D',\n\tCup: '\\u22D3',\n\tcup: '\\u222A',\n\tcupbrcap: '\\u2A48',\n\tCupCap: '\\u224D',\n\tcupcap: '\\u2A46',\n\tcupcup: '\\u2A4A',\n\tcupdot: '\\u228D',\n\tcupor: '\\u2A45',\n\tcups: '\\u222A\\uFE00',\n\tcurarr: '\\u21B7',\n\tcurarrm: '\\u293C',\n\tcurlyeqprec: '\\u22DE',\n\tcurlyeqsucc: '\\u22DF',\n\tcurlyvee: '\\u22CE',\n\tcurlywedge: '\\u22CF',\n\tcurren: '\\u00A4',\n\tcurvearrowleft: '\\u21B6',\n\tcurvearrowright: '\\u21B7',\n\tcuvee: '\\u22CE',\n\tcuwed: '\\u22CF',\n\tcwconint: '\\u2232',\n\tcwint: '\\u2231',\n\tcylcty: '\\u232D',\n\tDagger: '\\u2021',\n\tdagger: '\\u2020',\n\tdaleth: '\\u2138',\n\tDarr: '\\u21A1',\n\tdArr: '\\u21D3',\n\tdarr: '\\u2193',\n\tdash: '\\u2010',\n\tDashv: '\\u2AE4',\n\tdashv: '\\u22A3',\n\tdbkarow: '\\u290F',\n\tdblac: '\\u02DD',\n\tDcaron: '\\u010E',\n\tdcaron: '\\u010F',\n\tDcy: '\\u0414',\n\tdcy: '\\u0434',\n\tDD: '\\u2145',\n\tdd: '\\u2146',\n\tddagger: '\\u2021',\n\tddarr: '\\u21CA',\n\tDDotrahd: '\\u2911',\n\tddotseq: '\\u2A77',\n\tdeg: '\\u00B0',\n\tDel: '\\u2207',\n\tDelta: '\\u0394',\n\tdelta: '\\u03B4',\n\tdemptyv: '\\u29B1',\n\tdfisht: '\\u297F',\n\tDfr: '\\uD835\\uDD07',\n\tdfr: '\\uD835\\uDD21',\n\tdHar: '\\u2965',\n\tdharl: '\\u21C3',\n\tdharr: '\\u21C2',\n\tDiacriticalAcute: '\\u00B4',\n\tDiacriticalDot: '\\u02D9',\n\tDiacriticalDoubleAcute: '\\u02DD',\n\tDiacriticalGrave: '\\u0060',\n\tDiacriticalTilde: '\\u02DC',\n\tdiam: '\\u22C4',\n\tDiamond: '\\u22C4',\n\tdiamond: '\\u22C4',\n\tdiamondsuit: '\\u2666',\n\tdiams: '\\u2666',\n\tdie: '\\u00A8',\n\tDifferentialD: '\\u2146',\n\tdigamma: '\\u03DD',\n\tdisin: '\\u22F2',\n\tdiv: '\\u00F7',\n\tdivide: '\\u00F7',\n\tdivideontimes: '\\u22C7',\n\tdivonx: '\\u22C7',\n\tDJcy: '\\u0402',\n\tdjcy: '\\u0452',\n\tdlcorn: '\\u231E',\n\tdlcrop: '\\u230D',\n\tdollar: '\\u0024',\n\tDopf: '\\uD835\\uDD3B',\n\tdopf: '\\uD835\\uDD55',\n\tDot: '\\u00A8',\n\tdot: '\\u02D9',\n\tDotDot: '\\u20DC',\n\tdoteq: '\\u2250',\n\tdoteqdot: '\\u2251',\n\tDotEqual: '\\u2250',\n\tdotminus: '\\u2238',\n\tdotplus: '\\u2214',\n\tdotsquare: '\\u22A1',\n\tdoublebarwedge: '\\u2306',\n\tDoubleContourIntegral: '\\u222F',\n\tDoubleDot: '\\u00A8',\n\tDoubleDownArrow: '\\u21D3',\n\tDoubleLeftArrow: '\\u21D0',\n\tDoubleLeftRightArrow: '\\u21D4',\n\tDoubleLeftTee: '\\u2AE4',\n\tDoubleLongLeftArrow: '\\u27F8',\n\tDoubleLongLeftRightArrow: '\\u27FA',\n\tDoubleLongRightArrow: '\\u27F9',\n\tDoubleRightArrow: '\\u21D2',\n\tDoubleRightTee: '\\u22A8',\n\tDoubleUpArrow: '\\u21D1',\n\tDoubleUpDownArrow: '\\u21D5',\n\tDoubleVerticalBar: '\\u2225',\n\tDownArrow: '\\u2193',\n\tDownarrow: '\\u21D3',\n\tdownarrow: '\\u2193',\n\tDownArrowBar: '\\u2913',\n\tDownArrowUpArrow: '\\u21F5',\n\tDownBreve: '\\u0311',\n\tdowndownarrows: '\\u21CA',\n\tdownharpoonleft: '\\u21C3',\n\tdownharpoonright: '\\u21C2',\n\tDownLeftRightVector: '\\u2950',\n\tDownLeftTeeVector: '\\u295E',\n\tDownLeftVector: '\\u21BD',\n\tDownLeftVectorBar: '\\u2956',\n\tDownRightTeeVector: '\\u295F',\n\tDownRightVector: '\\u21C1',\n\tDownRightVectorBar: '\\u2957',\n\tDownTee: '\\u22A4',\n\tDownTeeArrow: '\\u21A7',\n\tdrbkarow: '\\u2910',\n\tdrcorn: '\\u231F',\n\tdrcrop: '\\u230C',\n\tDscr: '\\uD835\\uDC9F',\n\tdscr: '\\uD835\\uDCB9',\n\tDScy: '\\u0405',\n\tdscy: '\\u0455',\n\tdsol: '\\u29F6',\n\tDstrok: '\\u0110',\n\tdstrok: '\\u0111',\n\tdtdot: '\\u22F1',\n\tdtri: '\\u25BF',\n\tdtrif: '\\u25BE',\n\tduarr: '\\u21F5',\n\tduhar: '\\u296F',\n\tdwangle: '\\u29A6',\n\tDZcy: '\\u040F',\n\tdzcy: '\\u045F',\n\tdzigrarr: '\\u27FF',\n\tEacute: '\\u00C9',\n\teacute: '\\u00E9',\n\teaster: '\\u2A6E',\n\tEcaron: '\\u011A',\n\tecaron: '\\u011B',\n\tecir: '\\u2256',\n\tEcirc: '\\u00CA',\n\tecirc: '\\u00EA',\n\tecolon: '\\u2255',\n\tEcy: '\\u042D',\n\tecy: '\\u044D',\n\teDDot: '\\u2A77',\n\tEdot: '\\u0116',\n\teDot: '\\u2251',\n\tedot: '\\u0117',\n\tee: '\\u2147',\n\tefDot: '\\u2252',\n\tEfr: '\\uD835\\uDD08',\n\tefr: '\\uD835\\uDD22',\n\teg: '\\u2A9A',\n\tEgrave: '\\u00C8',\n\tegrave: '\\u00E8',\n\tegs: '\\u2A96',\n\tegsdot: '\\u2A98',\n\tel: '\\u2A99',\n\tElement: '\\u2208',\n\telinters: '\\u23E7',\n\tell: '\\u2113',\n\tels: '\\u2A95',\n\telsdot: '\\u2A97',\n\tEmacr: '\\u0112',\n\temacr: '\\u0113',\n\tempty: '\\u2205',\n\temptyset: '\\u2205',\n\tEmptySmallSquare: '\\u25FB',\n\temptyv: '\\u2205',\n\tEmptyVerySmallSquare: '\\u25AB',\n\temsp: '\\u2003',\n\temsp13: '\\u2004',\n\temsp14: '\\u2005',\n\tENG: '\\u014A',\n\teng: '\\u014B',\n\tensp: '\\u2002',\n\tEogon: '\\u0118',\n\teogon: '\\u0119',\n\tEopf: '\\uD835\\uDD3C',\n\teopf: '\\uD835\\uDD56',\n\tepar: '\\u22D5',\n\teparsl: '\\u29E3',\n\teplus: '\\u2A71',\n\tepsi: '\\u03B5',\n\tEpsilon: '\\u0395',\n\tepsilon: '\\u03B5',\n\tepsiv: '\\u03F5',\n\teqcirc: '\\u2256',\n\teqcolon: '\\u2255',\n\teqsim: '\\u2242',\n\teqslantgtr: '\\u2A96',\n\teqslantless: '\\u2A95',\n\tEqual: '\\u2A75',\n\tequals: '\\u003D',\n\tEqualTilde: '\\u2242',\n\tequest: '\\u225F',\n\tEquilibrium: '\\u21CC',\n\tequiv: '\\u2261',\n\tequivDD: '\\u2A78',\n\teqvparsl: '\\u29E5',\n\terarr: '\\u2971',\n\terDot: '\\u2253',\n\tEscr: '\\u2130',\n\tescr: '\\u212F',\n\tesdot: '\\u2250',\n\tEsim: '\\u2A73',\n\tesim: '\\u2242',\n\tEta: '\\u0397',\n\teta: '\\u03B7',\n\tETH: '\\u00D0',\n\teth: '\\u00F0',\n\tEuml: '\\u00CB',\n\teuml: '\\u00EB',\n\teuro: '\\u20AC',\n\texcl: '\\u0021',\n\texist: '\\u2203',\n\tExists: '\\u2203',\n\texpectation: '\\u2130',\n\tExponentialE: '\\u2147',\n\texponentiale: '\\u2147',\n\tfallingdotseq: '\\u2252',\n\tFcy: '\\u0424',\n\tfcy: '\\u0444',\n\tfemale: '\\u2640',\n\tffilig: '\\uFB03',\n\tfflig: '\\uFB00',\n\tffllig: '\\uFB04',\n\tFfr: '\\uD835\\uDD09',\n\tffr: '\\uD835\\uDD23',\n\tfilig: '\\uFB01',\n\tFilledSmallSquare: '\\u25FC',\n\tFilledVerySmallSquare: '\\u25AA',\n\tfjlig: '\\u0066\\u006A',\n\tflat: '\\u266D',\n\tfllig: '\\uFB02',\n\tfltns: '\\u25B1',\n\tfnof: '\\u0192',\n\tFopf: '\\uD835\\uDD3D',\n\tfopf: '\\uD835\\uDD57',\n\tForAll: '\\u2200',\n\tforall: '\\u2200',\n\tfork: '\\u22D4',\n\tforkv: '\\u2AD9',\n\tFouriertrf: '\\u2131',\n\tfpartint: '\\u2A0D',\n\tfrac12: '\\u00BD',\n\tfrac13: '\\u2153',\n\tfrac14: '\\u00BC',\n\tfrac15: '\\u2155',\n\tfrac16: '\\u2159',\n\tfrac18: '\\u215B',\n\tfrac23: '\\u2154',\n\tfrac25: '\\u2156',\n\tfrac34: '\\u00BE',\n\tfrac35: '\\u2157',\n\tfrac38: '\\u215C',\n\tfrac45: '\\u2158',\n\tfrac56: '\\u215A',\n\tfrac58: '\\u215D',\n\tfrac78: '\\u215E',\n\tfrasl: '\\u2044',\n\tfrown: '\\u2322',\n\tFscr: '\\u2131',\n\tfscr: '\\uD835\\uDCBB',\n\tgacute: '\\u01F5',\n\tGamma: '\\u0393',\n\tgamma: '\\u03B3',\n\tGammad: '\\u03DC',\n\tgammad: '\\u03DD',\n\tgap: '\\u2A86',\n\tGbreve: '\\u011E',\n\tgbreve: '\\u011F',\n\tGcedil: '\\u0122',\n\tGcirc: '\\u011C',\n\tgcirc: '\\u011D',\n\tGcy: '\\u0413',\n\tgcy: '\\u0433',\n\tGdot: '\\u0120',\n\tgdot: '\\u0121',\n\tgE: '\\u2267',\n\tge: '\\u2265',\n\tgEl: '\\u2A8C',\n\tgel: '\\u22DB',\n\tgeq: '\\u2265',\n\tgeqq: '\\u2267',\n\tgeqslant: '\\u2A7E',\n\tges: '\\u2A7E',\n\tgescc: '\\u2AA9',\n\tgesdot: '\\u2A80',\n\tgesdoto: '\\u2A82',\n\tgesdotol: '\\u2A84',\n\tgesl: '\\u22DB\\uFE00',\n\tgesles: '\\u2A94',\n\tGfr: '\\uD835\\uDD0A',\n\tgfr: '\\uD835\\uDD24',\n\tGg: '\\u22D9',\n\tgg: '\\u226B',\n\tggg: '\\u22D9',\n\tgimel: '\\u2137',\n\tGJcy: '\\u0403',\n\tgjcy: '\\u0453',\n\tgl: '\\u2277',\n\tgla: '\\u2AA5',\n\tglE: '\\u2A92',\n\tglj: '\\u2AA4',\n\tgnap: '\\u2A8A',\n\tgnapprox: '\\u2A8A',\n\tgnE: '\\u2269',\n\tgne: '\\u2A88',\n\tgneq: '\\u2A88',\n\tgneqq: '\\u2269',\n\tgnsim: '\\u22E7',\n\tGopf: '\\uD835\\uDD3E',\n\tgopf: '\\uD835\\uDD58',\n\tgrave: '\\u0060',\n\tGreaterEqual: '\\u2265',\n\tGreaterEqualLess: '\\u22DB',\n\tGreaterFullEqual: '\\u2267',\n\tGreaterGreater: '\\u2AA2',\n\tGreaterLess: '\\u2277',\n\tGreaterSlantEqual: '\\u2A7E',\n\tGreaterTilde: '\\u2273',\n\tGscr: '\\uD835\\uDCA2',\n\tgscr: '\\u210A',\n\tgsim: '\\u2273',\n\tgsime: '\\u2A8E',\n\tgsiml: '\\u2A90',\n\tGt: '\\u226B',\n\tGT: '\\u003E',\n\tgt: '\\u003E',\n\tgtcc: '\\u2AA7',\n\tgtcir: '\\u2A7A',\n\tgtdot: '\\u22D7',\n\tgtlPar: '\\u2995',\n\tgtquest: '\\u2A7C',\n\tgtrapprox: '\\u2A86',\n\tgtrarr: '\\u2978',\n\tgtrdot: '\\u22D7',\n\tgtreqless: '\\u22DB',\n\tgtreqqless: '\\u2A8C',\n\tgtrless: '\\u2277',\n\tgtrsim: '\\u2273',\n\tgvertneqq: '\\u2269\\uFE00',\n\tgvnE: '\\u2269\\uFE00',\n\tHacek: '\\u02C7',\n\thairsp: '\\u200A',\n\thalf: '\\u00BD',\n\thamilt: '\\u210B',\n\tHARDcy: '\\u042A',\n\thardcy: '\\u044A',\n\thArr: '\\u21D4',\n\tharr: '\\u2194',\n\tharrcir: '\\u2948',\n\tharrw: '\\u21AD',\n\tHat: '\\u005E',\n\thbar: '\\u210F',\n\tHcirc: '\\u0124',\n\thcirc: '\\u0125',\n\thearts: '\\u2665',\n\theartsuit: '\\u2665',\n\thellip: '\\u2026',\n\thercon: '\\u22B9',\n\tHfr: '\\u210C',\n\thfr: '\\uD835\\uDD25',\n\tHilbertSpace: '\\u210B',\n\thksearow: '\\u2925',\n\thkswarow: '\\u2926',\n\thoarr: '\\u21FF',\n\thomtht: '\\u223B',\n\thookleftarrow: '\\u21A9',\n\thookrightarrow: '\\u21AA',\n\tHopf: '\\u210D',\n\thopf: '\\uD835\\uDD59',\n\thorbar: '\\u2015',\n\tHorizontalLine: '\\u2500',\n\tHscr: '\\u210B',\n\thscr: '\\uD835\\uDCBD',\n\thslash: '\\u210F',\n\tHstrok: '\\u0126',\n\thstrok: '\\u0127',\n\tHumpDownHump: '\\u224E',\n\tHumpEqual: '\\u224F',\n\thybull: '\\u2043',\n\thyphen: '\\u2010',\n\tIacute: '\\u00CD',\n\tiacute: '\\u00ED',\n\tic: '\\u2063',\n\tIcirc: '\\u00CE',\n\ticirc: '\\u00EE',\n\tIcy: '\\u0418',\n\ticy: '\\u0438',\n\tIdot: '\\u0130',\n\tIEcy: '\\u0415',\n\tiecy: '\\u0435',\n\tiexcl: '\\u00A1',\n\tiff: '\\u21D4',\n\tIfr: '\\u2111',\n\tifr: '\\uD835\\uDD26',\n\tIgrave: '\\u00CC',\n\tigrave: '\\u00EC',\n\tii: '\\u2148',\n\tiiiint: '\\u2A0C',\n\tiiint: '\\u222D',\n\tiinfin: '\\u29DC',\n\tiiota: '\\u2129',\n\tIJlig: '\\u0132',\n\tijlig: '\\u0133',\n\tIm: '\\u2111',\n\tImacr: '\\u012A',\n\timacr: '\\u012B',\n\timage: '\\u2111',\n\tImaginaryI: '\\u2148',\n\timagline: '\\u2110',\n\timagpart: '\\u2111',\n\timath: '\\u0131',\n\timof: '\\u22B7',\n\timped: '\\u01B5',\n\tImplies: '\\u21D2',\n\tin: '\\u2208',\n\tincare: '\\u2105',\n\tinfin: '\\u221E',\n\tinfintie: '\\u29DD',\n\tinodot: '\\u0131',\n\tInt: '\\u222C',\n\tint: '\\u222B',\n\tintcal: '\\u22BA',\n\tintegers: '\\u2124',\n\tIntegral: '\\u222B',\n\tintercal: '\\u22BA',\n\tIntersection: '\\u22C2',\n\tintlarhk: '\\u2A17',\n\tintprod: '\\u2A3C',\n\tInvisibleComma: '\\u2063',\n\tInvisibleTimes: '\\u2062',\n\tIOcy: '\\u0401',\n\tiocy: '\\u0451',\n\tIogon: '\\u012E',\n\tiogon: '\\u012F',\n\tIopf: '\\uD835\\uDD40',\n\tiopf: '\\uD835\\uDD5A',\n\tIota: '\\u0399',\n\tiota: '\\u03B9',\n\tiprod: '\\u2A3C',\n\tiquest: '\\u00BF',\n\tIscr: '\\u2110',\n\tiscr: '\\uD835\\uDCBE',\n\tisin: '\\u2208',\n\tisindot: '\\u22F5',\n\tisinE: '\\u22F9',\n\tisins: '\\u22F4',\n\tisinsv: '\\u22F3',\n\tisinv: '\\u2208',\n\tit: '\\u2062',\n\tItilde: '\\u0128',\n\titilde: '\\u0129',\n\tIukcy: '\\u0406',\n\tiukcy: '\\u0456',\n\tIuml: '\\u00CF',\n\tiuml: '\\u00EF',\n\tJcirc: '\\u0134',\n\tjcirc: '\\u0135',\n\tJcy: '\\u0419',\n\tjcy: '\\u0439',\n\tJfr: '\\uD835\\uDD0D',\n\tjfr: '\\uD835\\uDD27',\n\tjmath: '\\u0237',\n\tJopf: '\\uD835\\uDD41',\n\tjopf: '\\uD835\\uDD5B',\n\tJscr: '\\uD835\\uDCA5',\n\tjscr: '\\uD835\\uDCBF',\n\tJsercy: '\\u0408',\n\tjsercy: '\\u0458',\n\tJukcy: '\\u0404',\n\tjukcy: '\\u0454',\n\tKappa: '\\u039A',\n\tkappa: '\\u03BA',\n\tkappav: '\\u03F0',\n\tKcedil: '\\u0136',\n\tkcedil: '\\u0137',\n\tKcy: '\\u041A',\n\tkcy: '\\u043A',\n\tKfr: '\\uD835\\uDD0E',\n\tkfr: '\\uD835\\uDD28',\n\tkgreen: '\\u0138',\n\tKHcy: '\\u0425',\n\tkhcy: '\\u0445',\n\tKJcy: '\\u040C',\n\tkjcy: '\\u045C',\n\tKopf: '\\uD835\\uDD42',\n\tkopf: '\\uD835\\uDD5C',\n\tKscr: '\\uD835\\uDCA6',\n\tkscr: '\\uD835\\uDCC0',\n\tlAarr: '\\u21DA',\n\tLacute: '\\u0139',\n\tlacute: '\\u013A',\n\tlaemptyv: '\\u29B4',\n\tlagran: '\\u2112',\n\tLambda: '\\u039B',\n\tlambda: '\\u03BB',\n\tLang: '\\u27EA',\n\tlang: '\\u27E8',\n\tlangd: '\\u2991',\n\tlangle: '\\u27E8',\n\tlap: '\\u2A85',\n\tLaplacetrf: '\\u2112',\n\tlaquo: '\\u00AB',\n\tLarr: '\\u219E',\n\tlArr: '\\u21D0',\n\tlarr: '\\u2190',\n\tlarrb: '\\u21E4',\n\tlarrbfs: '\\u291F',\n\tlarrfs: '\\u291D',\n\tlarrhk: '\\u21A9',\n\tlarrlp: '\\u21AB',\n\tlarrpl: '\\u2939',\n\tlarrsim: '\\u2973',\n\tlarrtl: '\\u21A2',\n\tlat: '\\u2AAB',\n\tlAtail: '\\u291B',\n\tlatail: '\\u2919',\n\tlate: '\\u2AAD',\n\tlates: '\\u2AAD\\uFE00',\n\tlBarr: '\\u290E',\n\tlbarr: '\\u290C',\n\tlbbrk: '\\u2772',\n\tlbrace: '\\u007B',\n\tlbrack: '\\u005B',\n\tlbrke: '\\u298B',\n\tlbrksld: '\\u298F',\n\tlbrkslu: '\\u298D',\n\tLcaron: '\\u013D',\n\tlcaron: '\\u013E',\n\tLcedil: '\\u013B',\n\tlcedil: '\\u013C',\n\tlceil: '\\u2308',\n\tlcub: '\\u007B',\n\tLcy: '\\u041B',\n\tlcy: '\\u043B',\n\tldca: '\\u2936',\n\tldquo: '\\u201C',\n\tldquor: '\\u201E',\n\tldrdhar: '\\u2967',\n\tldrushar: '\\u294B',\n\tldsh: '\\u21B2',\n\tlE: '\\u2266',\n\tle: '\\u2264',\n\tLeftAngleBracket: '\\u27E8',\n\tLeftArrow: '\\u2190',\n\tLeftarrow: '\\u21D0',\n\tleftarrow: '\\u2190',\n\tLeftArrowBar: '\\u21E4',\n\tLeftArrowRightArrow: '\\u21C6',\n\tleftarrowtail: '\\u21A2',\n\tLeftCeiling: '\\u2308',\n\tLeftDoubleBracket: '\\u27E6',\n\tLeftDownTeeVector: '\\u2961',\n\tLeftDownVector: '\\u21C3',\n\tLeftDownVectorBar: '\\u2959',\n\tLeftFloor: '\\u230A',\n\tleftharpoondown: '\\u21BD',\n\tleftharpoonup: '\\u21BC',\n\tleftleftarrows: '\\u21C7',\n\tLeftRightArrow: '\\u2194',\n\tLeftrightarrow: '\\u21D4',\n\tleftrightarrow: '\\u2194',\n\tleftrightarrows: '\\u21C6',\n\tleftrightharpoons: '\\u21CB',\n\tleftrightsquigarrow: '\\u21AD',\n\tLeftRightVector: '\\u294E',\n\tLeftTee: '\\u22A3',\n\tLeftTeeArrow: '\\u21A4',\n\tLeftTeeVector: '\\u295A',\n\tleftthreetimes: '\\u22CB',\n\tLeftTriangle: '\\u22B2',\n\tLeftTriangleBar: '\\u29CF',\n\tLeftTriangleEqual: '\\u22B4',\n\tLeftUpDownVector: '\\u2951',\n\tLeftUpTeeVector: '\\u2960',\n\tLeftUpVector: '\\u21BF',\n\tLeftUpVectorBar: '\\u2958',\n\tLeftVector: '\\u21BC',\n\tLeftVectorBar: '\\u2952',\n\tlEg: '\\u2A8B',\n\tleg: '\\u22DA',\n\tleq: '\\u2264',\n\tleqq: '\\u2266',\n\tleqslant: '\\u2A7D',\n\tles: '\\u2A7D',\n\tlescc: '\\u2AA8',\n\tlesdot: '\\u2A7F',\n\tlesdoto: '\\u2A81',\n\tlesdotor: '\\u2A83',\n\tlesg: '\\u22DA\\uFE00',\n\tlesges: '\\u2A93',\n\tlessapprox: '\\u2A85',\n\tlessdot: '\\u22D6',\n\tlesseqgtr: '\\u22DA',\n\tlesseqqgtr: '\\u2A8B',\n\tLessEqualGreater: '\\u22DA',\n\tLessFullEqual: '\\u2266',\n\tLessGreater: '\\u2276',\n\tlessgtr: '\\u2276',\n\tLessLess: '\\u2AA1',\n\tlesssim: '\\u2272',\n\tLessSlantEqual: '\\u2A7D',\n\tLessTilde: '\\u2272',\n\tlfisht: '\\u297C',\n\tlfloor: '\\u230A',\n\tLfr: '\\uD835\\uDD0F',\n\tlfr: '\\uD835\\uDD29',\n\tlg: '\\u2276',\n\tlgE: '\\u2A91',\n\tlHar: '\\u2962',\n\tlhard: '\\u21BD',\n\tlharu: '\\u21BC',\n\tlharul: '\\u296A',\n\tlhblk: '\\u2584',\n\tLJcy: '\\u0409',\n\tljcy: '\\u0459',\n\tLl: '\\u22D8',\n\tll: '\\u226A',\n\tllarr: '\\u21C7',\n\tllcorner: '\\u231E',\n\tLleftarrow: '\\u21DA',\n\tllhard: '\\u296B',\n\tlltri: '\\u25FA',\n\tLmidot: '\\u013F',\n\tlmidot: '\\u0140',\n\tlmoust: '\\u23B0',\n\tlmoustache: '\\u23B0',\n\tlnap: '\\u2A89',\n\tlnapprox: '\\u2A89',\n\tlnE: '\\u2268',\n\tlne: '\\u2A87',\n\tlneq: '\\u2A87',\n\tlneqq: '\\u2268',\n\tlnsim: '\\u22E6',\n\tloang: '\\u27EC',\n\tloarr: '\\u21FD',\n\tlobrk: '\\u27E6',\n\tLongLeftArrow: '\\u27F5',\n\tLongleftarrow: '\\u27F8',\n\tlongleftarrow: '\\u27F5',\n\tLongLeftRightArrow: '\\u27F7',\n\tLongleftrightarrow: '\\u27FA',\n\tlongleftrightarrow: '\\u27F7',\n\tlongmapsto: '\\u27FC',\n\tLongRightArrow: '\\u27F6',\n\tLongrightarrow: '\\u27F9',\n\tlongrightarrow: '\\u27F6',\n\tlooparrowleft: '\\u21AB',\n\tlooparrowright: '\\u21AC',\n\tlopar: '\\u2985',\n\tLopf: '\\uD835\\uDD43',\n\tlopf: '\\uD835\\uDD5D',\n\tloplus: '\\u2A2D',\n\tlotimes: '\\u2A34',\n\tlowast: '\\u2217',\n\tlowbar: '\\u005F',\n\tLowerLeftArrow: '\\u2199',\n\tLowerRightArrow: '\\u2198',\n\tloz: '\\u25CA',\n\tlozenge: '\\u25CA',\n\tlozf: '\\u29EB',\n\tlpar: '\\u0028',\n\tlparlt: '\\u2993',\n\tlrarr: '\\u21C6',\n\tlrcorner: '\\u231F',\n\tlrhar: '\\u21CB',\n\tlrhard: '\\u296D',\n\tlrm: '\\u200E',\n\tlrtri: '\\u22BF',\n\tlsaquo: '\\u2039',\n\tLscr: '\\u2112',\n\tlscr: '\\uD835\\uDCC1',\n\tLsh: '\\u21B0',\n\tlsh: '\\u21B0',\n\tlsim: '\\u2272',\n\tlsime: '\\u2A8D',\n\tlsimg: '\\u2A8F',\n\tlsqb: '\\u005B',\n\tlsquo: '\\u2018',\n\tlsquor: '\\u201A',\n\tLstrok: '\\u0141',\n\tlstrok: '\\u0142',\n\tLt: '\\u226A',\n\tLT: '\\u003C',\n\tlt: '\\u003C',\n\tltcc: '\\u2AA6',\n\tltcir: '\\u2A79',\n\tltdot: '\\u22D6',\n\tlthree: '\\u22CB',\n\tltimes: '\\u22C9',\n\tltlarr: '\\u2976',\n\tltquest: '\\u2A7B',\n\tltri: '\\u25C3',\n\tltrie: '\\u22B4',\n\tltrif: '\\u25C2',\n\tltrPar: '\\u2996',\n\tlurdshar: '\\u294A',\n\tluruhar: '\\u2966',\n\tlvertneqq: '\\u2268\\uFE00',\n\tlvnE: '\\u2268\\uFE00',\n\tmacr: '\\u00AF',\n\tmale: '\\u2642',\n\tmalt: '\\u2720',\n\tmaltese: '\\u2720',\n\tMap: '\\u2905',\n\tmap: '\\u21A6',\n\tmapsto: '\\u21A6',\n\tmapstodown: '\\u21A7',\n\tmapstoleft: '\\u21A4',\n\tmapstoup: '\\u21A5',\n\tmarker: '\\u25AE',\n\tmcomma: '\\u2A29',\n\tMcy: '\\u041C',\n\tmcy: '\\u043C',\n\tmdash: '\\u2014',\n\tmDDot: '\\u223A',\n\tmeasuredangle: '\\u2221',\n\tMediumSpace: '\\u205F',\n\tMellintrf: '\\u2133',\n\tMfr: '\\uD835\\uDD10',\n\tmfr: '\\uD835\\uDD2A',\n\tmho: '\\u2127',\n\tmicro: '\\u00B5',\n\tmid: '\\u2223',\n\tmidast: '\\u002A',\n\tmidcir: '\\u2AF0',\n\tmiddot: '\\u00B7',\n\tminus: '\\u2212',\n\tminusb: '\\u229F',\n\tminusd: '\\u2238',\n\tminusdu: '\\u2A2A',\n\tMinusPlus: '\\u2213',\n\tmlcp: '\\u2ADB',\n\tmldr: '\\u2026',\n\tmnplus: '\\u2213',\n\tmodels: '\\u22A7',\n\tMopf: '\\uD835\\uDD44',\n\tmopf: '\\uD835\\uDD5E',\n\tmp: '\\u2213',\n\tMscr: '\\u2133',\n\tmscr: '\\uD835\\uDCC2',\n\tmstpos: '\\u223E',\n\tMu: '\\u039C',\n\tmu: '\\u03BC',\n\tmultimap: '\\u22B8',\n\tmumap: '\\u22B8',\n\tnabla: '\\u2207',\n\tNacute: '\\u0143',\n\tnacute: '\\u0144',\n\tnang: '\\u2220\\u20D2',\n\tnap: '\\u2249',\n\tnapE: '\\u2A70\\u0338',\n\tnapid: '\\u224B\\u0338',\n\tnapos: '\\u0149',\n\tnapprox: '\\u2249',\n\tnatur: '\\u266E',\n\tnatural: '\\u266E',\n\tnaturals: '\\u2115',\n\tnbsp: '\\u00A0',\n\tnbump: '\\u224E\\u0338',\n\tnbumpe: '\\u224F\\u0338',\n\tncap: '\\u2A43',\n\tNcaron: '\\u0147',\n\tncaron: '\\u0148',\n\tNcedil: '\\u0145',\n\tncedil: '\\u0146',\n\tncong: '\\u2247',\n\tncongdot: '\\u2A6D\\u0338',\n\tncup: '\\u2A42',\n\tNcy: '\\u041D',\n\tncy: '\\u043D',\n\tndash: '\\u2013',\n\tne: '\\u2260',\n\tnearhk: '\\u2924',\n\tneArr: '\\u21D7',\n\tnearr: '\\u2197',\n\tnearrow: '\\u2197',\n\tnedot: '\\u2250\\u0338',\n\tNegativeMediumSpace: '\\u200B',\n\tNegativeThickSpace: '\\u200B',\n\tNegativeThinSpace: '\\u200B',\n\tNegativeVeryThinSpace: '\\u200B',\n\tnequiv: '\\u2262',\n\tnesear: '\\u2928',\n\tnesim: '\\u2242\\u0338',\n\tNestedGreaterGreater: '\\u226B',\n\tNestedLessLess: '\\u226A',\n\tNewLine: '\\u000A',\n\tnexist: '\\u2204',\n\tnexists: '\\u2204',\n\tNfr: '\\uD835\\uDD11',\n\tnfr: '\\uD835\\uDD2B',\n\tngE: '\\u2267\\u0338',\n\tnge: '\\u2271',\n\tngeq: '\\u2271',\n\tngeqq: '\\u2267\\u0338',\n\tngeqslant: '\\u2A7E\\u0338',\n\tnges: '\\u2A7E\\u0338',\n\tnGg: '\\u22D9\\u0338',\n\tngsim: '\\u2275',\n\tnGt: '\\u226B\\u20D2',\n\tngt: '\\u226F',\n\tngtr: '\\u226F',\n\tnGtv: '\\u226B\\u0338',\n\tnhArr: '\\u21CE',\n\tnharr: '\\u21AE',\n\tnhpar: '\\u2AF2',\n\tni: '\\u220B',\n\tnis: '\\u22FC',\n\tnisd: '\\u22FA',\n\tniv: '\\u220B',\n\tNJcy: '\\u040A',\n\tnjcy: '\\u045A',\n\tnlArr: '\\u21CD',\n\tnlarr: '\\u219A',\n\tnldr: '\\u2025',\n\tnlE: '\\u2266\\u0338',\n\tnle: '\\u2270',\n\tnLeftarrow: '\\u21CD',\n\tnleftarrow: '\\u219A',\n\tnLeftrightarrow: '\\u21CE',\n\tnleftrightarrow: '\\u21AE',\n\tnleq: '\\u2270',\n\tnleqq: '\\u2266\\u0338',\n\tnleqslant: '\\u2A7D\\u0338',\n\tnles: '\\u2A7D\\u0338',\n\tnless: '\\u226E',\n\tnLl: '\\u22D8\\u0338',\n\tnlsim: '\\u2274',\n\tnLt: '\\u226A\\u20D2',\n\tnlt: '\\u226E',\n\tnltri: '\\u22EA',\n\tnltrie: '\\u22EC',\n\tnLtv: '\\u226A\\u0338',\n\tnmid: '\\u2224',\n\tNoBreak: '\\u2060',\n\tNonBreakingSpace: '\\u00A0',\n\tNopf: '\\u2115',\n\tnopf: '\\uD835\\uDD5F',\n\tNot: '\\u2AEC',\n\tnot: '\\u00AC',\n\tNotCongruent: '\\u2262',\n\tNotCupCap: '\\u226D',\n\tNotDoubleVerticalBar: '\\u2226',\n\tNotElement: '\\u2209',\n\tNotEqual: '\\u2260',\n\tNotEqualTilde: '\\u2242\\u0338',\n\tNotExists: '\\u2204',\n\tNotGreater: '\\u226F',\n\tNotGreaterEqual: '\\u2271',\n\tNotGreaterFullEqual: '\\u2267\\u0338',\n\tNotGreaterGreater: '\\u226B\\u0338',\n\tNotGreaterLess: '\\u2279',\n\tNotGreaterSlantEqual: '\\u2A7E\\u0338',\n\tNotGreaterTilde: '\\u2275',\n\tNotHumpDownHump: '\\u224E\\u0338',\n\tNotHumpEqual: '\\u224F\\u0338',\n\tnotin: '\\u2209',\n\tnotindot: '\\u22F5\\u0338',\n\tnotinE: '\\u22F9\\u0338',\n\tnotinva: '\\u2209',\n\tnotinvb: '\\u22F7',\n\tnotinvc: '\\u22F6',\n\tNotLeftTriangle: '\\u22EA',\n\tNotLeftTriangleBar: '\\u29CF\\u0338',\n\tNotLeftTriangleEqual: '\\u22EC',\n\tNotLess: '\\u226E',\n\tNotLessEqual: '\\u2270',\n\tNotLessGreater: '\\u2278',\n\tNotLessLess: '\\u226A\\u0338',\n\tNotLessSlantEqual: '\\u2A7D\\u0338',\n\tNotLessTilde: '\\u2274',\n\tNotNestedGreaterGreater: '\\u2AA2\\u0338',\n\tNotNestedLessLess: '\\u2AA1\\u0338',\n\tnotni: '\\u220C',\n\tnotniva: '\\u220C',\n\tnotnivb: '\\u22FE',\n\tnotnivc: '\\u22FD',\n\tNotPrecedes: '\\u2280',\n\tNotPrecedesEqual: '\\u2AAF\\u0338',\n\tNotPrecedesSlantEqual: '\\u22E0',\n\tNotReverseElement: '\\u220C',\n\tNotRightTriangle: '\\u22EB',\n\tNotRightTriangleBar: '\\u29D0\\u0338',\n\tNotRightTriangleEqual: '\\u22ED',\n\tNotSquareSubset: '\\u228F\\u0338',\n\tNotSquareSubsetEqual: '\\u22E2',\n\tNotSquareSuperset: '\\u2290\\u0338',\n\tNotSquareSupersetEqual: '\\u22E3',\n\tNotSubset: '\\u2282\\u20D2',\n\tNotSubsetEqual: '\\u2288',\n\tNotSucceeds: '\\u2281',\n\tNotSucceedsEqual: '\\u2AB0\\u0338',\n\tNotSucceedsSlantEqual: '\\u22E1',\n\tNotSucceedsTilde: '\\u227F\\u0338',\n\tNotSuperset: '\\u2283\\u20D2',\n\tNotSupersetEqual: '\\u2289',\n\tNotTilde: '\\u2241',\n\tNotTildeEqual: '\\u2244',\n\tNotTildeFullEqual: '\\u2247',\n\tNotTildeTilde: '\\u2249',\n\tNotVerticalBar: '\\u2224',\n\tnpar: '\\u2226',\n\tnparallel: '\\u2226',\n\tnparsl: '\\u2AFD\\u20E5',\n\tnpart: '\\u2202\\u0338',\n\tnpolint: '\\u2A14',\n\tnpr: '\\u2280',\n\tnprcue: '\\u22E0',\n\tnpre: '\\u2AAF\\u0338',\n\tnprec: '\\u2280',\n\tnpreceq: '\\u2AAF\\u0338',\n\tnrArr: '\\u21CF',\n\tnrarr: '\\u219B',\n\tnrarrc: '\\u2933\\u0338',\n\tnrarrw: '\\u219D\\u0338',\n\tnRightarrow: '\\u21CF',\n\tnrightarrow: '\\u219B',\n\tnrtri: '\\u22EB',\n\tnrtrie: '\\u22ED',\n\tnsc: '\\u2281',\n\tnsccue: '\\u22E1',\n\tnsce: '\\u2AB0\\u0338',\n\tNscr: '\\uD835\\uDCA9',\n\tnscr: '\\uD835\\uDCC3',\n\tnshortmid: '\\u2224',\n\tnshortparallel: '\\u2226',\n\tnsim: '\\u2241',\n\tnsime: '\\u2244',\n\tnsimeq: '\\u2244',\n\tnsmid: '\\u2224',\n\tnspar: '\\u2226',\n\tnsqsube: '\\u22E2',\n\tnsqsupe: '\\u22E3',\n\tnsub: '\\u2284',\n\tnsubE: '\\u2AC5\\u0338',\n\tnsube: '\\u2288',\n\tnsubset: '\\u2282\\u20D2',\n\tnsubseteq: '\\u2288',\n\tnsubseteqq: '\\u2AC5\\u0338',\n\tnsucc: '\\u2281',\n\tnsucceq: '\\u2AB0\\u0338',\n\tnsup: '\\u2285',\n\tnsupE: '\\u2AC6\\u0338',\n\tnsupe: '\\u2289',\n\tnsupset: '\\u2283\\u20D2',\n\tnsupseteq: '\\u2289',\n\tnsupseteqq: '\\u2AC6\\u0338',\n\tntgl: '\\u2279',\n\tNtilde: '\\u00D1',\n\tntilde: '\\u00F1',\n\tntlg: '\\u2278',\n\tntriangleleft: '\\u22EA',\n\tntrianglelefteq: '\\u22EC',\n\tntriangleright: '\\u22EB',\n\tntrianglerighteq: '\\u22ED',\n\tNu: '\\u039D',\n\tnu: '\\u03BD',\n\tnum: '\\u0023',\n\tnumero: '\\u2116',\n\tnumsp: '\\u2007',\n\tnvap: '\\u224D\\u20D2',\n\tnVDash: '\\u22AF',\n\tnVdash: '\\u22AE',\n\tnvDash: '\\u22AD',\n\tnvdash: '\\u22AC',\n\tnvge: '\\u2265\\u20D2',\n\tnvgt: '\\u003E\\u20D2',\n\tnvHarr: '\\u2904',\n\tnvinfin: '\\u29DE',\n\tnvlArr: '\\u2902',\n\tnvle: '\\u2264\\u20D2',\n\tnvlt: '\\u003C\\u20D2',\n\tnvltrie: '\\u22B4\\u20D2',\n\tnvrArr: '\\u2903',\n\tnvrtrie: '\\u22B5\\u20D2',\n\tnvsim: '\\u223C\\u20D2',\n\tnwarhk: '\\u2923',\n\tnwArr: '\\u21D6',\n\tnwarr: '\\u2196',\n\tnwarrow: '\\u2196',\n\tnwnear: '\\u2927',\n\tOacute: '\\u00D3',\n\toacute: '\\u00F3',\n\toast: '\\u229B',\n\tocir: '\\u229A',\n\tOcirc: '\\u00D4',\n\tocirc: '\\u00F4',\n\tOcy: '\\u041E',\n\tocy: '\\u043E',\n\todash: '\\u229D',\n\tOdblac: '\\u0150',\n\todblac: '\\u0151',\n\todiv: '\\u2A38',\n\todot: '\\u2299',\n\todsold: '\\u29BC',\n\tOElig: '\\u0152',\n\toelig: '\\u0153',\n\tofcir: '\\u29BF',\n\tOfr: '\\uD835\\uDD12',\n\tofr: '\\uD835\\uDD2C',\n\togon: '\\u02DB',\n\tOgrave: '\\u00D2',\n\tograve: '\\u00F2',\n\togt: '\\u29C1',\n\tohbar: '\\u29B5',\n\tohm: '\\u03A9',\n\toint: '\\u222E',\n\tolarr: '\\u21BA',\n\tolcir: '\\u29BE',\n\tolcross: '\\u29BB',\n\toline: '\\u203E',\n\tolt: '\\u29C0',\n\tOmacr: '\\u014C',\n\tomacr: '\\u014D',\n\tOmega: '\\u03A9',\n\tomega: '\\u03C9',\n\tOmicron: '\\u039F',\n\tomicron: '\\u03BF',\n\tomid: '\\u29B6',\n\tominus: '\\u2296',\n\tOopf: '\\uD835\\uDD46',\n\toopf: '\\uD835\\uDD60',\n\topar: '\\u29B7',\n\tOpenCurlyDoubleQuote: '\\u201C',\n\tOpenCurlyQuote: '\\u2018',\n\toperp: '\\u29B9',\n\toplus: '\\u2295',\n\tOr: '\\u2A54',\n\tor: '\\u2228',\n\torarr: '\\u21BB',\n\tord: '\\u2A5D',\n\torder: '\\u2134',\n\torderof: '\\u2134',\n\tordf: '\\u00AA',\n\tordm: '\\u00BA',\n\torigof: '\\u22B6',\n\toror: '\\u2A56',\n\torslope: '\\u2A57',\n\torv: '\\u2A5B',\n\toS: '\\u24C8',\n\tOscr: '\\uD835\\uDCAA',\n\toscr: '\\u2134',\n\tOslash: '\\u00D8',\n\toslash: '\\u00F8',\n\tosol: '\\u2298',\n\tOtilde: '\\u00D5',\n\totilde: '\\u00F5',\n\tOtimes: '\\u2A37',\n\totimes: '\\u2297',\n\totimesas: '\\u2A36',\n\tOuml: '\\u00D6',\n\touml: '\\u00F6',\n\tovbar: '\\u233D',\n\tOverBar: '\\u203E',\n\tOverBrace: '\\u23DE',\n\tOverBracket: '\\u23B4',\n\tOverParenthesis: '\\u23DC',\n\tpar: '\\u2225',\n\tpara: '\\u00B6',\n\tparallel: '\\u2225',\n\tparsim: '\\u2AF3',\n\tparsl: '\\u2AFD',\n\tpart: '\\u2202',\n\tPartialD: '\\u2202',\n\tPcy: '\\u041F',\n\tpcy: '\\u043F',\n\tpercnt: '\\u0025',\n\tperiod: '\\u002E',\n\tpermil: '\\u2030',\n\tperp: '\\u22A5',\n\tpertenk: '\\u2031',\n\tPfr: '\\uD835\\uDD13',\n\tpfr: '\\uD835\\uDD2D',\n\tPhi: '\\u03A6',\n\tphi: '\\u03C6',\n\tphiv: '\\u03D5',\n\tphmmat: '\\u2133',\n\tphone: '\\u260E',\n\tPi: '\\u03A0',\n\tpi: '\\u03C0',\n\tpitchfork: '\\u22D4',\n\tpiv: '\\u03D6',\n\tplanck: '\\u210F',\n\tplanckh: '\\u210E',\n\tplankv: '\\u210F',\n\tplus: '\\u002B',\n\tplusacir: '\\u2A23',\n\tplusb: '\\u229E',\n\tpluscir: '\\u2A22',\n\tplusdo: '\\u2214',\n\tplusdu: '\\u2A25',\n\tpluse: '\\u2A72',\n\tPlusMinus: '\\u00B1',\n\tplusmn: '\\u00B1',\n\tplussim: '\\u2A26',\n\tplustwo: '\\u2A27',\n\tpm: '\\u00B1',\n\tPoincareplane: '\\u210C',\n\tpointint: '\\u2A15',\n\tPopf: '\\u2119',\n\tpopf: '\\uD835\\uDD61',\n\tpound: '\\u00A3',\n\tPr: '\\u2ABB',\n\tpr: '\\u227A',\n\tprap: '\\u2AB7',\n\tprcue: '\\u227C',\n\tprE: '\\u2AB3',\n\tpre: '\\u2AAF',\n\tprec: '\\u227A',\n\tprecapprox: '\\u2AB7',\n\tpreccurlyeq: '\\u227C',\n\tPrecedes: '\\u227A',\n\tPrecedesEqual: '\\u2AAF',\n\tPrecedesSlantEqual: '\\u227C',\n\tPrecedesTilde: '\\u227E',\n\tpreceq: '\\u2AAF',\n\tprecnapprox: '\\u2AB9',\n\tprecneqq: '\\u2AB5',\n\tprecnsim: '\\u22E8',\n\tprecsim: '\\u227E',\n\tPrime: '\\u2033',\n\tprime: '\\u2032',\n\tprimes: '\\u2119',\n\tprnap: '\\u2AB9',\n\tprnE: '\\u2AB5',\n\tprnsim: '\\u22E8',\n\tprod: '\\u220F',\n\tProduct: '\\u220F',\n\tprofalar: '\\u232E',\n\tprofline: '\\u2312',\n\tprofsurf: '\\u2313',\n\tprop: '\\u221D',\n\tProportion: '\\u2237',\n\tProportional: '\\u221D',\n\tpropto: '\\u221D',\n\tprsim: '\\u227E',\n\tprurel: '\\u22B0',\n\tPscr: '\\uD835\\uDCAB',\n\tpscr: '\\uD835\\uDCC5',\n\tPsi: '\\u03A8',\n\tpsi: '\\u03C8',\n\tpuncsp: '\\u2008',\n\tQfr: '\\uD835\\uDD14',\n\tqfr: '\\uD835\\uDD2E',\n\tqint: '\\u2A0C',\n\tQopf: '\\u211A',\n\tqopf: '\\uD835\\uDD62',\n\tqprime: '\\u2057',\n\tQscr: '\\uD835\\uDCAC',\n\tqscr: '\\uD835\\uDCC6',\n\tquaternions: '\\u210D',\n\tquatint: '\\u2A16',\n\tquest: '\\u003F',\n\tquesteq: '\\u225F',\n\tQUOT: '\\u0022',\n\tquot: '\\u0022',\n\trAarr: '\\u21DB',\n\trace: '\\u223D\\u0331',\n\tRacute: '\\u0154',\n\tracute: '\\u0155',\n\tradic: '\\u221A',\n\traemptyv: '\\u29B3',\n\tRang: '\\u27EB',\n\trang: '\\u27E9',\n\trangd: '\\u2992',\n\trange: '\\u29A5',\n\trangle: '\\u27E9',\n\traquo: '\\u00BB',\n\tRarr: '\\u21A0',\n\trArr: '\\u21D2',\n\trarr: '\\u2192',\n\trarrap: '\\u2975',\n\trarrb: '\\u21E5',\n\trarrbfs: '\\u2920',\n\trarrc: '\\u2933',\n\trarrfs: '\\u291E',\n\trarrhk: '\\u21AA',\n\trarrlp: '\\u21AC',\n\trarrpl: '\\u2945',\n\trarrsim: '\\u2974',\n\tRarrtl: '\\u2916',\n\trarrtl: '\\u21A3',\n\trarrw: '\\u219D',\n\trAtail: '\\u291C',\n\tratail: '\\u291A',\n\tratio: '\\u2236',\n\trationals: '\\u211A',\n\tRBarr: '\\u2910',\n\trBarr: '\\u290F',\n\trbarr: '\\u290D',\n\trbbrk: '\\u2773',\n\trbrace: '\\u007D',\n\trbrack: '\\u005D',\n\trbrke: '\\u298C',\n\trbrksld: '\\u298E',\n\trbrkslu: '\\u2990',\n\tRcaron: '\\u0158',\n\trcaron: '\\u0159',\n\tRcedil: '\\u0156',\n\trcedil: '\\u0157',\n\trceil: '\\u2309',\n\trcub: '\\u007D',\n\tRcy: '\\u0420',\n\trcy: '\\u0440',\n\trdca: '\\u2937',\n\trdldhar: '\\u2969',\n\trdquo: '\\u201D',\n\trdquor: '\\u201D',\n\trdsh: '\\u21B3',\n\tRe: '\\u211C',\n\treal: '\\u211C',\n\trealine: '\\u211B',\n\trealpart: '\\u211C',\n\treals: '\\u211D',\n\trect: '\\u25AD',\n\tREG: '\\u00AE',\n\treg: '\\u00AE',\n\tReverseElement: '\\u220B',\n\tReverseEquilibrium: '\\u21CB',\n\tReverseUpEquilibrium: '\\u296F',\n\trfisht: '\\u297D',\n\trfloor: '\\u230B',\n\tRfr: '\\u211C',\n\trfr: '\\uD835\\uDD2F',\n\trHar: '\\u2964',\n\trhard: '\\u21C1',\n\trharu: '\\u21C0',\n\trharul: '\\u296C',\n\tRho: '\\u03A1',\n\trho: '\\u03C1',\n\trhov: '\\u03F1',\n\tRightAngleBracket: '\\u27E9',\n\tRightArrow: '\\u2192',\n\tRightarrow: '\\u21D2',\n\trightarrow: '\\u2192',\n\tRightArrowBar: '\\u21E5',\n\tRightArrowLeftArrow: '\\u21C4',\n\trightarrowtail: '\\u21A3',\n\tRightCeiling: '\\u2309',\n\tRightDoubleBracket: '\\u27E7',\n\tRightDownTeeVector: '\\u295D',\n\tRightDownVector: '\\u21C2',\n\tRightDownVectorBar: '\\u2955',\n\tRightFloor: '\\u230B',\n\trightharpoondown: '\\u21C1',\n\trightharpoonup: '\\u21C0',\n\trightleftarrows: '\\u21C4',\n\trightleftharpoons: '\\u21CC',\n\trightrightarrows: '\\u21C9',\n\trightsquigarrow: '\\u219D',\n\tRightTee: '\\u22A2',\n\tRightTeeArrow: '\\u21A6',\n\tRightTeeVector: '\\u295B',\n\trightthreetimes: '\\u22CC',\n\tRightTriangle: '\\u22B3',\n\tRightTriangleBar: '\\u29D0',\n\tRightTriangleEqual: '\\u22B5',\n\tRightUpDownVector: '\\u294F',\n\tRightUpTeeVector: '\\u295C',\n\tRightUpVector: '\\u21BE',\n\tRightUpVectorBar: '\\u2954',\n\tRightVector: '\\u21C0',\n\tRightVectorBar: '\\u2953',\n\tring: '\\u02DA',\n\trisingdotseq: '\\u2253',\n\trlarr: '\\u21C4',\n\trlhar: '\\u21CC',\n\trlm: '\\u200F',\n\trmoust: '\\u23B1',\n\trmoustache: '\\u23B1',\n\trnmid: '\\u2AEE',\n\troang: '\\u27ED',\n\troarr: '\\u21FE',\n\trobrk: '\\u27E7',\n\tropar: '\\u2986',\n\tRopf: '\\u211D',\n\tropf: '\\uD835\\uDD63',\n\troplus: '\\u2A2E',\n\trotimes: '\\u2A35',\n\tRoundImplies: '\\u2970',\n\trpar: '\\u0029',\n\trpargt: '\\u2994',\n\trppolint: '\\u2A12',\n\trrarr: '\\u21C9',\n\tRrightarrow: '\\u21DB',\n\trsaquo: '\\u203A',\n\tRscr: '\\u211B',\n\trscr: '\\uD835\\uDCC7',\n\tRsh: '\\u21B1',\n\trsh: '\\u21B1',\n\trsqb: '\\u005D',\n\trsquo: '\\u2019',\n\trsquor: '\\u2019',\n\trthree: '\\u22CC',\n\trtimes: '\\u22CA',\n\trtri: '\\u25B9',\n\trtrie: '\\u22B5',\n\trtrif: '\\u25B8',\n\trtriltri: '\\u29CE',\n\tRuleDelayed: '\\u29F4',\n\truluhar: '\\u2968',\n\trx: '\\u211E',\n\tSacute: '\\u015A',\n\tsacute: '\\u015B',\n\tsbquo: '\\u201A',\n\tSc: '\\u2ABC',\n\tsc: '\\u227B',\n\tscap: '\\u2AB8',\n\tScaron: '\\u0160',\n\tscaron: '\\u0161',\n\tsccue: '\\u227D',\n\tscE: '\\u2AB4',\n\tsce: '\\u2AB0',\n\tScedil: '\\u015E',\n\tscedil: '\\u015F',\n\tScirc: '\\u015C',\n\tscirc: '\\u015D',\n\tscnap: '\\u2ABA',\n\tscnE: '\\u2AB6',\n\tscnsim: '\\u22E9',\n\tscpolint: '\\u2A13',\n\tscsim: '\\u227F',\n\tScy: '\\u0421',\n\tscy: '\\u0441',\n\tsdot: '\\u22C5',\n\tsdotb: '\\u22A1',\n\tsdote: '\\u2A66',\n\tsearhk: '\\u2925',\n\tseArr: '\\u21D8',\n\tsearr: '\\u2198',\n\tsearrow: '\\u2198',\n\tsect: '\\u00A7',\n\tsemi: '\\u003B',\n\tseswar: '\\u2929',\n\tsetminus: '\\u2216',\n\tsetmn: '\\u2216',\n\tsext: '\\u2736',\n\tSfr: '\\uD835\\uDD16',\n\tsfr: '\\uD835\\uDD30',\n\tsfrown: '\\u2322',\n\tsharp: '\\u266F',\n\tSHCHcy: '\\u0429',\n\tshchcy: '\\u0449',\n\tSHcy: '\\u0428',\n\tshcy: '\\u0448',\n\tShortDownArrow: '\\u2193',\n\tShortLeftArrow: '\\u2190',\n\tshortmid: '\\u2223',\n\tshortparallel: '\\u2225',\n\tShortRightArrow: '\\u2192',\n\tShortUpArrow: '\\u2191',\n\tshy: '\\u00AD',\n\tSigma: '\\u03A3',\n\tsigma: '\\u03C3',\n\tsigmaf: '\\u03C2',\n\tsigmav: '\\u03C2',\n\tsim: '\\u223C',\n\tsimdot: '\\u2A6A',\n\tsime: '\\u2243',\n\tsimeq: '\\u2243',\n\tsimg: '\\u2A9E',\n\tsimgE: '\\u2AA0',\n\tsiml: '\\u2A9D',\n\tsimlE: '\\u2A9F',\n\tsimne: '\\u2246',\n\tsimplus: '\\u2A24',\n\tsimrarr: '\\u2972',\n\tslarr: '\\u2190',\n\tSmallCircle: '\\u2218',\n\tsmallsetminus: '\\u2216',\n\tsmashp: '\\u2A33',\n\tsmeparsl: '\\u29E4',\n\tsmid: '\\u2223',\n\tsmile: '\\u2323',\n\tsmt: '\\u2AAA',\n\tsmte: '\\u2AAC',\n\tsmtes: '\\u2AAC\\uFE00',\n\tSOFTcy: '\\u042C',\n\tsoftcy: '\\u044C',\n\tsol: '\\u002F',\n\tsolb: '\\u29C4',\n\tsolbar: '\\u233F',\n\tSopf: '\\uD835\\uDD4A',\n\tsopf: '\\uD835\\uDD64',\n\tspades: '\\u2660',\n\tspadesuit: '\\u2660',\n\tspar: '\\u2225',\n\tsqcap: '\\u2293',\n\tsqcaps: '\\u2293\\uFE00',\n\tsqcup: '\\u2294',\n\tsqcups: '\\u2294\\uFE00',\n\tSqrt: '\\u221A',\n\tsqsub: '\\u228F',\n\tsqsube: '\\u2291',\n\tsqsubset: '\\u228F',\n\tsqsubseteq: '\\u2291',\n\tsqsup: '\\u2290',\n\tsqsupe: '\\u2292',\n\tsqsupset: '\\u2290',\n\tsqsupseteq: '\\u2292',\n\tsqu: '\\u25A1',\n\tSquare: '\\u25A1',\n\tsquare: '\\u25A1',\n\tSquareIntersection: '\\u2293',\n\tSquareSubset: '\\u228F',\n\tSquareSubsetEqual: '\\u2291',\n\tSquareSuperset: '\\u2290',\n\tSquareSupersetEqual: '\\u2292',\n\tSquareUnion: '\\u2294',\n\tsquarf: '\\u25AA',\n\tsquf: '\\u25AA',\n\tsrarr: '\\u2192',\n\tSscr: '\\uD835\\uDCAE',\n\tsscr: '\\uD835\\uDCC8',\n\tssetmn: '\\u2216',\n\tssmile: '\\u2323',\n\tsstarf: '\\u22C6',\n\tStar: '\\u22C6',\n\tstar: '\\u2606',\n\tstarf: '\\u2605',\n\tstraightepsilon: '\\u03F5',\n\tstraightphi: '\\u03D5',\n\tstrns: '\\u00AF',\n\tSub: '\\u22D0',\n\tsub: '\\u2282',\n\tsubdot: '\\u2ABD',\n\tsubE: '\\u2AC5',\n\tsube: '\\u2286',\n\tsubedot: '\\u2AC3',\n\tsubmult: '\\u2AC1',\n\tsubnE: '\\u2ACB',\n\tsubne: '\\u228A',\n\tsubplus: '\\u2ABF',\n\tsubrarr: '\\u2979',\n\tSubset: '\\u22D0',\n\tsubset: '\\u2282',\n\tsubseteq: '\\u2286',\n\tsubseteqq: '\\u2AC5',\n\tSubsetEqual: '\\u2286',\n\tsubsetneq: '\\u228A',\n\tsubsetneqq: '\\u2ACB',\n\tsubsim: '\\u2AC7',\n\tsubsub: '\\u2AD5',\n\tsubsup: '\\u2AD3',\n\tsucc: '\\u227B',\n\tsuccapprox: '\\u2AB8',\n\tsucccurlyeq: '\\u227D',\n\tSucceeds: '\\u227B',\n\tSucceedsEqual: '\\u2AB0',\n\tSucceedsSlantEqual: '\\u227D',\n\tSucceedsTilde: '\\u227F',\n\tsucceq: '\\u2AB0',\n\tsuccnapprox: '\\u2ABA',\n\tsuccneqq: '\\u2AB6',\n\tsuccnsim: '\\u22E9',\n\tsuccsim: '\\u227F',\n\tSuchThat: '\\u220B',\n\tSum: '\\u2211',\n\tsum: '\\u2211',\n\tsung: '\\u266A',\n\tSup: '\\u22D1',\n\tsup: '\\u2283',\n\tsup1: '\\u00B9',\n\tsup2: '\\u00B2',\n\tsup3: '\\u00B3',\n\tsupdot: '\\u2ABE',\n\tsupdsub: '\\u2AD8',\n\tsupE: '\\u2AC6',\n\tsupe: '\\u2287',\n\tsupedot: '\\u2AC4',\n\tSuperset: '\\u2283',\n\tSupersetEqual: '\\u2287',\n\tsuphsol: '\\u27C9',\n\tsuphsub: '\\u2AD7',\n\tsuplarr: '\\u297B',\n\tsupmult: '\\u2AC2',\n\tsupnE: '\\u2ACC',\n\tsupne: '\\u228B',\n\tsupplus: '\\u2AC0',\n\tSupset: '\\u22D1',\n\tsupset: '\\u2283',\n\tsupseteq: '\\u2287',\n\tsupseteqq: '\\u2AC6',\n\tsupsetneq: '\\u228B',\n\tsupsetneqq: '\\u2ACC',\n\tsupsim: '\\u2AC8',\n\tsupsub: '\\u2AD4',\n\tsupsup: '\\u2AD6',\n\tswarhk: '\\u2926',\n\tswArr: '\\u21D9',\n\tswarr: '\\u2199',\n\tswarrow: '\\u2199',\n\tswnwar: '\\u292A',\n\tszlig: '\\u00DF',\n\tTab: '\\u0009',\n\ttarget: '\\u2316',\n\tTau: '\\u03A4',\n\ttau: '\\u03C4',\n\ttbrk: '\\u23B4',\n\tTcaron: '\\u0164',\n\ttcaron: '\\u0165',\n\tTcedil: '\\u0162',\n\ttcedil: '\\u0163',\n\tTcy: '\\u0422',\n\ttcy: '\\u0442',\n\ttdot: '\\u20DB',\n\ttelrec: '\\u2315',\n\tTfr: '\\uD835\\uDD17',\n\ttfr: '\\uD835\\uDD31',\n\tthere4: '\\u2234',\n\tTherefore: '\\u2234',\n\ttherefore: '\\u2234',\n\tTheta: '\\u0398',\n\ttheta: '\\u03B8',\n\tthetasym: '\\u03D1',\n\tthetav: '\\u03D1',\n\tthickapprox: '\\u2248',\n\tthicksim: '\\u223C',\n\tThickSpace: '\\u205F\\u200A',\n\tthinsp: '\\u2009',\n\tThinSpace: '\\u2009',\n\tthkap: '\\u2248',\n\tthksim: '\\u223C',\n\tTHORN: '\\u00DE',\n\tthorn: '\\u00FE',\n\tTilde: '\\u223C',\n\ttilde: '\\u02DC',\n\tTildeEqual: '\\u2243',\n\tTildeFullEqual: '\\u2245',\n\tTildeTilde: '\\u2248',\n\ttimes: '\\u00D7',\n\ttimesb: '\\u22A0',\n\ttimesbar: '\\u2A31',\n\ttimesd: '\\u2A30',\n\ttint: '\\u222D',\n\ttoea: '\\u2928',\n\ttop: '\\u22A4',\n\ttopbot: '\\u2336',\n\ttopcir: '\\u2AF1',\n\tTopf: '\\uD835\\uDD4B',\n\ttopf: '\\uD835\\uDD65',\n\ttopfork: '\\u2ADA',\n\ttosa: '\\u2929',\n\ttprime: '\\u2034',\n\tTRADE: '\\u2122',\n\ttrade: '\\u2122',\n\ttriangle: '\\u25B5',\n\ttriangledown: '\\u25BF',\n\ttriangleleft: '\\u25C3',\n\ttrianglelefteq: '\\u22B4',\n\ttriangleq: '\\u225C',\n\ttriangleright: '\\u25B9',\n\ttrianglerighteq: '\\u22B5',\n\ttridot: '\\u25EC',\n\ttrie: '\\u225C',\n\ttriminus: '\\u2A3A',\n\tTripleDot: '\\u20DB',\n\ttriplus: '\\u2A39',\n\ttrisb: '\\u29CD',\n\ttritime: '\\u2A3B',\n\ttrpezium: '\\u23E2',\n\tTscr: '\\uD835\\uDCAF',\n\ttscr: '\\uD835\\uDCC9',\n\tTScy: '\\u0426',\n\ttscy: '\\u0446',\n\tTSHcy: '\\u040B',\n\ttshcy: '\\u045B',\n\tTstrok: '\\u0166',\n\ttstrok: '\\u0167',\n\ttwixt: '\\u226C',\n\ttwoheadleftarrow: '\\u219E',\n\ttwoheadrightarrow: '\\u21A0',\n\tUacute: '\\u00DA',\n\tuacute: '\\u00FA',\n\tUarr: '\\u219F',\n\tuArr: '\\u21D1',\n\tuarr: '\\u2191',\n\tUarrocir: '\\u2949',\n\tUbrcy: '\\u040E',\n\tubrcy: '\\u045E',\n\tUbreve: '\\u016C',\n\tubreve: '\\u016D',\n\tUcirc: '\\u00DB',\n\tucirc: '\\u00FB',\n\tUcy: '\\u0423',\n\tucy: '\\u0443',\n\tudarr: '\\u21C5',\n\tUdblac: '\\u0170',\n\tudblac: '\\u0171',\n\tudhar: '\\u296E',\n\tufisht: '\\u297E',\n\tUfr: '\\uD835\\uDD18',\n\tufr: '\\uD835\\uDD32',\n\tUgrave: '\\u00D9',\n\tugrave: '\\u00F9',\n\tuHar: '\\u2963',\n\tuharl: '\\u21BF',\n\tuharr: '\\u21BE',\n\tuhblk: '\\u2580',\n\tulcorn: '\\u231C',\n\tulcorner: '\\u231C',\n\tulcrop: '\\u230F',\n\tultri: '\\u25F8',\n\tUmacr: '\\u016A',\n\tumacr: '\\u016B',\n\tuml: '\\u00A8',\n\tUnderBar: '\\u005F',\n\tUnderBrace: '\\u23DF',\n\tUnderBracket: '\\u23B5',\n\tUnderParenthesis: '\\u23DD',\n\tUnion: '\\u22C3',\n\tUnionPlus: '\\u228E',\n\tUogon: '\\u0172',\n\tuogon: '\\u0173',\n\tUopf: '\\uD835\\uDD4C',\n\tuopf: '\\uD835\\uDD66',\n\tUpArrow: '\\u2191',\n\tUparrow: '\\u21D1',\n\tuparrow: '\\u2191',\n\tUpArrowBar: '\\u2912',\n\tUpArrowDownArrow: '\\u21C5',\n\tUpDownArrow: '\\u2195',\n\tUpdownarrow: '\\u21D5',\n\tupdownarrow: '\\u2195',\n\tUpEquilibrium: '\\u296E',\n\tupharpoonleft: '\\u21BF',\n\tupharpoonright: '\\u21BE',\n\tuplus: '\\u228E',\n\tUpperLeftArrow: '\\u2196',\n\tUpperRightArrow: '\\u2197',\n\tUpsi: '\\u03D2',\n\tupsi: '\\u03C5',\n\tupsih: '\\u03D2',\n\tUpsilon: '\\u03A5',\n\tupsilon: '\\u03C5',\n\tUpTee: '\\u22A5',\n\tUpTeeArrow: '\\u21A5',\n\tupuparrows: '\\u21C8',\n\turcorn: '\\u231D',\n\turcorner: '\\u231D',\n\turcrop: '\\u230E',\n\tUring: '\\u016E',\n\turing: '\\u016F',\n\turtri: '\\u25F9',\n\tUscr: '\\uD835\\uDCB0',\n\tuscr: '\\uD835\\uDCCA',\n\tutdot: '\\u22F0',\n\tUtilde: '\\u0168',\n\tutilde: '\\u0169',\n\tutri: '\\u25B5',\n\tutrif: '\\u25B4',\n\tuuarr: '\\u21C8',\n\tUuml: '\\u00DC',\n\tuuml: '\\u00FC',\n\tuwangle: '\\u29A7',\n\tvangrt: '\\u299C',\n\tvarepsilon: '\\u03F5',\n\tvarkappa: '\\u03F0',\n\tvarnothing: '\\u2205',\n\tvarphi: '\\u03D5',\n\tvarpi: '\\u03D6',\n\tvarpropto: '\\u221D',\n\tvArr: '\\u21D5',\n\tvarr: '\\u2195',\n\tvarrho: '\\u03F1',\n\tvarsigma: '\\u03C2',\n\tvarsubsetneq: '\\u228A\\uFE00',\n\tvarsubsetneqq: '\\u2ACB\\uFE00',\n\tvarsupsetneq: '\\u228B\\uFE00',\n\tvarsupsetneqq: '\\u2ACC\\uFE00',\n\tvartheta: '\\u03D1',\n\tvartriangleleft: '\\u22B2',\n\tvartriangleright: '\\u22B3',\n\tVbar: '\\u2AEB',\n\tvBar: '\\u2AE8',\n\tvBarv: '\\u2AE9',\n\tVcy: '\\u0412',\n\tvcy: '\\u0432',\n\tVDash: '\\u22AB',\n\tVdash: '\\u22A9',\n\tvDash: '\\u22A8',\n\tvdash: '\\u22A2',\n\tVdashl: '\\u2AE6',\n\tVee: '\\u22C1',\n\tvee: '\\u2228',\n\tveebar: '\\u22BB',\n\tveeeq: '\\u225A',\n\tvellip: '\\u22EE',\n\tVerbar: '\\u2016',\n\tverbar: '\\u007C',\n\tVert: '\\u2016',\n\tvert: '\\u007C',\n\tVerticalBar: '\\u2223',\n\tVerticalLine: '\\u007C',\n\tVerticalSeparator: '\\u2758',\n\tVerticalTilde: '\\u2240',\n\tVeryThinSpace: '\\u200A',\n\tVfr: '\\uD835\\uDD19',\n\tvfr: '\\uD835\\uDD33',\n\tvltri: '\\u22B2',\n\tvnsub: '\\u2282\\u20D2',\n\tvnsup: '\\u2283\\u20D2',\n\tVopf: '\\uD835\\uDD4D',\n\tvopf: '\\uD835\\uDD67',\n\tvprop: '\\u221D',\n\tvrtri: '\\u22B3',\n\tVscr: '\\uD835\\uDCB1',\n\tvscr: '\\uD835\\uDCCB',\n\tvsubnE: '\\u2ACB\\uFE00',\n\tvsubne: '\\u228A\\uFE00',\n\tvsupnE: '\\u2ACC\\uFE00',\n\tvsupne: '\\u228B\\uFE00',\n\tVvdash: '\\u22AA',\n\tvzigzag: '\\u299A',\n\tWcirc: '\\u0174',\n\twcirc: '\\u0175',\n\twedbar: '\\u2A5F',\n\tWedge: '\\u22C0',\n\twedge: '\\u2227',\n\twedgeq: '\\u2259',\n\tweierp: '\\u2118',\n\tWfr: '\\uD835\\uDD1A',\n\twfr: '\\uD835\\uDD34',\n\tWopf: '\\uD835\\uDD4E',\n\twopf: '\\uD835\\uDD68',\n\twp: '\\u2118',\n\twr: '\\u2240',\n\twreath: '\\u2240',\n\tWscr: '\\uD835\\uDCB2',\n\twscr: '\\uD835\\uDCCC',\n\txcap: '\\u22C2',\n\txcirc: '\\u25EF',\n\txcup: '\\u22C3',\n\txdtri: '\\u25BD',\n\tXfr: '\\uD835\\uDD1B',\n\txfr: '\\uD835\\uDD35',\n\txhArr: '\\u27FA',\n\txharr: '\\u27F7',\n\tXi: '\\u039E',\n\txi: '\\u03BE',\n\txlArr: '\\u27F8',\n\txlarr: '\\u27F5',\n\txmap: '\\u27FC',\n\txnis: '\\u22FB',\n\txodot: '\\u2A00',\n\tXopf: '\\uD835\\uDD4F',\n\txopf: '\\uD835\\uDD69',\n\txoplus: '\\u2A01',\n\txotime: '\\u2A02',\n\txrArr: '\\u27F9',\n\txrarr: '\\u27F6',\n\tXscr: '\\uD835\\uDCB3',\n\txscr: '\\uD835\\uDCCD',\n\txsqcup: '\\u2A06',\n\txuplus: '\\u2A04',\n\txutri: '\\u25B3',\n\txvee: '\\u22C1',\n\txwedge: '\\u22C0',\n\tYacute: '\\u00DD',\n\tyacute: '\\u00FD',\n\tYAcy: '\\u042F',\n\tyacy: '\\u044F',\n\tYcirc: '\\u0176',\n\tycirc: '\\u0177',\n\tYcy: '\\u042B',\n\tycy: '\\u044B',\n\tyen: '\\u00A5',\n\tYfr: '\\uD835\\uDD1C',\n\tyfr: '\\uD835\\uDD36',\n\tYIcy: '\\u0407',\n\tyicy: '\\u0457',\n\tYopf: '\\uD835\\uDD50',\n\tyopf: '\\uD835\\uDD6A',\n\tYscr: '\\uD835\\uDCB4',\n\tyscr: '\\uD835\\uDCCE',\n\tYUcy: '\\u042E',\n\tyucy: '\\u044E',\n\tYuml: '\\u0178',\n\tyuml: '\\u00FF',\n\tZacute: '\\u0179',\n\tzacute: '\\u017A',\n\tZcaron: '\\u017D',\n\tzcaron: '\\u017E',\n\tZcy: '\\u0417',\n\tzcy: '\\u0437',\n\tZdot: '\\u017B',\n\tzdot: '\\u017C',\n\tzeetrf: '\\u2128',\n\tZeroWidthSpace: '\\u200B',\n\tZeta: '\\u0396',\n\tzeta: '\\u03B6',\n\tZfr: '\\u2128',\n\tzfr: '\\uD835\\uDD37',\n\tZHcy: '\\u0416',\n\tzhcy: '\\u0436',\n\tzigrarr: '\\u21DD',\n\tZopf: '\\u2124',\n\tzopf: '\\uD835\\uDD6B',\n\tZscr: '\\uD835\\uDCB5',\n\tzscr: '\\uD835\\uDCCF',\n\tzwj: '\\u200D',\n\tzwnj: '\\u200C',\n});\n\n/**\n * @deprecated use `HTML_ENTITIES` instead\n * @see HTML_ENTITIES\n */\nexports.entityMap = exports.HTML_ENTITIES;\n", "var NAMESPACE = require(\"./conventions\").NAMESPACE;\n\n//[4]   \tNameStartChar\t   ::=   \t\":\" | [A-Z] | \"_\" | [a-z] | [#xC0-#xD6] | [#xD8-#xF6] | [#xF8-#x2FF] | [#x370-#x37D] | [#x37F-#x1FFF] | [#x200C-#x200D] | [#x2070-#x218F] | [#x2C00-#x2FEF] | [#x3001-#xD7FF] | [#xF900-#xFDCF] | [#xFDF0-#xFFFD] | [#x10000-#xEFFFF]\n//[4a]   \tNameChar\t   ::=   \tNameStartChar | \"-\" | \".\" | [0-9] | #xB7 | [#x0300-#x036F] | [#x203F-#x2040]\n//[5]   \tName\t   ::=   \tNameStartChar (NameChar)*\nvar nameStartChar = /[A-Z_a-z\\xC0-\\xD6\\xD8-\\xF6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD]///\\u10000-\\uEFFFF\nvar nameChar = new RegExp(\"[\\\\-\\\\.0-9\"+nameStartChar.source.slice(1,-1)+\"\\\\u00B7\\\\u0300-\\\\u036F\\\\u203F-\\\\u2040]\");\nvar tagNamePattern = new RegExp('^'+nameStartChar.source+nameChar.source+'*(?:\\:'+nameStartChar.source+nameChar.source+'*)?$');\n//var tagNamePattern = /^[a-zA-Z_][\\w\\-\\.]*(?:\\:[a-zA-Z_][\\w\\-\\.]*)?$/\n//var handlers = 'resolveEntity,getExternalSubset,characters,endDocument,endElement,endPrefixMapping,ignorableWhitespace,processingInstruction,setDocumentLocator,skippedEntity,startDocument,startElement,startPrefixMapping,notationDecl,unparsedEntityDecl,error,fatalError,warning,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,comment,endCDATA,endDTD,endEntity,startCDATA,startDTD,startEntity'.split(',')\n\n//S_TAG,\tS_ATTR,\tS_EQ,\tS_ATTR_NOQUOT_VALUE\n//S_ATTR_SPACE,\tS_ATTR_END,\tS_TAG_SPACE, S_TAG_CLOSE\nvar S_TAG = 0;//tag name offerring\nvar S_ATTR = 1;//attr name offerring\nvar S_ATTR_SPACE=2;//attr name end and space offer\nvar S_EQ = 3;//=space?\nvar S_ATTR_NOQUOT_VALUE = 4;//attr value(no quot value only)\nvar S_ATTR_END = 5;//attr value end and no space(quot end)\nvar S_TAG_SPACE = 6;//(attr value end || tag end ) && (space offer)\nvar S_TAG_CLOSE = 7;//closed el<el />\n\n/**\n * Creates an error that will not be caught by XMLReader aka the SAX parser.\n *\n * @param {string} message\n * @param {any?} locator Optional, can provide details about the location in the source\n * @constructor\n */\nfunction ParseError(message, locator) {\n\tthis.message = message\n\tthis.locator = locator\n\tif(Error.captureStackTrace) Error.captureStackTrace(this, ParseError);\n}\nParseError.prototype = new Error();\nParseError.prototype.name = ParseError.name\n\nfunction XMLReader(){\n\n}\n\nXMLReader.prototype = {\n\tparse:function(source,defaultNSMap,entityMap){\n\t\tvar domBuilder = this.domBuilder;\n\t\tdomBuilder.startDocument();\n\t\t_copy(defaultNSMap ,defaultNSMap = {})\n\t\tparse(source,defaultNSMap,entityMap,\n\t\t\t\tdomBuilder,this.errorHandler);\n\t\tdomBuilder.endDocument();\n\t}\n}\nfunction parse(source,defaultNSMapCopy,entityMap,domBuilder,errorHandler){\n\tfunction fixedFromCharCode(code) {\n\t\t// String.prototype.fromCharCode does not supports\n\t\t// > 2 bytes unicode chars directly\n\t\tif (code > 0xffff) {\n\t\t\tcode -= 0x10000;\n\t\t\tvar surrogate1 = 0xd800 + (code >> 10)\n\t\t\t\t, surrogate2 = 0xdc00 + (code & 0x3ff);\n\n\t\t\treturn String.fromCharCode(surrogate1, surrogate2);\n\t\t} else {\n\t\t\treturn String.fromCharCode(code);\n\t\t}\n\t}\n\tfunction entityReplacer(a){\n\t\tvar k = a.slice(1,-1);\n\t\tif (Object.hasOwnProperty.call(entityMap, k)) {\n\t\t\treturn entityMap[k];\n\t\t}else if(k.charAt(0) === '#'){\n\t\t\treturn fixedFromCharCode(parseInt(k.substr(1).replace('x','0x')))\n\t\t}else{\n\t\t\terrorHandler.error('entity not found:'+a);\n\t\t\treturn a;\n\t\t}\n\t}\n\tfunction appendText(end){//has some bugs\n\t\tif(end>start){\n\t\t\tvar xt = source.substring(start,end).replace(/&#?\\w+;/g,entityReplacer);\n\t\t\tlocator&&position(start);\n\t\t\tdomBuilder.characters(xt,0,end-start);\n\t\t\tstart = end\n\t\t}\n\t}\n\tfunction position(p,m){\n\t\twhile(p>=lineEnd && (m = linePattern.exec(source))){\n\t\t\tlineStart = m.index;\n\t\t\tlineEnd = lineStart + m[0].length;\n\t\t\tlocator.lineNumber++;\n\t\t\t//console.log('line++:',locator,startPos,endPos)\n\t\t}\n\t\tlocator.columnNumber = p-lineStart+1;\n\t}\n\tvar lineStart = 0;\n\tvar lineEnd = 0;\n\tvar linePattern = /.*(?:\\r\\n?|\\n)|.*$/g\n\tvar locator = domBuilder.locator;\n\n\tvar parseStack = [{currentNSMap:defaultNSMapCopy}]\n\tvar closeMap = {};\n\tvar start = 0;\n\twhile(true){\n\t\ttry{\n\t\t\tvar tagStart = source.indexOf('<',start);\n\t\t\tif(tagStart<0){\n\t\t\t\tif(!source.substr(start).match(/^\\s*$/)){\n\t\t\t\t\tvar doc = domBuilder.doc;\n\t    \t\t\tvar text = doc.createTextNode(source.substr(start));\n\t    \t\t\tdoc.appendChild(text);\n\t    \t\t\tdomBuilder.currentElement = text;\n\t\t\t\t}\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif(tagStart>start){\n\t\t\t\tappendText(tagStart);\n\t\t\t}\n\t\t\tswitch(source.charAt(tagStart+1)){\n\t\t\tcase '/':\n\t\t\t\tvar end = source.indexOf('>',tagStart+3);\n\t\t\t\tvar tagName = source.substring(tagStart + 2, end).replace(/[ \\t\\n\\r]+$/g, '');\n\t\t\t\tvar config = parseStack.pop();\n\t\t\t\tif(end<0){\n\n\t        \t\ttagName = source.substring(tagStart+2).replace(/[\\s<].*/,'');\n\t        \t\terrorHandler.error(\"end tag name: \"+tagName+' is not complete:'+config.tagName);\n\t        \t\tend = tagStart+1+tagName.length;\n\t        \t}else if(tagName.match(/\\s</)){\n\t        \t\ttagName = tagName.replace(/[\\s<].*/,'');\n\t        \t\terrorHandler.error(\"end tag name: \"+tagName+' maybe not complete');\n\t        \t\tend = tagStart+1+tagName.length;\n\t\t\t\t}\n\t\t\t\tvar localNSMap = config.localNSMap;\n\t\t\t\tvar endMatch = config.tagName == tagName;\n\t\t\t\tvar endIgnoreCaseMach = endMatch || config.tagName&&config.tagName.toLowerCase() == tagName.toLowerCase()\n\t\t        if(endIgnoreCaseMach){\n\t\t        \tdomBuilder.endElement(config.uri,config.localName,tagName);\n\t\t\t\t\tif(localNSMap){\n\t\t\t\t\t\tfor (var prefix in localNSMap) {\n\t\t\t\t\t\t\tif (Object.prototype.hasOwnProperty.call(localNSMap, prefix)) {\n\t\t\t\t\t\t\t\tdomBuilder.endPrefixMapping(prefix);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif(!endMatch){\n\t\t            \terrorHandler.fatalError(\"end tag name: \"+tagName+' is not match the current start tagName:'+config.tagName ); // No known test case\n\t\t\t\t\t}\n\t\t        }else{\n\t\t        \tparseStack.push(config)\n\t\t        }\n\n\t\t\t\tend++;\n\t\t\t\tbreak;\n\t\t\t\t// end elment\n\t\t\tcase '?':// <?...?>\n\t\t\t\tlocator&&position(tagStart);\n\t\t\t\tend = parseInstruction(source,tagStart,domBuilder);\n\t\t\t\tbreak;\n\t\t\tcase '!':// <!doctype,<![CDATA,<!--\n\t\t\t\tlocator&&position(tagStart);\n\t\t\t\tend = parseDCC(source,tagStart,domBuilder,errorHandler);\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tlocator&&position(tagStart);\n\t\t\t\tvar el = new ElementAttributes();\n\t\t\t\tvar currentNSMap = parseStack[parseStack.length-1].currentNSMap;\n\t\t\t\t//elStartEnd\n\t\t\t\tvar end = parseElementStartPart(source,tagStart,el,currentNSMap,entityReplacer,errorHandler);\n\t\t\t\tvar len = el.length;\n\n\n\t\t\t\tif(!el.closed && fixSelfClosed(source,end,el.tagName,closeMap)){\n\t\t\t\t\tel.closed = true;\n\t\t\t\t\tif(!entityMap.nbsp){\n\t\t\t\t\t\terrorHandler.warning('unclosed xml attribute');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif(locator && len){\n\t\t\t\t\tvar locator2 = copyLocator(locator,{});\n\t\t\t\t\t//try{//attribute position fixed\n\t\t\t\t\tfor(var i = 0;i<len;i++){\n\t\t\t\t\t\tvar a = el[i];\n\t\t\t\t\t\tposition(a.offset);\n\t\t\t\t\t\ta.locator = copyLocator(locator,{});\n\t\t\t\t\t}\n\t\t\t\t\tdomBuilder.locator = locator2\n\t\t\t\t\tif(appendElement(el,domBuilder,currentNSMap)){\n\t\t\t\t\t\tparseStack.push(el)\n\t\t\t\t\t}\n\t\t\t\t\tdomBuilder.locator = locator;\n\t\t\t\t}else{\n\t\t\t\t\tif(appendElement(el,domBuilder,currentNSMap)){\n\t\t\t\t\t\tparseStack.push(el)\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (NAMESPACE.isHTML(el.uri) && !el.closed) {\n\t\t\t\t\tend = parseHtmlSpecialContent(source,end,el.tagName,entityReplacer,domBuilder)\n\t\t\t\t} else {\n\t\t\t\t\tend++;\n\t\t\t\t}\n\t\t\t}\n\t\t}catch(e){\n\t\t\tif (e instanceof ParseError) {\n\t\t\t\tthrow e;\n\t\t\t}\n\t\t\terrorHandler.error('element parse error: '+e)\n\t\t\tend = -1;\n\t\t}\n\t\tif(end>start){\n\t\t\tstart = end;\n\t\t}else{\n\t\t\t//TODO: sax\n\t\t\tappendText(Math.max(tagStart,start)+1);\n\t\t}\n\t}\n}\nfunction copyLocator(f,t){\n\tt.lineNumber = f.lineNumber;\n\tt.columnNumber = f.columnNumber;\n\treturn t;\n}\n\n/**\n * @see #appendElement(source,elStartEnd,el,selfClosed,entityReplacer,domBuilder,parseStack);\n * @return end of the elementStartPart(end of elementEndPart for selfClosed el)\n */\nfunction parseElementStartPart(source,start,el,currentNSMap,entityReplacer,errorHandler){\n\n\t/**\n\t * @param {string} qname\n\t * @param {string} value\n\t * @param {number} startIndex\n\t */\n\tfunction addAttribute(qname, value, startIndex) {\n\t\tif (el.attributeNames.hasOwnProperty(qname)) {\n\t\t\terrorHandler.fatalError('Attribute ' + qname + ' redefined')\n\t\t}\n\t\tel.addValue(\n\t\t\tqname,\n\t\t\t// @see https://www.w3.org/TR/xml/#AVNormalize\n\t\t\t// since the xmldom sax parser does not \"interpret\" DTD the following is not implemented:\n\t\t\t// - recursive replacement of (DTD) entity references\n\t\t\t// - trimming and collapsing multiple spaces into a single one for attributes that are not of type CDATA\n\t\t\tvalue.replace(/[\\t\\n\\r]/g, ' ').replace(/&#?\\w+;/g, entityReplacer),\n\t\t\tstartIndex\n\t\t)\n\t}\n\tvar attrName;\n\tvar value;\n\tvar p = ++start;\n\tvar s = S_TAG;//status\n\twhile(true){\n\t\tvar c = source.charAt(p);\n\t\tswitch(c){\n\t\tcase '=':\n\t\t\tif(s === S_ATTR){//attrName\n\t\t\t\tattrName = source.slice(start,p);\n\t\t\t\ts = S_EQ;\n\t\t\t}else if(s === S_ATTR_SPACE){\n\t\t\t\ts = S_EQ;\n\t\t\t}else{\n\t\t\t\t//fatalError: equal must after attrName or space after attrName\n\t\t\t\tthrow new Error('attribute equal must after attrName'); // No known test case\n\t\t\t}\n\t\t\tbreak;\n\t\tcase '\\'':\n\t\tcase '\"':\n\t\t\tif(s === S_EQ || s === S_ATTR //|| s == S_ATTR_SPACE\n\t\t\t\t){//equal\n\t\t\t\tif(s === S_ATTR){\n\t\t\t\t\terrorHandler.warning('attribute value must after \"=\"')\n\t\t\t\t\tattrName = source.slice(start,p)\n\t\t\t\t}\n\t\t\t\tstart = p+1;\n\t\t\t\tp = source.indexOf(c,start)\n\t\t\t\tif(p>0){\n\t\t\t\t\tvalue = source.slice(start, p);\n\t\t\t\t\taddAttribute(attrName, value, start-1);\n\t\t\t\t\ts = S_ATTR_END;\n\t\t\t\t}else{\n\t\t\t\t\t//fatalError: no end quot match\n\t\t\t\t\tthrow new Error('attribute value no end \\''+c+'\\' match');\n\t\t\t\t}\n\t\t\t}else if(s == S_ATTR_NOQUOT_VALUE){\n\t\t\t\tvalue = source.slice(start, p);\n\t\t\t\taddAttribute(attrName, value, start);\n\t\t\t\terrorHandler.warning('attribute \"'+attrName+'\" missed start quot('+c+')!!');\n\t\t\t\tstart = p+1;\n\t\t\t\ts = S_ATTR_END\n\t\t\t}else{\n\t\t\t\t//fatalError: no equal before\n\t\t\t\tthrow new Error('attribute value must after \"=\"'); // No known test case\n\t\t\t}\n\t\t\tbreak;\n\t\tcase '/':\n\t\t\tswitch(s){\n\t\t\tcase S_TAG:\n\t\t\t\tel.setTagName(source.slice(start,p));\n\t\t\tcase S_ATTR_END:\n\t\t\tcase S_TAG_SPACE:\n\t\t\tcase S_TAG_CLOSE:\n\t\t\t\ts =S_TAG_CLOSE;\n\t\t\t\tel.closed = true;\n\t\t\tcase S_ATTR_NOQUOT_VALUE:\n\t\t\tcase S_ATTR:\n\t\t\t\tbreak;\n\t\t\t\tcase S_ATTR_SPACE:\n\t\t\t\t\tel.closed = true;\n\t\t\t\tbreak;\n\t\t\t//case S_EQ:\n\t\t\tdefault:\n\t\t\t\tthrow new Error(\"attribute invalid close char('/')\") // No known test case\n\t\t\t}\n\t\t\tbreak;\n\t\tcase ''://end document\n\t\t\terrorHandler.error('unexpected end of input');\n\t\t\tif(s == S_TAG){\n\t\t\t\tel.setTagName(source.slice(start,p));\n\t\t\t}\n\t\t\treturn p;\n\t\tcase '>':\n\t\t\tswitch(s){\n\t\t\tcase S_TAG:\n\t\t\t\tel.setTagName(source.slice(start,p));\n\t\t\tcase S_ATTR_END:\n\t\t\tcase S_TAG_SPACE:\n\t\t\tcase S_TAG_CLOSE:\n\t\t\t\tbreak;//normal\n\t\t\tcase S_ATTR_NOQUOT_VALUE://Compatible state\n\t\t\tcase S_ATTR:\n\t\t\t\tvalue = source.slice(start,p);\n\t\t\t\tif(value.slice(-1) === '/'){\n\t\t\t\t\tel.closed  = true;\n\t\t\t\t\tvalue = value.slice(0,-1)\n\t\t\t\t}\n\t\t\tcase S_ATTR_SPACE:\n\t\t\t\tif(s === S_ATTR_SPACE){\n\t\t\t\t\tvalue = attrName;\n\t\t\t\t}\n\t\t\t\tif(s == S_ATTR_NOQUOT_VALUE){\n\t\t\t\t\terrorHandler.warning('attribute \"'+value+'\" missed quot(\")!');\n\t\t\t\t\taddAttribute(attrName, value, start)\n\t\t\t\t}else{\n\t\t\t\t\tif(!NAMESPACE.isHTML(currentNSMap['']) || !value.match(/^(?:disabled|checked|selected)$/i)){\n\t\t\t\t\t\terrorHandler.warning('attribute \"'+value+'\" missed value!! \"'+value+'\" instead!!')\n\t\t\t\t\t}\n\t\t\t\t\taddAttribute(value, value, start)\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase S_EQ:\n\t\t\t\tthrow new Error('attribute value missed!!');\n\t\t\t}\n//\t\t\tconsole.log(tagName,tagNamePattern,tagNamePattern.test(tagName))\n\t\t\treturn p;\n\t\t/*xml space '\\x20' | #x9 | #xD | #xA; */\n\t\tcase '\\u0080':\n\t\t\tc = ' ';\n\t\tdefault:\n\t\t\tif(c<= ' '){//space\n\t\t\t\tswitch(s){\n\t\t\t\tcase S_TAG:\n\t\t\t\t\tel.setTagName(source.slice(start,p));//tagName\n\t\t\t\t\ts = S_TAG_SPACE;\n\t\t\t\t\tbreak;\n\t\t\t\tcase S_ATTR:\n\t\t\t\t\tattrName = source.slice(start,p)\n\t\t\t\t\ts = S_ATTR_SPACE;\n\t\t\t\t\tbreak;\n\t\t\t\tcase S_ATTR_NOQUOT_VALUE:\n\t\t\t\t\tvar value = source.slice(start, p);\n\t\t\t\t\terrorHandler.warning('attribute \"'+value+'\" missed quot(\")!!');\n\t\t\t\t\taddAttribute(attrName, value, start)\n\t\t\t\tcase S_ATTR_END:\n\t\t\t\t\ts = S_TAG_SPACE;\n\t\t\t\t\tbreak;\n\t\t\t\t//case S_TAG_SPACE:\n\t\t\t\t//case S_EQ:\n\t\t\t\t//case S_ATTR_SPACE:\n\t\t\t\t//\tvoid();break;\n\t\t\t\t//case S_TAG_CLOSE:\n\t\t\t\t\t//ignore warning\n\t\t\t\t}\n\t\t\t}else{//not space\n//S_TAG,\tS_ATTR,\tS_EQ,\tS_ATTR_NOQUOT_VALUE\n//S_ATTR_SPACE,\tS_ATTR_END,\tS_TAG_SPACE, S_TAG_CLOSE\n\t\t\t\tswitch(s){\n\t\t\t\t//case S_TAG:void();break;\n\t\t\t\t//case S_ATTR:void();break;\n\t\t\t\t//case S_ATTR_NOQUOT_VALUE:void();break;\n\t\t\t\tcase S_ATTR_SPACE:\n\t\t\t\t\tvar tagName =  el.tagName;\n\t\t\t\t\tif (!NAMESPACE.isHTML(currentNSMap['']) || !attrName.match(/^(?:disabled|checked|selected)$/i)) {\n\t\t\t\t\t\terrorHandler.warning('attribute \"'+attrName+'\" missed value!! \"'+attrName+'\" instead2!!')\n\t\t\t\t\t}\n\t\t\t\t\taddAttribute(attrName, attrName, start);\n\t\t\t\t\tstart = p;\n\t\t\t\t\ts = S_ATTR;\n\t\t\t\t\tbreak;\n\t\t\t\tcase S_ATTR_END:\n\t\t\t\t\terrorHandler.warning('attribute space is required\"'+attrName+'\"!!')\n\t\t\t\tcase S_TAG_SPACE:\n\t\t\t\t\ts = S_ATTR;\n\t\t\t\t\tstart = p;\n\t\t\t\t\tbreak;\n\t\t\t\tcase S_EQ:\n\t\t\t\t\ts = S_ATTR_NOQUOT_VALUE;\n\t\t\t\t\tstart = p;\n\t\t\t\t\tbreak;\n\t\t\t\tcase S_TAG_CLOSE:\n\t\t\t\t\tthrow new Error(\"elements closed character '/' and '>' must be connected to\");\n\t\t\t\t}\n\t\t\t}\n\t\t}//end outer switch\n\t\t//console.log('p++',p)\n\t\tp++;\n\t}\n}\n/**\n * @return true if has new namespace define\n */\nfunction appendElement(el,domBuilder,currentNSMap){\n\tvar tagName = el.tagName;\n\tvar localNSMap = null;\n\t//var currentNSMap = parseStack[parseStack.length-1].currentNSMap;\n\tvar i = el.length;\n\twhile(i--){\n\t\tvar a = el[i];\n\t\tvar qName = a.qName;\n\t\tvar value = a.value;\n\t\tvar nsp = qName.indexOf(':');\n\t\tif(nsp>0){\n\t\t\tvar prefix = a.prefix = qName.slice(0,nsp);\n\t\t\tvar localName = qName.slice(nsp+1);\n\t\t\tvar nsPrefix = prefix === 'xmlns' && localName\n\t\t}else{\n\t\t\tlocalName = qName;\n\t\t\tprefix = null\n\t\t\tnsPrefix = qName === 'xmlns' && ''\n\t\t}\n\t\t//can not set prefix,because prefix !== ''\n\t\ta.localName = localName ;\n\t\t//prefix == null for no ns prefix attribute\n\t\tif(nsPrefix !== false){//hack!!\n\t\t\tif(localNSMap == null){\n\t\t\t\tlocalNSMap = {}\n\t\t\t\t//console.log(currentNSMap,0)\n\t\t\t\t_copy(currentNSMap,currentNSMap={})\n\t\t\t\t//console.log(currentNSMap,1)\n\t\t\t}\n\t\t\tcurrentNSMap[nsPrefix] = localNSMap[nsPrefix] = value;\n\t\t\ta.uri = NAMESPACE.XMLNS\n\t\t\tdomBuilder.startPrefixMapping(nsPrefix, value)\n\t\t}\n\t}\n\tvar i = el.length;\n\twhile(i--){\n\t\ta = el[i];\n\t\tvar prefix = a.prefix;\n\t\tif(prefix){//no prefix attribute has no namespace\n\t\t\tif(prefix === 'xml'){\n\t\t\t\ta.uri = NAMESPACE.XML;\n\t\t\t}if(prefix !== 'xmlns'){\n\t\t\t\ta.uri = currentNSMap[prefix || '']\n\n\t\t\t\t//{console.log('###'+a.qName,domBuilder.locator.systemId+'',currentNSMap,a.uri)}\n\t\t\t}\n\t\t}\n\t}\n\tvar nsp = tagName.indexOf(':');\n\tif(nsp>0){\n\t\tprefix = el.prefix = tagName.slice(0,nsp);\n\t\tlocalName = el.localName = tagName.slice(nsp+1);\n\t}else{\n\t\tprefix = null;//important!!\n\t\tlocalName = el.localName = tagName;\n\t}\n\t//no prefix element has default namespace\n\tvar ns = el.uri = currentNSMap[prefix || ''];\n\tdomBuilder.startElement(ns,localName,tagName,el);\n\t//endPrefixMapping and startPrefixMapping have not any help for dom builder\n\t//localNSMap = null\n\tif(el.closed){\n\t\tdomBuilder.endElement(ns,localName,tagName);\n\t\tif(localNSMap){\n\t\t\tfor (prefix in localNSMap) {\n\t\t\t\tif (Object.prototype.hasOwnProperty.call(localNSMap, prefix)) {\n\t\t\t\t\tdomBuilder.endPrefixMapping(prefix);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}else{\n\t\tel.currentNSMap = currentNSMap;\n\t\tel.localNSMap = localNSMap;\n\t\t//parseStack.push(el);\n\t\treturn true;\n\t}\n}\nfunction parseHtmlSpecialContent(source,elStartEnd,tagName,entityReplacer,domBuilder){\n\tif(/^(?:script|textarea)$/i.test(tagName)){\n\t\tvar elEndStart =  source.indexOf('</'+tagName+'>',elStartEnd);\n\t\tvar text = source.substring(elStartEnd+1,elEndStart);\n\t\tif(/[&<]/.test(text)){\n\t\t\tif(/^script$/i.test(tagName)){\n\t\t\t\t//if(!/\\]\\]>/.test(text)){\n\t\t\t\t\t//lexHandler.startCDATA();\n\t\t\t\t\tdomBuilder.characters(text,0,text.length);\n\t\t\t\t\t//lexHandler.endCDATA();\n\t\t\t\t\treturn elEndStart;\n\t\t\t\t//}\n\t\t\t}//}else{//text area\n\t\t\t\ttext = text.replace(/&#?\\w+;/g,entityReplacer);\n\t\t\t\tdomBuilder.characters(text,0,text.length);\n\t\t\t\treturn elEndStart;\n\t\t\t//}\n\n\t\t}\n\t}\n\treturn elStartEnd+1;\n}\nfunction fixSelfClosed(source,elStartEnd,tagName,closeMap){\n\t//if(tagName in closeMap){\n\tvar pos = closeMap[tagName];\n\tif(pos == null){\n\t\t//console.log(tagName)\n\t\tpos =  source.lastIndexOf('</'+tagName+'>')\n\t\tif(pos<elStartEnd){//\n\t\t\tpos = source.lastIndexOf('</'+tagName)\n\t\t}\n\t\tcloseMap[tagName] =pos\n\t}\n\treturn pos<elStartEnd;\n\t//}\n}\n\nfunction _copy (source, target) {\n\tfor (var n in source) {\n\t\tif (Object.prototype.hasOwnProperty.call(source, n)) {\n\t\t\ttarget[n] = source[n];\n\t\t}\n\t}\n}\n\nfunction parseDCC(source,start,domBuilder,errorHandler){//sure start with '<!'\n\tvar next= source.charAt(start+2)\n\tswitch(next){\n\tcase '-':\n\t\tif(source.charAt(start + 3) === '-'){\n\t\t\tvar end = source.indexOf('-->',start+4);\n\t\t\t//append comment source.substring(4,end)//<!--\n\t\t\tif(end>start){\n\t\t\t\tdomBuilder.comment(source,start+4,end-start-4);\n\t\t\t\treturn end+3;\n\t\t\t}else{\n\t\t\t\terrorHandler.error(\"Unclosed comment\");\n\t\t\t\treturn -1;\n\t\t\t}\n\t\t}else{\n\t\t\t//error\n\t\t\treturn -1;\n\t\t}\n\tdefault:\n\t\tif(source.substr(start+3,6) == 'CDATA['){\n\t\t\tvar end = source.indexOf(']]>',start+9);\n\t\t\tdomBuilder.startCDATA();\n\t\t\tdomBuilder.characters(source,start+9,end-start-9);\n\t\t\tdomBuilder.endCDATA()\n\t\t\treturn end+3;\n\t\t}\n\t\t//<!DOCTYPE\n\t\t//startDTD(java.lang.String name, java.lang.String publicId, java.lang.String systemId)\n\t\tvar matchs = split(source,start);\n\t\tvar len = matchs.length;\n\t\tif(len>1 && /!doctype/i.test(matchs[0][0])){\n\t\t\tvar name = matchs[1][0];\n\t\t\tvar pubid = false;\n\t\t\tvar sysid = false;\n\t\t\tif(len>3){\n\t\t\t\tif(/^public$/i.test(matchs[2][0])){\n\t\t\t\t\tpubid = matchs[3][0];\n\t\t\t\t\tsysid = len>4 && matchs[4][0];\n\t\t\t\t}else if(/^system$/i.test(matchs[2][0])){\n\t\t\t\t\tsysid = matchs[3][0];\n\t\t\t\t}\n\t\t\t}\n\t\t\tvar lastMatch = matchs[len-1]\n\t\t\tdomBuilder.startDTD(name, pubid, sysid);\n\t\t\tdomBuilder.endDTD();\n\n\t\t\treturn lastMatch.index+lastMatch[0].length\n\t\t}\n\t}\n\treturn -1;\n}\n\n\n\nfunction parseInstruction(source,start,domBuilder){\n\tvar end = source.indexOf('?>',start);\n\tif(end){\n\t\tvar match = source.substring(start,end).match(/^<\\?(\\S*)\\s*([\\s\\S]*?)\\s*$/);\n\t\tif(match){\n\t\t\tvar len = match[0].length;\n\t\t\tdomBuilder.processingInstruction(match[1], match[2]) ;\n\t\t\treturn end+2;\n\t\t}else{//error\n\t\t\treturn -1;\n\t\t}\n\t}\n\treturn -1;\n}\n\nfunction ElementAttributes(){\n\tthis.attributeNames = {}\n}\nElementAttributes.prototype = {\n\tsetTagName:function(tagName){\n\t\tif(!tagNamePattern.test(tagName)){\n\t\t\tthrow new Error('invalid tagName:'+tagName)\n\t\t}\n\t\tthis.tagName = tagName\n\t},\n\taddValue:function(qName, value, offset) {\n\t\tif(!tagNamePattern.test(qName)){\n\t\t\tthrow new Error('invalid attribute:'+qName)\n\t\t}\n\t\tthis.attributeNames[qName] = this.length;\n\t\tthis[this.length++] = {qName:qName,value:value,offset:offset}\n\t},\n\tlength:0,\n\tgetLocalName:function(i){return this[i].localName},\n\tgetLocator:function(i){return this[i].locator},\n\tgetQName:function(i){return this[i].qName},\n\tgetURI:function(i){return this[i].uri},\n\tgetValue:function(i){return this[i].value}\n//\t,getIndex:function(uri, localName)){\n//\t\tif(localName){\n//\n//\t\t}else{\n//\t\t\tvar qName = uri\n//\t\t}\n//\t},\n//\tgetValue:function(){return this.getValue(this.getIndex.apply(this,arguments))},\n//\tgetType:function(uri,localName){}\n//\tgetType:function(i){},\n}\n\n\n\nfunction split(source,start){\n\tvar match;\n\tvar buf = [];\n\tvar reg = /'[^']+'|\"[^\"]+\"|[^\\s<>\\/=]+=?|(\\/?\\s*>|<)/g;\n\treg.lastIndex = start;\n\treg.exec(source);//skip <\n\twhile(match = reg.exec(source)){\n\t\tbuf.push(match);\n\t\tif(match[1])return buf;\n\t}\n}\n\nexports.XMLReader = XMLReader;\nexports.ParseError = ParseError;\n", "var conventions = require(\"./conventions\");\nvar dom = require('./dom')\nvar entities = require('./entities');\nvar sax = require('./sax');\n\nvar DOMImplementation = dom.DOMImplementation;\n\nvar NAMESPACE = conventions.NAMESPACE;\n\nvar ParseError = sax.ParseError;\nvar XMLReader = sax.XMLReader;\n\n/**\n * Normalizes line ending according to https://www.w3.org/TR/xml11/#sec-line-ends:\n *\n * > XML parsed entities are often stored in computer files which,\n * > for editing convenience, are organized into lines.\n * > These lines are typically separated by some combination\n * > of the characters CARRIAGE RETURN (#xD) and LINE FEED (#xA).\n * >\n * > To simplify the tasks of applications, the XML processor must behave\n * > as if it normalized all line breaks in external parsed entities (including the document entity)\n * > on input, before parsing, by translating all of the following to a single #xA character:\n * >\n * > 1. the two-character sequence #xD #xA\n * > 2. the two-character sequence #xD #x85\n * > 3. the single character #x85\n * > 4. the single character #x2028\n * > 5. any #xD character that is not immediately followed by #xA or #x85.\n *\n * @param {string} input\n * @returns {string}\n */\nfunction normalizeLineEndings(input) {\n\treturn input\n\t\t.replace(/\\r[\\n\\u0085]/g, '\\n')\n\t\t.replace(/[\\r\\u0085\\u2028]/g, '\\n')\n}\n\n/**\n * @typedef Locator\n * @property {number} [columnNumber]\n * @property {number} [lineNumber]\n */\n\n/**\n * @typedef DOMParserOptions\n * @property {DOMHandler} [domBuilder]\n * @property {Function} [errorHandler]\n * @property {(string) => string} [normalizeLineEndings] used to replace line endings before parsing\n * \t\t\t\t\t\tdefaults to `normalizeLineEndings`\n * @property {Locator} [locator]\n * @property {Record<string, string>} [xmlns]\n *\n * @see normalizeLineEndings\n */\n\n/**\n * The DOMParser interface provides the ability to parse XML or HTML source code\n * from a string into a DOM `Document`.\n *\n * _xmldom is different from the spec in that it allows an `options` parameter,\n * to override the default behavior._\n *\n * @param {DOMParserOptions} [options]\n * @constructor\n *\n * @see https://developer.mozilla.org/en-US/docs/Web/API/DOMParser\n * @see https://html.spec.whatwg.org/multipage/dynamic-markup-insertion.html#dom-parsing-and-serialization\n */\nfunction DOMParser(options){\n\tthis.options = options ||{locator:{}};\n}\n\nDOMParser.prototype.parseFromString = function(source,mimeType){\n\tvar options = this.options;\n\tvar sax =  new XMLReader();\n\tvar domBuilder = options.domBuilder || new DOMHandler();//contentHandler and LexicalHandler\n\tvar errorHandler = options.errorHandler;\n\tvar locator = options.locator;\n\tvar defaultNSMap = options.xmlns||{};\n\tvar isHTML = /\\/x?html?$/.test(mimeType);//mimeType.toLowerCase().indexOf('html') > -1;\n  \tvar entityMap = isHTML ? entities.HTML_ENTITIES : entities.XML_ENTITIES;\n\tif(locator){\n\t\tdomBuilder.setDocumentLocator(locator)\n\t}\n\n\tsax.errorHandler = buildErrorHandler(errorHandler,domBuilder,locator);\n\tsax.domBuilder = options.domBuilder || domBuilder;\n\tif(isHTML){\n\t\tdefaultNSMap[''] = NAMESPACE.HTML;\n\t}\n\tdefaultNSMap.xml = defaultNSMap.xml || NAMESPACE.XML;\n\tvar normalize = options.normalizeLineEndings || normalizeLineEndings;\n\tif (source && typeof source === 'string') {\n\t\tsax.parse(\n\t\t\tnormalize(source),\n\t\t\tdefaultNSMap,\n\t\t\tentityMap\n\t\t)\n\t} else {\n\t\tsax.errorHandler.error('invalid doc source')\n\t}\n\treturn domBuilder.doc;\n}\nfunction buildErrorHandler(errorImpl,domBuilder,locator){\n\tif(!errorImpl){\n\t\tif(domBuilder instanceof DOMHandler){\n\t\t\treturn domBuilder;\n\t\t}\n\t\terrorImpl = domBuilder ;\n\t}\n\tvar errorHandler = {}\n\tvar isCallback = errorImpl instanceof Function;\n\tlocator = locator||{}\n\tfunction build(key){\n\t\tvar fn = errorImpl[key];\n\t\tif(!fn && isCallback){\n\t\t\tfn = errorImpl.length == 2?function(msg){errorImpl(key,msg)}:errorImpl;\n\t\t}\n\t\terrorHandler[key] = fn && function(msg){\n\t\t\tfn('[xmldom '+key+']\\t'+msg+_locator(locator));\n\t\t}||function(){};\n\t}\n\tbuild('warning');\n\tbuild('error');\n\tbuild('fatalError');\n\treturn errorHandler;\n}\n\n//console.log('#\\n\\n\\n\\n\\n\\n\\n####')\n/**\n * +ContentHandler+ErrorHandler\n * +LexicalHandler+EntityResolver2\n * -DeclHandler-DTDHandler\n *\n * DefaultHandler:EntityResolver, DTDHandler, ContentHandler, ErrorHandler\n * DefaultHandler2:DefaultHandler,LexicalHandler, DeclHandler, EntityResolver2\n * @link http://www.saxproject.org/apidoc/org/xml/sax/helpers/DefaultHandler.html\n */\nfunction DOMHandler() {\n    this.cdata = false;\n}\nfunction position(locator,node){\n\tnode.lineNumber = locator.lineNumber;\n\tnode.columnNumber = locator.columnNumber;\n}\n/**\n * @see org.xml.sax.ContentHandler#startDocument\n * @link http://www.saxproject.org/apidoc/org/xml/sax/ContentHandler.html\n */\nDOMHandler.prototype = {\n\tstartDocument : function() {\n    \tthis.doc = new DOMImplementation().createDocument(null, null, null);\n    \tif (this.locator) {\n        \tthis.doc.documentURI = this.locator.systemId;\n    \t}\n\t},\n\tstartElement:function(namespaceURI, localName, qName, attrs) {\n\t\tvar doc = this.doc;\n\t    var el = doc.createElementNS(namespaceURI, qName||localName);\n\t    var len = attrs.length;\n\t    appendElement(this, el);\n\t    this.currentElement = el;\n\n\t\tthis.locator && position(this.locator,el)\n\t    for (var i = 0 ; i < len; i++) {\n\t        var namespaceURI = attrs.getURI(i);\n\t        var value = attrs.getValue(i);\n\t        var qName = attrs.getQName(i);\n\t\t\tvar attr = doc.createAttributeNS(namespaceURI, qName);\n\t\t\tthis.locator &&position(attrs.getLocator(i),attr);\n\t\t\tattr.value = attr.nodeValue = value;\n\t\t\tel.setAttributeNode(attr)\n\t    }\n\t},\n\tendElement:function(namespaceURI, localName, qName) {\n\t\tvar current = this.currentElement\n\t\tvar tagName = current.tagName;\n\t\tthis.currentElement = current.parentNode;\n\t},\n\tstartPrefixMapping:function(prefix, uri) {\n\t},\n\tendPrefixMapping:function(prefix) {\n\t},\n\tprocessingInstruction:function(target, data) {\n\t    var ins = this.doc.createProcessingInstruction(target, data);\n\t    this.locator && position(this.locator,ins)\n\t    appendElement(this, ins);\n\t},\n\tignorableWhitespace:function(ch, start, length) {\n\t},\n\tcharacters:function(chars, start, length) {\n\t\tchars = _toString.apply(this,arguments)\n\t\t//console.log(chars)\n\t\tif(chars){\n\t\t\tif (this.cdata) {\n\t\t\t\tvar charNode = this.doc.createCDATASection(chars);\n\t\t\t} else {\n\t\t\t\tvar charNode = this.doc.createTextNode(chars);\n\t\t\t}\n\t\t\tif(this.currentElement){\n\t\t\t\tthis.currentElement.appendChild(charNode);\n\t\t\t}else if(/^\\s*$/.test(chars)){\n\t\t\t\tthis.doc.appendChild(charNode);\n\t\t\t\t//process xml\n\t\t\t}\n\t\t\tthis.locator && position(this.locator,charNode)\n\t\t}\n\t},\n\tskippedEntity:function(name) {\n\t},\n\tendDocument:function() {\n\t\tthis.doc.normalize();\n\t},\n\tsetDocumentLocator:function (locator) {\n\t    if(this.locator = locator){// && !('lineNumber' in locator)){\n\t    \tlocator.lineNumber = 0;\n\t    }\n\t},\n\t//LexicalHandler\n\tcomment:function(chars, start, length) {\n\t\tchars = _toString.apply(this,arguments)\n\t    var comm = this.doc.createComment(chars);\n\t    this.locator && position(this.locator,comm)\n\t    appendElement(this, comm);\n\t},\n\n\tstartCDATA:function() {\n\t    //used in characters() methods\n\t    this.cdata = true;\n\t},\n\tendCDATA:function() {\n\t    this.cdata = false;\n\t},\n\n\tstartDTD:function(name, publicId, systemId) {\n\t\tvar impl = this.doc.implementation;\n\t    if (impl && impl.createDocumentType) {\n\t        var dt = impl.createDocumentType(name, publicId, systemId);\n\t        this.locator && position(this.locator,dt)\n\t        appendElement(this, dt);\n\t\t\t\t\tthis.doc.doctype = dt;\n\t    }\n\t},\n\t/**\n\t * @see org.xml.sax.ErrorHandler\n\t * @link http://www.saxproject.org/apidoc/org/xml/sax/ErrorHandler.html\n\t */\n\twarning:function(error) {\n\t\tconsole.warn('[xmldom warning]\\t'+error,_locator(this.locator));\n\t},\n\terror:function(error) {\n\t\tconsole.error('[xmldom error]\\t'+error,_locator(this.locator));\n\t},\n\tfatalError:function(error) {\n\t\tthrow new ParseError(error, this.locator);\n\t}\n}\nfunction _locator(l){\n\tif(l){\n\t\treturn '\\n@'+(l.systemId ||'')+'#[line:'+l.lineNumber+',col:'+l.columnNumber+']'\n\t}\n}\nfunction _toString(chars,start,length){\n\tif(typeof chars == 'string'){\n\t\treturn chars.substr(start,length)\n\t}else{//java sax connect width xmldom on rhino(what about: \"? && !(chars instanceof String)\")\n\t\tif(chars.length >= start+length || start){\n\t\t\treturn new java.lang.String(chars,start,length)+'';\n\t\t}\n\t\treturn chars;\n\t}\n}\n\n/*\n * @link http://www.saxproject.org/apidoc/org/xml/sax/ext/LexicalHandler.html\n * used method of org.xml.sax.ext.LexicalHandler:\n *  #comment(chars, start, length)\n *  #startCDATA()\n *  #endCDATA()\n *  #startDTD(name, publicId, systemId)\n *\n *\n * IGNORED method of org.xml.sax.ext.LexicalHandler:\n *  #endDTD()\n *  #startEntity(name)\n *  #endEntity(name)\n *\n *\n * @link http://www.saxproject.org/apidoc/org/xml/sax/ext/DeclHandler.html\n * IGNORED method of org.xml.sax.ext.DeclHandler\n * \t#attributeDecl(eName, aName, type, mode, value)\n *  #elementDecl(name, model)\n *  #externalEntityDecl(name, publicId, systemId)\n *  #internalEntityDecl(name, value)\n * @link http://www.saxproject.org/apidoc/org/xml/sax/ext/EntityResolver2.html\n * IGNORED method of org.xml.sax.EntityResolver2\n *  #resolveEntity(String name,String publicId,String baseURI,String systemId)\n *  #resolveEntity(publicId, systemId)\n *  #getExternalSubset(name, baseURI)\n * @link http://www.saxproject.org/apidoc/org/xml/sax/DTDHandler.html\n * IGNORED method of org.xml.sax.DTDHandler\n *  #notationDecl(name, publicId, systemId) {};\n *  #unparsedEntityDecl(name, publicId, systemId, notationName) {};\n */\n\"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl\".replace(/\\w+/g,function(key){\n\tDOMHandler.prototype[key] = function(){return null}\n})\n\n/* Private static helpers treated below as private instance methods, so don't need to add these to the public API; we might use a Relator to also get rid of non-standard public properties */\nfunction appendElement (hander,node) {\n    if (!hander.currentElement) {\n        hander.doc.appendChild(node);\n    } else {\n        hander.currentElement.appendChild(node);\n    }\n}//appendChild and setAttributeNS are preformance key\n\nexports.__DOMHandler = DOMHandler;\nexports.normalizeLineEndings = normalizeLineEndings;\nexports.DOMParser = DOMParser;\n", "var dom = require('./dom')\nexports.DOMImplementation = dom.DOMImplementation\nexports.XMLSerializer = dom.XMLSerializer\nexports.DOMParser = require('./dom-parser').DOMParser\n", "import { ExtensionType } from '../extensions/Extensions';\n\n/**\n * Extension for the browser environment.\n * @category environment\n * @internal\n */\nexport const browserExt = {\n    extension: {\n        type: ExtensionType.Environment,\n        name: 'browser',\n        priority: -1,\n    },\n    test: () => true,\n    load: async () =>\n    {\n        await import('./browserAll');\n    },\n};\n", "import { ExtensionType } from '../extensions/Extensions';\n\n/**\n * Extension for the webworker environment.\n * @category environment\n * @internal\n */\nexport const webworkerExt = {\n    extension: {\n        type: ExtensionType.Environment,\n        name: 'webworker',\n        priority: 0,\n    },\n    test: () => typeof self !== 'undefined' && self.WorkerGlobalScope !== undefined,\n    load: async () =>\n    {\n        await import('./webworkerAll');\n    },\n};\n", "var blendTemplateFrag = \"\\nin vec2 vTextureCoord;\\nin vec4 vColor;\\n\\nout vec4 finalColor;\\n\\nuniform float uBlend;\\n\\nuniform sampler2D uTexture;\\nuniform sampler2D uBackTexture;\\n\\n{FUNCTIONS}\\n\\nvoid main()\\n{ \\n    vec4 back = texture(uBackTexture, vTextureCoord);\\n    vec4 front = texture(uTexture, vTextureCoord);\\n    float blendedAlpha = front.a + back.a * (1.0 - front.a);\\n    \\n    {MAIN}\\n}\\n\";\n\nexport { blendTemplateFrag as default };\n//# sourceMappingURL=blend-template.frag.mjs.map\n", "var blendTemplateVert = \"in vec2 aPosition;\\nout vec2 vTextureCoord;\\nout vec2 backgroundUv;\\n\\nuniform vec4 uInputSize;\\nuniform vec4 uOutputFrame;\\nuniform vec4 uOutputTexture;\\n\\nvec4 filterVertexPosition( void )\\n{\\n    vec2 position = aPosition * uOutputFrame.zw + uOutputFrame.xy;\\n    \\n    position.x = position.x * (2.0 / uOutputTexture.x) - 1.0;\\n    position.y = position.y * (2.0*uOutputTexture.z / uOutputTexture.y) - uOutputTexture.z;\\n\\n    return vec4(position, 0.0, 1.0);\\n}\\n\\nvec2 filterTextureCoord( void )\\n{\\n    return aPosition * (uOutputFrame.zw * uInputSize.zw);\\n}\\n\\nvoid main(void)\\n{\\n    gl_Position = filterVertexPosition();\\n    vTextureCoord = filterTextureCoord();\\n}\\n\";\n\nexport { blendTemplateVert as default };\n//# sourceMappingURL=blend-template.vert.mjs.map\n", "var blendTemplate = \"\\nstruct GlobalFilterUniforms {\\n  uInputSize:vec4<f32>,\\n  uInputPixel:vec4<f32>,\\n  uInputClamp:vec4<f32>,\\n  uOutputFrame:vec4<f32>,\\n  uGlobalFrame:vec4<f32>,\\n  uOutputTexture:vec4<f32>,\\n};\\n\\nstruct BlendUniforms {\\n  uBlend:f32,\\n};\\n\\n@group(0) @binding(0) var<uniform> gfu: GlobalFilterUniforms;\\n@group(0) @binding(1) var uTexture: texture_2d<f32>;\\n@group(0) @binding(2) var uSampler : sampler;\\n@group(0) @binding(3) var uBackTexture: texture_2d<f32>;\\n\\n@group(1) @binding(0) var<uniform> blendUniforms : BlendUniforms;\\n\\n\\nstruct VSOutput {\\n    @builtin(position) position: vec4<f32>,\\n    @location(0) uv : vec2<f32>\\n  };\\n\\nfn filterVertexPosition(aPosition:vec2<f32>) -> vec4<f32>\\n{\\n    var position = aPosition * gfu.uOutputFrame.zw + gfu.uOutputFrame.xy;\\n\\n    position.x = position.x * (2.0 / gfu.uOutputTexture.x) - 1.0;\\n    position.y = position.y * (2.0*gfu.uOutputTexture.z / gfu.uOutputTexture.y) - gfu.uOutputTexture.z;\\n\\n    return vec4(position, 0.0, 1.0);\\n}\\n\\nfn filterTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>\\n{\\n    return aPosition * (gfu.uOutputFrame.zw * gfu.uInputSize.zw);\\n}\\n\\nfn globalTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>\\n{\\n  return  (aPosition.xy / gfu.uGlobalFrame.zw) + (gfu.uGlobalFrame.xy / gfu.uGlobalFrame.zw);  \\n}\\n  \\n@vertex\\nfn mainVertex(\\n  @location(0) aPosition : vec2<f32>, \\n) -> VSOutput {\\n  return VSOutput(\\n   filterVertexPosition(aPosition),\\n   filterTextureCoord(aPosition)\\n  );\\n}\\n\\n{FUNCTIONS}\\n\\n@fragment\\nfn mainFragment(\\n  @location(0) uv: vec2<f32>\\n) -> @location(0) vec4<f32> {\\n\\n\\n   var back =  textureSample(uBackTexture, uSampler, uv);\\n   var front = textureSample(uTexture, uSampler, uv);\\n   var blendedAlpha = front.a + back.a * (1.0 - front.a);\\n   \\n   var out = vec4<f32>(0.0,0.0,0.0,0.0);\\n\\n   {MAIN}\\n\\n   return out;\\n}\";\n\nexport { blendTemplate as default };\n//# sourceMappingURL=blend-template.wgsl.mjs.map\n", "import { GlProgram } from '../../rendering/renderers/gl/shader/GlProgram';\nimport { GpuProgram } from '../../rendering/renderers/gpu/shader/GpuProgram';\nimport { UniformGroup } from '../../rendering/renderers/shared/shader/UniformGroup';\nimport { Texture } from '../../rendering/renderers/shared/texture/Texture';\nimport { Filter } from '../Filter';\nimport blendTemplateFrag from './blend-template.frag';\nimport blendTemplateVert from './blend-template.vert';\nimport blendTemplate from './blend-template.wgsl';\n\n/** @internal */\nexport interface BlendModeFilterOptions\n{\n    source?: string;\n    gpu?: {\n        functions?: string;\n        main?: string;\n    }\n    gl?: {\n        functions?: string;\n        main?: string;\n    }\n}\n\n/** @internal */\nexport class BlendModeFilter extends Filter\n{\n    constructor(options: BlendModeFilterOptions)\n    {\n        const gpuOptions = options.gpu;\n\n        const gpuSource = compileBlendModeShader({ source: blendTemplate, ...gpuOptions });\n\n        const gpuProgram = GpuProgram.from({\n            vertex: {\n                source: gpuSource,\n                entryPoint: 'mainVertex',\n            },\n            fragment: {\n                source: gpuSource,\n                entryPoint: 'mainFragment',\n            },\n        });\n\n        const glOptions = options.gl;\n\n        const glSource = compileBlendModeShader({ source: blendTemplateFrag, ...glOptions });\n\n        const glProgram = GlProgram.from({\n            vertex: blendTemplateVert,\n            fragment: glSource\n        });\n\n        const uniformGroup = new UniformGroup({\n            uBlend: {\n                value: 1,\n                type: 'f32'\n            }\n        });\n\n        super({\n            gpuProgram,\n            glProgram,\n            blendRequired: true,\n            resources: {\n                blendUniforms: uniformGroup,\n                uBackTexture: Texture.EMPTY\n            }\n        });\n    }\n}\n\nfunction compileBlendModeShader(options: {source: string, functions?: string, main?: string}): string\n{\n    const { source, functions, main } = options;\n\n    return source.replace('{FUNCTIONS}', functions).replace('{MAIN}', main);\n}\n", "/**\n * A helper object containing the hsl shader code for both glsl\n * @internal\n */\nexport const hslgl = `\n\tfloat getLuminosity(vec3 c) {\n\t\treturn 0.3 * c.r + 0.59 * c.g + 0.11 * c.b;\n\t}\n\n\tvec3 setLuminosity(vec3 c, float lum) {\n\t\tfloat modLum = lum - getLuminosity(c);\n\t\tvec3 color = c.rgb + vec3(modLum);\n\n\t\t// clip back into legal range\n\t\tmodLum = getLuminosity(color);\n\t\tvec3 modLumVec = vec3(modLum);\n\n\t\tfloat cMin = min(color.r, min(color.g, color.b));\n\t\tfloat cMax = max(color.r, max(color.g, color.b));\n\n\t\tif(cMin < 0.0) {\n\t\t\tcolor = mix(modLumVec, color, modLum / (modLum - cMin));\n\t\t}\n\n\t\tif(cMax > 1.0) {\n\t\t\tcolor = mix(modLumVec, color, (1.0 - modLum) / (cMax - modLum));\n\t\t}\n\n\t\treturn color;\n\t}\n\n\tfloat getSaturation(vec3 c) {\n\t\treturn max(c.r, max(c.g, c.b)) - min(c.r, min(c.g, c.b));\n\t}\n\n\tvec3 setSaturationMinMidMax(vec3 cSorted, float s) {\n\t\tvec3 colorSorted = cSorted;\n\n\t\tif(colorSorted.z > colorSorted.x) {\n\t\t\tcolorSorted.y = (((colorSorted.y - colorSorted.x) * s) / (colorSorted.z - colorSorted.x));\n\t\t\tcolorSorted.z = s;\n\t\t}\n\t\telse {\n\t\t\tcolorSorted.y = 0.0;\n\t\t\tcolorSorted.z = 0.0;\n\t\t}\n\n\t\tcolorSorted.x = 0.0;\n\n\t\treturn colorSorted;\n\t}\n\n\tvec3 setSaturation(vec3 c, float s) {\n\t\tvec3 color = c;\n\n\t\tif(color.r <= color.g && color.r <= color.b) {\n\t\t\tif(color.g <= color.b) {\n\t\t\t\tcolor = setSaturationMinMidMax(color.rgb, s).rgb;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tcolor = setSaturationMinMidMax(color.rbg, s).rbg;\n\t\t\t}\n\t\t}\n\t\telse if(color.g <= color.r && color.g <= color.b) {\n\t\t\tif(color.r <= color.b) {\n\t\t\t\tcolor = setSaturationMinMidMax(color.grb, s).grb;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tcolor = setSaturationMinMidMax(color.gbr, s).gbr;\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\t// Using bgr for both fixes part of hue\n\t\t\tif(color.r <= color.g) {\n\t\t\t\tcolor = setSaturationMinMidMax(color.brg, s).brg;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tcolor = setSaturationMinMidMax(color.bgr, s).bgr;\n\t\t\t}\n\t\t}\n\n\t\treturn color;\n\t}\n    `;\n", "/**\n * A helper object containing the hsl shader code for wgsl\n * @internal\n */\nexport const hslgpu = `\n\tfn getLuminosity(c: vec3<f32>) -> f32\n\t{\n\t\treturn 0.3*c.r + 0.59*c.g + 0.11*c.b;\n\t}\n\n\tfn setLuminosity(c: vec3<f32>, lum: f32) -> vec3<f32>\n\t{\n\t\tvar modLum: f32 = lum - getLuminosity(c);\n\t\tvar color: vec3<f32> = c.rgb + modLum;\n\n\t\t// clip back into legal range\n\t\tmodLum = getLuminosity(color);\n\t\tlet modLumVec = vec3<f32>(modLum);\n\n\t\tlet cMin: f32 = min(color.r, min(color.g, color.b));\n\t\tlet cMax: f32 = max(color.r, max(color.g, color.b));\n\n\t\tif(cMin < 0.0)\n\t\t{\n\t\t\tcolor = mix(modLumVec, color, modLum / (modLum - cMin));\n\t\t}\n\n\t\tif(cMax > 1.0)\n\t\t{\n\t\t\tcolor = mix(modLumVec, color, (1 - modLum) / (cMax - modLum));\n\t\t}\n\n\t\treturn color;\n\t}\n\n\tfn getSaturation(c: vec3<f32>) -> f32\n\t{\n\t\treturn max(c.r, max(c.g, c.b)) - min(c.r, min(c.g, c.b));\n\t}\n\n\tfn setSaturationMinMidMax(cSorted: vec3<f32>, s: f32) -> vec3<f32>\n\t{\n\t\tvar colorSorted = cSorted;\n\n\t\tif(colorSorted.z > colorSorted.x)\n\t\t{\n\t\t\tcolorSorted.y = (((colorSorted.y - colorSorted.x) * s) / (colorSorted.z - colorSorted.x));\n\t\t\tcolorSorted.z = s;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tcolorSorted.y = 0;\n\t\t\tcolorSorted.z = 0;\n\t\t}\n\n\t\tcolorSorted.x = 0;\n\n\t\treturn colorSorted;\n\t}\n\n\tfn setSaturation(c: vec3<f32>, s: f32) -> vec3<f32>\n\t{\n\t\tvar color = c;\n\n\t\tif (color.r <= color.g && color.r <= color.b)\n\t\t{\n\t\t\tif (color.g <= color.b)\n\t\t\t{\n\t\t\t\tcolor = vec3<f32>(setSaturationMinMidMax(color.rgb, s)).rgb;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tcolor = vec3<f32>(setSaturationMinMidMax(color.rbg, s)).rbg;\n\t\t\t}\n\t\t}\n\t\telse if (color.g <= color.r && color.g <= color.b)\n\t\t{\n\t\t\tif (color.r <= color.b)\n\t\t\t{\n\t\t\t\tcolor = vec3<f32>(setSaturationMinMidMax(color.grb, s)).grb;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tcolor = vec3<f32>(setSaturationMinMidMax(color.gbr, s)).gbr;\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\t// Using bgr for both fixes part of hue\n\t\t\tif (color.r <= color.g)\n\t\t\t{\n\t\t\t\tcolor = vec3<f32>(setSaturationMinMidMax(color.brg, s)).brg;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tcolor  = vec3<f32>(setSaturationMinMidMax(color.bgr, s)).bgr;\n\t\t\t}\n\t\t}\n\n\t\treturn color;\n\t}\n\t`;\n", "import { ExtensionType } from '../extensions/Extensions';\nimport { BlendModeFilter } from '../filters/blend-modes/BlendModeFilter';\nimport { hslgl } from '../filters/blend-modes/hls/GLhls';\nimport { hslgpu } from '../filters/blend-modes/hls/GPUhls';\n\nimport type { ExtensionMetadata } from '../extensions/Extensions';\n\n/**\n * The final color has the hue and saturation of the top color, while using the luminosity of the bottom color.\n * The effect preserves gray levels and can be used to colorize the foreground.\n *\n * Available as `container.blendMode = 'color'` after importing `pixi.js/advanced-blend-modes`.\n * @example\n * import 'pixi.js/advanced-blend-modes';\n * import { Sprite } from 'pixi.js';\n *\n * const sprite = Sprite.from('something.png');\n * sprite.blendMode = 'color'\n * @category filters\n * @noInheritDoc\n */\nexport class ColorBlend extends BlendModeFilter\n{\n    /** @ignore */\n    public static extension: ExtensionMetadata = {\n        name: 'color',\n        type: ExtensionType.BlendMode\n    };\n\n    constructor()\n    {\n        super({\n            gl: {\n                functions: `\n                ${hslgl}\n\n                vec3 blendColor(vec3 base, vec3 blend,  float opacity)\n                {\n                    return (setLuminosity(blend, getLuminosity(base)) * opacity + base * (1.0 - opacity));\n                }\n                `,\n                main: `\n                finalColor = vec4(blendColor(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;\n                `\n            },\n            gpu: {\n                functions: `\n                ${hslgpu}\n\n                fn blendColorOpacity(base:vec3<f32>,  blend:vec3<f32>,  opacity:f32) -> vec3<f32>\n                {\n                    return (setLuminosity(blend, getLuminosity(base)) * opacity + base * (1.0 - opacity));\n                }\n                `,\n                main: `\n                out = vec4<f32>(blendColorOpacity(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;\n                `\n            }\n        });\n    }\n}\n", "import { ExtensionType } from '../extensions/Extensions';\nimport { BlendModeFilter } from '../filters/blend-modes/BlendModeFilter';\n\nimport type { ExtensionMetadata } from '../extensions/Extensions';\n\n/**\n * The final color is the result of inverting the bottom color, dividing the value by the top color,\n * and inverting that value. A white foreground leads to no change.\n * A foreground with the inverse color of the backdrop leads to a black final image.\n * This blend mode is similar to multiply, but the foreground need only be as dark as the inverse\n * of the backdrop to make the final image black.\n *\n * Available as `container.blendMode = 'color-burn'` after importing `pixi.js/advanced-blend-modes`.\n * @example\n * import 'pixi.js/advanced-blend-modes';\n * import { Sprite } from 'pixi.js';\n *\n * const sprite = Sprite.from('something.png');\n * sprite.blendMode = 'color-burn'\n * @category filters\n * @noInheritDoc\n */\nexport class ColorBurnBlend extends BlendModeFilter\n{\n    /** @ignore */\n    public static extension: ExtensionMetadata = {\n        name: 'color-burn',\n        type: ExtensionType.BlendMode\n    };\n\n    constructor()\n    {\n        super({\n            gl: {\n                functions: `\n                float colorBurn(float base, float blend)\n                {\n                    return max((1.0 - ((1.0 - base) / blend)), 0.0);\n                }\n\n                vec3 blendColorBurn(vec3 base, vec3 blend, float opacity)\n                {\n                    vec3 blended = vec3(\n                        colorBurn(base.r, blend.r),\n                        colorBurn(base.g, blend.g),\n                        colorBurn(base.b, blend.b)\n                    );\n\n                    return (blended * opacity + base * (1.0 - opacity));\n                }\n            `,\n                main: `\n                finalColor = vec4(blendColorBurn(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;\n            `\n            },\n            gpu: {\n                functions: `\n                fn colorBurn(base:f32, blend:f32) -> f32\n                {\n                    return max((1.0-((1.0-base)/blend)),0.0);\n                }\n\n                fn blendColorBurn(base: vec3<f32>, blend: vec3<f32>, opacity: f32) -> vec3<f32>\n                {\n                    let blended = vec3<f32>(\n                        colorBurn(base.r, blend.r),\n                        colorBurn(base.g, blend.g),\n                        colorBurn(base.b, blend.b)\n                    );\n\n                    return (blended * opacity + base * (1.0 - opacity));\n                }\n            `,\n                main: `\n                out = vec4<f32>(blendColorBurn(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;\n            `\n            }\n        });\n    }\n}\n", "/* eslint-disable max-len */\n\nimport { ExtensionType } from '../extensions/Extensions';\nimport { BlendModeFilter } from '../filters/blend-modes/BlendModeFilter';\n\nimport type { ExtensionMetadata } from '../extensions/Extensions';\n\n/**\n * The final color is the result of dividing the bottom color by the inverse of the top color.\n * A black foreground leads to no change.\n * A foreground with the inverse color of the backdrop leads to a fully lit color.\n * This blend mode is similar to screen, but the foreground need only be as light as the inverse of the backdrop to create a fully lit color.\n *\n * Available as `container.blendMode = 'color-dodge'` after importing `pixi.js/advanced-blend-modes`.\n * @example\n * import 'pixi.js/advanced-blend-modes';\n * import { Sprite } from 'pixi.js';\n *\n * const sprite = Sprite.from('something.png');\n * sprite.blendMode = 'color-dodge'\n * @category filters\n * @noInheritDoc\n */\nexport class ColorDodgeBlend extends BlendModeFilter\n{\n    /** @ignore */\n    public static extension: ExtensionMetadata = {\n        name: 'color-dodge',\n        type: ExtensionType.BlendMode\n    };\n\n    constructor()\n    {\n        super({\n            gl: {\n                functions: `\n                float colorDodge(float base, float blend)\n                {\n                    return base / (1.0 - blend);\n                }\n\n                vec3 blendColorDodge(vec3 base, vec3 blend, float opacity)\n                {\n                    vec3 blended = vec3(\n                        colorDodge(base.r, blend.r),\n                        colorDodge(base.g, blend.g),\n                        colorDodge(base.b, blend.b)\n                    );\n\n                    return (blended * opacity + base * (1.0 - opacity));\n                }\n                `,\n                main: `\n                finalColor = vec4(blendColorDodge(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;\n                `\n            },\n            gpu: {\n                functions: `\n                fn colorDodge(base: f32, blend: f32) -> f32\n                {\n                    return base / (1.0 - blend);\n                }\n\n                fn blendColorDodge(base: vec3<f32>, blend: vec3<f32>, opacity: f32) -> vec3<f32>\n                {\n                    let blended = vec3<f32>(\n                        colorDodge(base.r, blend.r),\n                        colorDodge(base.g, blend.g),\n                        colorDodge(base.b, blend.b)\n                    );\n\n                    return (blended * opacity + base * (1.0 - opacity));\n                }\n                `,\n                main: `\n                    out = vec4<f32>(blendColorDodge(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;\n                `,\n            }\n        });\n    }\n}\n", "import { ExtensionType } from '../extensions/Extensions';\nimport { BlendModeFilter } from '../filters/blend-modes/BlendModeFilter';\n\nimport type { ExtensionMetadata } from '../extensions/Extensions';\n\n/**\n * The final color is composed of the darkest values of each color channel.\n *\n * Available as `container.blendMode = 'darken'` after importing `pixi.js/advanced-blend-modes`.\n * @example\n * import 'pixi.js/advanced-blend-modes';\n * import { Sprite } from 'pixi.js';\n *\n * const sprite = Sprite.from('something.png');\n * sprite.blendMode = 'darken'\n * @category filters\n * @noInheritDoc\n */\nexport class DarkenBlend extends BlendModeFilter\n{\n    /** @ignore */\n    public static extension: ExtensionMetadata = {\n        name: 'darken',\n        type: ExtensionType.BlendMode\n    };\n\n    constructor()\n    {\n        super({\n            gl: {\n                functions: `\n                vec3 blendDarken(vec3 base, vec3 blend, float opacity)\n                {\n                    return (min(base, blend) * opacity + base * (1.0 - opacity));\n                }\n                `,\n                main: `\n                finalColor = vec4(blendDarken(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;\n                `\n            },\n            gpu: {\n                functions: `\n                fn blendDarken(base:vec3<f32>,  blend:vec3<f32>,  opacity:f32) -> vec3<f32>\n                {\n                    return (min(blend,base) * opacity + base * (1.0 - opacity));\n                }\n                `,\n                main: `\n                out = vec4<f32>(blendDarken(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;\n                `\n            }\n        });\n    }\n}\n", "import { ExtensionType } from '../extensions/Extensions';\nimport { BlendModeFilter } from '../filters/blend-modes/BlendModeFilter';\n\nimport type { ExtensionMetadata } from '../extensions/Extensions';\n\n/**\n * The final color is the result of subtracting the darker of the two colors from the lighter one.\n * black layer has no effect, while a white layer inverts the other layer's color.\n *\n * Available as `container.blendMode = 'difference'` after importing `pixi.js/advanced-blend-modes`.\n * @example\n * import 'pixi.js/advanced-blend-modes';\n * import { Sprite } from 'pixi.js';\n *\n * const sprite = Sprite.from('something.png');\n * sprite.blendMode = 'difference'\n * @category filters\n * @noInheritDoc\n */\nexport class DifferenceBlend extends BlendModeFilter\n{\n    /** @ignore */\n    public static extension: ExtensionMetadata = {\n        name: 'difference',\n        type: ExtensionType.BlendMode\n    };\n\n    constructor()\n    {\n        super({\n            gl: {\n                functions: `\n                vec3 blendDifference(vec3 base, vec3 blend,  float opacity)\n                {\n                    return (abs(blend - base) * opacity + base * (1.0 - opacity));\n                }\n            `,\n                main: `\n                finalColor = vec4(blendDifference(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;\n            `\n            },\n            gpu: {\n                functions: `\n                fn blendDifference(base:vec3<f32>,  blend:vec3<f32>,  opacity:f32) -> vec3<f32>\n                {\n                    return (abs(blend - base) * opacity + base * (1.0 - opacity));\n                }\n            `,\n                main: `\n                out = vec4<f32>(blendDifference(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;\n            `\n            }\n        });\n    }\n}\n", "import { ExtensionType } from '../extensions/Extensions';\nimport { BlendModeFilter } from '../filters/blend-modes/BlendModeFilter';\n\nimport type { ExtensionMetadata } from '../extensions/Extensions';\n\n/**\n * The Divide blend mode divides the RGB channel values of the bottom layer by those of the top layer.\n * The darker the top layer, the brighter the bottom layer will appear.\n * Blending any color with black yields white, and blending with white has no effect\n *\n * Available as `container.blendMode = 'divide'` after importing `pixi.js/advanced-blend-modes`.\n * @example\n * import 'pixi.js/advanced-blend-modes';\n * import { Sprite } from 'pixi.js';\n *\n * const sprite = Sprite.from('something.png');\n * sprite.blendMode = 'divide'\n * @category filters\n * @noInheritDoc\n */\nexport class DivideBlend extends BlendModeFilter\n{\n    /** @ignore */\n    public static extension: ExtensionMetadata = {\n        name: 'divide',\n        type: ExtensionType.BlendMode\n    };\n\n    constructor()\n    {\n        super({\n            gl: {\n                functions: `\n                float divide(float base, float blend)\n                {\n                    return (blend > 0.0) ? clamp(base / blend, 0.0, 1.0) : 1.0;\n                }\n\n                vec3 blendDivide(vec3 base, vec3 blend, float opacity)\n                {\n                    vec3 blended = vec3(\n                        divide(base.r, blend.r),\n                        divide(base.g, blend.g),\n                        divide(base.b, blend.b)\n                    );\n\n                    return (blended * opacity + base * (1.0 - opacity));\n                }\n                `,\n                main: `\n                finalColor = vec4(blendDivide(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;\n                `\n            },\n            gpu: {\n                functions: `\n                fn divide(base: f32, blend: f32) -> f32\n                {\n                    return select(1.0, clamp(base / blend, 0.0, 1.0), blend > 0.0);\n                }\n\n                fn blendDivide(base: vec3<f32>, blend: vec3<f32>, opacity: f32) -> vec3<f32>\n                {\n                    let blended = vec3<f32>(\n                        divide(base.r, blend.r),\n                        divide(base.g, blend.g),\n                        divide(base.b, blend.b)\n                    );\n                    return (blended * opacity + base * (1.0 - opacity));\n                }\n            `,\n                main: `\n                out = vec4<f32>(blendDivide(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;\n            `\n            }\n        });\n    }\n}\n", "import { ExtensionType } from '../extensions/Extensions';\nimport { BlendModeFilter } from '../filters/blend-modes/BlendModeFilter';\n\nimport type { ExtensionMetadata } from '../extensions/Extensions';\n\n/**\n * The final color is similar to difference, but with less contrast.\n * As with difference, a black layer has no effect, while a white layer inverts the other layer's color.\n *\n * Available as `container.blendMode = 'exclusion'` after importing `pixi.js/advanced-blend-modes`.\n * @example\n * import 'pixi.js/advanced-blend-modes';\n * import { Sprite } from 'pixi.js';\n *\n * const sprite = Sprite.from('something.png');\n * sprite.blendMode = 'exclusion'\n * @category filters\n * @noInheritDoc\n */\nexport class ExclusionBlend extends BlendModeFilter\n{\n    /** @ignore */\n    public static extension: ExtensionMetadata = {\n        name: 'exclusion',\n        type: ExtensionType.BlendMode\n    };\n\n    constructor()\n    {\n        super({\n            gl: {\n                functions: `\n                vec3 exclusion(vec3 base, vec3 blend)\n                {\n                    return base + blend - 2.0 * base * blend;\n                }\n\n                vec3 blendExclusion(vec3 base, vec3 blend, float opacity)\n                {\n                    return (exclusion(base, blend) * opacity + base * (1.0 - opacity));\n                }\n                `,\n                main: `\n                finalColor = vec4(blendExclusion(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;\n                `\n            },\n            gpu: {\n                functions: `\n                fn exclusion(base: vec3<f32>, blend: vec3<f32>) -> vec3<f32>\n                {\n                    return base+blend-2.0*base*blend;\n                }\n\n                fn blendExclusion(base: vec3<f32>, blend: vec3<f32>, opacity: f32) -> vec3<f32>\n                {\n                    return (exclusion(base, blend) * opacity + base * (1.0 - opacity));\n                }\n            `,\n                main: `\n                out = vec4<f32>(blendExclusion(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;\n            `\n            }\n        });\n    }\n}\n", "import { ExtensionType } from '../extensions/Extensions';\nimport { BlendModeFilter } from '../filters/blend-modes/BlendModeFilter';\n\nimport type { ExtensionMetadata } from '../extensions/Extensions';\n\n/**\n * The final color is the result of multiply if the top color is darker, or screen if the top color is lighter.\n * This blend mode is equivalent to overlay but with the layers swapped.\n * The effect is similar to shining a harsh spotlight on the backdrop.\n *\n * Available as `container.blendMode = 'hard-light'` after importing `pixi.js/advanced-blend-modes`.\n * @example\n * import 'pixi.js/advanced-blend-modes';\n * import { Sprite } from 'pixi.js';\n *\n * const sprite = Sprite.from('something.png');\n * sprite.blendMode = 'hard-light'\n * @category filters\n * @noInheritDoc\n */\nexport class HardLightBlend extends BlendModeFilter\n{\n    /** @ignore */\n    public static extension: ExtensionMetadata = {\n        name: 'hard-light',\n        type: ExtensionType.BlendMode\n    };\n\n    constructor()\n    {\n        super({\n            gl: {\n                functions: `\n                float hardLight(float base, float blend)\n                {\n                    return (blend < 0.5) ? 2.0 * base * blend : 1.0 - 2.0 * (1.0 - base) * (1.0 - blend);\n                }\n\n                vec3 blendHardLight(vec3 base, vec3 blend, float opacity)\n                {\n                    vec3 blended = vec3(\n                        hardLight(base.r, blend.r),\n                        hardLight(base.g, blend.g),\n                        hardLight(base.b, blend.b)\n                    );\n\n                    return (blended * opacity + base * (1.0 - opacity));\n                }\n            `,\n                main: `\n                finalColor = vec4(blendHardLight(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;\n            `\n            },\n            gpu: {\n                functions: `\n                fn hardLight(base: f32, blend: f32) -> f32\n                {\n                    return select(1.0 - 2.0 * (1.0 - base) * (1.0 - blend), 2.0 * base * blend, blend < 0.5);\n                }\n\n                fn blendHardLight(base: vec3<f32>, blend: vec3<f32>, opacity: f32) -> vec3<f32>\n                {\n                    let blended = vec3<f32>(\n                        hardLight(base.r, blend.r),\n                        hardLight(base.g, blend.g),\n                        hardLight(base.b, blend.b)\n                    );\n                    return (blended * opacity + base * (1.0 - opacity));\n                }\n                `,\n                main: `\n                out = vec4<f32>(blendHardLight(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;\n                `\n            }\n        });\n    }\n}\n", "import { ExtensionType } from '../extensions/Extensions';\nimport { BlendModeFilter } from '../filters/blend-modes/BlendModeFilter';\n\nimport type { ExtensionMetadata } from '../extensions/Extensions';\n\n/**\n * Hard defines each of the color channel values of the blend color to the RGB values of the base color.\n * If the sum of a channel is 255, it receives a value of 255; if less than 255, a value of 0.\n *\n * Available as `container.blendMode = 'hard-mix'` after importing `pixi.js/advanced-blend-modes`.\n * @example\n * import 'pixi.js/advanced-blend-modes';\n * import { Sprite } from 'pixi.js';\n *\n * const sprite = Sprite.from('something.png');\n * sprite.blendMode = 'hard-mix'\n * @category filters\n * @noInheritDoc\n */\nexport class HardMixBlend extends BlendModeFilter\n{\n    /** @ignore */\n    public static extension: ExtensionMetadata = {\n        name: 'hard-mix',\n        type: ExtensionType.BlendMode\n    };\n\n    constructor()\n    {\n        super({\n            gl: {\n                functions: `\n                float hardMix(float base, float blend)\n                {\n                    return (base + blend >= 1.0) ? 1.0 : 0.0;\n                }\n\n                vec3 blendHardMix(vec3 base, vec3 blend,  float opacity)\n                {\n                    vec3 blended = vec3(\n                        hardMix(base.r, blend.r),\n                        hardMix(base.g, blend.g),\n                        hardMix(base.b, blend.b)\n                    );\n                    return (blended * opacity + base * (1.0 - opacity));\n                }\n            `,\n                main: `\n                finalColor = vec4(blendHardMix(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;\n            `\n            },\n            gpu: {\n                functions: `\n                fn hardMix(base: f32, blend: f32) -> f32\n                {\n                    return select(0.0, 1.0, base + blend >= 1.0);\n                }\n\n                fn blendHardMix(base:vec3<f32>,  blend:vec3<f32>,  opacity:f32) -> vec3<f32>\n                {\n                    let blended: vec3<f32> = vec3<f32>(\n                        hardMix(base.r, blend.r),\n                        hardMix(base.g, blend.g),\n                        hardMix(base.b, blend.b)\n                    );\n                    return (blended * opacity + base * (1.0 - opacity));\n                }\n            `,\n                main: `\n                out = vec4<f32>(blendHardMix(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;\n            `\n            }\n        });\n    }\n}\n", "import { ExtensionType } from '../extensions/Extensions';\nimport { BlendModeFilter } from '../filters/blend-modes/BlendModeFilter';\n\nimport type { ExtensionMetadata } from '../extensions/Extensions';\n\n/**\n * The final color is composed of the lightest values of each color channel.\n *\n * Available as `container.blendMode = 'lighten'` after importing `pixi.js/advanced-blend-modes`.\n * @example\n * import 'pixi.js/advanced-blend-modes';\n * import { Sprite } from 'pixi.js';\n *\n * const sprite = Sprite.from('something.png');\n * sprite.blendMode = 'lighten'\n * @category filters\n * @noInheritDoc\n */\nexport class LightenBlend extends BlendModeFilter\n{\n    /** @ignore */\n    public static extension: ExtensionMetadata = {\n        name: 'lighten',\n        type: ExtensionType.BlendMode\n    };\n\n    constructor()\n    {\n        super({\n            gl: {\n                functions: `\n                vec3 blendLighten(vec3 base, vec3 blend, float opacity)\n                {\n                    return (max(base, blend) * opacity + base * (1.0 - opacity));\n                }\n                `,\n                main: `\n                finalColor = vec4(blendLighten(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;\n                `\n            },\n            gpu: {\n                functions: `\n                fn blendLighten(base:vec3<f32>,  blend:vec3<f32>,  opacity:f32) -> vec3<f32>\n                {\n                    return (max(base, blend) * opacity + base * (1.0 - opacity));\n                }\n            `,\n                main: `\n                out = vec4<f32>(blendLighten(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;\n            `\n            }\n        });\n    }\n}\n", "import { ExtensionType } from '../extensions/Extensions';\nimport { BlendModeFilter } from '../filters/blend-modes/BlendModeFilter';\n\nimport type { ExtensionMetadata } from '../extensions/Extensions';\n\n/**\n * Looks at the color information in each channel and darkens the base color to\n * reflect the blend color by increasing the contrast between the two.\n *\n * Available as `container.blendMode = 'linear-burn'` after importing `pixi.js/advanced-blend-modes`.\n * @example\n * import 'pixi.js/advanced-blend-modes';\n * import { Sprite } from 'pixi.js';\n *\n * const sprite = Sprite.from('something.png');\n * sprite.blendMode = 'linear-burn'\n * @category filters\n * @noInheritDoc\n */\nexport class LinearBurnBlend extends BlendModeFilter\n{\n    /** @ignore */\n    public static extension: ExtensionMetadata = {\n        name: 'linear-burn',\n        type: ExtensionType.BlendMode\n    };\n\n    constructor()\n    {\n        super({\n            gl: {\n                functions: `\n                float linearBurn(float base, float blend)\n                {\n                    return max(0.0, base + blend - 1.0);\n                }\n\n                vec3 blendLinearBurn(vec3 base, vec3 blend, float opacity)\n                {\n                    vec3 blended = vec3(\n                        linearBurn(base.r, blend.r),\n                        linearBurn(base.g, blend.g),\n                        linearBurn(base.b, blend.b)\n                    );\n\n                    return (blended * opacity + base * (1.0 - opacity));\n                }\n                `,\n                main: `\n                finalColor = vec4(blendLinearBurn(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;\n                `\n            },\n            gpu: {\n                functions: `\n                fn linearBurn(base: f32, blend: f32) -> f32\n                {\n                    return max(0.0, base + blend - 1.0);\n                }\n\n                fn blendLinearBurn(base:vec3<f32>,  blend:vec3<f32>,  opacity:f32) -> vec3<f32>\n                {\n                    let blended = vec3<f32>(\n                        linearBurn(base.r, blend.r),\n                        linearBurn(base.g, blend.g),\n                        linearBurn(base.b, blend.b)\n                    );\n\n                    return (blended * opacity + base * (1.0 - opacity));\n                }\n                `,\n                main: `\n                out = vec4<f32>(blendLinearBurn(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;\n                `\n            }\n        });\n    }\n}\n", "/* eslint-disable max-len */\n\nimport { ExtensionType } from '../extensions/Extensions';\nimport { BlendModeFilter } from '../filters/blend-modes/BlendModeFilter';\n\nimport type { ExtensionMetadata } from '../extensions/Extensions';\n\n/**\n * Looks at the color information in each channel and brightens the base color to reflect the blend color by decreasing contrast between the two.\n *\n * Available as `container.blendMode = 'linear-dodge'` after importing `pixi.js/advanced-blend-modes`.\n * @example\n * import 'pixi.js/advanced-blend-modes';\n * import { Sprite } from 'pixi.js';\n *\n * const sprite = Sprite.from('something.png');\n * sprite.blendMode = 'linear-dodge'\n * @category filters\n * @noInheritDoc\n */\nexport class LinearDodgeBlend extends BlendModeFilter\n{\n    /** @ignore */\n    public static extension: ExtensionMetadata = {\n        name: 'linear-dodge',\n        type: ExtensionType.BlendMode\n    };\n\n    constructor()\n    {\n        super({\n            gl: {\n                functions: `\n                float linearDodge(float base, float blend) {\n                    return min(1.0, base + blend);\n                }\n\n                vec3 blendLinearDodge(vec3 base, vec3 blend, float opacity) {\n                    vec3 blended = vec3(\n                        linearDodge(base.r, blend.r),\n                        linearDodge(base.g, blend.g),\n                        linearDodge(base.b, blend.b)\n                    );\n                    return (blended * opacity + base * (1.0 - opacity));\n                }\n                `,\n                main: `\n                finalColor = vec4(blendLinearDodge(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;\n                `\n            },\n            gpu: {\n                functions: `\n                fn linearDodge(base: f32, blend: f32) -> f32\n                {\n                    return min(1, base + blend);\n                }\n\n                fn blendLinearDodge(base:vec3<f32>, blend:vec3<f32>,  opacity:f32) -> vec3<f32>\n                {\n                    let blended = vec3<f32>(\n                        linearDodge(base.r, blend.r),\n                        linearDodge(base.g, blend.g),\n                        linearDodge(base.b, blend.b)\n                    );\n\n                    return (blended * opacity + base * (1.0 - opacity));\n                }\n            `,\n                main: `\n                out = vec4<f32>(blendLinearDodge(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;\n            `\n            }\n        });\n    }\n}\n", "import { ExtensionType } from '../extensions/Extensions';\nimport { BlendModeFilter } from '../filters/blend-modes/BlendModeFilter';\n\nimport type { ExtensionMetadata } from '../extensions/Extensions';\n\n/**\n * Increase or decrease brightness by burning or dodging color values, based on the blend color\n *\n * Available as `container.blendMode = 'linear-light'` after importing `pixi.js/advanced-blend-modes`.\n * @example\n * import 'pixi.js/advanced-blend-modes';\n * import { Sprite } from 'pixi.js';\n *\n * const sprite = Sprite.from('something.png');\n * sprite.blendMode = 'linear-light'\n * @category filters\n * @noInheritDoc\n */\nexport class LinearLightBlend extends BlendModeFilter\n{\n    /** @ignore */\n    public static extension: ExtensionMetadata = {\n        name: 'linear-light',\n        type: ExtensionType.BlendMode\n    };\n\n    constructor()\n    {\n        super({\n            gl: {\n                functions: `\n                float linearBurn(float base, float blend) {\n                    return max(0.0, base + blend - 1.0);\n                }\n\n                float linearDodge(float base, float blend) {\n                    return min(1.0, base + blend);\n                }\n\n                float linearLight(float base, float blend) {\n                    return (blend <= 0.5) ? linearBurn(base,2.0*blend) : linearBurn(base,2.0*(blend-0.5));\n                }\n\n                vec3 blendLinearLight(vec3 base, vec3 blend, float opacity) {\n                    vec3 blended = vec3(\n                        linearLight(base.r, blend.r),\n                        linearLight(base.g, blend.g),\n                        linearLight(base.b, blend.b)\n                    );\n\n                    return (blended * opacity + base * (1.0 - opacity));\n                }\n            `,\n                main: `\n                finalColor = vec4(blendLinearLight(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;\n                `\n            },\n            gpu: {\n                functions: `\n                fn linearBurn(base: f32, blend: f32) -> f32\n                {\n                    return max(0.0, base + blend - 1.0);\n                }\n\n                fn linearDodge(base: f32, blend: f32) -> f32\n                {\n                    return min(1.0, base + blend);\n                }\n\n                fn linearLight(base: f32, blend: f32) -> f32\n                {\n                    return select(linearBurn(base,2.0*(blend-0.5)), linearBurn(base,2.0*blend), blend <= 0.5);\n                }\n\n                fn blendLinearLightOpacity(base:vec3<f32>,  blend:vec3<f32>,  opacity:f32) -> vec3<f32>\n                {\n                    let blended = vec3<f32>(\n                        linearLight(base.r, blend.r),\n                        linearLight(base.g, blend.g),\n                        linearLight(base.b, blend.b)\n                    );\n\n                    return (blended * opacity + base * (1.0 - opacity));\n                }\n            `,\n                main: `\n                out = vec4<f32>(blendLinearLightOpacity(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;\n            `\n            }\n        });\n    }\n}\n", "import { ExtensionType } from '../extensions/Extensions';\nimport { BlendModeFilter } from '../filters/blend-modes/BlendModeFilter';\nimport { hslgl } from '../filters/blend-modes/hls/GLhls';\nimport { hslgpu } from '../filters/blend-modes/hls/GPUhls';\n\nimport type { ExtensionMetadata } from '../extensions/Extensions';\n\n/**\n * The final color has the luminosity of the top color, while using the hue and saturation of the bottom color.\n * This blend mode is equivalent to color, but with the layers swapped.\n *\n * Available as `container.blendMode = 'luminosity'` after importing `pixi.js/advanced-blend-modes`.\n * @example\n * import 'pixi.js/advanced-blend-modes';\n * import { Sprite } from 'pixi.js';\n *\n * const sprite = Sprite.from('something.png');\n * sprite.blendMode = 'luminosity'\n * @category filters\n * @noInheritDoc\n */\nexport class LuminosityBlend extends BlendModeFilter\n{\n    /** @ignore */\n    public static extension: ExtensionMetadata = {\n        name: 'luminosity',\n        type: ExtensionType.BlendMode\n    };\n\n    constructor()\n    {\n        super({\n            gl: {\n                functions: `\n                ${hslgl}\n\n                vec3 blendLuminosity(vec3 base, vec3 blend,  float opacity)\n                {\n                    vec3 blendLuminosity = setLuminosity(base, getLuminosity(blend));\n                    return (blendLuminosity * opacity + base * (1.0 - opacity));\n                }\n                `,\n                main: `\n                finalColor = vec4(blendLuminosity(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;\n                `\n            },\n            gpu: {\n                functions: `\n                ${hslgpu}\n\n                fn blendLuminosity(base:vec3<f32>,  blend:vec3<f32>,  opacity:f32) -> vec3<f32>\n                {\n                    let blendLuminosity: vec3<f32> = setLuminosity(base, getLuminosity(blend));\n                    return (blendLuminosity * opacity + base * (1.0 - opacity));\n                }\n            `,\n                main: `\n                out = vec4<f32>(blendLuminosity(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;\n            `\n            }\n        });\n    }\n}\n", "import { ExtensionType } from '../extensions/Extensions';\nimport { BlendModeFilter } from '../filters/blend-modes/BlendModeFilter';\n\nimport type { ExtensionMetadata } from '../extensions/Extensions';\n\n/**\n * Implements the Negation blend mode which creates an inverted effect based on the brightness values.\n *\n * Available as `container.blendMode = 'negation'` after importing `pixi.js/advanced-blend-modes`.\n * @example\n * import 'pixi.js/advanced-blend-modes';\n * import { Sprite } from 'pixi.js';\n *\n * const sprite = Sprite.from('something.png');\n * sprite.blendMode = 'negation'\n * @category filters\n * @noInheritDoc\n */\nexport class NegationBlend extends BlendModeFilter\n{\n    /** @ignore */\n    public static extension: ExtensionMetadata = {\n        name: 'negation',\n        type: ExtensionType.BlendMode\n    };\n\n    constructor()\n    {\n        super({\n            gl: {\n                functions: `\n                vec3 negation(vec3 base, vec3 blend)\n                {\n                    return 1.0-abs(1.0-base-blend);\n                }\n\n                vec3 blendNegation(vec3 base, vec3 blend, float opacity)\n                {\n                    return (negation(base, blend) * opacity + base * (1.0 - opacity));\n                }\n                `,\n                main: `\n                finalColor = vec4(blendNegation(back.rgb, front.rgb, front.a), blendedAlpha) * uBlend;\n                `\n            },\n            gpu: {\n                functions: `\n                fn blendNegation(base: vec3<f32>, blend: vec3<f32>) -> vec3<f32>\n                {\n                    return 1.0-abs(1.0-base-blend);\n                }\n\n                fn blendNegationOpacity(base: vec3<f32>, blend: vec3<f32>, opacity: f32) -> vec3<f32>\n                {\n                    return (blendNegation(base, blend) * opacity + base * (1.0 - opacity));\n                }\n            `,\n                main: `\n                out = vec4<f32>(blendNegationOpacity(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;\n            `\n            }\n        });\n    }\n}\n", "import { ExtensionType } from '../extensions/Extensions';\nimport { BlendModeFilter } from '../filters/blend-modes/BlendModeFilter';\n\nimport type { ExtensionMetadata } from '../extensions/Extensions';\n\n/**\n * The final color is the result of multiply if the bottom color is darker, or screen if the bottom color is lighter.\n * This blend mode is equivalent to hard-light but with the layers swapped.\n *\n * Available as `container.blendMode = 'overlay'` after importing `pixi.js/advanced-blend-modes`.\n * @example\n * import 'pixi.js/advanced-blend-modes';\n * import { Sprite } from 'pixi.js';\n *\n * const sprite = Sprite.from('something.png');\n * sprite.blendMode = 'overlay'\n * @category filters\n * @noInheritDoc\n */\nexport class OverlayBlend extends BlendModeFilter\n{\n    /** @ignore */\n    public static extension: ExtensionMetadata = {\n        name: 'overlay',\n        type: ExtensionType.BlendMode\n    };\n\n    constructor()\n    {\n        super({\n            gl: {\n                functions: `\n                float overlay(float base, float blend)\n                {\n                    return (base < 0.5) ? (2.0*base*blend) : (1.0-2.0*(1.0-base)*(1.0-blend));\n                }\n\n                vec3 blendOverlay(vec3 base, vec3 blend, float opacity)\n                {\n                    vec3 blended = vec3(\n                        overlay(base.r, blend.r),\n                        overlay(base.g, blend.g),\n                        overlay(base.b, blend.b)\n                    );\n\n                    return (blended * opacity + base * (1.0 - opacity));\n                }\n                `,\n                main: `\n                finalColor = vec4(blendOverlay(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;\n                `,\n            },\n            gpu: {\n                functions: `\n                fn overlay(base: f32, blend: f32) -> f32\n                {\n                    return select((1.0-2.0*(1.0-base)*(1.0-blend)), (2.0*base*blend), base < 0.5);\n                }\n\n                fn blendOverlay(base: vec3<f32>, blend: vec3<f32>, opacity: f32) -> vec3<f32>\n                {\n                    let blended = vec3<f32>(\n                        overlay(base.r, blend.r),\n                        overlay(base.g, blend.g),\n                        overlay(base.b, blend.b)\n                    );\n\n                    return (blended * opacity + base * (1.0 - opacity));\n                }\n                `,\n                main: `\n                out = vec4<f32>(blendOverlay(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;\n                `,\n            }\n        });\n    }\n}\n", "import { ExtensionType } from '../extensions/Extensions';\nimport { BlendModeFilter } from '../filters/blend-modes/BlendModeFilter';\n\nimport type { ExtensionMetadata } from '../extensions/Extensions';\n\n/**\n * Replaces colors based on the blend color.\n *\n * Available as `container.blendMode = 'pin-light'` after importing `pixi.js/advanced-blend-modes`.\n * @example\n * import 'pixi.js/advanced-blend-modes';\n * import { Sprite } from 'pixi.js';\n *\n * const sprite = Sprite.from('something.png');\n * sprite.blendMode = 'pin-light'\n * @category filters\n * @noInheritDoc\n */\nexport class PinLightBlend extends BlendModeFilter\n{\n    /** @ignore */\n    public static extension: ExtensionMetadata = {\n        name: 'pin-light',\n        type: ExtensionType.BlendMode\n    };\n\n    constructor()\n    {\n        super({\n            gl: {\n                functions: `\n                float pinLight(float base, float blend)\n                {\n                    return (blend <= 0.5) ? min(base, 2.0 * blend) : max(base, 2.0 * (blend - 0.5));\n                }\n\n                vec3 blendPinLight(vec3 base, vec3 blend, float opacity)\n                {\n                    vec3 blended = vec3(\n                        pinLight(base.r, blend.r),\n                        pinLight(base.g, blend.g),\n                        pinLight(base.b, blend.b)\n                    );\n\n                    return (blended * opacity + base * (1.0 - opacity));\n                }\n            `,\n                main: `\n                finalColor = vec4(blendPinLight(back.rgb, front.rgb, front.a), blendedAlpha) * uBlend;\n                `\n            },\n            gpu: {\n                functions: `\n                fn pinLight(base: f32, blend: f32) -> f32\n                {\n                    return select(max(base,2.0*(blend-0.5)), min(base,2.0*blend), blend <= 0.5);\n                }\n\n                fn blendPinLight(base:vec3<f32>,  blend:vec3<f32>,  opacity:f32) -> vec3<f32>\n                {\n                    let blended = vec3<f32>(\n                        pinLight(base.r, blend.r),\n                        pinLight(base.g, blend.g),\n                        pinLight(base.b, blend.b)\n                    );\n\n                    return (blended * opacity + base * (1.0 - opacity));\n                }\n                `,\n                main: `\n                out = vec4<f32>(blendPinLight(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;\n                `\n            }\n        });\n    }\n}\n", "import { ExtensionType } from '../extensions/Extensions';\nimport { BlendModeFilter } from '../filters/blend-modes/BlendModeFilter';\nimport { hslgl } from '../filters/blend-modes/hls/GLhls';\nimport { hslgpu } from '../filters/blend-modes/hls/GPUhls';\n\nimport type { ExtensionMetadata } from '../extensions/Extensions';\n\n/**\n * The final color has the saturation of the top color, while using the hue and luminosity of the bottom color.\n * A pure gray backdrop, having no saturation, will have no effect.\n *\n * Available as `container.blendMode = 'saturation'` after importing `pixi.js/advanced-blend-modes`.\n * @example\n * import 'pixi.js/advanced-blend-modes';\n * import { Sprite } from 'pixi.js';\n *\n * const sprite = Sprite.from('something.png');\n * sprite.blendMode = 'saturation'\n * @category filters\n * @noInheritDoc\n */\nexport class SaturationBlend extends BlendModeFilter\n{\n    /** @ignore */\n    public static extension: ExtensionMetadata = {\n        name: 'saturation',\n        type: ExtensionType.BlendMode\n    };\n\n    constructor()\n    {\n        super({\n            gl: {\n                functions: `\n                ${hslgl}\n\n                vec3 blendSaturation(vec3 base, vec3 blend,  float opacity)\n                {\n                    vec3 blendSaturation = setLuminosity(setSaturation(base, getSaturation(blend)), getLuminosity(base));\n                    return (blendSaturation * opacity + base * (1.0 - opacity));\n                }\n            `,\n                main: `\n                finalColor = vec4(blendSaturation(back.rgb, front.rgb, front.a), blendedAlpha) * uBlend;\n            `\n            },\n            gpu: {\n                functions: `\n                ${hslgpu}\n\n                fn blendSaturation(base:vec3<f32>,  blend:vec3<f32>,  opacity:f32) -> vec3<f32>\n                {\n                    let blendSaturation = setLuminosity(setSaturation(base, getSaturation(blend)), getLuminosity(base));\n                    return (blendSaturation * opacity + base * (1.0 - opacity));\n                }\n            `,\n                main: `\n                out = vec4<f32>(blendSaturation(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;\n            `\n            }\n        });\n    }\n}\n", "/* eslint-disable max-len */\n\nimport { ExtensionType } from '../extensions/Extensions';\nimport { BlendModeFilter } from '../filters/blend-modes/BlendModeFilter';\n\nimport type { ExtensionMetadata } from '../extensions/Extensions';\n\n/**\n * The final color is similar to hard-light, but softer. This blend mode behaves similar to hard-light.\n * The effect is similar to shining a diffused spotlight on the backdrop.\n *\n * Available as `container.blendMode = 'soft-light'` after importing `pixi.js/advanced-blend-modes`.\n * @example\n * import 'pixi.js/advanced-blend-modes';\n * import { Sprite } from 'pixi.js';\n *\n * const sprite = Sprite.from('something.png');\n * sprite.blendMode = 'soft-light'\n * @category filters\n * @noInheritDoc\n */\nexport class SoftLightBlend extends BlendModeFilter\n{\n    /** @ignore */\n    public static extension: ExtensionMetadata = {\n        name: 'soft-light',\n        type: ExtensionType.BlendMode\n    };\n\n    constructor()\n    {\n        super({\n            gl: {\n                functions: `\n                float softLight(float base, float blend)\n                {\n                    return (blend < 0.5) ? (2.0 * base * blend + base * base * (1.0 - 2.0 * blend)) : (sqrt(base) * (2.0 * blend - 1.0) + 2.0 * base * (1.0 - blend));\n                }\n\n                vec3 blendSoftLight(vec3 base, vec3 blend, float opacity)\n                {\n                    vec3 blended = vec3(\n                        softLight(base.r, blend.r),\n                        softLight(base.g, blend.g),\n                        softLight(base.b, blend.b)\n                    );\n\n                    return (blended * opacity + base * (1.0 - opacity));\n                }\n                `,\n                main: `\n                finalColor = vec4(blendSoftLight(back.rgb, front.rgb, front.a), blendedAlpha) * uBlend;\n                `\n            },\n            gpu: {\n                functions: `\n                fn softLight(base: f32, blend: f32) -> f32\n                {\n                    return select(2.0 * base * blend + base * base * (1.0 - 2.0 * blend), sqrt(base) * (2.0 * blend - 1.0) + 2.0 * base * (1.0 - blend), blend < 0.5);\n                }\n\n                fn blendSoftLight(base:vec3<f32>,  blend:vec3<f32>,  opacity:f32) -> vec3<f32>\n                {\n                    let blended: vec3<f32> = vec3<f32>(\n                        softLight(base.r, blend.r),\n                        softLight(base.g, blend.g),\n                        softLight(base.b, blend.b)\n                    );\n\n                    return (blended * opacity + base * (1.0 - opacity));\n                }\n                `,\n                main: `\n                out = vec4<f32>(blendSoftLight(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;\n                `\n            }\n        });\n    }\n}\n", "import { ExtensionType } from '../extensions/Extensions';\nimport { BlendModeFilter } from '../filters/blend-modes/BlendModeFilter';\n\nimport type { ExtensionMetadata } from '../extensions/Extensions';\n\n/**\n * Subtracts the blend from the base color using each color channel\n *\n * Available as `container.blendMode = 'subtract'` after importing `pixi.js/advanced-blend-modes`.\n * @example\n * import 'pixi.js/advanced-blend-modes';\n * import { Sprite } from 'pixi.js';\n *\n * const sprite = Sprite.from('something.png');\n * sprite.blendMode = 'subtract'\n * @category filters\n * @noInheritDoc\n */\nexport class SubtractBlend extends BlendModeFilter\n{\n    /** @ignore */\n    public static extension: ExtensionMetadata = {\n        name: 'subtract',\n        type: ExtensionType.BlendMode\n    };\n\n    constructor()\n    {\n        super({\n            gl: {\n                functions: `\n                float subtract(float base, float blend)\n                {\n                    return max(0.0, base - blend);\n                }\n\n                vec3 blendSubtract(vec3 base, vec3 blend, float opacity)\n                {\n                    vec3 blended = vec3(\n                        subtract(base.r, blend.r),\n                        subtract(base.g, blend.g),\n                        subtract(base.b, blend.b)\n                    );\n\n                    return (blended * opacity + base * (1.0 - opacity));\n                }\n                `,\n                main: `\n                finalColor = vec4(blendSubtract(back.rgb, front.rgb, front.a), blendedAlpha) * uBlend;\n                `\n            },\n            gpu: {\n                functions: `\n                fn subtract(base: f32, blend: f32) -> f32\n                {\n                    return max(0, base - blend);\n                }\n\n                fn blendSubtract(base:vec3<f32>,  blend:vec3<f32>,  opacity:f32) -> vec3<f32>\n                {\n                    let blended = vec3<f32>(\n                        subtract(base.r, blend.r),\n                        subtract(base.g, blend.g),\n                        subtract(base.b, blend.b)\n                    );\n\n                    return (blended * opacity + base * (1.0 - opacity));\n                }\n                `,\n                main: `\n                out = vec4<f32>(blendSubtract(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;\n                `\n            }\n        });\n    }\n}\n", "import { ExtensionType } from '../extensions/Extensions';\nimport { BlendModeFilter } from '../filters/blend-modes/BlendModeFilter';\n\nimport type { ExtensionMetadata } from '../extensions/Extensions';\n\n/**\n * Darkens values darker than 50% gray and lightens those brighter than 50% gray, creating a dramatic effect.\n * It's essentially an extreme version of the Overlay mode, with a significant impact on midtones\n *\n * Available as `container.blendMode = 'vivid-light'` after importing `pixi.js/advanced-blend-modes`.\n * @example\n * import 'pixi.js/advanced-blend-modes';\n * import { Sprite } from 'pixi.js';\n *\n * const sprite = Sprite.from('something.png');\n * sprite.blendMode = 'vivid-light'\n * @category filters\n * @noInheritDoc\n */\nexport class VividLightBlend extends BlendModeFilter\n{\n    /** @ignore */\n    public static extension: ExtensionMetadata = {\n        name: 'vivid-light',\n        type: ExtensionType.BlendMode\n    };\n\n    constructor()\n    {\n        super({\n            gl: {\n                functions: `\n                float colorBurn(float base, float blend)\n                {\n                    return max((1.0-((1.0-base)/blend)),0.0);\n                }\n\n                float colorDodge(float base, float blend)\n                {\n                    return min(1.0, base / (1.0-blend));\n                }\n\n                float vividLight(float base, float blend)\n                {\n                    return (blend < 0.5) ? colorBurn(base,(2.0*blend)) : colorDodge(base,(2.0*(blend-0.5)));\n                }\n\n                vec3 blendVividLight(vec3 base, vec3 blend, float opacity)\n                {\n                    vec3 blended = vec3(\n                        vividLight(base.r, blend.r),\n                        vividLight(base.g, blend.g),\n                        vividLight(base.b, blend.b)\n                    );\n\n                    return (blended * opacity + base * (1.0 - opacity));\n                }\n            `,\n                main: `\n                finalColor = vec4(blendVividLight(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;\n            `\n            },\n            gpu: {\n                functions: `\n                fn colorBurn(base:f32, blend:f32) -> f32\n                {\n                    return max((1.0-((1.0-base)/blend)),0.0);\n                }\n\n                fn colorDodge(base: f32, blend: f32) -> f32\n                {\n                    return min(1.0, base / (1.0-blend));\n                }\n\n                fn vividLight(base: f32, blend: f32) -> f32\n                {\n                    return select(colorDodge(base,(2.0*(blend-0.5))), colorBurn(base,(2.0*blend)), blend<0.5);\n                }\n\n                fn blendVividLight(base: vec3<f32>, blend: vec3<f32>, opacity: f32) -> vec3<f32>\n                {\n                    let blended: vec3<f32> = vec3<f32>(\n                        vividLight(base.r, blend.r),\n                        vividLight(base.g, blend.g),\n                        vividLight(base.b, blend.b)\n                    );\n\n                    return (blended * opacity + base * (1.0 - opacity));\n                }\n                `,\n                main: `\n                out = vec4<f32>(blendVividLight(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;\n                `\n            }\n        });\n    }\n}\n", "import { DOMAdapter } from '../../environment/adapter';\nimport { AbstractRenderer } from '../../rendering/renderers/shared/system/AbstractRenderer';\n\nlet _isWebGLSupported: boolean | undefined;\n\n/**\n * Helper for checking for WebGL support in the current environment.\n *\n * Results are cached after first call for better performance.\n * @example\n * ```ts\n * // Basic WebGL support check\n * if (isWebGLSupported()) {\n *     console.log('WebGL is available');\n * }\n * ```\n * @param failIfMajorPerformanceCaveat - Whether to fail if there is a major performance caveat\n * @returns True if WebGL is supported\n * @category utils\n * @standard\n */\nexport function isWebGLSupported(\n    failIfMajorPerformanceCaveat?: boolean\n): boolean\n{\n    if (_isWebGLSupported !== undefined) return _isWebGLSupported;\n\n    _isWebGLSupported = ((): boolean =>\n    {\n        const contextOptions = {\n            stencil: true,\n            failIfMajorPerformanceCaveat:\n                failIfMajorPerformanceCaveat\n                ?? AbstractRenderer.defaultOptions.failIfMajorPerformanceCaveat,\n        };\n\n        try\n        {\n            if (!DOMAdapter.get().getWebGLRenderingContext())\n            {\n                return false;\n            }\n\n            const canvas = DOMAdapter.get().createCanvas();\n            let gl = canvas.getContext('webgl', contextOptions);\n\n            const success = !!gl?.getContextAttributes()?.stencil;\n\n            if (gl)\n            {\n                const loseContext = gl.getExtension('WEBGL_lose_context');\n\n                if (loseContext)\n                {\n                    loseContext.loseContext();\n                }\n            }\n\n            gl = null;\n\n            return success;\n        }\n        catch (_e)\n        {\n            return false;\n        }\n    })();\n\n    return _isWebGLSupported;\n}\n", "import { DOMAdapter } from '../../environment/adapter';\n\nlet _isWebGPUSupported: boolean | undefined;\n\n/**\n * Helper for checking for WebGPU support in the current environment.\n * Results are cached after first call for better performance.\n * @example\n * ```ts\n * // Basic WebGPU support check\n * const hasWebGPU = await isWebGPUSupported();\n * console.log('WebGPU available:', hasWebGPU);\n * ```\n * @param options - The options for requesting a GPU adapter\n * @returns Promise that resolves to true if WebGPU is supported\n * @category utils\n * @standard\n */\nexport async function isWebGPUSupported(options: GPURequestAdapterOptions = {}): Promise<boolean>\n{\n    if (_isWebGPUSupported !== undefined) return _isWebGPUSupported;\n\n    _isWebGPUSupported = await (async (): Promise<boolean> =>\n    {\n        const gpu = DOMAdapter.get().getNavigator().gpu;\n\n        if (!gpu)\n        {\n            return false;\n        }\n\n        try\n        {\n            const adapter = await gpu.requestAdapter(options) as GPUAdapter;\n\n            // TODO and one of these!\n            await adapter.requestDevice();\n\n            return true;\n        }\n        catch (_e)\n        {\n            return false;\n        }\n    })();\n\n    return _isWebGPUSupported;\n}\n", "import { isWebGLSupported } from '../../utils/browser/isWebGLSupported';\nimport { isWebGPUSupported } from '../../utils/browser/isWebGPUSupported';\nimport { AbstractRenderer } from './shared/system/AbstractRenderer';\n\nimport type { CanvasOptions } from './canvas/CanvasRenderer';\nimport type { WebGLOptions } from './gl/WebGLRenderer';\nimport type { WebGPUOptions } from './gpu/WebGPURenderer';\nimport type { Renderer, RendererOptions } from './types';\n\n/**\n * Options for {@link autoDetectRenderer}.\n * @category rendering\n * @advanced\n */\nexport interface AutoDetectOptions extends RendererOptions\n{\n    /** The preferred renderer type. WebGPU is recommended as its generally faster than WebGL. */\n    preference?: 'webgl' | 'webgpu' | 'canvas';\n    /** Optional WebGPUOptions to pass only to WebGPU renderer. */\n    webgpu?: Partial<WebGPUOptions>;\n    /** Optional WebGLOptions to pass only to the WebGL renderer */\n    webgl?: Partial<WebGLOptions>;\n    /** Optional CanvasOptions to pass only to the Canvas renderer */\n    canvasOptions?: Partial<CanvasOptions>;\n}\n\nconst renderPriority = ['webgl', 'webgpu', 'canvas'];\n\n/**\n * Automatically determines the most appropriate renderer for the current environment.\n *\n * The function will prioritize the WebGL renderer as it is the most tested safe API to use.\n * In the near future as WebGPU becomes more stable and ubiquitous, it will be prioritized over WebGL.\n *\n * The selected renderer's code is then dynamically imported to optimize\n * performance and minimize the initial bundle size.\n *\n * To maximize the benefits of dynamic imports, it's recommended to use a modern bundler\n * that supports code splitting. This will place the renderer code in a separate chunk,\n * which is loaded only when needed.\n * @example\n *\n * // create a renderer\n * const renderer = await autoDetectRenderer({\n *   width: 800,\n *   height: 600,\n *   antialias: true,\n * });\n *\n * // custom for each renderer\n * const renderer = await autoDetectRenderer({\n *   width: 800,\n *   height: 600,\n *   webgpu:{\n *     antialias: true,\n *     backgroundColor: 'red'\n *   },\n *   webgl:{\n *     antialias: true,\n *     backgroundColor: 'green'\n *   }\n *  });\n * @param options - A partial configuration object based on the `AutoDetectOptions` type.\n * @returns A Promise that resolves to an instance of the selected renderer.\n * @category rendering\n * @standard\n */\nexport async function autoDetectRenderer(options: Partial<AutoDetectOptions>): Promise<Renderer>\n{\n    let preferredOrder: string[] = [];\n\n    if (options.preference)\n    {\n        preferredOrder.push(options.preference);\n\n        renderPriority.forEach((item) =>\n        {\n            if (item !== options.preference)\n            {\n                preferredOrder.push(item);\n            }\n        });\n    }\n    else\n    {\n        preferredOrder = renderPriority.slice();\n    }\n\n    let RendererClass: new () => Renderer;\n    let finalOptions: Partial<AutoDetectOptions> = {};\n\n    for (let i = 0; i < preferredOrder.length; i++)\n    {\n        const rendererType = preferredOrder[i];\n\n        if (rendererType === 'webgpu' && (await isWebGPUSupported()))\n        {\n            const { WebGPURenderer } = await import('./gpu/WebGPURenderer');\n\n            RendererClass = WebGPURenderer;\n\n            finalOptions = { ...options, ...options.webgpu };\n\n            break;\n        }\n        else if (\n            rendererType === 'webgl'\n            && isWebGLSupported(\n                options.failIfMajorPerformanceCaveat\n                    ?? AbstractRenderer.defaultOptions.failIfMajorPerformanceCaveat\n            )\n        )\n        {\n            const { WebGLRenderer } = await import('./gl/WebGLRenderer');\n\n            RendererClass = WebGLRenderer;\n\n            finalOptions = { ...options, ...options.webgl };\n\n            break;\n        }\n        else if (rendererType === 'canvas')\n        {\n            const { CanvasRenderer } = await import('./canvas/CanvasRenderer');\n\n            RendererClass = CanvasRenderer;\n\n            finalOptions = { ...options, ...options.canvasOptions };\n\n            break;\n        }\n    }\n\n    delete finalOptions.webgpu;\n    delete finalOptions.webgl;\n    delete finalOptions.canvasOptions;\n\n    if (!RendererClass)\n    {\n        throw new Error('No available renderer for the current environment');\n    }\n\n    const renderer = new RendererClass();\n\n    await renderer.init(finalOptions);\n\n    return renderer;\n}\n", "import { ExtensionType } from '../extensions/Extensions';\n\nimport type { ExtensionMetadata } from '../extensions/Extensions';\nimport type { Renderer } from '../rendering/renderers/types';\n\ntype ResizeableRenderer = Pick<Renderer, 'resize'>;\n\n/**\n * Application options for the {@link ResizePlugin}.\n * These options control how your application handles window and element resizing.\n * @example\n * ```ts\n * // Auto-resize to window\n * await app.init({ resizeTo: window });\n *\n * // Auto-resize to container element\n * await app.init({ resizeTo: document.querySelector('#game') });\n * ```\n * @category app\n * @standard\n */\nexport interface ResizePluginOptions\n{\n    /**\n     * Element to automatically resize the renderer to.\n     * @example\n     * ```ts\n     * const app = new Application();\n     * await app.init({\n     *     resizeTo: window, // Resize to the entire window\n     *     // or\n     *     resizeTo: document.querySelector('#game-container'), // Resize to a specific element\n     *     // or\n     *     resizeTo: null, // Disable auto-resize\n     * });\n     * ```\n     * @default null\n     */\n    resizeTo?: Window | HTMLElement;\n}\n\n/**\n * Middleware for Application's resize functionality. This plugin handles automatic\n * and manual resizing of your PixiJS application.\n *\n * Adds the following features to {@link Application}:\n * - `resizeTo`: Set an element to automatically resize to\n * - `resize`: Manually trigger a resize\n * - `queueResize`: Queue a resize for the next animation frame\n * - `cancelResize`: Cancel a queued resize\n * @example\n * ```ts\n * import { Application, ResizePlugin } from 'pixi.js';\n *\n * // Create application\n * const app = new Application();\n *\n * // Example 1: Auto-resize to window\n * await app.init({ resizeTo: window });\n *\n * // Example 2: Auto-resize to specific element\n * const container = document.querySelector('#game-container');\n * await app.init({ resizeTo: container });\n *\n * // Example 3: Change resize target at runtime\n * app.resizeTo = window;                    // Enable auto-resize to window\n * app.resizeTo = null;                      // Disable auto-resize\n * ```\n * @category app\n * @standard\n */\nexport class ResizePlugin\n{\n    /** @ignore */\n    public static extension: ExtensionMetadata = ExtensionType.Application;\n    /** @internal */\n    public static resizeTo: Window | HTMLElement;\n    /** @internal */\n    public static resize: () => void;\n    /** @internal */\n    public static renderer: ResizeableRenderer;\n    /** @internal */\n    public static queueResize: () => void;\n    /** @internal */\n    public static render: () => void;\n    /** @internal */\n    private static _resizeId: number;\n    /** @internal */\n    private static _resizeTo: Window | HTMLElement;\n    /** @internal */\n    private static _cancelResize: () => void;\n\n    /**\n     * Initialize the plugin with scope of application instance\n     * @private\n     * @param {object} [options] - See application options\n     */\n    public static init(options: ResizePluginOptions): void\n    {\n        Object.defineProperty(this, 'resizeTo',\n            {\n                configurable: true,\n                set(dom: Window | HTMLElement)\n                {\n                    globalThis.removeEventListener('resize', this.queueResize);\n                    this._resizeTo = dom;\n                    if (dom)\n                    {\n                        globalThis.addEventListener('resize', this.queueResize);\n                        this.resize();\n                    }\n                },\n                get()\n                {\n                    return this._resizeTo;\n                },\n            });\n\n        this.queueResize = (): void =>\n        {\n            if (!this._resizeTo)\n            {\n                return;\n            }\n\n            this._cancelResize();\n\n            // // Throttle resize events per raf\n            this._resizeId = requestAnimationFrame(() => this.resize());\n        };\n\n        this._cancelResize = (): void =>\n        {\n            if (this._resizeId)\n            {\n                cancelAnimationFrame(this._resizeId);\n                this._resizeId = null;\n            }\n        };\n\n        this.resize = (): void =>\n        {\n            if (!this._resizeTo)\n            {\n                return;\n            }\n\n            // clear queue resize\n            this._cancelResize();\n\n            let width: number;\n            let height: number;\n\n            // Resize to the window\n            if (this._resizeTo === globalThis.window)\n            {\n                width = globalThis.innerWidth;\n                height = globalThis.innerHeight;\n            }\n            // Resize to other HTML entities\n            else\n            {\n                const { clientWidth, clientHeight } = this._resizeTo as HTMLElement;\n\n                width = clientWidth;\n                height = clientHeight;\n            }\n\n            this.renderer.resize(width, height);\n            this.render();\n        };\n\n        // On resize\n        this._resizeId = null;\n        this._resizeTo = null;\n        this.resizeTo = options.resizeTo || null;\n    }\n\n    /**\n     * Clean up the ticker, scoped to application\n     * @private\n     */\n    public static destroy(): void\n    {\n        globalThis.removeEventListener('resize', this.queueResize);\n        this._cancelResize();\n        this._cancelResize = null;\n        this.queueResize = null;\n        this.resizeTo = null;\n        this.resize = null;\n    }\n}\n", "import { ExtensionType } from '../extensions/Extensions';\nimport { UPDATE_PRIORITY } from '../ticker/const';\nimport { Ticker } from '../ticker/Ticker';\n\nimport type { ExtensionMetadata } from '../extensions/Extensions';\n\n/**\n * Application options for the {@link TickerPlugin}.\n * These options control the animation loop and update cycle of your PixiJS application.\n * @example\n * ```ts\n * import { Application } from 'pixi.js';\n *\n * // Basic setup with default options\n * const app = new Application();\n * await app.init({\n *     autoStart: true,     // Start animation loop automatically\n *     sharedTicker: false  // Use dedicated ticker instance\n * });\n *\n * // Advanced setup with shared ticker\n * const app2 = new Application();\n * await app2.init({\n *     autoStart: false,    // Don't start automatically\n *     sharedTicker: true   // Use global shared ticker\n * });\n *\n * // Start animation when ready\n * app2.start();\n * ```\n * @remarks\n * The ticker is the heart of your application's animation system. It:\n * - Manages the render loop\n * - Provides accurate timing information\n * - Handles frame-based updates\n * - Supports priority-based execution order\n * @see {@link Ticker} For detailed ticker functionality\n * @see {@link UPDATE_PRIORITY} For update priority constants\n * @category app\n * @standard\n */\nexport interface TickerPluginOptions\n{\n    /**\n     * Controls whether the animation loop starts automatically after initialization.\n     * > [!IMPORTANT]\n     * > Setting this to `false` does NOT stop the shared ticker even if `sharedTicker` is `true`.\n     * > You must stop the shared ticker manually if needed.\n     * @example\n     * ```ts\n     * // Auto-start (default behavior)\n     * await app.init({ autoStart: true });\n     *\n     * // Manual start\n     * await app.init({ autoStart: false });\n     * app.start(); // Start when ready\n     * ```\n     * @default true\n     */\n    autoStart?: boolean;\n\n    /**\n     * Controls whether to use the shared global ticker or create a new instance.\n     *\n     * The shared ticker is useful when you have multiple instances that should sync their updates.\n     * However, it has some limitations regarding update order control.\n     *\n     * Update Order:\n     * 1. System ticker (always runs first)\n     * 2. Shared ticker (if enabled)\n     * 3. App ticker (if using own ticker)\n     * @example\n     * ```ts\n     * // Use shared ticker (global instance)\n     * await app.init({ sharedTicker: true });\n     *\n     * // Use dedicated ticker (default)\n     * await app.init({ sharedTicker: false });\n     *\n     * // Access ticker properties\n     * console.log(app.ticker.FPS);    // Current FPS\n     * console.log(app.ticker.deltaMS); // MS since last update\n     * ```\n     * @default false\n     */\n    sharedTicker?: boolean;\n}\n\n/**\n * Middleware for Application's {@link Ticker} functionality. This plugin manages the\n * animation loop and update cycle of your PixiJS application.\n *\n * Adds the following features to {@link Application}:\n * - `ticker`: Access to the application's ticker\n * - `start`: Start the animation loop\n * - `stop`: Stop the animation loop\n * @example\n * ```ts\n * import { Application, TickerPlugin, extensions } from 'pixi.js';\n *\n * // Create application\n * const app = new Application();\n *\n * // Example 1: Basic ticker usage (default autoStart)\n * await app.init({ autoStart: true });      // Starts ticker automatically\n *\n * // Example 2: Manual ticker control\n * await app.init({ autoStart: false });     // Don't start automatically\n * app.start();                              // Start manually\n * app.stop();                               // Stop manually\n *\n * // Example 3: Add custom update logic\n * app.ticker.add((ticker) => {\n *     // Run every frame, delta is the time since last update\n *     sprite.rotation += 0.1 * ticker.deltaTime;\n * });\n *\n * // Example 4: Control update priority\n * import { UPDATE_PRIORITY } from 'pixi.js';\n *\n * app.ticker.add(\n *     (ticker) => {\n *         // Run before normal priority updates\n *     },\n *     null,\n *     UPDATE_PRIORITY.HIGH\n * );\n *\n * // Example 5: One-time update\n * app.ticker.addOnce(() => {\n *     console.log('Runs next frame only');\n * });\n * ```\n * @see {@link Ticker} For detailed ticker functionality\n * @see {@link UPDATE_PRIORITY} For priority constants\n * @category app\n * @standard\n */\nexport class TickerPlugin\n{\n    /** @ignore */\n    public static extension: ExtensionMetadata = ExtensionType.Application;\n\n    /** @internal */\n    public static start: () => void;\n    /** @internal */\n    public static stop: () => void;\n    /** @internal */\n    private static _ticker: Ticker;\n    /** @internal */\n    public static ticker: Ticker;\n\n    /**\n     * Initialize the plugin with scope of application instance\n     * @private\n     * @param {object} [options] - See application options\n     */\n    public static init(options?: PixiMixins.ApplicationOptions): void\n    {\n        // Set default\n        options = Object.assign({\n            autoStart: true,\n            sharedTicker: false,\n        }, options);\n\n        // Create ticker setter\n        Object.defineProperty(this, 'ticker',\n            {\n                configurable: true,\n                set(ticker)\n                {\n                    if (this._ticker)\n                    {\n                        this._ticker.remove(this.render, this);\n                    }\n                    this._ticker = ticker;\n                    if (ticker)\n                    {\n                        ticker.add(this.render, this, UPDATE_PRIORITY.LOW);\n                    }\n                },\n                get()\n                {\n                    return this._ticker;\n                },\n            });\n\n        this.stop = (): void =>\n        {\n            this._ticker.stop();\n        };\n\n        this.start = (): void =>\n        {\n            this._ticker.start();\n        };\n\n        this._ticker = null;\n        this.ticker = options.sharedTicker ? Ticker.shared : new Ticker();\n\n        // Start the rendering\n        if (options.autoStart)\n        {\n            this.start();\n        }\n    }\n\n    /**\n     * Clean up the ticker, scoped to application.\n     * @private\n     */\n    public static destroy(): void\n    {\n        if (this._ticker)\n        {\n            const oldTicker = this._ticker;\n\n            this.ticker = null;\n            oldTicker.destroy();\n        }\n    }\n}\n", "import { extensions } from '../extensions/Extensions';\nimport { ResizePlugin } from './ResizePlugin';\nimport { TickerPlugin } from './TickerPlugin';\n\nextensions.add(ResizePlugin);\nextensions.add(TickerPlugin);\n", "import { extensions, ExtensionType } from '../extensions/Extensions';\nimport { autoDetectRenderer } from '../rendering/renderers/autoDetectRenderer';\nimport { Container } from '../scene/container/Container';\nimport { ApplicationInitHook } from '../utils/global/globalHooks';\nimport { deprecation, v8_0_0 } from '../utils/logging/deprecation';\nimport '../app/init';\n\nimport type { Rectangle } from '../maths/shapes/Rectangle';\nimport type { AutoDetectOptions } from '../rendering/renderers/autoDetectRenderer';\nimport type { RendererDestroyOptions } from '../rendering/renderers/shared/system/AbstractRenderer';\nimport type { Renderer } from '../rendering/renderers/types';\nimport type { DestroyOptions } from '../scene/container/destroyTypes';\n\n/**\n * Interface for creating Application plugins. Any plugin that's usable for Application must implement these methods.\n *\n * To create a plugin:\n * 1. Create a class that implements this interface\n * 2. Add the required static extension property\n * 3. Register the plugin using extensions.add()\n * @example\n * ```ts\n * import { ApplicationPlugin, ExtensionType, extensions } from 'pixi.js';\n *\n * class MyPlugin {\n *    // Required: Declare the extension type\n *    public static extension = ExtensionType.Application;\n *\n *    // Required: Implement init method\n *    public static init(options: Partial<ApplicationOptions>): void {\n *        // Add properties/methods to the Application instance (this)\n *        Object.defineProperty(this, 'myFeature', {\n *            value: () => console.log('My feature!'),\n *        });\n *\n *        // Use options if needed\n *        console.log('Plugin initialized with:', options);\n *    }\n *\n *    // Required: Implement destroy method\n *    public static destroy(): void {\n *        // Clean up any resources\n *        console.log('Plugin destroyed');\n *    }\n * }\n *\n * // Register the plugin\n * extensions.add(MyPlugin);\n *\n * // Usage in application\n * const app = new Application();\n * await app.init();\n * app.myFeature(); // Output: \"My feature!\"\n * ```\n * > [!IMPORTANT]\n * > - Plugins are initialized in the order they are added\n * > - Plugins are destroyed in reverse order\n * > - The `this` context in both methods refers to the Application instance\n * @see {@link ExtensionType} For different types of extensions\n * @see {@link extensions} For the extension registration system\n * @see {@link ApplicationOptions} For available application options\n * @category app\n * @advanced\n */\nexport interface ApplicationPlugin\n{\n    /**\n     * Called when Application is constructed, scoped to Application instance.\n     * Passes in `options` as the only argument, which are Application `init()` options.\n     * @param {object} options - Application options.\n     */\n    init(options: Partial<ApplicationOptions>): void;\n    /** Called when destroying Application, scoped to Application instance. */\n    destroy(): void;\n}\n\n/**\n * Application options supplied to the {@link Application#init} method.\n * These options configure how your PixiJS application behaves.\n * @category app\n * @standard\n * @example\n * ```js\n * import { Application } from 'pixi.js';\n *\n * const app = new Application();\n *\n * // Initialize with common options\n * await app.init({\n *    // Rendering options\n *    width: 800,                    // Canvas width\n *    height: 600,                   // Canvas height\n *    backgroundColor: 0x1099bb,     // Background color\n *    antialias: true,              // Enable antialiasing\n *    resolution: window.devicePixelRatio, // Screen resolution\n *\n *    // Performance options\n *    autoStart: true,              // Auto-starts the render loop\n *    sharedTicker: true,           // Use shared ticker for better performance\n *\n *    // Automatic resize options\n *    resizeTo: window,             // Auto-resize to window\n *    autoDensity: true,           // Adjust for device pixel ratio\n *\n *    // Advanced options\n *    preference: 'webgl',         // Renderer preference ('webgl' or 'webgpu')\n *    powerPreference: 'high-performance' // GPU power preference\n * });\n * ```\n * @see {@link WebGLOptions} For resize-related options\n * @see {@link WebGPUOptions} For resize-related options\n * @see {@link TickerPlugin} For ticker-related options\n * @see {@link ResizePlugin} For resize-related options\n */\nexport interface ApplicationOptions extends AutoDetectOptions, PixiMixins.ApplicationOptions { }\n\n// eslint-disable-next-line max-len\n// eslint-disable-next-line @typescript-eslint/no-empty-object-type, requireExport/require-export-jsdoc, requireMemberAPI/require-member-api-doc\nexport interface Application extends PixiMixins.Application { }\n\n/**\n * Convenience class to create a new PixiJS application.\n *\n * The Application class is the main entry point for creating a PixiJS application. It handles the setup of all core\n * components needed to start rendering and managing your game or interactive experience.\n *\n * Key features:\n * - Automatically creates and manages the renderer\n * - Provides a stage (root container) for your display objects\n * - Handles canvas creation and management\n * - Supports plugins for extending functionality\n *   - {@link ResizePlugin} for automatic resizing\n *   - {@link TickerPlugin} for managing frame updates\n *   - {@link CullerPlugin} for culling off-screen objects\n * @example\n * ```js\n * import { Assets, Application, Sprite } from 'pixi.js';\n *\n * // Create a new application\n * const app = new Application();\n *\n * // Initialize with options\n * await app.init({\n *     width: 800,           // Canvas width\n *     height: 600,          // Canvas height\n *     backgroundColor: 0x1099bb, // Background color\n *     antialias: true,     // Enable antialiasing\n *     resolution: 1,       // Resolution / device pixel ratio\n *     preference: 'webgl', // or 'webgpu' // Renderer preference\n * });\n *\n * // Add the canvas to your webpage\n * document.body.appendChild(app.canvas);\n *\n * // Start adding content to your application\n * const texture = await Assets.load('your-image.png');\n * const sprite = new Sprite(texture);\n * app.stage.addChild(sprite);\n * ```\n * > [!IMPORTANT] From PixiJS v8.0.0, the application must be initialized using the async `init()` method\n * > rather than passing options to the constructor.\n * @category app\n * @standard\n * @see {@link ApplicationOptions} For all available initialization options\n * @see {@link Container} For information about the stage container\n * @see {@link Renderer} For details about the rendering system\n */\nexport class Application<R extends Renderer = Renderer>\n{\n    /**\n     * Collection of installed plugins.\n     * @internal\n     */\n    public static _plugins: ApplicationPlugin[] = [];\n\n    /**\n     * The root display container for your application.\n     * All visual elements should be added to this container or its children.\n     * @example\n     * ```js\n     * // Create a sprite and add it to the stage\n     * const sprite = Sprite.from('image.png');\n     * app.stage.addChild(sprite);\n     *\n     * // Create a container for grouping objects\n     * const container = new Container();\n     * app.stage.addChild(container);\n     * ```\n     */\n    public stage: Container = new Container();\n\n    /**\n     * The renderer instance that handles all drawing operations.\n     *\n     * Unless specified, it will automatically create a WebGL renderer if available.\n     * If WebGPU is available and the `preference` is set to `webgpu`, it will create a WebGPU renderer.\n     * @example\n     * ```js\n     * // Create a new application\n     * const app = new Application();\n     * await app.init({\n     *     width: 800,\n     *     height: 600,\n     *     preference: 'webgl', // or 'webgpu'\n     * });\n     *\n     * // Access renderer properties\n     * console.log(app.renderer.width, app.renderer.height);\n     * ```\n     */\n    public renderer: R;\n\n    /** Create new Application instance */\n    constructor();\n\n    /** @deprecated since 8.0.0 */\n    constructor(options?: Partial<ApplicationOptions>);\n\n    constructor(...args: [Partial<ApplicationOptions>] | [])\n    {\n        // #if _DEBUG\n        if (args[0] !== undefined)\n        {\n            deprecation(v8_0_0, 'Application constructor options are deprecated, please use Application.init() instead.');\n        }\n        // #endif\n    }\n\n    /**\n     * Initializes the PixiJS application with the specified options.\n     *\n     * This method must be called after creating a new Application instance.\n     * @param options - Configuration options for the application and renderer\n     * @returns A promise that resolves when initialization is complete\n     * @example\n     * ```js\n     * const app = new Application();\n     *\n     * // Initialize with custom options\n     * await app.init({\n     *     width: 800,\n     *     height: 600,\n     *     backgroundColor: 0x1099bb,\n     *     preference: 'webgl', // or 'webgpu'\n     * });\n     * ```\n     */\n    public async init(options?: Partial<ApplicationOptions>)\n    {\n        // The default options\n        options = { ...options };\n\n        this.stage ||= new Container();\n        this.renderer = await autoDetectRenderer(options as ApplicationOptions) as R;\n\n        // install plugins here\n        Application._plugins.forEach((plugin) =>\n        {\n            plugin.init.call(this, options);\n        });\n    }\n\n    /**\n     * Renders the current stage to the screen.\n     *\n     * When using the default setup with {@link TickerPlugin} (enabled by default), you typically don't need to call\n     * this method directly as rendering is handled automatically.\n     *\n     * Only use this method if you've disabled the {@link TickerPlugin} or need custom\n     * render timing control.\n     * @example\n     * ```js\n     * // Example 1: Default setup (TickerPlugin handles rendering)\n     * const app = new Application();\n     * await app.init();\n     * // No need to call render() - TickerPlugin handles it\n     *\n     * // Example 2: Custom rendering loop (if TickerPlugin is disabled)\n     * const app = new Application();\n     * await app.init({ autoStart: false }); // Disable automatic rendering\n     *\n     * function animate() {\n     *     app.render();\n     *     requestAnimationFrame(animate);\n     * }\n     * animate();\n     * ```\n     */\n    public render(): void\n    {\n        this.renderer.render({ container: this.stage });\n    }\n\n    /**\n     * Reference to the renderer's canvas element. This is the HTML element\n     * that displays your application's graphics.\n     * @readonly\n     * @type {HTMLCanvasElement}\n     * @example\n     * ```js\n     * // Create a new application\n     * const app = new Application();\n     * // Initialize the application\n     * await app.init({...});\n     * // Add canvas to the page\n     * document.body.appendChild(app.canvas);\n     *\n     * // Access the canvas directly\n     * console.log(app.canvas); // HTMLCanvasElement\n     * ```\n     */\n    get canvas(): R['canvas']\n    {\n        return this.renderer.canvas as R['canvas'];\n    }\n\n    /**\n     * Reference to the renderer's canvas element.\n     * @type {HTMLCanvasElement}\n     * @deprecated since 8.0.0\n     * @see {@link Application#canvas}\n     */\n    get view(): R['canvas']\n    {\n        // #if _DEBUG\n        deprecation(v8_0_0, 'Application.view is deprecated, please use Application.canvas instead.');\n        // #endif\n\n        return this.renderer.canvas as R['canvas'];\n    }\n\n    /**\n     * Reference to the renderer's screen rectangle. This represents the visible area of your application.\n     *\n     * It's commonly used for:\n     * - Setting filter areas for full-screen effects\n     * - Defining hit areas for screen-wide interaction\n     * - Determining the visible bounds of your application\n     * @readonly\n     * @example\n     * ```js\n     * // Use as filter area for a full-screen effect\n     * const blurFilter = new BlurFilter();\n     * sprite.filterArea = app.screen;\n     *\n     * // Use as hit area for screen-wide interaction\n     * const screenSprite = new Sprite();\n     * screenSprite.hitArea = app.screen;\n     *\n     * // Get screen dimensions\n     * console.log(app.screen.width, app.screen.height);\n     * ```\n     * @see {@link Rectangle} For all available properties and methods\n     */\n    get screen(): Rectangle\n    {\n        return this.renderer.screen;\n    }\n\n    /**\n     * Destroys the application and all of its resources.\n     *\n     * This method should be called when you want to completely\n     * clean up the application and free all associated memory.\n     * @param rendererDestroyOptions - Options for destroying the renderer:\n     *  - `false` or `undefined`: Preserves the canvas element (default)\n     *  - `true`: Removes the canvas element\n     *  - `{ removeView: boolean }`: Object with removeView property to control canvas removal\n     * @param options - Options for destroying the application:\n     *  - `false` or `undefined`: Basic cleanup (default)\n     *  - `true`: Complete cleanup including children\n     *  - Detailed options object:\n     *    - `children`: Remove children\n     *    - `texture`: Destroy textures\n     *    - `textureSource`: Destroy texture sources\n     *    - `context`: Destroy WebGL context\n     * @example\n     * ```js\n     * // Basic cleanup\n     * app.destroy();\n     *\n     * // Remove canvas and do complete cleanup\n     * app.destroy(true, true);\n     *\n     * // Remove canvas with explicit options\n     * app.destroy({ removeView: true }, true);\n     *\n     * // Detailed cleanup with specific options\n     * app.destroy(\n     *     { removeView: true },\n     *     {\n     *         children: true,\n     *         texture: true,\n     *         textureSource: true,\n     *         context: true\n     *     }\n     * );\n     * ```\n     * > [!WARNING] After calling destroy, the application instance should no longer be used.\n     * > All properties will be null and further operations will throw errors.\n     */\n    public destroy(rendererDestroyOptions: RendererDestroyOptions = false, options: DestroyOptions = false): void\n    {\n        // Destroy plugins in the opposite order\n        // which they were constructed\n        const plugins = Application._plugins.slice(0);\n\n        plugins.reverse();\n        plugins.forEach((plugin) =>\n        {\n            plugin.destroy.call(this);\n        });\n\n        this.stage.destroy(options);\n        this.stage = null;\n\n        this.renderer.destroy(rendererDestroyOptions);\n        this.renderer = null;\n    }\n}\n\nextensions.handleByList(ExtensionType.Application, Application._plugins);\nextensions.add(ApplicationInitHook);\n", "import type { BitmapFontData, RawCharData } from '../AbstractBitmapFont';\n\n/**\n * Internal data format used to convert to BitmapFontData.\n * @private\n */\nexport interface BitmapFontRawData\n{\n    info: {\n        face: string;\n        size: string;\n    }[];\n    common: { lineHeight: string, base: string }[];\n    page: {\n        id: string;\n        file: string;\n    }[];\n    chars: {\n        count: number;\n    }[];\n    char: {\n        id: string\n        page: string\n        xoffset: string\n        yoffset: string\n        xadvance: string,\n        x: string\n        y: string\n        width: string\n        height: string\n        letter?: string\n        char?: string\n    }[];\n    kernings?: {\n        count: number;\n    }[];\n    kerning?: {\n        first: string;\n        second: string;\n        amount: string;\n    }[];\n    distanceField?: {\n        fieldType: 'sdf' | 'msdf' | 'none';\n        distanceRange: string;\n    }[]\n}\n\n/** @internal */\nexport const bitmapFontTextParser = {\n    test(data: string | XMLDocument | BitmapFontData): boolean\n    {\n        return typeof data === 'string' && data.startsWith('info face=');\n    },\n\n    parse(txt: string): BitmapFontData\n    {\n        // Retrieve data item\n        const items = txt.match(/^[a-z]+\\s+.+$/gm);\n        const rawData: BitmapFontRawData = {\n            info: [],\n            common: [],\n            page: [],\n            char: [],\n            chars: [],\n            kerning: [],\n            kernings: [],\n            distanceField: [],\n        };\n\n        for (const i in items)\n        {\n            // Extract item name\n            const name = items[i].match(/^[a-z]+/gm)[0] as keyof BitmapFontRawData;\n\n            // Extract item attribute list as string ex.: \"width=10\"\n            const attributeList = items[i].match(/[a-zA-Z]+=([^\\s\"']+|\"([^\"]*)\")/gm);\n\n            // Convert attribute list into an object\n            const itemData: any = {};\n\n            for (const i in attributeList)\n            {\n                // Split key-value pairs\n                const split = attributeList[i].split('=');\n                const key = split[0];\n\n                // Remove eventual quotes from value\n                const strValue = split[1].replace(/\"/gm, '');\n\n                // Try to convert value into float\n                const floatValue = parseFloat(strValue);\n\n                // Use string value case float value is NaN\n                const value = isNaN(floatValue) ? strValue : floatValue;\n\n                itemData[key] = value;\n            }\n\n            // Push current item to the resulting data\n            rawData[name].push(itemData);\n        }\n\n        const font: BitmapFontData = {\n            chars: {},\n            pages: [],\n            lineHeight: 0,\n            fontSize: 0,\n            fontFamily: '',\n            distanceField: null,\n            baseLineOffset: 0,\n        };\n\n        const [info] = rawData.info;\n        const [common] = rawData.common;\n        const [distanceField] = rawData.distanceField ?? [];\n\n        if (distanceField)\n        {\n            font.distanceField = {\n                range: parseInt(distanceField.distanceRange, 10),\n                type: distanceField.fieldType\n            };\n        }\n\n        font.fontSize = parseInt(info.size, 10);\n        font.fontFamily = info.face;\n        font.lineHeight = parseInt(common.lineHeight, 10);\n\n        const page = rawData.page;\n\n        for (let i = 0; i < page.length; i++)\n        {\n            font.pages.push({\n                id: parseInt(page[i].id, 10) || 0,\n                file: page[i].file,\n            });\n        }\n\n        const map: Record<string, string> = {};\n\n        font.baseLineOffset = font.lineHeight - parseInt(common.base, 10);\n\n        const char = rawData.char;\n\n        for (let i = 0; i < char.length; i++)\n        {\n            const charNode = char[i];\n            const id = parseInt(charNode.id, 10);\n\n            let letter = charNode.letter ?? charNode.char ?? String.fromCharCode(id);\n\n            if (letter === 'space')letter = ' ';\n\n            map[id] = letter;\n\n            font.chars[letter] = {\n                id,\n                // texture deets..\n                page: parseInt(charNode.page, 10) || 0,\n                x: parseInt(charNode.x, 10),\n                y: parseInt(charNode.y, 10),\n                width: parseInt(charNode.width, 10),\n                height: parseInt(charNode.height, 10),\n                xOffset: parseInt(charNode.xoffset, 10),\n                yOffset: parseInt(charNode.yoffset, 10),\n                xAdvance: parseInt(charNode.xadvance, 10),\n                kerning: {},\n            } as RawCharData;\n        }\n\n        const kerning = rawData.kerning || [];\n\n        for (let i = 0; i < kerning.length; i++)\n        {\n            const first = parseInt(kerning[i].first, 10);\n            const second = parseInt(kerning[i].second, 10);\n            const amount = parseInt(kerning[i].amount, 10);\n\n            font.chars[map[second]].kerning[map[first]] = amount;\n        }\n\n        return font;\n    }\n};\n", "import type { BitmapFontData, RawCharData } from '../AbstractBitmapFont';\n\n/** @internal */\nexport const bitmapFontXMLParser = {\n    test(data: string | XMLDocument | BitmapFontData): boolean\n    {\n        const xml = data as Document;\n\n        return typeof xml !== 'string'\n            && 'getElementsByTagName' in xml\n            && xml.getElementsByTagName('page').length\n            && xml.getElementsByTagName('info')[0].getAttribute('face') !== null;\n    },\n\n    parse(xml: Document): BitmapFontData\n    {\n        const data: BitmapFontData = {\n            chars: {},\n            pages: [],\n            lineHeight: 0,\n            fontSize: 0,\n            fontFamily: '',\n            distanceField: null,\n            baseLineOffset: 0,\n        };\n\n        const info = xml.getElementsByTagName('info')[0];\n        const common = xml.getElementsByTagName('common')[0];\n        const distanceField = xml.getElementsByTagName('distanceField')[0];\n\n        if (distanceField)\n        {\n            data.distanceField = {\n                type: distanceField.getAttribute('fieldType') as 'sdf' | 'msdf' | 'none',\n                range: parseInt(distanceField.getAttribute('distanceRange'), 10),\n            };\n        }\n\n        // pages and chars:\n        const page = xml.getElementsByTagName('page');\n        const char = xml.getElementsByTagName('char');\n        const kerning = xml.getElementsByTagName('kerning');\n\n        data.fontSize = parseInt(info.getAttribute('size'), 10);\n        data.fontFamily = info.getAttribute('face');\n        data.lineHeight = parseInt(common.getAttribute('lineHeight'), 10);\n\n        for (let i = 0; i < page.length; i++)\n        {\n            data.pages.push({\n                id: parseInt(page[i].getAttribute('id'), 10) || 0,\n                file: page[i].getAttribute('file'),\n            });\n        }\n\n        const map: Record<string, string> = {};\n\n        data.baseLineOffset = data.lineHeight - parseInt(common.getAttribute('base'), 10);\n\n        for (let i = 0; i < char.length; i++)\n        {\n            const charNode = char[i];\n            const id = parseInt(charNode.getAttribute('id'), 10);\n\n            let letter = charNode.getAttribute('letter') ?? charNode.getAttribute('char') ?? String.fromCharCode(id);\n\n            if (letter === 'space')letter = ' ';\n\n            map[id] = letter;\n\n            data.chars[letter] = {\n                id,\n                // texture deets..\n                page: parseInt(charNode.getAttribute('page'), 10) || 0,\n                x: parseInt(charNode.getAttribute('x'), 10),\n                y: parseInt(charNode.getAttribute('y'), 10),\n                width: parseInt(charNode.getAttribute('width'), 10),\n                height: parseInt(charNode.getAttribute('height'), 10),\n\n                // render deets..\n                xOffset: parseInt(charNode.getAttribute('xoffset'), 10),\n                yOffset: parseInt(charNode.getAttribute('yoffset'), 10), // + baseLineOffset,\n                xAdvance: parseInt(charNode.getAttribute('xadvance'), 10),\n                kerning: {},\n            } as RawCharData;\n        }\n\n        for (let i = 0; i < kerning.length; i++)\n        {\n            const first = parseInt(kerning[i].getAttribute('first'), 10);\n            const second = parseInt(kerning[i].getAttribute('second'), 10);\n            const amount = parseInt(kerning[i].getAttribute('amount'), 10);\n\n            data.chars[map[second]].kerning[map[first]] = amount;// * 10000;\n        }\n\n        return data;\n    }\n};\n", "import { DOMAdapter } from '../../../environment/adapter';\nimport { bitmapFontXMLParser } from './bitmapFontXMLParser';\n\nimport type { BitmapFontData } from '../AbstractBitmapFont';\n\n/** @internal */\nexport const bitmapFontXMLStringParser = {\n    test(data: string | XMLDocument | BitmapFontData): boolean\n    {\n        if (typeof data === 'string' && data.match(/<font(\\s|>)/))\n        {\n            return bitmapFontXMLParser.test(DOMAdapter.get().parseXML(data));\n        }\n\n        return false;\n    },\n\n    parse(data: string): BitmapFontData\n    {\n        return bitmapFontXMLParser.parse(DOMAdapter.get().parseXML(data));\n    }\n};\n", "import { LoaderParserPriority } from '../../../assets/loader/parsers/LoaderParser';\nimport { copySearchParams } from '../../../assets/utils/copySearchParams';\nimport { DOMAdapter } from '../../../environment/adapter';\nimport { ExtensionType } from '../../../extensions/Extensions';\nimport { path } from '../../../utils/path';\nimport { bitmapFontTextParser } from './bitmapFontTextParser';\nimport { bitmapFontXMLStringParser } from './bitmapFontXMLStringParser';\n\nimport type { CacheParser } from '../../../assets/cache/CacheParser';\nimport type { Loader } from '../../../assets/loader/Loader';\nimport type { LoaderParserAdvanced } from '../../../assets/loader/parsers/LoaderParser';\nimport type { ResolvedAsset } from '../../../assets/types';\nimport type { Texture } from '../../../rendering/renderers/shared/texture/Texture';\nimport type { BitmapFont } from '../BitmapFont';\n\nconst validExtensions = ['.xml', '.fnt'];\n\n/**\n * simple loader plugin for loading in bitmap fonts!\n * @category assets\n * @internal\n */\nexport const bitmapFontCachePlugin = {\n    extension: {\n        type: ExtensionType.CacheParser,\n        name: 'cacheBitmapFont',\n    },\n    test: (asset: BitmapFont) => !!asset?.pages && !!asset?.chars && typeof asset?.fontFamily === 'string',\n    getCacheableAssets(keys: string[], asset: BitmapFont)\n    {\n        const out: Record<string, BitmapFont> = {};\n\n        keys.forEach((key) =>\n        {\n            out[key] = asset;\n            out[`${key}-bitmap`] = asset;\n        });\n\n        out[`${asset.fontFamily}-bitmap`] = asset;\n\n        return out;\n    }\n} satisfies CacheParser<BitmapFont>;\n\n/**\n * Loader plugin for loading bitmap fonts.\n * It supports both XML and text formats, and can handle distance field fonts.\n * @category assets\n * @advanced\n */\nexport const loadBitmapFont = {\n    extension: {\n        type: ExtensionType.LoadParser,\n        priority: LoaderParserPriority.Normal,\n    },\n\n    /** used for deprecation purposes */\n    name: 'loadBitmapFont',\n    id: 'bitmap-font',\n\n    test(url: string): boolean\n    {\n        return validExtensions.includes(path.extname(url).toLowerCase());\n    },\n\n    async testParse(data: string): Promise<boolean>\n    {\n        return bitmapFontTextParser.test(data) || bitmapFontXMLStringParser.test(data);\n    },\n\n    async parse(asset: string, data: ResolvedAsset, loader: Loader): Promise<BitmapFont>\n    {\n        const bitmapFontData = bitmapFontTextParser.test(asset)\n            ? bitmapFontTextParser.parse(asset)\n            : bitmapFontXMLStringParser.parse(asset);\n\n        const { src } = data;\n        const { pages } = bitmapFontData;\n        const textureUrls = [];\n\n        // if we have a distance field - we can assume this is a signed distance field font\n        // and we should use force linear filtering and no alpha premultiply\n        const textureOptions = (bitmapFontData.distanceField) ? {\n            scaleMode: 'linear',\n            alphaMode: 'premultiply-alpha-on-upload',\n            autoGenerateMipmaps: false,\n            resolution: 1,\n        } : {};\n\n        for (let i = 0; i < pages.length; ++i)\n        {\n            const pageFile = pages[i].file;\n            let imagePath = path.join(path.dirname(src), pageFile);\n\n            imagePath = copySearchParams(imagePath, src);\n\n            textureUrls.push({\n                src: imagePath,\n                data: textureOptions\n            });\n        }\n\n        const [loadedTextures, { BitmapFont }] = await Promise.all([\n            loader.load<Texture>(textureUrls),\n            import('../BitmapFont'),\n        ]);\n        const textures = textureUrls.map((url) => loadedTextures[url.src]);\n\n        const bitmapFont = new BitmapFont({\n            data: bitmapFontData,\n            textures\n        }, src);\n\n        return bitmapFont;\n    },\n\n    async load(url: string, _options: ResolvedAsset): Promise<string>\n    {\n        const response = await DOMAdapter.get().fetch(url);\n\n        return await response.text();\n    },\n\n    async unload(bitmapFont: BitmapFont, _resolvedAsset, loader): Promise<void>\n    {\n        await Promise.all(bitmapFont.pages.map((page) => loader.unload(page.texture.source._sourceOrigin)));\n\n        bitmapFont.destroy();\n    }\n} satisfies LoaderParserAdvanced<string, BitmapFont, BitmapFont>;\n", "import type { Loader } from './loader/Loader';\nimport type { ResolvedAsset } from './types';\n\n/**\n * The BackgroundLoader handles loading assets passively in the background to prepare them for future use.\n * It loads one asset at a time to minimize impact on application performance.\n *\n * Key features:\n * - Sequential loading of assets\n * - Automatic pause when high-priority loads occur\n * - Configurable concurrency\n * @example\n * ```ts\n * import { Assets } from 'pixi.js';\n *\n * // Background load level assets while in menu\n * Assets.backgroundLoad([\n *     'level1/background.png',\n *     'level1/sprites.json',\n *     'level1/music.mp3'\n * ]);\n *\n * // Assets will be instantly available when needed\n * const assets = await Assets.load([\n *     'level1/background.png',\n *     'level1/sprites.json'\n * ]);\n *\n * // Background load bundles\n * Assets.backgroundLoadBundle('level2');\n *\n * // Later, instant access\n * const level2 = await Assets.loadBundle('level2');\n * ```\n * > [!NOTE] You typically do not need to use this class directly. Use the main {@link Assets.backgroundLoad} API instead.\n * @remarks\n * - Background loading is automatically paused when `Assets.load()` is called\n * - Assets are loaded sequentially to minimize performance impact\n * - Assets are cached as they complete loading\n * - No progress tracking is available for background loading\n * @see {@link Assets.backgroundLoad} For the main background loading API\n * @see {@link Assets.backgroundLoadBundle} For background loading bundles\n * @category assets\n * @advanced\n */\nexport class BackgroundLoader\n{\n    /** Whether or not the loader should continue loading. */\n    private _isActive: boolean;\n\n    /** Assets to load. */\n    private readonly _assetList: ResolvedAsset[];\n\n    /** Whether or not the loader is loading. */\n    private _isLoading: boolean;\n\n    /** Number of assets to load at a time. */\n    private readonly _maxConcurrent: number;\n\n    /**\n     * Should the loader log to the console.\n     * @advanced\n     */\n    public verbose: boolean;\n    private readonly _loader: Loader;\n\n    /**\n     * @param loader\n     * @param verbose - should the loader log to the console\n     */\n    constructor(loader: Loader, verbose = false)\n    {\n        this._loader = loader;\n        this._assetList = [];\n        this._isLoading = false;\n        this._maxConcurrent = 1;\n        this.verbose = verbose;\n    }\n\n    /**\n     * Adds assets to the background loading queue. Assets are loaded one at a time to minimize\n     * performance impact.\n     * @param assetUrls - Array of resolved assets to load in the background\n     * @example\n     * ```ts\n     * // Add assets to background load queue\n     * backgroundLoader.add([\n     *     { src: 'images/level1/bg.png' },\n     *     { src: 'images/level1/characters.json' }\n     * ]);\n     *\n     * // Assets will load sequentially in the background\n     * // The loader automatically pauses when high-priority loads occur\n     * // e.g. Assets.load() is called\n     * ```\n     * @remarks\n     * - Assets are loaded one at a time to minimize performance impact\n     * - Loading automatically pauses when Assets.load() is called\n     * - No progress tracking is available for background loading\n     * - Assets are cached as they complete loading\n     * @internal\n     */\n    public add(assetUrls: ResolvedAsset[]): void\n    {\n        assetUrls.forEach((a) =>\n        {\n            this._assetList.push(a);\n        });\n\n        if (this.verbose)\n        {\n            // eslint-disable-next-line no-console\n            console.log('[BackgroundLoader] assets: ', this._assetList);\n        }\n\n        if (this._isActive && !this._isLoading)\n        {\n            void this._next();\n        }\n    }\n\n    /**\n     * Loads the next set of assets. Will try to load as many assets as it can at the same time.\n     *\n     * The max assets it will try to load at one time will be 4.\n     */\n    private async _next(): Promise<void>\n    {\n        if (this._assetList.length && this._isActive)\n        {\n            this._isLoading = true;\n\n            const toLoad = [];\n\n            const toLoadAmount = Math.min(this._assetList.length, this._maxConcurrent);\n\n            for (let i = 0; i < toLoadAmount; i++)\n            {\n                toLoad.push(this._assetList.pop());\n            }\n\n            await this._loader.load(toLoad);\n\n            this._isLoading = false;\n\n            void this._next();\n        }\n    }\n\n    /**\n     * Controls the active state of the background loader. When active, the loader will\n     * continue processing its queue. When inactive, loading is paused.\n     * @returns Whether the background loader is currently active\n     * @example\n     * ```ts\n     * // Pause background loading\n     * backgroundLoader.active = false;\n     *\n     * // Resume background loading\n     * backgroundLoader.active = true;\n     *\n     * // Check current state\n     * console.log(backgroundLoader.active); // true/false\n     *\n     * // Common use case: Pause during intensive operations\n     * backgroundLoader.active = false;  // Pause background loading\n     * ... // Perform high-priority tasks\n     * backgroundLoader.active = true;   // Resume background loading\n     * ```\n     * @remarks\n     * - Setting to true resumes loading immediately\n     * - Setting to false pauses after current asset completes\n     * - Background loading is automatically paused during `Assets.load()`\n     * - Assets already being loaded will complete even when set to false\n     */\n    public get active(): boolean\n    {\n        return this._isActive;\n    }\n\n    set active(value: boolean)\n    {\n        if (this._isActive === value) return;\n\n        this._isActive = value;\n\n        if (value && !this._isLoading)\n        {\n            void this._next();\n        }\n    }\n}\n", "import { ExtensionType } from '../../../extensions/Extensions';\nimport { Texture } from '../../../rendering/renderers/shared/texture/Texture';\n\nimport type { CacheParser } from '../CacheParser';\n\n/**\n * Returns an object of textures from an array of textures to be cached\n * @category assets\n * @internal\n */\nexport const cacheTextureArray: CacheParser<Texture[]> = {\n    extension: {\n        type: ExtensionType.CacheParser,\n        name: 'cacheTextureArray',\n    },\n\n    test: (asset: any[]) => Array.isArray(asset) && asset.every((t) => t instanceof Texture),\n\n    getCacheableAssets: (keys: string[], asset: Texture[]) =>\n    {\n        const out: Record<string, Texture> = {};\n\n        keys.forEach((key: string) =>\n        {\n            asset.forEach((item: Texture, i: number) =>\n            {\n                out[key + (i === 0 ? '' : i + 1)] = item;\n            });\n        });\n\n        return out;\n    }\n};\n", "/**\n * @param imageData\n * @internal\n */\nexport async function testImageFormat(imageData: string): Promise<boolean>\n{\n    // Some browsers currently do not support createImageBitmap with Blob, so new Image() is preferred when exist.\n    // See https://caniuse.com/createimagebitmap for more information.\n\n    if ('Image' in globalThis)\n    {\n        return new Promise<boolean>((resolve) =>\n        {\n            // eslint-disable-next-line no-restricted-globals\n            const image = new Image();\n\n            image.onload = () =>\n            {\n                resolve(true);\n            };\n            image.onerror = () =>\n            {\n                resolve(false);\n            };\n            image.src = imageData;\n        });\n    }\n\n    if ('createImageBitmap' in globalThis && 'fetch' in globalThis)\n    {\n        try\n        {\n            const blob = await (await fetch(imageData)).blob();\n\n            await createImageBitmap(blob);\n        }\n        catch (_e)\n        {\n            return false;\n        }\n\n        return true;\n    }\n\n    return false;\n}\n", "import { ExtensionType } from '../../../extensions/Extensions';\nimport { testImageFormat } from '../utils/testImageFormat';\n\nimport type { FormatDetectionParser } from '../types';\n\n/**\n * Detects if the browser supports the AVIF image format.\n * @category assets\n * @internal\n */\nexport const detectAvif: FormatDetectionParser = {\n    extension: {\n        type: ExtensionType.DetectionParser,\n        priority: 1,\n    },\n    test: async (): Promise<boolean> => testImageFormat(\n        // eslint-disable-next-line max-len\n        'data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A='\n    ),\n    add: async (formats) => [...formats, 'avif'],\n    remove: async (formats) => formats.filter((f) => f !== 'avif'),\n};\n", "import { ExtensionType } from '../../../extensions/Extensions';\n\nimport type { FormatDetectionParser } from '../types';\n\nconst imageFormats = ['png', 'jpg', 'jpeg'];\n\n/**\n * Adds some default image formats to the detection parser\n * @category assets\n * @internal\n */\nexport const detectDefaults = {\n    extension: {\n        type: ExtensionType.DetectionParser,\n        priority: -1,\n    },\n    test: (): Promise<boolean> => Promise.resolve(true),\n    add: async (formats) => [...formats, ...imageFormats],\n    remove: async (formats) => formats.filter((f) => !imageFormats.includes(f)),\n} as FormatDetectionParser;\n", "/* eslint-disable no-restricted-globals */\nconst inWorker = 'WorkerGlobalScope' in globalThis\n    && globalThis instanceof (globalThis as any).WorkerGlobalScope;\n\n/**\n * @param mimeType\n * @internal\n */\nexport function testVideoFormat(mimeType: string): boolean\n{\n    if (inWorker)\n    {\n        return false;\n    }\n\n    const video = document.createElement('video');\n\n    return video.canPlayType(mimeType) !== '';\n}\n", "import { ExtensionType } from '../../../extensions/Extensions';\nimport { testVideoFormat } from '../utils/testVideoFormat';\n\nimport type { FormatDetectionParser } from '../types';\n\n/**\n * Detects if the browser supports the MP4 video format.\n * @category assets\n * @internal\n */\nexport const detectMp4 = {\n    extension: {\n        type: ExtensionType.DetectionParser,\n        priority: 0,\n    },\n    test: async (): Promise<boolean> => testVideoFormat('video/mp4'),\n    add: async (formats) => [...formats, 'mp4', 'm4v'],\n    remove: async (formats) => formats.filter((f) => f !== 'mp4' && f !== 'm4v'),\n} as FormatDetectionParser;\n", "import { ExtensionType } from '../../../extensions/Extensions';\nimport { testVideoFormat } from '../utils/testVideoFormat';\n\nimport type { FormatDetectionParser } from '../types';\n\n/**\n * Detects if the browser supports the OGV video format.\n * @category assets\n * @internal\n */\nexport const detectOgv = {\n    extension: {\n        type: ExtensionType.DetectionParser,\n        priority: 0,\n    },\n    test: async (): Promise<boolean> => testVideoFormat('video/ogg'),\n    add: async (formats) => [...formats, 'ogv'],\n    remove: async (formats) => formats.filter((f) => f !== 'ogv'),\n} as FormatDetectionParser;\n", "import { ExtensionType } from '../../../extensions/Extensions';\nimport { testVideoFormat } from '../utils/testVideoFormat';\n\nimport type { FormatDetectionParser } from '../types';\n\n/**\n * Detects if the browser supports the WebM video format.\n * @category assets\n * @internal\n */\nexport const detectWebm = {\n    extension: {\n        type: ExtensionType.DetectionParser,\n        priority: 0,\n    },\n    test: async (): Promise<boolean> => testVideoFormat('video/webm'),\n    add: async (formats) => [...formats, 'webm'],\n    remove: async (formats) => formats.filter((f) => f !== 'webm'),\n} as FormatDetectionParser;\n", "import { ExtensionType } from '../../../extensions/Extensions';\nimport { testImageFormat } from '../utils/testImageFormat';\n\nimport type { FormatDetectionParser } from '../types';\n\n/**\n * Detects if the browser supports the WebP image format.\n * @category assets\n * @internal\n */\nexport const detectWebp = {\n    extension: {\n        type: ExtensionType.DetectionParser,\n        priority: 0,\n    },\n    test: async (): Promise<boolean> => testImageFormat(\n        'data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA='\n    ),\n    add: async (formats) => [...formats, 'webp'],\n    remove: async (formats) => formats.filter((f) => f !== 'webp'),\n} as FormatDetectionParser;\n", "import { warn } from '../../utils/logging/warn';\nimport { path } from '../../utils/path';\nimport { type ProgressCallback } from '../Assets';\nimport { convertToList } from '../utils/convertToList';\nimport { isSingleItem } from '../utils/isSingleItem';\n\nimport type { ResolvedAsset } from '../types';\nimport type { LoaderParser } from './parsers/LoaderParser';\nimport type { PromiseAndParser } from './types';\n\n/**\n * Options for loading assets with the Loader\n * @example\n * ```ts\n * await Assets.load(['file1.png', 'file2.png'], {\n *   onProgress: (progress) => console.log(`Progress: ${progress * 100}%`),\n *   onError: (error, url) => console.error(`Error loading ${url}: ${error.message}`),\n *   strategy: 'retry', // 'throw' | 'skip' | 'retry'\n *   retryCount: 5, // Number of retry attempts if strategy is 'retry'\n *   retryDelay: 500, // Delay in ms between retries\n * });\n * ```\n * @category assets\n * @standard\n */\nexport interface LoadOptions\n{\n    /**\n     * Callback for progress updates during loading\n     * @param progress - A number between 0 and 1 indicating the load progress\n     * @example\n     * ```ts\n     * const options: LoadOptions = {\n     *   onProgress: (progress) => {\n     *     console.log(`Loading progress: ${progress * 100}%`);\n     *   },\n     * };\n     * await Assets.load('image.png', options);\n     * ```\n     */\n    onProgress?: (progress: number) => void;\n    /**\n     * Callback for handling errors during loading\n     * @param error - The error that occurred\n     * @param url - The URL of the asset that failed to load\n     * @example\n     * ```ts\n     * const options: LoadOptions = {\n     *   onError: (error, url) => {\n     *     console.error(`Failed to load ${url}: ${error.message}`);\n     *   },\n     * };\n     * await Assets.load('missing-file.png', options);\n     * ```\n     */\n    onError?: (error: Error, url: string | ResolvedAsset) => void;\n    /**\n     * Strategy to handle load failures\n     * - 'throw': Immediately throw an error and stop loading (default)\n     * - 'skip': Skip the failed asset and continue loading others\n     * - 'retry': Retry loading the asset a specified number of times\n     * @default 'throw'\n     * @example\n     * ```ts\n     * const options: LoadOptions = {\n     *   strategy: 'skip',\n     * };\n     * await Assets.load('sometimes-fails.png', options);\n     * ```\n     */\n    strategy?: 'throw' | 'skip' | 'retry';\n    /**\n     * Number of retry attempts if strategy is 'retry'\n     * @default 3\n     * @example\n     * ```ts\n     * const options: LoadOptions = {\n     *   strategy: 'retry',\n     *   retryCount: 5, // Retry up to 5 times\n     * };\n     * await Assets.load('unstable-asset.png', options);\n     * ```\n     */\n    retryCount?: number;\n    /**\n     * Delay in milliseconds between retry attempts\n     * @default 250\n     * @example\n     * ```ts\n     * const options: LoadOptions = {\n     *   strategy: 'retry',\n     *   retryDelay: 1000, // Wait 1 second between retries\n     * };\n     * await Assets.load('sometimes-fails.png', options);\n     * ```\n     */\n    retryDelay?: number;\n}\n\n/**\n * The Loader is responsible for loading all assets, such as images, spritesheets, audio files, etc.\n * It does not do anything clever with URLs - it just loads stuff!\n * Behind the scenes all things are cached using promises. This means it's impossible to load an asset more than once.\n * Through the use of LoaderParsers, the loader can understand how to load any kind of file!\n *\n * It is not intended that this class is created by developers - its part of the Asset class\n * This is the second major system of PixiJS' main Assets class\n * @category assets\n * @advanced\n */\nexport class Loader\n{\n    /**\n     * Default options for loading assets\n     * @example\n     * ```ts\n     * // Change default load options globally\n     * Loader.defaultOptions = {\n     *   strategy: 'skip', // Change default strategy to 'skip'\n     *   retryCount: 5,   // Change default retry count to 5\n     *   retryDelay: 500, // Change default retry delay to 500ms\n     * };\n     * ```\n     */\n    public static defaultOptions: LoadOptions = {\n        onProgress: undefined,\n        onError: undefined,\n        strategy: 'throw',\n        retryCount: 3,\n        retryDelay: 250,\n    };\n    /**\n     * Options for loading assets with the loader.\n     * These options will be used as defaults for all load calls made with this loader instance.\n     * They can be overridden by passing options directly to the load method.\n     * @example\n     * ```ts\n     * // Create a loader with custom default options\n     * const loader = new Loader();\n     * loader.loadOptions = {\n     *   strategy: 'skip', // Default strategy to 'skip'\n     *   retryCount: 5,   // Default retry count to 5\n     *   retryDelay: 500, // Default retry delay to 500ms\n     * };\n     *\n     * // This load call will use the loader's default options\n     * await loader.load('image1.png');\n     */\n    public loadOptions: LoadOptions = { ...Loader.defaultOptions };\n    private readonly _parsers: LoaderParser[] = [];\n    private _parserHash: Record<string, LoaderParser>;\n\n    private _parsersValidated = false;\n\n    /**\n     * All loader parsers registered\n     * @type {assets.LoaderParser[]}\n     */\n    public parsers = new Proxy(this._parsers, {\n        set: (target, key, value) =>\n        {\n            this._parsersValidated = false;\n\n            target[key as any as number] = value;\n\n            return true;\n        }\n    });\n\n    /** Cache loading promises that ae currently active */\n    public promiseCache: Record<string, PromiseAndParser> = {};\n\n    /** function used for testing */\n    public reset(): void\n    {\n        this._parsersValidated = false;\n        this.promiseCache = {};\n    }\n\n    /**\n     * Used internally to generate a promise for the asset to be loaded.\n     * @param url - The URL to be loaded\n     * @param data - any custom additional information relevant to the asset being loaded\n     * @returns - a promise that will resolve to an Asset for example a Texture of a JSON object\n     */\n    private _getLoadPromiseAndParser(url: string, data?: ResolvedAsset): PromiseAndParser\n    {\n        const result: PromiseAndParser = {\n            promise: null,\n            parser: null\n        };\n\n        result.promise = (async () =>\n        {\n            let asset = null;\n\n            let parser: LoaderParser = null;\n\n            // first check to see if the user has specified a parser\n            if (data.parser || data.loadParser)\n            {\n                // they have? lovely, lets use it\n                parser = this._parserHash[data.parser || data.loadParser];\n\n                // #if _DEBUG\n                if (data.loadParser)\n                {\n                    warn(\n                        `[Assets] \"loadParser\" is deprecated, use \"parser\" instead for ${url}`\n                    );\n                }\n                // #endif\n\n                if (!parser)\n                {\n                    // #if _DEBUG\n                    warn(\n                        `[Assets] specified load parser \"${data.parser || data.loadParser}\" not found while loading ${url}`\n                    );\n                    // #endif\n                }\n            }\n\n            // no parser specified, so lets try and find one using the tests\n            if (!parser)\n            {\n                for (let i = 0; i < this.parsers.length; i++)\n                {\n                    const parserX = this.parsers[i];\n\n                    if (parserX.load && parserX.test?.(url, data, this))\n                    {\n                        parser = parserX;\n                        break;\n                    }\n                }\n\n                if (!parser)\n                {\n                    // #if _DEBUG\n                    // eslint-disable-next-line max-len\n                    warn(`[Assets] ${url} could not be loaded as we don't know how to parse it, ensure the correct parser has been added`);\n                    // #endif\n\n                    return null;\n                }\n            }\n\n            asset = await parser.load(url, data, this);\n            result.parser = parser;\n\n            for (let i = 0; i < this.parsers.length; i++)\n            {\n                const parser = this.parsers[i];\n\n                if (parser.parse)\n                {\n                    if (parser.parse && await parser.testParse?.(asset, data, this))\n                    {\n                        // transform the asset..\n                        asset = await parser.parse(asset, data, this) || asset;\n\n                        result.parser = parser;\n                    }\n                }\n            }\n\n            return asset;\n        })();\n\n        return result;\n    }\n\n    /**\n     * Loads one or more assets using the parsers added to the Loader.\n     * @example\n     * // Single asset:\n     * const asset = await Loader.load('cool.png');\n     * console.log(asset);\n     *\n     * // Multiple assets:\n     * const assets = await Loader.load(['cool.png', 'cooler.png']);\n     * console.log(assets);\n     * @param assetsToLoadIn - urls that you want to load, or a single one!\n     * @param onProgress - For multiple asset loading only, an optional function that is called\n     * when progress on asset loading is made. The function is passed a single parameter, `progress`,\n     * which represents the percentage (0.0 - 1.0) of the assets loaded. Do not use this function\n     * to detect when assets are complete and available, instead use the Promise returned by this function.\n     */\n    public async load<T = any>(\n        assetsToLoadIn: string | ResolvedAsset,\n        onProgress?: ProgressCallback | LoadOptions,\n    ): Promise<T>;\n    public async load<T = any>(\n        assetsToLoadIn: string[] | ResolvedAsset[],\n        onProgress?: ProgressCallback | LoadOptions,\n    ): Promise<Record<string, T>>;\n    public async load<T = any>(\n        assetsToLoadIn: string | string[] | ResolvedAsset | ResolvedAsset[],\n        onProgressOrOptions?: ProgressCallback | LoadOptions,\n    ): Promise<T | Record<string, T>>\n    {\n        if (!this._parsersValidated)\n        {\n            this._validateParsers();\n        }\n\n        const options: LoadOptions = typeof onProgressOrOptions === 'function'\n            ? { ...Loader.defaultOptions, ...this.loadOptions, onProgress: onProgressOrOptions }\n            : { ...Loader.defaultOptions, ...this.loadOptions, ...(onProgressOrOptions || {}) };\n        const { onProgress, onError, strategy, retryCount, retryDelay } = options;\n\n        let count = 0;\n\n        const assets: Record<string, T> = {};\n\n        const singleAsset = isSingleItem(assetsToLoadIn);\n\n        const assetsToLoad = convertToList<ResolvedAsset>(assetsToLoadIn, (item) => ({\n            alias: [item],\n            src: item,\n            data: {}\n        }));\n\n        const total = assetsToLoad.reduce((sum, asset) => sum + (asset.progressSize || 1), 0);\n\n        const promises: Promise<void>[] = assetsToLoad.map(async (asset: ResolvedAsset) =>\n        {\n            const url = path.toAbsolute(asset.src);\n\n            if (assets[asset.src]) return;\n\n            await this._loadAssetWithRetry(url, asset, { onProgress, onError, strategy, retryCount, retryDelay }, assets);\n\n            count += (asset.progressSize || 1);\n            if (onProgress) onProgress(count / total);\n        });\n\n        await Promise.all(promises);\n\n        return singleAsset ? assets[assetsToLoad[0].src] : assets;\n    }\n\n    /**\n     * Unloads one or more assets. Any unloaded assets will be destroyed, freeing up memory for your app.\n     * The parser that created the asset, will be the one that unloads it.\n     * @example\n     * // Single asset:\n     * const asset = await Loader.load('cool.png');\n     *\n     * await Loader.unload('cool.png');\n     *\n     * console.log(asset.destroyed); // true\n     * @param assetsToUnloadIn - urls that you want to unload, or a single one!\n     */\n    public async unload(\n        assetsToUnloadIn: string | string[] | ResolvedAsset | ResolvedAsset[],\n    ): Promise<void>\n    {\n        const assetsToUnload = convertToList<ResolvedAsset>(assetsToUnloadIn, (item) => ({\n            alias: [item],\n            src: item,\n        }));\n\n        const promises: Promise<void>[] = assetsToUnload.map(async (asset: ResolvedAsset) =>\n        {\n            const url = path.toAbsolute(asset.src);\n\n            const loadPromise = this.promiseCache[url];\n\n            if (loadPromise)\n            {\n                const loadedAsset = await loadPromise.promise;\n\n                delete this.promiseCache[url];\n\n                await loadPromise.parser?.unload?.(loadedAsset, asset, this);\n            }\n        });\n\n        await Promise.all(promises);\n    }\n\n    /** validates our parsers, right now it only checks for name conflicts but we can add more here as required! */\n    private _validateParsers()\n    {\n        this._parsersValidated = true;\n\n        this._parserHash = this._parsers\n            .filter((parser) => parser.name || parser.id)\n            .reduce((hash, parser) =>\n            {\n                if (!parser.name && !parser.id)\n                {\n                    // #if _DEBUG\n                    warn(`[Assets] parser should have an id`);\n                    // #endif\n                }\n                else if (hash[parser.name] || hash[parser.id])\n                {\n                    // #if _DEBUG\n                    warn(`[Assets] parser id conflict \"${parser.id}\"`);\n                    // #endif\n                }\n\n                // add both name and id to the hash\n                hash[parser.name] = parser;\n                if (parser.id) hash[parser.id] = parser;\n\n                return hash;\n            }, {} as Record<string, LoaderParser>);\n    }\n\n    private async _loadAssetWithRetry<T>(\n        url: string,\n        asset: ResolvedAsset,\n        options: LoadOptions,\n        assets: Record<string, T>\n    )\n    {\n        let attempt = 0;\n        const { onError, strategy, retryCount, retryDelay } = options;\n        const wait = (ms: number) => new Promise((r) => setTimeout(r, ms));\n\n        while (true)\n        {\n            try\n            {\n                if (!this.promiseCache[url])\n                {\n                    this.promiseCache[url] = this._getLoadPromiseAndParser(url, asset);\n                }\n\n                assets[asset.src] = await this.promiseCache[url].promise as T;\n\n                return;\n            }\n            catch (e)\n            {\n                // clear cache for a new attempt\n                delete this.promiseCache[url];\n                delete assets[asset.src];\n\n                attempt++;\n\n                const isLast = strategy !== 'retry' || attempt > retryCount;\n\n                if (strategy === 'retry' && !isLast)\n                {\n                    if (onError) onError(e as Error, asset);\n                    await wait(retryDelay);\n                    continue;\n                }\n\n                if (strategy === 'skip')\n                {\n                    if (onError) onError(e as Error, asset);\n\n                    return;\n                }\n\n                // strategy 'throw' or exhausted 'retry'\n                if (onError) onError(e as Error, asset);\n                const error = new Error(`[Loader.load] Failed to load ${url}.\\n${e}`);\n\n                if (e instanceof Error && e.stack)\n                {\n                    error.stack = e.stack;\n                }\n                throw error;\n            }\n        }\n    }\n}\n", "/**\n * @param url\n * @param mimes\n * @internal\n */\nexport function checkDataUrl(url: string, mimes: string | string[]): boolean\n{\n    if (Array.isArray(mimes))\n    {\n        for (const mime of mimes)\n        {\n            if (url.startsWith(`data:${mime}`)) return true;\n        }\n\n        return false;\n    }\n\n    return url.startsWith(`data:${mimes}`);\n}\n", "import { path } from '../../utils/path';\n\n/**\n * @param url\n * @param extension\n * @internal\n */\nexport function checkExtension(url: string, extension: string | string[]): boolean\n{\n    const tempURL = url.split('?')[0];\n    const ext = path.extname(tempURL).toLowerCase();\n\n    if (Array.isArray(extension))\n    {\n        return extension.includes(ext);\n    }\n\n    return ext === extension;\n}\n\n", "import { DOMAdapter } from '../../../environment/adapter';\nimport { ExtensionType } from '../../../extensions/Extensions';\nimport { checkDataUrl } from '../../utils/checkDataUrl';\nimport { checkExtension } from '../../utils/checkExtension';\nimport { LoaderParserPriority } from './LoaderParser';\n\nimport type { LoaderParser } from './LoaderParser';\n\nconst validJSONExtension = '.json';\nconst validJSONMIME = 'application/json';\n\n/**\n * A simple loader plugin for loading json data\n * @category assets\n * @advanced\n */\nexport const loadJson = {\n    extension: {\n        type: ExtensionType.LoadParser,\n        priority: LoaderParserPriority.Low,\n    },\n\n    /** used for deprecation purposes */\n    name: 'loadJson',\n    id: 'json',\n\n    test(url: string): boolean\n    {\n        return checkDataUrl(url, validJSONMIME) || checkExtension(url, validJSONExtension);\n    },\n\n    async load<T>(url: string): Promise<T>\n    {\n        const response = await DOMAdapter.get().fetch(url);\n\n        const json = await response.json();\n\n        return json as T;\n    },\n} satisfies LoaderParser<string>;\n", "import { DOMAdapter } from '../../../environment/adapter';\nimport { ExtensionType } from '../../../extensions/Extensions';\nimport { checkDataUrl } from '../../utils/checkDataUrl';\nimport { checkExtension } from '../../utils/checkExtension';\nimport { LoaderParserPriority } from './LoaderParser';\n\nimport type { LoaderParser } from './LoaderParser';\n\nconst validTXTExtension = '.txt';\nconst validTXTMIME = 'text/plain';\n\n/**\n * A simple loader plugin for loading text data\n * @category assets\n * @advanced\n */\nexport const loadTxt = {\n\n    /** used for deprecation purposes */\n    name: 'loadTxt',\n    id: 'text',\n\n    extension: {\n        type: ExtensionType.LoadParser,\n        priority: LoaderParserPriority.Low,\n        name: 'loadTxt',\n    },\n\n    test(url: string): boolean\n    {\n        return checkDataUrl(url, validTXTMIME) || checkExtension(url, validTXTExtension);\n    },\n\n    async load(url: string): Promise<string>\n    {\n        const response = await DOMAdapter.get().fetch(url);\n\n        const txt = await response.text();\n\n        return txt;\n    },\n} satisfies LoaderParser<string>;\n", "import { DOMAdapter } from '../../../environment/adapter';\nimport { ExtensionType } from '../../../extensions/Extensions';\nimport { warn } from '../../../utils/logging/warn';\nimport { path } from '../../../utils/path';\nimport { Cache } from '../../cache/Cache';\nimport { checkDataUrl } from '../../utils/checkDataUrl';\nimport { checkExtension } from '../../utils/checkExtension';\nimport { LoaderParserPriority } from './LoaderParser';\n\nimport type { ResolvedAsset } from '../../types';\nimport type { LoaderParser } from './LoaderParser';\n\nconst validWeights = [\n    'normal', 'bold',\n    '100', '200', '300', '400', '500', '600', '700', '800', '900',\n];\nconst validFontExtensions = ['.ttf', '.otf', '.woff', '.woff2'];\nconst validFontMIMEs = [\n    'font/ttf',\n    'font/otf',\n    'font/woff',\n    'font/woff2',\n];\n\n/**\n * Cache for font faces\n * @internal\n */\nexport interface FontFaceCache\n{\n    entries: {url: string, faces: FontFace[]}[]\n}\n\n/**\n * Data for loading a font\n * @category assets\n * @advanced\n */\nexport type LoadFontData = {\n    /** Font family name */\n    family: string;\n    /** A set of optional descriptors passed as an object. It can contain any of the descriptors available for @font-face: */\n    display: string;\n    /**\n     * The featureSettings property of the FontFace interface retrieves or sets infrequently used\n     * font features that are not available from a font's variant properties.\n     */\n    featureSettings: string;\n    /** The stretch property of the FontFace interface retrieves or sets how the font stretches. */\n    stretch: string;\n    /** The style property of the FontFace interface retrieves or sets the font's style. */\n    style: string;\n    /**\n     * The unicodeRange property of the FontFace interface retrieves or sets the range of\n     * unicode code points encompassing the font.\n     */\n    unicodeRange: string;\n    /** The variant property of the FontFace interface programmatically retrieves or sets font variant values. */\n    variant: string;\n    /** The weight property of the FontFace interface retrieves or sets the weight of the font. */\n    weights: string[];\n};\n\n/**\n * RegExp for matching CSS <ident-token>. It doesn't consider escape and non-ASCII characters, but enough for us.\n * @see {@link https://www.w3.org/TR/css-syntax-3/#ident-token-diagram}\n */\nconst CSS_IDENT_TOKEN_REGEX = /^(--|-?[A-Z_])[0-9A-Z_-]*$/i;\n\n/**\n * Return font face name from a file name\n * Ex.: 'fonts/titan-one.woff' turns into 'Titan One'\n * @param url - File url\n * @category assets\n * @internal\n */\nexport function getFontFamilyName(url: string): string\n{\n    const ext = path.extname(url);\n    const name = path.basename(url, ext);\n\n    // Replace dashes by white spaces\n    const nameWithSpaces = name.replace(/(-|_)/g, ' ');\n\n    // Upper case first character of each word\n    const nameTokens = nameWithSpaces.toLowerCase()\n        .split(' ')\n        .map((word) => word.charAt(0).toUpperCase() + word.slice(1));\n\n    let valid = nameTokens.length > 0;\n\n    for (const token of nameTokens)\n    {\n        if (!token.match(CSS_IDENT_TOKEN_REGEX))\n        {\n            valid = false;\n            break;\n        }\n    }\n\n    let fontFamilyName = nameTokens.join(' ');\n\n    if (!valid)\n    {\n        fontFamilyName = `\"${fontFamilyName.replace(/[\\\\\"]/g, '\\\\$&')}\"`;\n    }\n\n    return fontFamilyName;\n}\n\n// See RFC 3986 Chapter 2. Characters\nconst validURICharactersRegex = /^[0-9A-Za-z%:/?#\\[\\]@!\\$&'()\\*\\+,;=\\-._~]*$/;\n\n/**\n * Encode URI only when it contains invalid characters.\n * @param uri - URI to encode.\n */\nfunction encodeURIWhenNeeded(uri: string)\n{\n    if (validURICharactersRegex.test(uri))\n    {\n        return uri;\n    }\n\n    return encodeURI(uri);\n}\n\n/**\n * A loader plugin for handling web fonts\n * @example\n * import { Assets } from 'pixi.js';\n *\n * Assets.load({\n *   alias: 'font',\n *   src: 'fonts/titan-one.woff',\n *   data: {\n *     family: 'Titan One',\n *     weights: ['normal', 'bold'],\n *   }\n * })\n * @category assets\n * @advanced\n */\nexport const loadWebFont = {\n    extension: {\n        type: ExtensionType.LoadParser,\n        priority: LoaderParserPriority.Low,\n    },\n\n    /** used for deprecation purposes */\n    name: 'loadWebFont',\n    id: 'web-font',\n\n    test(url: string): boolean\n    {\n        return checkDataUrl(url, validFontMIMEs) || checkExtension(url, validFontExtensions);\n    },\n\n    async load(url: string, options?: ResolvedAsset<LoadFontData>): Promise<FontFace | FontFace[]>\n    {\n        const fonts = DOMAdapter.get().getFontFaceSet();\n\n        if (fonts)\n        {\n            const fontFaces: FontFace[] = [];\n            const name = options.data?.family ?? getFontFamilyName(url);\n            const weights = options.data?.weights?.filter((weight) => validWeights.includes(weight)) ?? ['normal'];\n            const data = options.data ?? {};\n\n            for (let i = 0; i < weights.length; i++)\n            {\n                const weight = weights[i];\n\n                const font = new FontFace(name, `url(${encodeURIWhenNeeded(url)})`, {\n                    ...data,\n                    weight,\n                });\n\n                await font.load();\n\n                fonts.add(font);\n\n                fontFaces.push(font);\n            }\n\n            if (Cache.has(`${name}-and-url`))\n            {\n                const cached = Cache.get<FontFaceCache>(`${name}-and-url`);\n\n                // If the URL is already cached, we just add the new font faces to the existing cache\n                cached.entries.push({ url, faces: fontFaces });\n            }\n            else\n            {\n                Cache.set<FontFaceCache>(`${name}-and-url`, {\n                    entries: [{ url, faces: fontFaces }],\n                });\n            }\n\n            return fontFaces.length === 1 ? fontFaces[0] : fontFaces;\n        }\n\n        // #if _DEBUG\n        warn('[loadWebFont] FontFace API is not supported. Skipping loading font');\n        // #endif\n\n        return null;\n    },\n\n    unload(font: FontFace | FontFace[]): void\n    {\n        const fonts = Array.isArray(font) ? font : [font];\n\n        // you can only load 1 family at a time, so we can use the first one\n        const fontFamily = fonts[0].family;\n        const cached = Cache.get<FontFaceCache>(`${fontFamily}-and-url`);\n\n        // find the entry that contains the font faces we want to remove\n        const entry = cached.entries.find((f) => f.faces.some((t) => fonts.indexOf(t) !== -1));\n\n        // remove the font faces from the cache\n        entry.faces = entry.faces.filter((f) => fonts.indexOf(f) === -1);\n\n        // if faces are empty, remove the entry\n        if (entry.faces.length === 0)\n        {\n            cached.entries = cached.entries.filter((f) => f !== entry);\n        }\n\n        // finally remove the font faces from the FontFaceSet\n        fonts.forEach((t) =>\n        {\n            DOMAdapter.get().getFontFaceSet().delete(t);\n        });\n\n        // Clean up cache if no entries remain\n        if (cached.entries.length === 0)\n        {\n            Cache.remove(`${fontFamily}-and-url`);\n        }\n    }\n} satisfies LoaderParser<FontFace | FontFace[]>;\n", "import { Resolver } from '../../assets/resolver/Resolver';\n\n/**\n * get the resolution / device pixel ratio of an asset by looking for the prefix\n * used by spritesheets and image urls\n * @category utils\n * @internal\n * @param {string} url - the image path\n * @param {number} [defaultValue=1] - the defaultValue if no filename prefix is set.\n * @returns {number} resolution / device pixel ratio of an asset\n */\nexport function getResolutionOfUrl(url: string, defaultValue = 1): number\n{\n    const resolution = Resolver.RETINA_PREFIX?.exec(url);\n\n    if (resolution)\n    {\n        return parseFloat(resolution[1]);\n    }\n\n    return defaultValue;\n}\n", "import { Texture } from '../../../../../rendering/renderers/shared/texture/Texture';\nimport { warn } from '../../../../../utils/logging/warn';\nimport { Cache } from '../../../../cache/Cache';\n\nimport type { TextureSource } from '../../../../../rendering/renderers/shared/texture/sources/TextureSource';\nimport type { Loader } from '../../../Loader';\n\n/**\n * Creates a texture from a source and adds it to the cache.\n * @param source - source of the texture\n * @param loader - loader\n * @param url - url of the texture\n * @ignore\n */\nexport function createTexture(source: TextureSource, loader: Loader, url: string)\n{\n    source.label = url;\n    source._sourceOrigin = url;\n\n    const texture = new Texture({\n        source,\n        label: url,\n    });\n\n    const unload = () =>\n    {\n        delete loader.promiseCache[url];\n\n        if (Cache.has(url))\n        {\n            Cache.remove(url);\n        }\n    };\n\n    // remove the promise from the loader and the url from the cache when the texture is destroyed\n    texture.source.once('destroy', () =>\n    {\n        if (loader.promiseCache[url])\n        {\n            // #if _DEBUG\n            warn('[Assets] A TextureSource managed by Assets was destroyed instead of unloaded! '\n           + 'Use Assets.unload() instead of destroying the TextureSource.');\n            // #endif\n\n            unload();\n        }\n    });\n\n    texture.once('destroy', () =>\n    {\n        if (!source.destroyed)\n        {\n            // #if _DEBUG\n            warn('[Assets] A Texture managed by Assets was destroyed instead of unloaded! '\n             + 'Use Assets.unload() instead of destroying the Texture.');\n            // #endif\n\n            unload();\n        }\n    });\n\n    return texture;\n}\n", "import { DOMAdapter } from '../../../../environment/adapter';\nimport { type ImageLike } from '../../../../environment/ImageLike';\nimport { ExtensionType } from '../../../../extensions/Extensions';\nimport { ImageSource } from '../../../../rendering/renderers/shared/texture/sources/ImageSource';\nimport { GraphicsContext } from '../../../../scene/graphics/shared/GraphicsContext';\nimport { getResolutionOfUrl } from '../../../../utils/network/getResolutionOfUrl';\nimport { checkDataUrl } from '../../../utils/checkDataUrl';\nimport { checkExtension } from '../../../utils/checkExtension';\nimport { type LoaderParser, LoaderParserPriority } from '../LoaderParser';\nimport { createTexture } from './utils/createTexture';\n\nimport type { TextureSourceOptions } from '../../../../rendering/renderers/shared/texture/sources/TextureSource';\nimport type { Texture } from '../../../../rendering/renderers/shared/texture/Texture';\nimport type { ResolvedAsset } from '../../../types';\nimport type { Loader } from '../../Loader';\n\n/**\n * Configuration for the {@link loadSvg} plugin.\n * @see loadSvg\n * @category assets\n * @advanced\n */\nexport interface LoadSVGConfig\n{\n    /**\n     * The crossOrigin value to use for loading the SVG as an image.\n     * @default 'anonymous'\n     */\n    crossOrigin: ImageLike['crossOrigin'];\n    /**\n     * When set to `true`, loading and decoding images will happen with `new Image()`,\n     * @default false\n     */\n    parseAsGraphicsContext: boolean;\n}\n\n/**\n * Regular expression for SVG XML document.\n * @example &lt;?xml version=\"1.0\" encoding=\"utf-8\" ?&gt;&lt;!-- image/svg --&gt;&lt;svg\n * @readonly\n */\nconst validSVGExtension = '.svg';\nconst validSVGMIME = 'image/svg+xml';\n\n/**\n * A simple loader plugin for loading json data\n * @category assets\n * @advanced\n */\nexport const loadSvg: LoaderParser<Texture | GraphicsContext, TextureSourceOptions & LoadSVGConfig, LoadSVGConfig> = {\n    extension: {\n        type: ExtensionType.LoadParser,\n        priority: LoaderParserPriority.Low,\n        name: 'loadSVG',\n    },\n\n    /** used for deprecation purposes */\n    name: 'loadSVG',\n    id: 'svg',\n\n    config: {\n        crossOrigin: 'anonymous',\n        parseAsGraphicsContext: false,\n    },\n\n    test(url: string): boolean\n    {\n        return checkDataUrl(url, validSVGMIME) || checkExtension(url, validSVGExtension);\n    },\n\n    async load(\n        url: string,\n        asset: ResolvedAsset<TextureSourceOptions & LoadSVGConfig>,\n        loader: Loader\n    ): Promise<Texture | GraphicsContext>\n    {\n        if (asset.data?.parseAsGraphicsContext ?? this.config.parseAsGraphicsContext)\n        {\n            return loadAsGraphics(url);\n        }\n\n        return loadAsTexture(url, asset, loader, this.config.crossOrigin);\n    },\n\n    unload(asset: Texture | GraphicsContext): void\n    {\n        asset.destroy(true);\n    }\n\n};\n\nasync function loadAsTexture(\n    url: string,\n    asset: ResolvedAsset<TextureSourceOptions & LoadSVGConfig>,\n    loader: Loader,\n    crossOrigin: ImageLike['crossOrigin']\n): Promise<Texture>\n{\n    const response = await DOMAdapter.get().fetch(url);\n\n    const image = DOMAdapter.get().createImage();\n\n    image.src = `data:image/svg+xml;charset=utf-8,${encodeURIComponent(await response.text())}`;\n    image.crossOrigin = crossOrigin;\n    await image.decode();\n\n    // convert to canvas...\n    const width = asset.data?.width ?? image.width;\n    const height = asset.data?.height ?? image.height;\n    const resolution = asset.data?.resolution || getResolutionOfUrl(url);\n\n    // Ensure canvas dimensions are integers to prevent edge trimming\n    const canvasWidth = Math.ceil(width * resolution);\n    const canvasHeight = Math.ceil(height * resolution);\n\n    const canvas = DOMAdapter.get().createCanvas(canvasWidth, canvasHeight);\n    const context = canvas.getContext('2d');\n\n    // Improve rendering quality for decimal resolutions\n    context.imageSmoothingEnabled = true;\n    context.imageSmoothingQuality = 'high';\n\n    // Draw image with exact scaled dimensions to prevent trimming\n    context.drawImage(image as CanvasImageSource, 0, 0, width * resolution, height * resolution);\n\n    const { parseAsGraphicsContext: _p, ...rest } = asset.data ?? {};\n    const base = new ImageSource({\n        resource: canvas,\n        alphaMode: 'premultiply-alpha-on-upload',\n        resolution,\n        ...rest,\n    });\n\n    return createTexture(base, loader, url);\n}\n\nasync function loadAsGraphics(url: string): Promise<GraphicsContext>\n{\n    const response = await DOMAdapter.get().fetch(url);\n    const svgSource = await response.text();\n\n    const context = new GraphicsContext();\n\n    context.svg(svgSource);\n\n    return context;\n}\n", "const WORKER_CODE = \"(function () {\\n    'use strict';\\n\\n    const WHITE_PNG = \\\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO+ip1sAAAAASUVORK5CYII=\\\";\\n    async function checkImageBitmap() {\\n      try {\\n        if (typeof createImageBitmap !== \\\"function\\\") return false;\\n        const response = await fetch(WHITE_PNG);\\n        const imageBlob = await response.blob();\\n        const imageBitmap = await createImageBitmap(imageBlob);\\n        return imageBitmap.width === 1 && imageBitmap.height === 1;\\n      } catch (_e) {\\n        return false;\\n      }\\n    }\\n    void checkImageBitmap().then((result) => {\\n      self.postMessage(result);\\n    });\\n\\n})();\\n\";\nlet WORKER_URL = null;\nclass WorkerInstance\n{\n    constructor()\n    {\n        if (!WORKER_URL)\n        {\n            WORKER_URL = URL.createObjectURL(new Blob([WORKER_CODE], { type: 'application/javascript' }));\n        }\n        this.worker = new Worker(WORKER_URL);\n    }\n}\nWorkerInstance.revokeObjectURL = function revokeObjectURL()\n{\n    if (WORKER_URL)\n    {\n        URL.revokeObjectURL(WORKER_URL);\n        WORKER_URL = null;\n    }\n};\n\nexport { WorkerInstance as default };\n//# sourceMappingURL=checkImageBitmap.worker.mjs.map\n", "const WORKER_CODE = \"(function () {\\n    'use strict';\\n\\n    async function loadImageBitmap(url, alphaMode) {\\n      const response = await fetch(url);\\n      if (!response.ok) {\\n        throw new Error(`[WorkerManager.loadImageBitmap] Failed to fetch ${url}: ${response.status} ${response.statusText}`);\\n      }\\n      const imageBlob = await response.blob();\\n      return alphaMode === \\\"premultiplied-alpha\\\" ? createImageBitmap(imageBlob, { premultiplyAlpha: \\\"none\\\" }) : createImageBitmap(imageBlob);\\n    }\\n    self.onmessage = async (event) => {\\n      try {\\n        const imageBitmap = await loadImageBitmap(event.data.data[0], event.data.data[1]);\\n        self.postMessage({\\n          data: imageBitmap,\\n          uuid: event.data.uuid,\\n          id: event.data.id\\n        }, [imageBitmap]);\\n      } catch (e) {\\n        self.postMessage({\\n          error: e,\\n          uuid: event.data.uuid,\\n          id: event.data.id\\n        });\\n      }\\n    };\\n\\n})();\\n\";\nlet WORKER_URL = null;\nclass WorkerInstance\n{\n    constructor()\n    {\n        if (!WORKER_URL)\n        {\n            WORKER_URL = URL.createObjectURL(new Blob([WORKER_CODE], { type: 'application/javascript' }));\n        }\n        this.worker = new Worker(WORKER_URL);\n    }\n}\nWorkerInstance.revokeObjectURL = function revokeObjectURL()\n{\n    if (WORKER_URL)\n    {\n        URL.revokeObjectURL(WORKER_URL);\n        WORKER_URL = null;\n    }\n};\n\nexport { WorkerInstance as default };\n//# sourceMappingURL=loadImageBitmap.worker.mjs.map\n", "import CheckImageBitmapWorker from 'worker:./checkImageBitmap.worker.ts';\nimport LoadImageBitmapWorker from 'worker:./loadImageBitmap.worker.ts';\n\nimport type { TextureSourceOptions } from '../../../rendering/renderers/shared/texture/sources/TextureSource';\nimport type { ResolvedAsset } from '../../types';\n\nlet UUID = 0;\nlet MAX_WORKERS: number;\n\ntype LoadImageBitmapResult = {\n    data?: ImageBitmap,\n    error?: Error,\n    uuid: number,\n    id: string,\n};\n\n/** @internal */\nclass WorkerManagerClass\n{\n    /**\n     * Hash map storing resolve/reject functions for pending worker requests.\n     * Keyed by UUID to match responses with their corresponding promises.\n     */\n    private _resolveHash: {\n        [key: string]: {\n            resolve: (...param: any[]) => void;\n            reject: (...param: any[]) => void;\n        }\n    };\n    /** Pool of available workers ready for use */\n    private readonly _workerPool: Worker[];\n    /** Queue of pending work items waiting for available workers */\n    private readonly _queue: {\n        id: string;\n        arguments: any[];\n        resolve: (...param: any[]) => void;\n        reject: (...param: any[]) => void;\n    }[];\n\n    /** Whether the worker manager has been initialized */\n    private _initialized = false;\n\n    /** Current number of created workers (used to enforce MAX_WORKERS limit) */\n    private _createdWorkers = 0;\n    /** Cached promise for ImageBitmap support check */\n    private _isImageBitmapSupported?: Promise<boolean>;\n\n    constructor()\n    {\n        this._workerPool = [];\n        this._queue = [];\n\n        this._resolveHash = {};\n    }\n\n    /**\n     * Checks if ImageBitmap is supported in the current environment.\n     *\n     * This method uses a dedicated worker to test ImageBitmap support\n     * and caches the result for subsequent calls.\n     * @returns Promise that resolves to true if ImageBitmap is supported, false otherwise\n     */\n    public isImageBitmapSupported(): Promise<boolean>\n    {\n        if (this._isImageBitmapSupported !== undefined) return this._isImageBitmapSupported;\n\n        this._isImageBitmapSupported = new Promise((resolve) =>\n        {\n            const { worker } = new CheckImageBitmapWorker();\n\n            worker.addEventListener('message', (event: MessageEvent<boolean>) =>\n            {\n                worker.terminate();\n                CheckImageBitmapWorker.revokeObjectURL();\n                resolve(event.data);\n            });\n        });\n\n        return this._isImageBitmapSupported;\n    }\n\n    /**\n     * Loads an image as an ImageBitmap using a web worker.\n     * @param src - The source URL or path of the image to load\n     * @param asset - Optional resolved asset containing additional texture source options\n     * @returns Promise that resolves to the loaded ImageBitmap\n     * @example\n     * ```typescript\n     * const bitmap = await WorkerManager.loadImageBitmap('image.png');\n     * const bitmapWithOptions = await WorkerManager.loadImageBitmap('image.png', asset);\n     * ```\n     */\n    public loadImageBitmap(src: string, asset?: ResolvedAsset<TextureSourceOptions<any>>): Promise<ImageBitmap>\n    {\n        return this._run('loadImageBitmap', [src, asset?.data?.alphaMode]) as Promise<ImageBitmap>;\n    }\n\n    /**\n     * Initializes the worker pool if not already initialized.\n     * Currently a no-op but reserved for future initialization logic.\n     */\n    private async _initWorkers()\n    {\n        if (this._initialized) return;\n\n        this._initialized = true;\n    }\n\n    /**\n     * Gets an available worker from the pool or creates a new one if needed.\n     *\n     * Workers are created up to the MAX_WORKERS limit (based on navigator.hardwareConcurrency).\n     * Each worker is configured with a message handler for processing results.\n     * @returns Available worker or undefined if pool is at capacity and no workers are free\n     */\n    private _getWorker(): Worker\n    {\n        if (MAX_WORKERS === undefined)\n        {\n            MAX_WORKERS = navigator.hardwareConcurrency || 4;\n        }\n        let worker = this._workerPool.pop();\n\n        if (!worker && this._createdWorkers < MAX_WORKERS)\n        {\n            // only create as many as MAX_WORKERS allows..\n            this._createdWorkers++;\n            worker = new LoadImageBitmapWorker().worker;\n\n            worker.addEventListener('message', (event: MessageEvent) =>\n            {\n                this._complete(event.data);\n\n                this._returnWorker(event.target as Worker);\n                this._next();\n            });\n        }\n\n        return worker;\n    }\n\n    /**\n     * Returns a worker to the pool after completing a task.\n     * @param worker - The worker to return to the pool\n     */\n    private _returnWorker(worker: Worker)\n    {\n        this._workerPool.push(worker);\n    }\n\n    /**\n     * Handles completion of a worker task by resolving or rejecting the corresponding promise.\n     * @param data - Result data from the worker containing uuid, data, and optional error\n     */\n    private _complete(data: LoadImageBitmapResult): void\n    {\n        if (!this._resolveHash[data.uuid])\n        {\n            // this can happen if the worker manager is reset before a task completes\n            return;\n        }\n\n        if (data.error !== undefined)\n        {\n            this._resolveHash[data.uuid].reject(data.error);\n        }\n        else\n        {\n            this._resolveHash[data.uuid].resolve(data.data);\n        }\n\n        delete this._resolveHash[data.uuid];\n    }\n\n    /**\n     * Executes a task using the worker pool system.\n     *\n     * Queues the task and processes it when a worker becomes available.\n     * @param id - Identifier for the type of task to run\n     * @param args - Arguments to pass to the worker\n     * @returns Promise that resolves with the worker's result\n     */\n    private async _run(id: string, args: any[]): Promise<any>\n    {\n        await this._initWorkers();\n        // push into the queue...\n\n        const promise = new Promise((resolve, reject) =>\n        {\n            this._queue.push({ id, arguments: args, resolve, reject });\n        });\n\n        this._next();\n\n        return promise;\n    }\n\n    /**\n     * Processes the next item in the queue if workers are available.\n     *\n     * This method is called after worker initialization and when workers\n     * complete tasks to continue processing the queue.\n     */\n    private _next(): void\n    {\n        // nothing to do\n        if (!this._queue.length) return;\n\n        const worker = this._getWorker();\n\n        // no workers available...\n        if (!worker)\n        {\n            return;\n        }\n\n        const toDo = this._queue.pop();\n\n        const id = toDo.id;\n\n        this._resolveHash[UUID] = { resolve: toDo.resolve, reject: toDo.reject };\n\n        worker.postMessage({\n            data: toDo.arguments,\n            uuid: UUID++,\n            id,\n        });\n    }\n\n    /**\n     * Resets the worker manager, terminating all workers and clearing the queue.\n     *\n     * This method:\n     * - Terminates all active workers\n     * - Rejects all pending promises with an error\n     * - Clears all internal state\n     * - Resets initialization flags\n     *\n     * This should be called when the worker manager is no longer needed\n     * to prevent memory leaks and ensure proper cleanup.\n     * @example\n     * ```typescript\n     * // Clean up when shutting down\n     * WorkerManager.reset();\n     * ```\n     */\n    public reset(): void\n    {\n        // Terminate all workers\n        this._workerPool.forEach((worker) => worker.terminate());\n        this._workerPool.length = 0;\n\n        // Reject pending promises\n        Object.values(this._resolveHash).forEach(({ reject }) =>\n        {\n            reject?.(new Error('WorkerManager has been reset before completion'));\n        });\n        this._resolveHash = {};\n        this._queue.length = 0;\n\n        this._initialized = false;\n        this._createdWorkers = 0;\n    }\n}\n\n/**\n * Manages a pool of web workers for loading ImageBitmap objects asynchronously.\n *\n * This class provides a thread-safe way to load images using web workers,\n * automatically managing worker creation, pooling, and cleanup. It supports\n * checking ImageBitmap support and queuing multiple load requests.\n *\n * > [!IMPORTANT] You should not need to use this class directly\n * > However, you can call `WorkerManager.reset()` to clean up all workers when they are no longer needed.\n * @category Assets\n * @advanced\n */\nconst WorkerManager = new WorkerManagerClass();\n\nexport {\n    WorkerManager,\n};\n", "import { DOMAdapter } from '../../../../environment/adapter';\nimport { type ImageLike } from '../../../../environment/ImageLike';\nimport { ExtensionType } from '../../../../extensions/Extensions';\nimport { ImageSource } from '../../../../rendering/renderers/shared/texture/sources/ImageSource';\nimport { getResolutionOfUrl } from '../../../../utils/network/getResolutionOfUrl';\nimport { checkDataUrl } from '../../../utils/checkDataUrl';\nimport { checkExtension } from '../../../utils/checkExtension';\nimport { WorkerManager } from '../../workers/WorkerManager';\nimport { LoaderParserPriority } from '../LoaderParser';\nimport { createTexture } from './utils/createTexture';\n\nimport type { TextureSourceOptions } from '../../../../rendering/renderers/shared/texture/sources/TextureSource';\nimport type { Texture } from '../../../../rendering/renderers/shared/texture/Texture';\nimport type { ResolvedAsset } from '../../../types';\nimport type { Loader } from '../../Loader';\nimport type { LoaderParser } from '../LoaderParser';\n\nconst validImageExtensions = ['.jpeg', '.jpg', '.png', '.webp', '.avif'];\nconst validImageMIMEs = [\n    'image/jpeg',\n    'image/png',\n    'image/webp',\n    'image/avif',\n];\n\n/**\n * Configuration for the [loadTextures]{@link loadTextures} plugin.\n * @see loadTextures\n * @category assets\n * @advanced\n */\nexport interface LoadTextureConfig\n{\n    /**\n     * When set to `true`, loading and decoding images will happen with Worker thread,\n     * if available on the browser. This is much more performant as network requests\n     * and decoding can be expensive on the CPU. However, not all environments support\n     * Workers, in some cases it can be helpful to disable by setting to `false`.\n     * @default true\n     */\n    preferWorkers: boolean;\n    /**\n     * When set to `true`, loading and decoding images will happen with `createImageBitmap`,\n     * otherwise it will use `new Image()`.\n     * @default true\n     */\n    preferCreateImageBitmap: boolean;\n    /**\n     * The crossOrigin value to use for images when `preferCreateImageBitmap` is `false`.\n     * @default 'anonymous'\n     */\n    crossOrigin: ImageLike['crossOrigin'];\n}\n\n/**\n * Returns a promise that resolves an ImageBitmaps.\n * This function is designed to be used by a worker.\n * Part of WorkerManager!\n * @param url - The image to load an image bitmap for\n * @ignore\n */\nexport async function loadImageBitmap(url: string, asset?: ResolvedAsset<TextureSourceOptions<any>>): Promise<ImageBitmap>\n{\n    const response = await DOMAdapter.get().fetch(url);\n\n    if (!response.ok)\n    {\n        throw new Error(`[loadImageBitmap] Failed to fetch ${url}: `\n            + `${response.status} ${response.statusText}`);\n    }\n\n    const imageBlob = await response.blob();\n\n    return asset?.data?.alphaMode === 'premultiplied-alpha'\n        ? createImageBitmap(imageBlob, { premultiplyAlpha: 'none' })\n        : createImageBitmap(imageBlob);\n}\n\n/**\n * A simple plugin to load our textures!\n * This makes use of imageBitmaps where available.\n * We load the `ImageBitmap` on a different thread using workers if possible.\n * We can then use the `ImageBitmap` as a source for a Pixi texture\n *\n * You can customize the behavior of this loader by setting the `config` property.\n * Which can be found [here]{@link LoadTextureConfig}\n * ```js\n * // Set the config\n * import { loadTextures } from 'pixi.js';\n *\n * loadTextures.config = {\n *    // If true we will use a worker to load the ImageBitmap\n *    preferWorkers: true,\n *    // If false we will use new Image() instead of createImageBitmap,\n *    // we'll also disable the use of workers as it requires createImageBitmap\n *    preferCreateImageBitmap: true,\n *    crossOrigin: 'anonymous',\n * };\n * ```\n * @category assets\n * @advanced\n */\nexport const loadTextures: LoaderParser<Texture, TextureSourceOptions, LoadTextureConfig> = {\n\n    /** used for deprecation purposes */\n    name: 'loadTextures',\n    id: 'texture',\n\n    extension: {\n        type: ExtensionType.LoadParser,\n        priority: LoaderParserPriority.High,\n        name: 'loadTextures',\n    },\n\n    config: {\n        preferWorkers: true,\n        preferCreateImageBitmap: true,\n        crossOrigin: 'anonymous',\n    },\n\n    test(url: string): boolean\n    {\n        return checkDataUrl(url, validImageMIMEs) || checkExtension(url, validImageExtensions);\n    },\n\n    async load(url: string, asset: ResolvedAsset<TextureSourceOptions>, loader: Loader): Promise<Texture>\n    {\n        let src: any = null;\n\n        if (globalThis.createImageBitmap && this.config.preferCreateImageBitmap)\n        {\n            if (this.config.preferWorkers && await WorkerManager.isImageBitmapSupported())\n            {\n                src = await WorkerManager.loadImageBitmap(url, asset);\n            }\n            else\n            {\n                src = await loadImageBitmap(url, asset);\n            }\n        }\n        else\n        {\n            src = await new Promise((resolve, reject) =>\n            {\n                src = DOMAdapter.get().createImage();\n                src.crossOrigin = this.config.crossOrigin;\n\n                src.src = url;\n                if (src.complete)\n                {\n                    resolve(src);\n                }\n                else\n                {\n                    src.onload = (): void =>\n                    {\n                        resolve(src);\n                    };\n                    src.onerror = reject;\n                }\n            });\n        }\n\n        const base = new ImageSource({\n            resource: src,\n            alphaMode: 'premultiply-alpha-on-upload',\n            resolution: asset.data?.resolution || getResolutionOfUrl(url),\n            ...asset.data,\n        });\n\n        return createTexture(base, loader, url);\n    },\n\n    unload(texture: Texture): void\n    {\n        texture.destroy(true);\n    }\n};\n", "/* eslint-disable no-restricted-globals */\nimport { type ImageLike } from '../../../../environment/ImageLike';\nimport { ExtensionType } from '../../../../extensions/Extensions';\nimport { VideoSource } from '../../../../rendering/renderers/shared/texture/sources/VideoSource';\nimport { detectVideoAlphaMode } from '../../../../utils/browser/detectVideoAlphaMode';\nimport { getResolutionOfUrl } from '../../../../utils/network/getResolutionOfUrl';\nimport { testVideoFormat } from '../../../detections/utils/testVideoFormat';\nimport { checkDataUrl } from '../../../utils/checkDataUrl';\nimport { checkExtension } from '../../../utils/checkExtension';\nimport { createTexture } from './utils/createTexture';\n\nimport type { VideoSourceOptions } from '../../../../rendering/renderers/shared/texture/sources/VideoSource';\nimport type { Texture } from '../../../../rendering/renderers/shared/texture/Texture';\nimport type { ResolvedAsset } from '../../../types';\nimport type { Loader } from '../../Loader';\nimport type { LoaderParser } from '../LoaderParser';\n\nconst potentialVideoExtensions = ['.mp4', '.m4v', '.webm', '.ogg', '.ogv', '.h264', '.avi', '.mov'];\nlet validVideoExtensions: string[];\nlet validVideoMIMEs: string[];\n\n/**\n * Set cross origin based detecting the url and the crossorigin\n * @param element - Element to apply crossOrigin\n * @param url - URL to check\n * @param crossorigin - Cross origin value to use\n * @category assets\n * @advanced\n */\nexport function crossOrigin(element: ImageLike | HTMLVideoElement, url: string, crossorigin?: boolean | string): void\n{\n    if (crossorigin === undefined && !url.startsWith('data:'))\n    {\n        element.crossOrigin = determineCrossOrigin(url);\n    }\n    else if (crossorigin !== false)\n    {\n        element.crossOrigin = typeof crossorigin === 'string' ? crossorigin : 'anonymous';\n    }\n}\n\n/**\n * Preload a video element\n * @param element - Video element to preload\n * @internal\n */\nexport function preloadVideo(element: HTMLVideoElement): Promise<void>\n{\n    return new Promise((resolve, reject) =>\n    {\n        element.addEventListener('canplaythrough', loaded);\n        element.addEventListener('error', error);\n\n        element.load();\n\n        function loaded(): void\n        {\n            cleanup();\n            resolve();\n        }\n\n        function error(err: ErrorEvent): void\n        {\n            cleanup();\n            reject(err);\n        }\n\n        function cleanup(): void\n        {\n            element.removeEventListener('canplaythrough', loaded);\n            element.removeEventListener('error', error);\n        }\n    });\n}\n\n/**\n * Sets the `crossOrigin` property for this resource based on if the url\n * for this resource is cross-origin. If crossOrigin was manually set, this\n * function does nothing.\n * Nipped from the resource loader!\n * @ignore\n * @param url - The url to test.\n * @param {object} [loc=window.location] - The location object to test against.\n * @returns The crossOrigin value to use (or empty string for none).\n * @category assets\n */\nexport function determineCrossOrigin(url: string, loc: Location = globalThis.location): string\n{\n    // data: and javascript: urls are considered same-origin\n    if (url.startsWith('data:'))\n    {\n        return '';\n    }\n\n    // default is window.location\n    loc ||= globalThis.location;\n\n    const parsedUrl = new URL(url, document.baseURI);\n\n    // if cross origin\n    if (parsedUrl.hostname !== loc.hostname || parsedUrl.port !== loc.port || parsedUrl.protocol !== loc.protocol)\n    {\n        return 'anonymous';\n    }\n\n    return '';\n}\n\ntype LoadVideoData = VideoSourceOptions & {\n    mime?: string;\n};\n\n/**\n * Get the supported video extensions and MIME types based on the browser's capabilities.\n * This function checks the potential video extensions against the browser's supported formats.\n * @returns An object containing valid video extensions and MIME types.\n * @internal\n */\nfunction getBrowserSupportedVideoExtensions()\n{\n    const supportedExtensions: string[] = [];\n    const supportedMimes: string[] = [];\n\n    for (const ext of potentialVideoExtensions)\n    {\n        const mimeType = VideoSource.MIME_TYPES[ext.substring(1)] || `video/${ext.substring(1)}`;\n\n        if (testVideoFormat(mimeType))\n        {\n            supportedExtensions.push(ext);\n            if (!supportedMimes.includes(mimeType))\n            {\n                supportedMimes.push(mimeType);\n            }\n        }\n    }\n\n    return {\n        validVideoExtensions: supportedExtensions,\n        validVideoMime: supportedMimes\n    };\n}\n\n/**\n * A simple plugin to load video textures.\n *\n * You can pass VideoSource options to the loader via the .data property of the asset descriptor\n * when using Assets.load().\n * ```js\n * // Set the data\n * const texture = await Assets.load({\n *     src: './assets/city.mp4',\n *     data: {\n *         preload: true,\n *         autoPlay: true,\n *     },\n * });\n * ```\n * @category assets\n * @advanced\n */\nexport const loadVideoTextures = {\n\n    /** used for deprecation purposes */\n    name: 'loadVideo',\n    id: 'video',\n\n    extension: {\n        type: ExtensionType.LoadParser,\n        name: 'loadVideo',\n    },\n\n    test(url: string): boolean\n    {\n        if (!validVideoExtensions || !validVideoMIMEs)\n        {\n            const { validVideoExtensions: ve, validVideoMime: vm } = getBrowserSupportedVideoExtensions();\n\n            validVideoExtensions = ve;\n            validVideoMIMEs = vm;\n        }\n        const isValidDataUrl = checkDataUrl(url, validVideoMIMEs);\n        const isValidExtension = checkExtension(url, validVideoExtensions);\n\n        return isValidDataUrl || isValidExtension;\n    },\n\n    async load(url: string, asset: ResolvedAsset<LoadVideoData>, loader: Loader): Promise<Texture>\n    {\n        // --- Merge default and provided options ---\n        const options: LoadVideoData = {\n            ...VideoSource.defaultOptions,\n            resolution: asset.data?.resolution || getResolutionOfUrl(url),\n            alphaMode: asset.data?.alphaMode || await detectVideoAlphaMode(),\n            ...asset.data,\n        };\n\n        // --- Create and configure HTMLVideoElement ---\n        const videoElement = document.createElement('video');\n\n        // Set attributes based on options\n        const attributeMap = {\n            preload: options.autoLoad !== false ? 'auto' : undefined,\n            'webkit-playsinline': options.playsinline !== false ? '' : undefined,\n            playsinline: options.playsinline !== false ? '' : undefined,\n            muted: options.muted === true ? '' : undefined,\n            loop: options.loop === true ? '' : undefined,\n            autoplay: options.autoPlay !== false ? '' : undefined\n        };\n\n        Object.keys(attributeMap).forEach((key) =>\n        {\n            const value = attributeMap[key as keyof typeof attributeMap];\n\n            if (value !== undefined) videoElement.setAttribute(key, value);\n        });\n\n        if (options.muted === true)\n        {\n            videoElement.muted = true;\n        }\n\n        crossOrigin(videoElement, url, options.crossorigin); // Assume crossOrigin is globally available\n\n        // --- Set up source and MIME type ---\n        const sourceElement = document.createElement('source');\n\n        // Determine MIME type\n        let mime: string | undefined;\n\n        if (options.mime)\n        {\n            mime = options.mime;\n        }\n        else if (url.startsWith('data:'))\n        {\n            mime = url.slice(5, url.indexOf(';'));\n        }\n        else if (!url.startsWith('blob:'))\n        {\n            const ext = url.split('?')[0].slice(url.lastIndexOf('.') + 1).toLowerCase();\n\n            mime = VideoSource.MIME_TYPES[ext] || `video/${ext}`;\n        }\n\n        sourceElement.src = url;\n\n        if (mime)\n        {\n            sourceElement.type = mime;\n        }\n\n        // this promise will make sure that video is ready to play - as in we have a valid width, height and it can be\n        // uploaded to the GPU. Our textures are kind of dumb now, and don't want to handle resizing right now.\n        return new Promise((resolve, reject) =>\n        {\n            if (options.preload && !options.autoPlay)\n            {\n                videoElement.load();\n            }\n\n            videoElement.addEventListener('canplay', onCanPlay);\n            videoElement.addEventListener('error', onError);\n            sourceElement.addEventListener('error', onError);\n            videoElement.appendChild(sourceElement);\n\n            async function onCanPlay()\n            {\n                const base = new VideoSource({ ...options, resource: videoElement });\n\n                cleanup();\n\n                if (asset.data.preload)\n                {\n                    await preloadVideo(videoElement);\n                }\n\n                resolve(createTexture(base, loader, url));\n            }\n\n            function onError(event: Event | ErrorEvent)\n            {\n                cleanup();\n                reject(event);\n            }\n\n            function cleanup()\n            {\n                videoElement.removeEventListener('canplay', onCanPlay);\n                videoElement.removeEventListener('error', onError);\n                sourceElement.removeEventListener('error', onError);\n            }\n        });\n    },\n\n    unload(texture: Texture): void\n    {\n        texture.destroy(true);\n    }\n} satisfies LoaderParser<Texture, LoadVideoData>;\n", "import { ExtensionType } from '../../../extensions/Extensions';\nimport { loadTextures } from '../../loader/parsers/textures/loadTextures';\nimport { Resolver } from '../Resolver';\n\nimport type { ResolveURLParser } from '../types';\n\n/**\n * A parser that will resolve a texture url\n * @category assets\n * @internal\n */\nexport const resolveTextureUrl = {\n    extension: {\n        type: ExtensionType.ResolveParser,\n        name: 'resolveTexture',\n    },\n    test: loadTextures.test,\n    parse: (value: string) =>\n        ({\n            resolution: parseFloat(Resolver.RETINA_PREFIX.exec(value)?.[1] ?? '1'),\n            format: value.split('.').pop(),\n            src: value,\n        }),\n} satisfies ResolveURLParser;\n", "import { ExtensionType } from '../../../extensions/Extensions';\nimport { Resolver } from '../Resolver';\nimport { resolveTextureUrl } from './resolveTextureUrl';\n\nimport type { ResolveURLParser } from '../types';\n\n/**\n * A parser that will resolve a json urls resolution for spritesheets\n * e.g. `assets/spritesheet@1x.json`\n * @category assets\n * @internal\n */\nexport const resolveJsonUrl = {\n    extension: {\n        type: ExtensionType.ResolveParser,\n        priority: -2,\n        name: 'resolveJson',\n    },\n    test: (value: string): boolean =>\n        Resolver.RETINA_PREFIX.test(value) && value.endsWith('.json'),\n    parse: resolveTextureUrl.parse,\n} satisfies ResolveURLParser;\n", "/* eslint-disable max-len */\nimport { extensions, ExtensionType } from '../extensions/Extensions';\nimport { bitmapFontCachePlugin, loadBitmapFont } from '../scene/text-bitmap/asset/loadBitmapFont';\nimport { warn } from '../utils/logging/warn';\nimport { BackgroundLoader } from './BackgroundLoader';\nimport { Cache } from './cache/Cache';\nimport { cacheTextureArray } from './cache/parsers/cacheTextureArray';\nimport { detectAvif } from './detections/parsers/detectAvif';\nimport { detectDefaults } from './detections/parsers/detectDefaults';\nimport { detectMp4 } from './detections/parsers/detectMp4';\nimport { detectOgv } from './detections/parsers/detectOgv';\nimport { detectWebm } from './detections/parsers/detectWebm';\nimport { detectWebp } from './detections/parsers/detectWebp';\nimport { Loader, type LoadOptions } from './loader/Loader';\nimport { loadJson } from './loader/parsers/loadJson';\nimport { loadTxt } from './loader/parsers/loadTxt';\nimport { loadWebFont } from './loader/parsers/loadWebFont';\nimport { loadSvg } from './loader/parsers/textures/loadSVG';\nimport { type LoadTextureConfig, loadTextures } from './loader/parsers/textures/loadTextures';\nimport { loadVideoTextures } from './loader/parsers/textures/loadVideoTextures';\nimport { resolveJsonUrl } from './resolver/parsers/resolveJsonUrl';\nimport { resolveTextureUrl } from './resolver/parsers/resolveTextureUrl';\nimport { Resolver } from './resolver/Resolver';\nimport { convertToList } from './utils/convertToList';\nimport { isSingleItem } from './utils/isSingleItem';\n\nimport type { AssetExtension } from './AssetExtension';\nimport type { FormatDetectionParser } from './detections/types';\nimport type { LoadSVGConfig } from './loader/parsers/textures/loadSVG';\nimport type { BundleIdentifierOptions } from './resolver/Resolver';\nimport type { ArrayOr, AssetsBundle, AssetsManifest, ResolvedAsset, UnresolvedAsset } from './types';\n\n/**\n * Callback function for tracking asset loading progress. The function is called repeatedly\n * during the loading process with a progress value between 0.0 and 1.0.\n * @param progress - The loading progress from 0.0 (started) to 1.0 (complete)\n * @returns void\n * @example\n * ```ts\n * // Basic progress logging\n * const onProgress = (progress: number) => {\n *     console.log(`Loading: ${Math.round(progress * 100)}%`);\n * };\n *\n * // Update loading bar\n * const onProgress = (progress: number) => {\n *     loadingBar.width = progress * 100;\n *     loadingText.text = `${Math.round(progress * 100)}%`;\n * };\n *\n * // Load assets with progress tracking\n * await Assets.load(['sprite1.png', 'sprite2.png'], onProgress);\n *\n * // Load bundle with progress tracking\n * await Assets.loadBundle('levelAssets', (progress) => {\n *     // Progress is normalized (0.0 - 1.0)\n *     updateLoadingScreen(progress);\n * });\n * ```\n * > [!IMPORTANT] Do not rely on the progress callback to determine when all assets are loaded.\n * > Use the returned promise from `Assets.load()` or `Assets.loadBundle()` to know when loading is complete.\n * @category assets\n * @standard\n */\nexport type ProgressCallback = (progress: number) => void;\n\n/**\n * Extensible preferences that can be used, for instance, when configuring loaders.\n * @since 7.2.0\n * @advanced\n * @category assets\n */\nexport interface AssetsPreferences extends LoadTextureConfig, LoadSVGConfig, PixiMixins.AssetsPreferences {}\n\n/**\n * Options for initializing the Assets class. These options configure how assets are loaded,\n * resolved, and managed in your PixiJS application.\n * @category assets\n * @standard\n */\nexport interface AssetInitOptions\n{\n    /**\n     * Base path prepended to all asset URLs. Useful for CDN hosting.\n     * @example\n     * ```ts\n     * await Assets.init({\n     *     basePath: 'https://my-cdn.com/assets/'\n     * });\n     *\n     * // Now you can load assets like this:\n     * // Will load from: https://my-cdn.com/assets/images/sprite.png\n     * const texture = await Assets.load('images/sprite.png');\n     * ```\n     */\n    basePath?: string;\n\n    /**\n     * URL parameters to append to all asset URLs.\n     * Useful for cache-busting or version control.\n     * @example\n     * ```ts\n     * // As a string\n     * await Assets.init({\n     *     defaultSearchParams: 'version=1.0.0'\n     * });\n     *\n     * // As an object\n     * await Assets.init({\n     *     defaultSearchParams: {\n     *         version: '1.0.0',\n     *         t: Date.now()\n     *     }\n     * });\n     * ```\n     * @advanced\n     */\n    defaultSearchParams?: string | Record<string, any>;\n\n    /**\n     * A manifest defining all your application's assets.\n     * Can be a URL to a JSON file or a manifest object.\n     * @example\n     * ```ts\n     * // Using a manifest object\n     * await Assets.init({\n     *     manifest: {\n     *         bundles: [{\n     *             name: 'game-screen',\n     *             assets: [\n     *                 {\n     *                     alias: 'hero',\n     *                     src: 'hero.{png,webp}'\n     *                 },\n     *                 {\n     *                     alias: 'map',\n     *                     src: 'map.json'\n     *                 }\n     *             ]\n     *         }]\n     *     }\n     * });\n     *\n     * // Using a URL to manifest\n     * await Assets.init({\n     *     manifest: 'assets/manifest.json'\n     * });\n     *\n     * // loading a bundle from the manifest\n     * await Assets.loadBundle('game-screen');\n     *\n     * // load individual assets from the manifest\n     * const heroTexture = await Assets.load('hero');\n     * ```\n     */\n    manifest?: string | AssetsManifest;\n    /**\n     * Configure texture loading preferences.\n     * Useful for optimizing asset delivery based on device capabilities.\n     * @example\n     * ```ts\n     * await Assets.init({\n     *     texturePreference: {\n     *         // Prefer high-res textures on retina displays\n     *         resolution: window.devicePixelRatio,\n     *\n     *         // Prefer modern formats, fallback to traditional\n     *         format: ['avif', 'webp', 'png']\n     *     }\n     * });\n     * ```\n     */\n    texturePreference?: {\n        /** Preferred texture resolution(s). Can be a single number or array of resolutions in order of preference. */\n        resolution?: number | number[];\n\n        /** Preferred texture formats in order of preference. Default: ['avif', 'webp', 'png', 'jpg', 'jpeg'] */\n        format?: ArrayOr<string>;\n    };\n\n    /**\n     * Skip browser format detection for faster initialization.\n     * Only use if you know exactly what formats your target browsers support.\n     * @example\n     * ```ts\n     * await Assets.init({\n     *     skipDetections: true,\n     *     texturePreference: {\n     *         format: ['webp', 'png'] // Must explicitly set formats\n     *     }\n     * });\n     * ```\n     * @advanced\n     */\n    skipDetections?: boolean;\n\n    /**\n     * Override how bundle IDs are generated and resolved.\n     *\n     * This allows you to customize how assets are grouped and accessed via bundles and allow for\n     * multiple bundles to share the same asset keys.\n     * @advanced\n     * @example\n     * ```ts\n     * const manifest = {\n     *     bundles: [\n     *         {\n     *             name: 'bunny1',\n     *             assets: [\n     *                 {\n     *                     alias: ['character', 'character2'],\n     *                     src: 'textures/bunny.png',\n     *                 },\n     *             ],\n     *         },\n     *         {\n     *             name: 'bunny2',\n     *             assets: [\n     *                 {\n     *                     alias: ['character', 'character2'],\n     *                     src: 'textures/bunny-2.png',\n     *                 },\n     *             ],\n     *         },\n     *     ]\n     * };\n     *\n     * const bundleIdentifier: BundleIdentifierOptions = {\n     *     connector: ':',\n     * };\n     *\n     * await Assets.init({ manifest, basePath, bundleIdentifier });\n     *\n     * const resources = await Assets.loadBundle('bunny1');\n     * const resources2 = await Assets.loadBundle('bunny2');\n     *\n     * console.log(resources.character === resources2.character); // false\n     * ```\n     */\n    bundleIdentifier?: BundleIdentifierOptions;\n\n    /**\n     * Optional preferences for asset loading behavior.\n     * @example\n     * ```ts\n     * await Assets.init({\n     *     preferences: {\n     *         crossOrigin: 'anonymous',\n     *         parseAsGraphicsContext: false\n     *     }\n     * });\n     * ```\n     */\n    preferences?: Partial<AssetsPreferences>;\n\n    /**\n     * Options for defining the loading behavior of assets.\n     * @example\n     * ```ts\n     * await Assets.init({\n     *    loadOptions: {\n     *       onProgress: (progress) => console.log(`Loading: ${Math.round(progress * 100)}%`),\n     *       onError: (error, asset) => console.error(`Error loading ${asset.src}: ${error.message}`),\n     *       strategy: 'retry',\n     *       retryCount: 5,\n     *       retryDelay: 500,\n     *   }\n     * });\n     * ```\n     * @remarks\n     * - `onProgress` callback receives values from 0.0 to 1.0\n     * - `onError` callback is invoked for individual asset load failures\n     * - `strategy` can be 'throw' (default), 'retry', or 'skip'\n     * - `retryCount` sets how many times to retry failed assets (default 3)\n     * - `retryDelay` sets the delay between retries in milliseconds (default 250ms)\n     * @see {@link LoadOptions} For all available load options\n     */\n    loadOptions?: Partial<LoadOptions>;\n}\n\n/** @internal */\nexport class AssetsClass\n{\n    /**\n     * The URL resolver for assets. Maps various asset keys and URLs to their final loadable form.\n     * @advanced\n     */\n    public resolver: Resolver;\n    /**\n     *  The loader responsible for loading all assets. Handles different file types\n     * and transformations.\n     * @advanced\n     */\n    public loader: Loader;\n    /**\n     * The global cache for all loaded assets. Manages storage and retrieval of\n     * processed assets.\n     * @example\n     * ```ts\n     * // Check if an asset is cached\n     * if (Assets.cache.has('myTexture')) {\n     *     const texture = Assets.cache.get('myTexture');\n     * }\n     * ```\n     * @see {@link Cache} For detailed cache documentation\n     */\n    public cache: typeof Cache;\n\n    /** takes care of loading assets in the background */\n    private readonly _backgroundLoader: BackgroundLoader;\n\n    private readonly _detections: FormatDetectionParser[] = [];\n\n    private _initialized = false;\n\n    constructor()\n    {\n        this.resolver = new Resolver();\n        this.loader = new Loader();\n        this.cache = Cache;\n\n        this._backgroundLoader = new BackgroundLoader(this.loader);\n        this._backgroundLoader.active = true;\n\n        this.reset();\n    }\n\n    /**\n     * Initializes the Assets class with configuration options. While not required,\n     * calling this before loading assets is recommended to set up default behaviors.\n     * @param options - Configuration options for the Assets system\n     * @example\n     * ```ts\n     * // Basic initialization (optional as Assets.load will call this automatically)\n     * await Assets.init();\n     *\n     * // With CDN configuration\n     * await Assets.init({\n     *     basePath: 'https://my-cdn.com/assets/',\n     *     defaultSearchParams: { version: '1.0.0' }\n     * });\n     *\n     * // With manifest and preferences\n     * await Assets.init({\n     *     manifest: {\n     *         bundles: [{\n     *             name: 'game-screen',\n     *             assets: [\n     *                 {\n     *                     alias: 'hero',\n     *                     src: 'hero.{png,webp}',\n     *                     data: { scaleMode: SCALE_MODES.NEAREST }\n     *                 },\n     *                 {\n     *                     alias: 'map',\n     *                     src: 'map.json'\n     *                 }\n     *             ]\n     *         }]\n     *     },\n     *     // Optimize for device capabilities\n     *     texturePreference: {\n     *         resolution: window.devicePixelRatio,\n     *         format: ['webp', 'png']\n     *     },\n     *     // Set global preferences\n     *     preferences: {\n     *         crossOrigin: 'anonymous',\n     *     }\n     * });\n     *\n     * // Load assets after initialization\n     * const heroTexture = await Assets.load('hero');\n     * ```\n     * @remarks\n     * - Can be called only once; subsequent calls will be ignored with a warning\n     * - Format detection runs automatically unless `skipDetections` is true\n     * - The manifest can be a URL to a JSON file or an inline object\n     * @see {@link AssetInitOptions} For all available initialization options\n     * @see {@link AssetsManifest} For manifest format details\n     */\n    public async init(options: AssetInitOptions = {}): Promise<void>\n    {\n        if (this._initialized)\n        {\n            // #if _DEBUG\n            warn('[Assets]AssetManager already initialized, did you load before calling this Assets.init()?');\n            // #endif\n\n            return;\n        }\n\n        this._initialized = true;\n\n        if (options.defaultSearchParams)\n        {\n            this.resolver.setDefaultSearchParams(options.defaultSearchParams);\n        }\n\n        if (options.basePath)\n        {\n            this.resolver.basePath = options.basePath;\n        }\n\n        if (options.bundleIdentifier)\n        {\n            this.resolver.setBundleIdentifier(options.bundleIdentifier);\n        }\n\n        if (options.manifest)\n        {\n            let manifest = options.manifest;\n\n            if (typeof manifest === 'string')\n            {\n                manifest = await this.load<AssetsManifest>(manifest);\n            }\n\n            this.resolver.addManifest(manifest);\n        }\n\n        const resolutionPref = options.texturePreference?.resolution ?? 1;\n        const resolution = (typeof resolutionPref === 'number') ? [resolutionPref] : resolutionPref;\n\n        const formats = await this._detectFormats({\n            preferredFormats: options.texturePreference?.format,\n            skipDetections: options.skipDetections,\n            detections: this._detections\n        });\n\n        this.resolver.prefer({\n            params: {\n                format: formats,\n                resolution,\n            },\n        });\n\n        if (options.preferences)\n        {\n            this.setPreferences(options.preferences);\n        }\n\n        // set load options on the loader\n        if (options.loadOptions)\n        {\n            this.loader.loadOptions = {\n                ...this.loader.loadOptions,\n                ...options.loadOptions\n            };\n        }\n    }\n\n    /**\n     * Registers assets with the Assets resolver. This method maps keys (aliases) to asset sources,\n     * allowing you to load assets using friendly names instead of direct URLs.\n     * @param assets - The unresolved assets to add to the resolver\n     * @example\n     * ```ts\n     * // Basic usage - single asset\n     * Assets.add({\n     *     alias: 'myTexture',\n     *     src: 'assets/texture.png'\n     * });\n     * const texture = await Assets.load('myTexture');\n     *\n     * // Multiple aliases for the same asset\n     * Assets.add({\n     *     alias: ['hero', 'player'],\n     *     src: 'hero.png'\n     * });\n     * const hero1 = await Assets.load('hero');\n     * const hero2 = await Assets.load('player'); // Same texture\n     *\n     * // Multiple format support\n     * Assets.add({\n     *     alias: 'character',\n     *     src: 'character.{webp,png}' // Will choose best format\n     * });\n     * Assets.add({\n     *     alias: 'character',\n     *     src: ['character.webp', 'character.png'], // Explicitly specify formats\n     * });\n     *\n     * // With texture options\n     * Assets.add({\n     *     alias: 'sprite',\n     *     src: 'sprite.png',\n     *     data: { scaleMode: 'nearest' }\n     * });\n     *\n     * // Multiple assets at once\n     * Assets.add([\n     *     { alias: 'bg', src: 'background.png' },\n     *     { alias: 'music', src: 'music.mp3' },\n     *     { alias: 'spritesheet', src: 'sheet.json', data: { ignoreMultiPack: false } }\n     * ]);\n     * ```\n     * @remarks\n     * - Assets are resolved when loaded, not when added\n     * - Multiple formats use the best available format for the browser\n     * - Adding with same alias overwrites previous definition\n     * - The `data` property is passed to the asset loader\n     * @see {@link Resolver} For details on asset resolution\n     * @see {@link LoaderParser} For asset-specific data options\n     * @advanced\n     */\n    public add(assets: (ArrayOr<UnresolvedAsset>)): void\n    {\n        this.resolver.add(assets);\n    }\n\n    /**\n     * Loads one or more assets and returns a promise that resolves with the loaded content.\n     * Assets are cached, so subsequent loads will return the same instance of the asset without re-fetching.\n     * @param urls - Single URL/alias or array of URLs/aliases to load\n     * @param onProgress - Optional callback for load progress (0.0 to 1.0)\n     * @returns Promise that resolves with loaded asset(s)\n     * @example\n     * ```ts\n     * // Load a single asset\n     * const texture = await Assets.load('images/sprite.png');\n     *\n     * // Load using an alias\n     * const heroTexture = await Assets.load({ alias: 'hero', src: 'images/hero.png' });\n     *\n     * // Load multiple assets\n     * const assets = await Assets.load([\n     *     'images/background.png',\n     *     'images/character.png',\n     *     'fonts/game.fnt'\n     * ]);\n     * console.log(assets['images/background.png']); // Access by URL\n     *\n     * // Load with progress tracking\n     * const textures = await Assets.load(['sprite1.png', 'sprite2.png'],\n     *     (progress) => console.log(`Loading: ${Math.round(progress * 100)}%`)\n     * );\n     *\n     * // Load with format preference\n     * const characterTexture = await Assets.load({\n     *     alias: 'character',\n     *     src: 'character.{webp,png}' // Will choose best format\n     * });\n     *\n     * // Load with custom options\n     * const spriteTexture = await Assets.load({\n     *     alias: 'sprite',\n     *     src: 'sprite.png',\n     *     data: {\n     *         scaleMode: SCALE_MODES.NEAREST,\n     *         mipmap: MIPMAP_MODES.ON\n     *     }\n     * });\n     *\n     * // Load with a specific loader, can be useful if your asset does not have an extension\n     * const image = await Assets.load({\n     *    alias: 'imageWithoutExtension',\n     *    src: 'images/imageWithoutExtension',\n     *    parser: 'texture' // Use the JSON loader\n     * });\n     * ```\n     * @remarks\n     * - Assets are cached automatically to prevent duplicate loading\n     * - URLs are resolved to the best format for the current browser\n     * - Asset types are detected automatically based on file extension\n     * - Progress callback receives values from 0.0 to 1.0\n     * - You can define with loader to use for an asset by specifying the `parser` property, which is useful for assets that do not have a file extension.\n     * @throws {Error} If the asset cannot be loaded or parsed\n     * @see {@link Assets.add} For registering assets with aliases\n     * @see {@link Assets.backgroundLoad} For loading assets in the background\n     * @see {@link Assets.unload} For releasing loaded assets\n     */\n    public async load<T = any>(\n        urls: string | UnresolvedAsset,\n        onProgress?: ProgressCallback | LoadOptions,\n    ): Promise<T>;\n    public async load<T = any>(\n        urls: string[] | UnresolvedAsset[],\n        onProgress?: ProgressCallback | LoadOptions,\n    ): Promise<Record<string, T>>;\n    public async load<T = any>(\n        urls: ArrayOr<string> | ArrayOr<UnresolvedAsset>,\n        onProgress?: ProgressCallback | LoadOptions,\n    ): Promise<T | Record<string, T>>\n    {\n        if (!this._initialized)\n        {\n            await this.init();\n        }\n\n        const singleAsset = isSingleItem(urls);\n\n        const urlArray: string[] = convertToList<UnresolvedAsset | string>(urls)\n            .map((url) =>\n            {\n                if (typeof url !== 'string')\n                {\n                    const aliases = this.resolver.getAlias(url);\n\n                    if (aliases.some((alias) => !this.resolver.hasKey(alias)))\n                    {\n                        this.add(url);\n                    }\n\n                    return Array.isArray(aliases) ? aliases[0] : aliases;\n                }\n\n                // if it hasn't been added, add it now\n                if (!this.resolver.hasKey(url)) this.add({ alias: url, src: url });\n\n                return url;\n            }) as string[];\n\n        // check cache first...\n        const resolveResults = this.resolver.resolve(urlArray);\n\n        // remap to the keys used..\n        const out: Record<string, T> = await this._mapLoadToResolve<T>(resolveResults, onProgress);\n\n        return singleAsset ? out[urlArray[0] as string] : out;\n    }\n\n    /**\n     * Registers a bundle of assets that can be loaded as a group. Bundles are useful for organizing\n     * assets into logical groups, such as game levels or UI screens.\n     * @param bundleId - Unique identifier for the bundle\n     * @param assets - Assets to include in the bundle\n     * @example\n     * ```ts\n     * // Add a bundle using array format\n     * Assets.addBundle('animals', [\n     *     { alias: 'bunny', src: 'bunny.png' },\n     *     { alias: 'chicken', src: 'chicken.png' },\n     *     { alias: 'thumper', src: 'thumper.png' },\n     * ]);\n     *\n     * // Add a bundle using object format\n     * Assets.addBundle('animals', {\n     *     bunny: 'bunny.png',\n     *     chicken: 'chicken.png',\n     *     thumper: 'thumper.png',\n     * });\n     *\n     * // Add a bundle with advanced options\n     * Assets.addBundle('ui', [\n     *     {\n     *         alias: 'button',\n     *         src: 'button.{webp,png}',\n     *         data: { scaleMode: 'nearest' }\n     *     },\n     *     {\n     *         alias: ['logo', 'brand'],  // Multiple aliases\n     *         src: 'logo.svg',\n     *         data: { resolution: 2 }\n     *     }\n     * ]);\n     *\n     * // Load the bundle\n     * await Assets.loadBundle('animals');\n     *\n     * // Use the loaded assets\n     * const bunny = Sprite.from('bunny');\n     * const chicken = Sprite.from('chicken');\n     * ```\n     * @remarks\n     * - Bundle IDs must be unique\n     * - Assets in bundles are not loaded until `loadBundle` is called\n     * - Bundles can be background loaded using `backgroundLoadBundle`\n     * - Assets in bundles can be loaded individually using their aliases\n     * @see {@link Assets.loadBundle} For loading bundles\n     * @see {@link Assets.backgroundLoadBundle} For background loading bundles\n     * @see {@link Assets.unloadBundle} For unloading bundles\n     * @see {@link AssetsManifest} For manifest format details\n     */\n    public addBundle(bundleId: string, assets: AssetsBundle['assets']): void\n    {\n        this.resolver.addBundle(bundleId, assets);\n    }\n\n    /**\n     * Loads a bundle or multiple bundles of assets. Bundles are collections of related assets\n     * that can be loaded together.\n     * @param bundleIds - Single bundle ID or array of bundle IDs to load\n     * @param onProgress - Optional callback for load progress (0.0 to 1.0)\n     * @returns Promise that resolves with the loaded bundle assets\n     * @example\n     * ```ts\n     * // Define bundles in your manifest\n     * const manifest = {\n     *     bundles: [\n     *         {\n     *             name: 'load-screen',\n     *             assets: [\n     *                 {\n     *                     alias: 'background',\n     *                     src: 'sunset.png',\n     *                 },\n     *                 {\n     *                     alias: 'bar',\n     *                     src: 'load-bar.{png,webp}', // use an array of individual assets\n     *                 },\n     *             ],\n     *         },\n     *         {\n     *             name: 'game-screen',\n     *             assets: [\n     *                 {\n     *                     alias: 'character',\n     *                     src: 'robot.png',\n     *                 },\n     *                 {\n     *                     alias: 'enemy',\n     *                     src: 'bad-guy.png',\n     *                 },\n     *             ],\n     *         },\n     *     ]\n     * };\n     *\n     * // Initialize with manifest\n     * await Assets.init({ manifest });\n     *\n     * // Or add bundles programmatically\n     * Assets.addBundle('load-screen', [...]);\n     * Assets.loadBundle('load-screen');\n     *\n     * // Load a single bundle\n     * await Assets.loadBundle('load-screen');\n     * const bg = Sprite.from('background'); // Uses alias from bundle\n     *\n     * // Load multiple bundles\n     * await Assets.loadBundle([\n     *     'load-screen',\n     *     'game-screen'\n     * ]);\n     *\n     * // Load with progress tracking\n     * await Assets.loadBundle('game-screen', (progress) => {\n     *     console.log(`Loading: ${Math.round(progress * 100)}%`);\n     * });\n     * ```\n     * @remarks\n     * - Bundle assets are cached automatically\n     * - Bundles can be pre-loaded using `backgroundLoadBundle`\n     * - Assets in bundles can be accessed by their aliases\n     * - Progress callback receives values from 0.0 to 1.0\n     * @throws {Error} If the bundle ID doesn't exist in the manifest\n     * @see {@link Assets.addBundle} For adding bundles programmatically\n     * @see {@link Assets.backgroundLoadBundle} For background loading bundles\n     * @see {@link Assets.unloadBundle} For unloading bundles\n     * @see {@link AssetsManifest} For manifest format details\n     */\n    public async loadBundle(bundleIds: ArrayOr<string>, onProgress?: ProgressCallback): Promise<any>\n    {\n        if (!this._initialized)\n        {\n            await this.init();\n        }\n\n        let singleAsset = false;\n\n        if (typeof bundleIds === 'string')\n        {\n            singleAsset = true;\n            bundleIds = [bundleIds];\n        }\n\n        const resolveResults = this.resolver.resolveBundle(bundleIds);\n\n        const out: Record<string, Record<string, any>> = {};\n\n        const keys = Object.keys(resolveResults);\n        let total = 0;\n        const counts: number[] = [];\n        const _onProgress = () =>\n        {\n            onProgress?.(counts.reduce((a, b) => a + b, 0) / total);\n        };\n        const promises = keys.map((bundleId, i) =>\n        {\n            const resolveResult = resolveResults[bundleId];\n            const values = Object.values(resolveResult);\n            const totalAssetsToLoad = [...new Set(values.flat())] as ResolvedAsset[];\n\n            const progressSize = totalAssetsToLoad.reduce((sum, asset) => sum + (asset.progressSize || 1), 0);\n\n            counts.push(0);\n            total += progressSize;\n\n            return this._mapLoadToResolve(resolveResult, (e) =>\n            {\n                counts[i] = e * progressSize;\n                _onProgress();\n            })\n                .then((resolveResult) =>\n                {\n                    out[bundleId] = resolveResult;\n                });\n        });\n\n        await Promise.all(promises);\n\n        return singleAsset ? out[bundleIds[0]] : out;\n    }\n\n    /**\n     * Initiates background loading of assets. This allows assets to be loaded passively while other operations\n     * continue, making them instantly available when needed later.\n     *\n     * Background loading is useful for:\n     * - Preloading game levels while in a menu\n     * - Loading non-critical assets during gameplay\n     * - Reducing visible loading screens\n     * @param urls - Single URL/alias or array of URLs/aliases to load in the background\n     * @example\n     * ```ts\n     * // Basic background loading\n     * Assets.backgroundLoad('images/level2-assets.png');\n     *\n     * // Background load multiple assets\n     * Assets.backgroundLoad([\n     *     'images/sprite1.png',\n     *     'images/sprite2.png',\n     *     'images/background.png'\n     * ]);\n     *\n     * // Later, when you need the assets\n     * const textures = await Assets.load([\n     *     'images/sprite1.png',\n     *     'images/sprite2.png'\n     * ]); // Resolves immediately if background loading completed\n     * ```\n     * @remarks\n     * - Background loading happens one asset at a time to avoid blocking the main thread\n     * - Loading can be interrupted safely by calling `Assets.load()`\n     * - Assets are cached as they complete loading\n     * - No progress tracking is available for background loading\n     */\n    public async backgroundLoad(urls: ArrayOr<string>): Promise<void>\n    {\n        if (!this._initialized)\n        {\n            await this.init();\n        }\n\n        if (typeof urls === 'string')\n        {\n            urls = [urls];\n        }\n\n        const resolveResults = this.resolver.resolve(urls);\n\n        this._backgroundLoader.add(Object.values(resolveResults));\n    }\n\n    /**\n     * Initiates background loading of asset bundles. Similar to backgroundLoad but works with\n     * predefined bundles of assets.\n     *\n     * Perfect for:\n     * - Preloading level bundles during gameplay\n     * - Loading UI assets during splash screens\n     * - Preparing assets for upcoming game states\n     * @param bundleIds - Single bundle ID or array of bundle IDs to load in the background\n     * @example\n     * ```ts\n     * // Define bundles in your manifest\n     * await Assets.init({\n     *     manifest: {\n     *         bundles: [\n     *             {\n     *               name: 'home',\n     *               assets: [\n     *                 {\n     *                     alias: 'background',\n     *                     src: 'images/home-bg.png',\n     *                 },\n     *                 {\n     *                     alias: 'logo',\n     *                     src: 'images/logo.png',\n     *                 }\n     *              ]\n     *            },\n     *            {\n     *             name: 'level-1',\n     *             assets: [\n     *                 {\n     *                     alias: 'background',\n     *                     src: 'images/level1/bg.png',\n     *                 },\n     *                 {\n     *                     alias: 'sprites',\n     *                     src: 'images/level1/sprites.json'\n     *                 }\n     *             ]\n     *         }]\n     *     }\n     * });\n     *\n     * // Load the home screen assets right away\n     * await Assets.loadBundle('home');\n     * showHomeScreen();\n     *\n     * // Start background loading while showing home screen\n     * Assets.backgroundLoadBundle('level-1');\n     *\n     * // When player starts level, load completes faster\n     * await Assets.loadBundle('level-1');\n     * hideHomeScreen();\n     * startLevel();\n     * ```\n     * @remarks\n     * - Bundle assets are loaded one at a time\n     * - Loading can be interrupted safely by calling `Assets.loadBundle()`\n     * - Assets are cached as they complete loading\n     * - Requires bundles to be registered via manifest or `addBundle`\n     * @see {@link Assets.addBundle} For adding bundles programmatically\n     * @see {@link Assets.loadBundle} For immediate bundle loading\n     * @see {@link AssetsManifest} For manifest format details\n     */\n    public async backgroundLoadBundle(bundleIds: ArrayOr<string>): Promise<void>\n    {\n        if (!this._initialized)\n        {\n            await this.init();\n        }\n\n        if (typeof bundleIds === 'string')\n        {\n            bundleIds = [bundleIds];\n        }\n\n        const resolveResults = this.resolver.resolveBundle(bundleIds);\n\n        Object.values(resolveResults).forEach((resolveResult) =>\n        {\n            this._backgroundLoader.add(Object.values(resolveResult));\n        });\n    }\n\n    /**\n     * Only intended for development purposes.\n     * This will wipe the resolver and caches.\n     * You will need to reinitialize the Asset\n     * @internal\n     */\n    public reset(): void\n    {\n        this.resolver.reset();\n        this.loader.reset();\n        this.cache.reset();\n\n        this._initialized = false;\n    }\n\n    /**\n     * Instantly gets an asset already loaded from the cache. Returns undefined if the asset hasn't been loaded yet.\n     * @param keys - The key or keys for the assets to retrieve\n     * @returns The cached asset(s) or undefined if not loaded\n     * @example\n     * ```ts\n     * // Get a single cached asset\n     * const texture = Assets.get('hero');\n     * if (texture) {\n     *     const sprite = new Sprite(texture);\n     * }\n     *\n     * // Get multiple cached assets\n     * const textures = Assets.get([\n     *     'hero',\n     *     'background',\n     *     'enemy'\n     * ]);\n     *\n     * // Safe pattern with loading fallback\n     * let texture = Assets.get('hero');\n     * if (!texture) {\n     *     texture = await Assets.load('hero');\n     * }\n     *\n     * // Working with bundles\n     * await Assets.loadBundle('game-ui');\n     * const uiAssets = Assets.get([\n     *     'button',\n     *     'panel',\n     *     'icons'\n     * ]);\n     * ```\n     * @remarks\n     * - Returns undefined if asset isn't loaded\n     * - No automatic loading - use `Assets.load()` for that\n     * - Cached assets are shared instances\n     * - Faster than `load()` for already cached assets\n     *\n     * > [!TIP]\n     * > When in doubt, use `Assets.load()` instead. It will return cached\n     * > assets instantly if they're already loaded.\n     * @see {@link Assets.load} For loading assets that aren't cached\n     * @see {@link Assets.cache} For direct cache access\n     */\n    public get<T = any>(keys: string): T;\n    public get<T = any>(keys: string[]): Record<string, T>;\n    public get<T = any>(keys: ArrayOr<string>): T | Record<string, T>\n    {\n        if (typeof keys === 'string')\n        {\n            return Cache.get(keys);\n        }\n\n        const assets: Record<string, T> = {};\n\n        for (let i = 0; i < keys.length; i++)\n        {\n            assets[i] = Cache.get(keys[i]);\n        }\n\n        return assets;\n    }\n\n    /**\n     * helper function to map resolved assets back to loaded assets\n     * @param resolveResults - the resolve results from the resolver\n     * @param progressOrLoadOptions - the progress callback or load options\n     */\n    private async _mapLoadToResolve<T>(\n        resolveResults: ResolvedAsset | Record<string, ResolvedAsset>,\n        progressOrLoadOptions?: ProgressCallback | LoadOptions,\n    ): Promise<Record<string, T>>\n    {\n        const resolveArray = [...new Set(Object.values(resolveResults))] as ResolvedAsset[];\n\n        // pause background loader...\n        this._backgroundLoader.active = false;\n\n        const loadedAssets = await this.loader.load<T>(resolveArray, progressOrLoadOptions);\n\n        // resume background loader...\n        this._backgroundLoader.active = true;\n\n        // remap to the keys used..\n\n        const out: Record<string, T> = {};\n\n        resolveArray.forEach((resolveResult) =>\n        {\n            const asset = loadedAssets[resolveResult.src];\n\n            const keys = [resolveResult.src];\n\n            if (resolveResult.alias)\n            {\n                keys.push(...resolveResult.alias);\n            }\n\n            keys.forEach((key) =>\n            {\n                out[key] = asset;\n            });\n\n            Cache.set(keys, asset);\n        });\n\n        return out;\n    }\n\n    /**\n     * Unloads assets and releases them from memory. This method ensures proper cleanup of\n     * loaded assets when they're no longer needed.\n     * @param urls - Single URL/alias or array of URLs/aliases to unload\n     * @example\n     * ```ts\n     * // Unload a single asset\n     * await Assets.unload('images/sprite.png');\n     *\n     * // Unload using an alias\n     * await Assets.unload('hero'); // Unloads the asset registered with 'hero' alias\n     *\n     * // Unload multiple assets\n     * await Assets.unload([\n     *     'images/background.png',\n     *     'images/character.png',\n     *     'hero'\n     * ]);\n     *\n     * // Unload and handle creation of new instances\n     * await Assets.unload('hero');\n     * const newHero = await Assets.load('hero'); // Will load fresh from source\n     * ```\n     * @remarks\n     * > [!WARNING]\n     * > Make sure assets aren't being used before unloading:\n     * > - Remove sprites using the texture\n     * > - Clear any references to the asset\n     * > - Textures will be destroyed and can't be used after unloading\n     * @throws {Error} If the asset is not found in cache\n     */\n    public async unload(\n        urls: ArrayOr<string> | ResolvedAsset | ResolvedAsset[]\n    ): Promise<void>\n    {\n        if (!this._initialized)\n        {\n            await this.init();\n        }\n\n        const urlArray = convertToList<string | ResolvedAsset>(urls)\n            .map((url) =>\n                ((typeof url !== 'string') ? url.src : url));\n\n        // check cache first...\n        const resolveResults = this.resolver.resolve(urlArray);\n\n        await this._unloadFromResolved(resolveResults);\n    }\n\n    /**\n     * Unloads all assets in a bundle. Use this to free memory when a bundle's assets\n     * are no longer needed, such as when switching game levels.\n     * @param bundleIds - Single bundle ID or array of bundle IDs to unload\n     * @example\n     * ```ts\n     * // Define and load a bundle\n     * Assets.addBundle('level-1', {\n     *     background: 'level1/bg.png',\n     *     sprites: 'level1/sprites.json',\n     *     music: 'level1/music.mp3'\n     * });\n     *\n     * // Load the bundle\n     * const level1 = await Assets.loadBundle('level-1');\n     *\n     * // Use the assets\n     * const background = Sprite.from(level1.background);\n     *\n     * // When done with the level, unload everything\n     * await Assets.unloadBundle('level-1');\n     * // background sprite is now invalid!\n     *\n     * // Unload multiple bundles\n     * await Assets.unloadBundle([\n     *     'level-1',\n     *     'level-2',\n     *     'ui-elements'\n     * ]);\n     * ```\n     * @remarks\n     * > [!WARNING]\n     * > - All assets in the bundle will be destroyed\n     * > - Bundle needs to be reloaded to use assets again\n     * > - Make sure no sprites or other objects are using the assets\n     * @throws {Error} If the bundle is not found\n     * @see {@link Assets.addBundle} For adding bundles\n     * @see {@link Assets.loadBundle} For loading bundles\n     */\n    public async unloadBundle(bundleIds: ArrayOr<string>): Promise<void>\n    {\n        if (!this._initialized)\n        {\n            await this.init();\n        }\n\n        bundleIds = convertToList<string>(bundleIds);\n\n        const resolveResults = this.resolver.resolveBundle(bundleIds);\n\n        const promises = Object.keys(resolveResults).map((bundleId) =>\n            this._unloadFromResolved(resolveResults[bundleId]));\n\n        await Promise.all(promises);\n    }\n\n    private async _unloadFromResolved(resolveResult: ResolvedAsset | Record<string, ResolvedAsset>)\n    {\n        const resolveArray = Object.values(resolveResult);\n\n        resolveArray.forEach((resolveResult) =>\n        {\n            Cache.remove(resolveResult.src);\n        });\n\n        await this.loader.unload(resolveArray);\n    }\n\n    /**\n     * Detects the supported formats for the browser, and returns an array of supported formats, respecting\n     * the users preferred formats order.\n     * @param options - the options to use when detecting formats\n     * @param options.preferredFormats - the preferred formats to use\n     * @param options.skipDetections - if we should skip the detections altogether\n     * @param options.detections - the detections to use\n     * @returns - the detected formats\n     */\n    private async _detectFormats(options: {\n        preferredFormats: string | string[],\n        skipDetections: boolean,\n        detections: FormatDetectionParser[]\n    }): Promise<string[]>\n    {\n        let formats: string[] = [];\n\n        // set preferred formats\n        if (options.preferredFormats)\n        {\n            formats = Array.isArray(options.preferredFormats)\n                ? options.preferredFormats : [options.preferredFormats];\n        }\n\n        // we should add any formats that are supported by the browser\n        for (const detection of options.detections)\n        {\n            if (options.skipDetections || await detection.test())\n            {\n                formats = await detection.add(formats);\n            }\n            else if (!options.skipDetections)\n            {\n                formats = await detection.remove(formats);\n            }\n        }\n\n        // remove any duplicates\n        formats = formats.filter((format, index) => formats.indexOf(format) === index);\n\n        return formats;\n    }\n\n    /**\n     * All the detection parsers currently added to the Assets class.\n     * @advanced\n     */\n    public get detections(): FormatDetectionParser[]\n    {\n        return this._detections;\n    }\n\n    /**\n     * Sets global preferences for asset loading behavior. This method configures how assets\n     * are loaded and processed across all parsers.\n     * @param preferences - Asset loading preferences\n     * @example\n     * ```ts\n     * // Basic preferences\n     * Assets.setPreferences({\n     *     crossOrigin: 'anonymous',\n     *     parseAsGraphicsContext: false\n     * });\n     * ```\n     * @remarks\n     * Preferences are applied to all compatible parsers and affect future asset loading.\n     * Common preferences include:\n     * - `crossOrigin`: CORS setting for loaded assets\n     * - `preferWorkers`: Whether to use web workers for loading textures\n     * - `preferCreateImageBitmap`: Use `createImageBitmap` for texture creation. Turning this off will use the `Image` constructor instead.\n     * @see {@link AssetsPreferences} For all available preferences\n     */\n    public setPreferences(preferences: Partial<AssetsPreferences>): void\n    {\n        // Find matching config keys in loaders with preferences\n        // and set the values\n        this.loader.parsers.forEach((parser) =>\n        {\n            if (!parser.config) return;\n\n            (Object.keys(parser.config) as (keyof AssetsPreferences)[])\n                .filter((key) => key in preferences)\n                .forEach((key) =>\n                {\n                    parser.config[key] = preferences[key];\n                });\n        });\n    }\n}\n\n/**\n * The global Assets class is a singleton that manages loading, caching, and unloading of all resources\n * in your PixiJS application.\n *\n * Key responsibilities:\n * - **URL Resolution**: Maps URLs/keys to browser-compatible resources\n * - **Resource Loading**: Handles loading and transformation of assets\n * - **Asset Caching**: Manages a global cache to prevent duplicate loads\n * - **Memory Management**: Provides unloading capabilities to free memory\n *\n * Advanced Features:\n * - **Asset Bundles**: Group and manage related assets together\n * - **Background Loading**: Load assets before they're needed over time\n * - **Format Detection**: Automatically select optimal asset formats\n *\n * Supported Asset Types:\n * | Type                | Extensions                                                       | Loaders                                                               |\n * | ------------------- | ---------------------------------------------------------------- | --------------------------------------------------------------------- |\n * | Textures            | `.png`, `.jpg`, `.gif`, `.webp`, `.avif`, `.svg`                 | {@link loadTextures}, {@link loadSvg}                                 |\n * | Video Textures      | `.mp4`, `.m4v`, `.webm`, `.ogg`, `.ogv`, `.h264`, `.avi`, `.mov` | {@link loadVideoTextures}                                             |\n * | Sprite Sheets       | `.json`                                                          | {@link spritesheetAsset}                                              |\n * | Bitmap Fonts        | `.fnt`, `.xml`, `.txt`                                           | {@link loadBitmapFont}                                                |\n * | Web Fonts           | `.ttf`, `.otf`, `.woff`, `.woff2`                                | {@link loadWebFont}                                                   |\n * | JSON                | `.json`                                                          | {@link loadJson}                                                      |\n * | Text                | `.txt`                                                           | {@link loadTxt}                                                       |\n * | Compressed Textures | `.basis`, `.dds`, `.ktx`, `.ktx2`                                | {@link loadBasis}, {@link loadDDS}, {@link loadKTX}, {@link loadKTX2} |\n * > [!NOTE] Some loaders allow for custom configuration, please refer to the specific loader documentation for details.\n * @example\n * ```typescript\n * import { Assets } from 'pixi.js';\n *\n * // Initialize with options (optional). You can call Assets.load directly without init.\n * await Assets.init({\n *     // Base path for all asset URLs\n *     basePath: 'https://my-cdn.com/assets/',\n *     // Manifest object that defines all assets\n *     manifest: {\n *        bundles: [{ name: 'gameAssets', assets: [] }, ...],\n *     }, *\n *     // Preferred texture settings\n *     texturePreference: {\n *         resolution: window.devicePixelRatio,\n *         format: ['avif', 'webp', 'png']\n *     }\n * });\n *\n * // Basic loading\n * const texture = await Assets.load('images/sprite.png');\n *\n * // Load multiple assets\n * const assets = await Assets.load([\n *     'images/bg.png',\n *     'images/character.png',\n *     'fonts/game.fnt'\n * ]);\n *\n * // Using aliases + multiple formats\n * await Assets.load({ alias: 'hero', src: 'images/hero.{webp,png}' });\n * const sprite = Sprite.from('hero'); // Uses the best available format\n *\n * // background loading\n * Assets.backgroundLoad(['images/level1.json', 'images/level2.json']); // Loads in the background one at a time\n *\n * // Load a bundle of assets from the manifest\n * const levelAssets = await Assets.loadBundle('gameAssets');\n * // Background loading of a bundle. This will load assets in the background one at a time.\n * // Can be interrupted at any time by calling Assets.loadBundle('gameAssets') again.\n * Assets.backgroundLoadBundle('resultsAssets');\n *\n * // Memory management\n * await Assets.unload('hero');\n * await Assets.unloadBundle('levelOne');\n * ```\n * @remarks\n * - Assets are cached automatically and only loaded once\n * - Background loading helps eliminate loading screens\n * - Format detection ensures optimal asset delivery\n * - Bundle management simplifies resource organization\n *\n * > [!IMPORTANT]\n * > When unloading assets, ensure they aren't being used elsewhere\n * > in your application to prevent missing texture references.\n * @see {@link AssetInitOptions} For initialization options\n * @see {@link AssetsPreferences} For advanced preferences\n * @see {@link BackgroundLoader} For background loading capabilities\n * @see {@link AssetsManifest} For manifest-based asset management\n * @see {@link Loader} For the underlying loading system\n * @see {@link Cache} For the caching system\n * @see {@link Resolver} For URL resolution details\n * @category assets\n * @class\n * @standard\n */\nexport const Assets = new AssetsClass();\n\n// Handle registration of extensions\nextensions\n    .handleByList(ExtensionType.LoadParser, Assets.loader.parsers)\n    .handleByList(ExtensionType.ResolveParser, Assets.resolver.parsers)\n    .handleByList(ExtensionType.CacheParser, Assets.cache.parsers)\n    .handleByList(ExtensionType.DetectionParser, Assets.detections);\nextensions.add(\n    cacheTextureArray,\n\n    detectDefaults,\n    detectAvif,\n    detectWebp,\n    detectMp4,\n    detectOgv,\n    detectWebm,\n\n    loadJson,\n    loadTxt,\n    loadWebFont,\n    loadSvg,\n    loadTextures,\n    loadVideoTextures,\n    loadBitmapFont,\n\n    bitmapFontCachePlugin,\n\n    resolveTextureUrl,\n    resolveJsonUrl\n);\n\nconst assetKeyMap = {\n    loader: ExtensionType.LoadParser,\n    resolver: ExtensionType.ResolveParser,\n    cache: ExtensionType.CacheParser,\n    detection: ExtensionType.DetectionParser,\n};\n\ntype AssetType = keyof typeof assetKeyMap;\n\n// Split the Asset extension into it's various parts\n// these are handled in the Assets.ts file\nextensions.handle(ExtensionType.Asset, (extension) =>\n{\n    const ref = extension.ref as AssetExtension;\n\n    Object.entries(assetKeyMap)\n        .filter(([key]) => !!ref[key as AssetType])\n        .forEach(([key, type]) => extensions.add(Object.assign(\n            ref[key as AssetType],\n            // Allow the function to optionally define it's own\n            // ExtensionMetadata, the use cases here is priority for LoaderParsers\n            { extension: ref[key as AssetType].extension ?? type },\n        )));\n}, (extension) =>\n{\n    const ref = extension.ref as AssetExtension;\n\n    Object.keys(assetKeyMap)\n        .filter((key) => !!ref[key as AssetType])\n        .forEach((key) => extensions.remove(ref[key as AssetType]));\n});\n", "import { ExtensionType } from '../../extensions/Extensions';\nimport { isWebGLSupported } from '../../utils/browser/isWebGLSupported';\nimport { isWebGPUSupported } from '../../utils/browser/isWebGPUSupported';\n\nimport type { FormatDetectionParser } from '../../assets/detections/types';\n\n/**\n * Detects if Basis textures are supported by the browser.\n * This is done by checking if WebGL or WebGPU is supported.\n * If either is supported, Basis textures can be used.\n * @category assets\n * @internal\n */\nexport const detectBasis = {\n    extension: {\n        type: ExtensionType.DetectionParser,\n        priority: 3,\n    },\n    test: async (): Promise<boolean> =>\n    {\n        if (await isWebGPUSupported()) return true;\n        if (isWebGLSupported()) return true;\n\n        return false;\n    },\n    add: async (formats) => [...formats, 'basis'],\n    remove: async (formats) => formats.filter((f) => f !== 'basis'),\n} as FormatDetectionParser;\n", "import { TextureSource } from './TextureSource';\n\nimport type { TextureSourceOptions } from './TextureSource';\n\n/**\n * A texture source that uses a compressed resource, such as an array of Uint8Arrays.\n * It is used for compressed textures that can be uploaded to the GPU.\n * @category rendering\n * @advanced\n */\nexport class CompressedSource extends TextureSource<Uint8Array[]>\n{\n    public readonly uploadMethodId = 'compressed';\n\n    constructor(options: TextureSourceOptions)\n    {\n        super({\n            ...options,\n            mipLevelCount: options.resource.length,\n        });\n    }\n}\n", "import { DOMAdapter } from '../../../../../environment/adapter';\n\nimport type { TEXTURE_FORMATS } from '../../../shared/texture/const';\n\nlet supportedGLCompressedTextureFormats: TEXTURE_FORMATS[];\n\n/** @internal */\nexport function getSupportedGlCompressedTextureFormats(): TEXTURE_FORMATS[]\n{\n    if (supportedGLCompressedTextureFormats) return supportedGLCompressedTextureFormats;\n\n    // TODO: can we use already created context (webgl or webgl2)?\n    const canvas = DOMAdapter.get().createCanvas(1, 1);\n    const gl = canvas.getContext('webgl');\n\n    if (!gl)\n    {\n        return [];\n    }\n\n    supportedGLCompressedTextureFormats = [\n        // BC compressed formats usable if \"texture-compression-bc\" is both\n        // supported by the device/user agent and enabled in requestDevice.\n        // 'bc6h-rgb-ufloat'\n        // 'bc6h-rgb-float'\n        // 'bc7-rgba-unorm',\n        // 'bc7-rgba-unorm-srgb',\n        ...gl.getExtension('EXT_texture_compression_bptc') ? [\n            'bc6h-rgb-ufloat',\n            'bc6h-rgb-float',\n            'bc7-rgba-unorm',\n            'bc7-rgba-unorm-srgb',\n        ] : [],\n        // BC compressed formats usable if \"texture-compression-bc\" is both\n        // supported by the device/user agent and enabled in requestDevice.\n        // 'bc1-rgba-unorm',\n        // 'bc1-rgba-unorm-srgb',\n        // 'bc4-r-unorm'\n        // 'bc4-r-snorm'\n        // 'bc5-rg-unorm'\n        // 'bc5-rg-snorm'\n        ...gl.getExtension('WEBGL_compressed_texture_s3tc') ? [\n            'bc1-rgba-unorm',\n            'bc2-rgba-unorm',\n            'bc3-rgba-unorm',\n        ] : [],\n        ...gl.getExtension('WEBGL_compressed_texture_s3tc_srgb') ? [\n            'bc1-rgba-unorm-srgb',\n            'bc2-rgba-unorm-srgb',\n            'bc3-rgba-unorm-srgb',\n        ] : [],\n\n        ...gl.getExtension('EXT_texture_compression_rgtc') ? [\n            'bc4-r-unorm',\n            'bc4-r-snorm',\n            'bc5-rg-unorm',\n            'bc5-rg-snorm',\n        ] : [],\n\n        // ETC2 compressed formats usable if \"texture-compression-etc2\" is both\n        // supported by the device/user agent and enabled in requestDevice.\n        ...gl.getExtension('WEBGL_compressed_texture_etc') ? [\n            'etc2-rgb8unorm',\n            'etc2-rgb8unorm-srgb',\n            'etc2-rgba8unorm',\n            'etc2-rgba8unorm-srgb',\n            'etc2-rgb8a1unorm',\n            'etc2-rgb8a1unorm-srgb',\n            'eac-r11unorm',\n            'eac-rg11unorm',\n        ] : [],\n        // 'eac-r11snorm',\n        // 'eac-rg11snorm',\n        // ASTC compressed formats usable if \"texture-compression-astc\" is both\n        // supported by the device/user agent and enabled in requestDevice.\n        ...gl.getExtension('WEBGL_compressed_texture_astc') ? [\n            'astc-4x4-unorm',\n            'astc-4x4-unorm-srgb',\n            'astc-5x4-unorm',\n            'astc-5x4-unorm-srgb',\n            'astc-5x5-unorm',\n            'astc-5x5-unorm-srgb',\n            'astc-6x5-unorm',\n            'astc-6x5-unorm-srgb',\n            'astc-6x6-unorm',\n            'astc-6x6-unorm-srgb',\n            'astc-8x5-unorm',\n            'astc-8x5-unorm-srgb',\n            'astc-8x6-unorm',\n            'astc-8x6-unorm-srgb',\n            'astc-8x8-unorm',\n            'astc-8x8-unorm-srgb',\n            'astc-10x5-unorm',\n            'astc-10x5-unorm-srgb',\n            'astc-10x6-unorm',\n            'astc-10x6-unorm-srgb',\n            'astc-10x8-unorm',\n            'astc-10x8-unorm-srgb',\n            'astc-10x10-unorm',\n            'astc-10x10-unorm-srgb',\n            'astc-12x10-unorm',\n            'astc-12x10-unorm-srgb',\n            'astc-12x12-unorm',\n            'astc-12x12-unorm-srgb'\n        ] : [],\n    ] as TEXTURE_FORMATS[];\n\n    return supportedGLCompressedTextureFormats;\n}\n", "import { DOMAdapter } from '../../../../../environment/adapter';\n\nimport type { TEXTURE_FORMATS } from '../../../shared/texture/const';\n\nlet supportedGPUCompressedTextureFormats: TEXTURE_FORMATS[];\n\n/** @internal */\nexport async function getSupportedGPUCompressedTextureFormats(): Promise<TEXTURE_FORMATS[]>\n{\n    if (supportedGPUCompressedTextureFormats) return supportedGPUCompressedTextureFormats;\n\n    const adapter = await DOMAdapter.get().getNavigator().gpu.requestAdapter();\n\n    supportedGPUCompressedTextureFormats = [\n        ...adapter.features.has('texture-compression-bc') ? [\n            // BC compressed formats usable if \"texture-compression-bc\" is both\n            // supported by the device/user agent and enabled in requestDevice.\n            'bc1-rgba-unorm',\n            'bc1-rgba-unorm-srgb',\n            'bc2-rgba-unorm',\n            'bc2-rgba-unorm-srgb',\n            'bc3-rgba-unorm',\n            'bc3-rgba-unorm-srgb',\n            'bc4-r-unorm',\n            'bc4-r-snorm',\n            'bc5-rg-unorm',\n            'bc5-rg-snorm',\n            'bc6h-rgb-ufloat',\n            'bc6h-rgb-float',\n            'bc7-rgba-unorm',\n            'bc7-rgba-unorm-srgb',\n        ] : [],\n        ...adapter.features.has('texture-compression-etc2') ? [\n            // ETC2 compressed formats usable if \"texture-compression-etc2\" is both\n            // supported by the device/user agent and enabled in requestDevice.\n            'etc2-rgb8unorm',\n            'etc2-rgb8unorm-srgb',\n            'etc2-rgb8a1unorm',\n            'etc2-rgb8a1unorm-srgb',\n            'etc2-rgba8unorm',\n            'etc2-rgba8unorm-srgb',\n            'eac-r11unorm',\n            'eac-r11snorm',\n            'eac-rg11unorm',\n            'eac-rg11snorm',\n        ] : [],\n        ...adapter.features.has('texture-compression-astc') ? [\n            // ASTC compressed formats usable if \"texture-compression-astc\" is both\n            // supported by the device/user agent and enabled in requestDevice.\n            'astc-4x4-unorm',\n            'astc-4x4-unorm-srgb',\n            'astc-5x4-unorm',\n            'astc-5x4-unorm-srgb',\n            'astc-5x5-unorm',\n            'astc-5x5-unorm-srgb',\n            'astc-6x5-unorm',\n            'astc-6x5-unorm-srgb',\n            'astc-6x6-unorm',\n            'astc-6x6-unorm-srgb',\n            'astc-8x5-unorm',\n            'astc-8x5-unorm-srgb',\n            'astc-8x6-unorm',\n            'astc-8x6-unorm-srgb',\n            'astc-8x8-unorm',\n            'astc-8x8-unorm-srgb',\n            'astc-10x5-unorm',\n            'astc-10x5-unorm-srgb',\n            'astc-10x6-unorm',\n            'astc-10x6-unorm-srgb',\n            'astc-10x8-unorm',\n            'astc-10x8-unorm-srgb',\n            'astc-10x10-unorm',\n            'astc-10x10-unorm-srgb',\n            'astc-12x10-unorm',\n            'astc-12x10-unorm-srgb',\n            'astc-12x12-unorm',\n            'astc-12x12-unorm-srgb',\n        ] : [],\n    ] as TEXTURE_FORMATS[];\n\n    return supportedGPUCompressedTextureFormats;\n}\n", "import { isWebGLSupported } from '../../../../../utils/browser/isWebGLSupported';\nimport { isWebGPUSupported } from '../../../../../utils/browser/isWebGPUSupported';\nimport { getSupportedGlCompressedTextureFormats } from '../../../gl/texture/utils/getSupportedGlCompressedTextureFormats';\nimport { getSupportedGPUCompressedTextureFormats } from '../../../gpu/texture/utils/getSupportedGPUCompressedTextureFormats';\n\nimport type { TEXTURE_FORMATS } from '../const';\n\nlet supportedCompressedTextureFormats: TEXTURE_FORMATS[];\n\n/** @internal */\nexport async function getSupportedCompressedTextureFormats(): Promise<TEXTURE_FORMATS[]>\n{\n    if (supportedCompressedTextureFormats !== undefined) return supportedCompressedTextureFormats;\n\n    supportedCompressedTextureFormats = await (async (): Promise<TEXTURE_FORMATS[]> =>\n    {\n        // find only overlapping ones..\n        const _isWebGPUSupported = await isWebGPUSupported();\n        const _isWebGLSupported = isWebGLSupported();\n\n        if (_isWebGPUSupported && _isWebGLSupported)\n        {\n            const gpuTextureFormats = await getSupportedGPUCompressedTextureFormats();\n            const glTextureFormats = getSupportedGlCompressedTextureFormats();\n\n            return gpuTextureFormats.filter((format) => glTextureFormats.includes(format));\n        }\n        else if (_isWebGPUSupported)\n        {\n            return await getSupportedGPUCompressedTextureFormats();\n        }\n        else if (_isWebGLSupported)\n        {\n            return getSupportedGlCompressedTextureFormats();\n        }\n\n        return [];\n    })();\n\n    return supportedCompressedTextureFormats;\n}\n", "import { getSupportedCompressedTextureFormats } from './getSupportedCompressedTextureFormats';\n\nimport type { TEXTURE_FORMATS } from '../const';\n\n/** @internal */\nexport const nonCompressedFormats: TEXTURE_FORMATS[] = [\n    // 8-bit formats\n    'r8unorm',\n    'r8snorm',\n    'r8uint',\n    'r8sint',\n\n    // 16-bit formats\n    'r16uint',\n    'r16sint',\n    'r16float',\n    'rg8unorm',\n    'rg8snorm',\n    'rg8uint',\n    'rg8sint',\n\n    // 32-bit formats\n    'r32uint',\n    'r32sint',\n    'r32float',\n    'rg16uint',\n    'rg16sint',\n    'rg16float',\n    'rgba8unorm',\n    'rgba8unorm-srgb',\n    'rgba8snorm',\n    'rgba8uint',\n    'rgba8sint',\n    'bgra8unorm',\n    'bgra8unorm-srgb',\n    // Packed 32-bit formats\n    'rgb9e5ufloat',\n    'rgb10a2unorm',\n    'rg11b10ufloat',\n\n    // 64-bit formats\n    'rg32uint',\n    'rg32sint',\n    'rg32float',\n    'rgba16uint',\n    'rgba16sint',\n    'rgba16float',\n\n    // 128-bit formats\n    'rgba32uint',\n    'rgba32sint',\n    'rgba32float',\n\n    // Depth/stencil formats\n    'stencil8',\n    'depth16unorm',\n    'depth24plus',\n    'depth24plus-stencil8',\n    'depth32float',\n\n    // \"depth32float-stencil8\" feature\n    'depth32float-stencil8',\n];\n\nlet supportedTextureFormats: TEXTURE_FORMATS[];\n\n/** @internal */\nexport async function getSupportedTextureFormats(): Promise<TEXTURE_FORMATS[]>\n{\n    if (supportedTextureFormats !== undefined) return supportedTextureFormats;\n\n    const compressedTextureFormats = await getSupportedCompressedTextureFormats();\n\n    supportedTextureFormats = [\n        ...nonCompressedFormats,\n        ...compressedTextureFormats,\n    ];\n\n    return supportedTextureFormats;\n}\n\n", "const WORKER_CODE = \"(function () {\\n    'use strict';\\n\\n    function createLevelBuffers(basisTexture, basisTranscoderFormat) {\\n      const images = basisTexture.getNumImages();\\n      const levels = basisTexture.getNumLevels(0);\\n      const success = basisTexture.startTranscoding();\\n      if (!success) {\\n        throw new Error(\\\"startTranscoding failed\\\");\\n      }\\n      const levelBuffers = [];\\n      for (let levelIndex = 0; levelIndex < levels; ++levelIndex) {\\n        for (let sliceIndex = 0; sliceIndex < images; ++sliceIndex) {\\n          const transcodeSize = basisTexture.getImageTranscodedSizeInBytes(sliceIndex, levelIndex, basisTranscoderFormat);\\n          const levelBuffer = new Uint8Array(transcodeSize);\\n          const success2 = basisTexture.transcodeImage(levelBuffer, sliceIndex, levelIndex, basisTranscoderFormat, 1, 0);\\n          if (!success2) {\\n            throw new Error(\\\"transcodeImage failed\\\");\\n          }\\n          levelBuffers.push(levelBuffer);\\n        }\\n      }\\n      return levelBuffers;\\n    }\\n\\n    const gpuFormatToBasisTranscoderFormatMap = {\\n      \\\"bc3-rgba-unorm\\\": 3,\\n      // cTFBC3_RGBA\\n      \\\"bc7-rgba-unorm\\\": 6,\\n      // cTFBC7_RGBA,\\n      \\\"etc2-rgba8unorm\\\": 1,\\n      // cTFETC2_RGBA,\\n      \\\"astc-4x4-unorm\\\": 10,\\n      // cTFASTC_4x4_RGBA,\\n      // Uncompressed\\n      rgba8unorm: 13,\\n      // cTFRGBA32,\\n      rgba4unorm: 16\\n      // cTFRGBA4444,\\n    };\\n    function gpuFormatToBasisTranscoderFormat(transcoderFormat) {\\n      const format = gpuFormatToBasisTranscoderFormatMap[transcoderFormat];\\n      if (format) {\\n        return format;\\n      }\\n      throw new Error(`Unsupported transcoderFormat: ${transcoderFormat}`);\\n    }\\n\\n    const settings = {\\n      jsUrl: \\\"basis/basis_transcoder.js\\\",\\n      wasmUrl: \\\"basis/basis_transcoder.wasm\\\"\\n    };\\n    let basisTranscoderFormat;\\n    let basisTranscodedTextureFormat;\\n    let basisPromise;\\n    async function getBasis() {\\n      if (!basisPromise) {\\n        const absoluteJsUrl = new URL(settings.jsUrl, location.origin).href;\\n        const absoluteWasmUrl = new URL(settings.wasmUrl, location.origin).href;\\n        importScripts(absoluteJsUrl);\\n        basisPromise = new Promise((resolve) => {\\n          BASIS({\\n            locateFile: (_file) => absoluteWasmUrl\\n          }).then((module) => {\\n            module.initializeBasis();\\n            resolve(module.BasisFile);\\n          });\\n        });\\n      }\\n      return basisPromise;\\n    }\\n    async function fetchBasisTexture(url, BasisTexture) {\\n      const basisResponse = await fetch(url);\\n      if (basisResponse.ok) {\\n        const basisArrayBuffer = await basisResponse.arrayBuffer();\\n        return new BasisTexture(new Uint8Array(basisArrayBuffer));\\n      }\\n      throw new Error(`Failed to load Basis texture: ${url}`);\\n    }\\n    const preferredTranscodedFormat = [\\n      \\\"bc7-rgba-unorm\\\",\\n      \\\"astc-4x4-unorm\\\",\\n      \\\"etc2-rgba8unorm\\\",\\n      \\\"bc3-rgba-unorm\\\",\\n      \\\"rgba8unorm\\\"\\n    ];\\n    async function load(url) {\\n      const BasisTexture = await getBasis();\\n      const basisTexture = await fetchBasisTexture(url, BasisTexture);\\n      const levelBuffers = createLevelBuffers(basisTexture, basisTranscoderFormat);\\n      return {\\n        width: basisTexture.getImageWidth(0, 0),\\n        height: basisTexture.getImageHeight(0, 0),\\n        format: basisTranscodedTextureFormat,\\n        resource: levelBuffers,\\n        alphaMode: \\\"no-premultiply-alpha\\\"\\n      };\\n    }\\n    async function init(jsUrl, wasmUrl, supportedTextures) {\\n      if (jsUrl) settings.jsUrl = jsUrl;\\n      if (wasmUrl) settings.wasmUrl = wasmUrl;\\n      basisTranscodedTextureFormat = preferredTranscodedFormat.filter((format) => supportedTextures.includes(format))[0];\\n      basisTranscoderFormat = gpuFormatToBasisTranscoderFormat(basisTranscodedTextureFormat);\\n      await getBasis();\\n    }\\n    const messageHandlers = {\\n      init: async (data) => {\\n        const { jsUrl, wasmUrl, supportedTextures } = data;\\n        await init(jsUrl, wasmUrl, supportedTextures);\\n      },\\n      load: async (data) => {\\n        try {\\n          const textureOptions = await load(data.url);\\n          return {\\n            type: \\\"load\\\",\\n            url: data.url,\\n            success: true,\\n            textureOptions,\\n            transferables: textureOptions.resource?.map((arr) => arr.buffer)\\n          };\\n        } catch (e) {\\n          throw e;\\n        }\\n      }\\n    };\\n    self.onmessage = (async (messageEvent) => {\\n      const message = messageEvent.data;\\n      const response = await messageHandlers[message.type](message);\\n      if (response) {\\n        self.postMessage(response, response.transferables);\\n      }\\n    });\\n\\n})();\\n\";\nlet WORKER_URL = null;\nclass WorkerInstance\n{\n    constructor()\n    {\n        if (!WORKER_URL)\n        {\n            WORKER_URL = URL.createObjectURL(new Blob([WORKER_CODE], { type: 'application/javascript' }));\n        }\n        this.worker = new Worker(WORKER_URL);\n    }\n}\nWorkerInstance.revokeObjectURL = function revokeObjectURL()\n{\n    if (WORKER_URL)\n    {\n        URL.revokeObjectURL(WORKER_URL);\n        WORKER_URL = null;\n    }\n};\n\nexport { WorkerInstance as default };\n//# sourceMappingURL=basis.worker.mjs.map\n", "/**\n * The urls for the Basis transcoder files.\n * These can be set to custom paths if needed.\n * @category assets\n * @advanced\n */\nexport const basisTranscoderUrls = {\n    jsUrl: 'https://cdn.jsdelivr.net/npm/pixi.js/transcoders/basis/basis_transcoder.js',\n    wasmUrl: 'https://cdn.jsdelivr.net/npm/pixi.js/transcoders/basis/basis_transcoder.wasm',\n};\n\n/**\n * Sets the Basis transcoder paths.\n * This allows you to override the default paths for the Basis transcoder files.\n * @param config - The configuration object containing the new paths.\n * @category assets\n * @advanced\n */\nexport function setBasisTranscoderPath(config: Partial<typeof basisTranscoderUrls>)\n{\n    Object.assign(basisTranscoderUrls, config);\n}\n", "import BasisWorker from 'worker:./basis.worker.ts';\nimport { basisTranscoderUrls } from '../utils/setBasisTranscoderPath';\n\nimport type { TEXTURE_FORMATS } from '../../../rendering/renderers/shared/texture/const';\nimport type { TextureSourceOptions } from '../../../rendering/renderers/shared/texture/sources/TextureSource';\n\nlet basisWorker: Worker;\nconst urlHash: Record<string, (value: any) => void> = {};\n\nfunction getBasisWorker(supportedTextures: TEXTURE_FORMATS[]): Worker\n{\n    if (!basisWorker)\n    {\n        basisWorker = new BasisWorker().worker;\n\n        basisWorker.onmessage = (messageEvent) =>\n        {\n            const { success, url, textureOptions } = messageEvent.data;\n\n            if (!success)\n            {\n                console.warn('Failed to load Basis texture', url);\n            }\n\n            urlHash[url](textureOptions);\n        };\n\n        basisWorker.postMessage({\n            type: 'init',\n            jsUrl: basisTranscoderUrls.jsUrl,\n            wasmUrl: basisTranscoderUrls.wasmUrl,\n            supportedTextures\n        });\n    }\n\n    return basisWorker;\n}\n\n/**\n * @param url\n * @param supportedTextures\n * @internal\n */\nexport function loadBasisOnWorker(\n    url: string,\n    supportedTextures: TEXTURE_FORMATS[]\n): Promise<TextureSourceOptions>\n{\n    const ktxWorker = getBasisWorker(supportedTextures);\n\n    return new Promise((resolve) =>\n    {\n        urlHash[url] = resolve;\n\n        ktxWorker.postMessage({ type: 'load', url });\n    });\n}\n", "import { LoaderParserPriority } from '../../assets/loader/parsers/LoaderParser';\nimport { createTexture } from '../../assets/loader/parsers/textures/utils/createTexture';\nimport { checkExtension } from '../../assets/utils/checkExtension';\nimport { ExtensionType } from '../../extensions/Extensions';\nimport { CompressedSource } from '../../rendering/renderers/shared/texture/sources/CompressedSource';\nimport { getSupportedTextureFormats } from '../../rendering/renderers/shared/texture/utils/getSupportedTextureFormats';\nimport { loadBasisOnWorker } from './worker/loadBasisOnWorker';\n\nimport type { Loader } from '../../assets/loader/Loader';\nimport type { LoaderParser } from '../../assets/loader/parsers/LoaderParser';\nimport type { ResolvedAsset } from '../../assets/types';\nimport type { TextureSourceOptions } from '../../rendering/renderers/shared/texture/sources/TextureSource';\nimport type { Texture } from '../../rendering/renderers/shared/texture/Texture';\n\n/**\n * Loads Basis textures using a web worker.\n * @category assets\n * @advanced\n */\nexport const loadBasis = {\n    extension: {\n        type: ExtensionType.LoadParser,\n        priority: LoaderParserPriority.High,\n        name: 'loadBasis',\n    },\n\n    /** used for deprecation purposes */\n    name: 'loadBasis',\n    id: 'basis',\n\n    test(url: string): boolean\n    {\n        return checkExtension(url, ['.basis']);\n    },\n\n    async load(url: string, _asset: ResolvedAsset, loader: Loader): Promise<Texture | Texture[]>\n    {\n        const supportedTextures = await getSupportedTextureFormats();\n\n        const textureOptions = await loadBasisOnWorker(url, supportedTextures);\n\n        const compressedTextureSource = new CompressedSource(textureOptions);\n\n        return createTexture(compressedTextureSource, loader, url);\n    },\n\n    unload(texture: Texture | Texture[]): void\n    {\n        if (Array.isArray(texture))\n        {\n            texture.forEach((t) => t.destroy(true));\n        }\n        else\n        {\n            texture.destroy(true);\n        }\n    }\n\n} satisfies LoaderParser<Texture | Texture[], TextureSourceOptions>;\n", "import type { BasisTexture } from '../types';\n\n/**\n * @param basisTexture\n * @param basisTranscoderFormat\n * @internal\n */\nexport function createLevelBuffers(basisTexture: BasisTexture, basisTranscoderFormat: number): Uint8Array[]\n{\n    const images = basisTexture.getNumImages();\n    const levels = basisTexture.getNumLevels(0);\n\n    const success = basisTexture.startTranscoding();\n\n    if (!success)\n    {\n        throw new Error('startTranscoding failed');\n    }\n\n    const levelBuffers = [];\n\n    for (let levelIndex = 0; levelIndex < levels; ++levelIndex)\n    {\n        for (let sliceIndex = 0; sliceIndex < images; ++sliceIndex)\n        {\n            const transcodeSize = basisTexture.getImageTranscodedSizeInBytes(sliceIndex, levelIndex, basisTranscoderFormat);\n            const levelBuffer = new Uint8Array(transcodeSize);\n\n            const success = basisTexture.transcodeImage(levelBuffer, sliceIndex, levelIndex, basisTranscoderFormat, 1, 0);\n\n            if (!success)\n            {\n                throw new Error('transcodeImage failed');\n            }\n\n            levelBuffers.push(levelBuffer);\n        }\n    }\n\n    return levelBuffers;\n}\n", "const gpuFormatToBasisTranscoderFormatMap: Record<string, number> = {\n    'bc3-rgba-unorm': 3, // cTFBC3_RGBA\n    'bc7-rgba-unorm': 6, // cTFBC7_RGBA,\n    'etc2-rgba8unorm': 1, // cTFETC2_RGBA,\n    'astc-4x4-unorm': 10, // cTFASTC_4x4_RGBA,\n    // Uncompressed\n    rgba8unorm: 13, // cTFRGBA32,\n    rgba4unorm: 16, // cTFRGBA4444,\n};\n\n/**\n * @param transcoderFormat\n * @internal\n */\nexport function gpuFormatToBasisTranscoderFormat(transcoderFormat: string): number\n{\n    const format = gpuFormatToBasisTranscoderFormatMap[transcoderFormat];\n\n    if (format)\n    {\n        return format;\n    }\n\n    throw new Error(`Unsupported transcoderFormat: ${transcoderFormat}`);\n}\n", "import type { TEXTURE_FORMATS } from '../../rendering/renderers/shared/texture/const';\n\n// http://msdn.microsoft.com/en-us/library/bb943991.aspx/\n/**\n * DWORD offsets of the DDS file header fields (relative to file start).\n * @ignore\n */\nconst DDS_HEADER_FIELDS = {\n    MAGIC: 0,\n    SIZE: 1,\n    FLAGS: 2,\n    HEIGHT: 3,\n    WIDTH: 4,\n    MIPMAP_COUNT: 7,\n    PIXEL_FORMAT: 19,\n    PF_FLAGS: 20,\n    FOURCC: 21,\n    RGB_BITCOUNT: 22,\n    R_BIT_MASK: 23,\n    G_BIT_MASK: 24,\n    B_BIT_MASK: 25,\n    A_BIT_MASK: 26,\n};\n\n/**\n * DWORD offsets of the DDS_HEADER_DX10 fields.\n * @ignore\n */\nconst DDS_DX10_FIELDS = {\n    DXGI_FORMAT: 0,\n    RESOURCE_DIMENSION: 1,\n    MISC_FLAG: 2,\n    ARRAY_SIZE: 3,\n    MISC_FLAGS2: 4,\n};\n\n/**\n * @see https://docs.microsoft.com/en-us/windows/win32/api/dxgiformat/ne-dxgiformat-dxgi_format\n * This is way over-blown for us! Lend us a hand, and remove the ones that aren't used (but set the remaining\n * ones to their correct value)\n * @ignore\n */\nexport enum DXGI_FORMAT\n{\n    DXGI_FORMAT_UNKNOWN,\n    DXGI_FORMAT_R32G32B32A32_TYPELESS,\n    DXGI_FORMAT_R32G32B32A32_FLOAT,\n    DXGI_FORMAT_R32G32B32A32_UINT,\n    DXGI_FORMAT_R32G32B32A32_SINT,\n    DXGI_FORMAT_R32G32B32_TYPELESS,\n    DXGI_FORMAT_R32G32B32_FLOAT,\n    DXGI_FORMAT_R32G32B32_UINT,\n    DXGI_FORMAT_R32G32B32_SINT,\n    DXGI_FORMAT_R16G16B16A16_TYPELESS,\n    DXGI_FORMAT_R16G16B16A16_FLOAT,\n    DXGI_FORMAT_R16G16B16A16_UNORM,\n    DXGI_FORMAT_R16G16B16A16_UINT,\n    DXGI_FORMAT_R16G16B16A16_SNORM,\n    DXGI_FORMAT_R16G16B16A16_SINT,\n    DXGI_FORMAT_R32G32_TYPELESS,\n    DXGI_FORMAT_R32G32_FLOAT,\n    DXGI_FORMAT_R32G32_UINT,\n    DXGI_FORMAT_R32G32_SINT,\n    DXGI_FORMAT_R32G8X24_TYPELESS,\n    DXGI_FORMAT_D32_FLOAT_S8X24_UINT,\n    DXGI_FORMAT_R32_FLOAT_X8X24_TYPELESS,\n    DXGI_FORMAT_X32_TYPELESS_G8X24_UINT,\n    DXGI_FORMAT_R10G10B10A2_TYPELESS,\n    DXGI_FORMAT_R10G10B10A2_UNORM,\n    DXGI_FORMAT_R10G10B10A2_UINT,\n    DXGI_FORMAT_R11G11B10_FLOAT,\n    DXGI_FORMAT_R8G8B8A8_TYPELESS,\n    DXGI_FORMAT_R8G8B8A8_UNORM,\n    DXGI_FORMAT_R8G8B8A8_UNORM_SRGB,\n    DXGI_FORMAT_R8G8B8A8_UINT,\n    DXGI_FORMAT_R8G8B8A8_SNORM,\n    DXGI_FORMAT_R8G8B8A8_SINT,\n    DXGI_FORMAT_R16G16_TYPELESS,\n    DXGI_FORMAT_R16G16_FLOAT,\n    DXGI_FORMAT_R16G16_UNORM,\n    DXGI_FORMAT_R16G16_UINT,\n    DXGI_FORMAT_R16G16_SNORM,\n    DXGI_FORMAT_R16G16_SINT,\n    DXGI_FORMAT_R32_TYPELESS,\n    DXGI_FORMAT_D32_FLOAT,\n    DXGI_FORMAT_R32_FLOAT,\n    DXGI_FORMAT_R32_UINT,\n    DXGI_FORMAT_R32_SINT,\n    DXGI_FORMAT_R24G8_TYPELESS,\n    DXGI_FORMAT_D24_UNORM_S8_UINT,\n    DXGI_FORMAT_R24_UNORM_X8_TYPELESS,\n    DXGI_FORMAT_X24_TYPELESS_G8_UINT,\n    DXGI_FORMAT_R8G8_TYPELESS,\n    DXGI_FORMAT_R8G8_UNORM,\n    DXGI_FORMAT_R8G8_UINT,\n    DXGI_FORMAT_R8G8_SNORM,\n    DXGI_FORMAT_R8G8_SINT,\n    DXGI_FORMAT_R16_TYPELESS,\n    DXGI_FORMAT_R16_FLOAT,\n    DXGI_FORMAT_D16_UNORM,\n    DXGI_FORMAT_R16_UNORM,\n    DXGI_FORMAT_R16_UINT,\n    DXGI_FORMAT_R16_SNORM,\n    DXGI_FORMAT_R16_SINT,\n    DXGI_FORMAT_R8_TYPELESS,\n    DXGI_FORMAT_R8_UNORM,\n    DXGI_FORMAT_R8_UINT,\n    DXGI_FORMAT_R8_SNORM,\n    DXGI_FORMAT_R8_SINT,\n    DXGI_FORMAT_A8_UNORM,\n    DXGI_FORMAT_R1_UNORM,\n    DXGI_FORMAT_R9G9B9E5_SHAREDEXP,\n    DXGI_FORMAT_R8G8_B8G8_UNORM,\n    DXGI_FORMAT_G8R8_G8B8_UNORM,\n    DXGI_FORMAT_BC1_TYPELESS,\n    DXGI_FORMAT_BC1_UNORM,\n    DXGI_FORMAT_BC1_UNORM_SRGB,\n    DXGI_FORMAT_BC2_TYPELESS,\n    DXGI_FORMAT_BC2_UNORM,\n    DXGI_FORMAT_BC2_UNORM_SRGB,\n    DXGI_FORMAT_BC3_TYPELESS,\n    DXGI_FORMAT_BC3_UNORM,\n    DXGI_FORMAT_BC3_UNORM_SRGB,\n    DXGI_FORMAT_BC4_TYPELESS,\n    DXGI_FORMAT_BC4_UNORM,\n    DXGI_FORMAT_BC4_SNORM,\n    DXGI_FORMAT_BC5_TYPELESS,\n    DXGI_FORMAT_BC5_UNORM,\n    DXGI_FORMAT_BC5_SNORM,\n    DXGI_FORMAT_B5G6R5_UNORM,\n    DXGI_FORMAT_B5G5R5A1_UNORM,\n    DXGI_FORMAT_B8G8R8A8_UNORM,\n    DXGI_FORMAT_B8G8R8X8_UNORM,\n    DXGI_FORMAT_R10G10B10_XR_BIAS_A2_UNORM,\n    DXGI_FORMAT_B8G8R8A8_TYPELESS,\n    DXGI_FORMAT_B8G8R8A8_UNORM_SRGB,\n    DXGI_FORMAT_B8G8R8X8_TYPELESS,\n    DXGI_FORMAT_B8G8R8X8_UNORM_SRGB,\n    DXGI_FORMAT_BC6H_TYPELESS,\n    DXGI_FORMAT_BC6H_UF16,\n    DXGI_FORMAT_BC6H_SF16,\n    DXGI_FORMAT_BC7_TYPELESS,\n    DXGI_FORMAT_BC7_UNORM,\n    DXGI_FORMAT_BC7_UNORM_SRGB,\n    DXGI_FORMAT_AYUV,\n    DXGI_FORMAT_Y410,\n    DXGI_FORMAT_Y416,\n    DXGI_FORMAT_NV12,\n    DXGI_FORMAT_P010,\n    DXGI_FORMAT_P016,\n    DXGI_FORMAT_420_OPAQUE,\n    DXGI_FORMAT_YUY2,\n    DXGI_FORMAT_Y210,\n    DXGI_FORMAT_Y216,\n    DXGI_FORMAT_NV11,\n    DXGI_FORMAT_AI44,\n    DXGI_FORMAT_IA44,\n    DXGI_FORMAT_P8,\n    DXGI_FORMAT_A8P8,\n    DXGI_FORMAT_B4G4R4A4_UNORM,\n    DXGI_FORMAT_P208,\n    DXGI_FORMAT_V208,\n    DXGI_FORMAT_V408,\n    DXGI_FORMAT_SAMPLER_FEEDBACK_MIN_MIP_OPAQUE,\n    DXGI_FORMAT_SAMPLER_FEEDBACK_MIP_REGION_USED_OPAQUE,\n    DXGI_FORMAT_FORCE_UINT\n}\n\n/**\n * Possible values of the field {@link DDS_DX10_FIELDS.RESOURCE_DIMENSION}\n * @ignore\n */\nexport enum D3D10_RESOURCE_DIMENSION\n{\n    DDS_DIMENSION_TEXTURE1D = 2,\n    DDS_DIMENSION_TEXTURE2D = 3,\n    DDS_DIMENSION_TEXTURE3D = 6\n}\n\nfunction fourCCToInt32(value: string)\n{\n    return value.charCodeAt(0)\n        + (value.charCodeAt(1) << 8)\n        + (value.charCodeAt(2) << 16)\n        + (value.charCodeAt(3) << 24);\n}\n\n/**\n * Four character codes for DXTn formats\n * https://learn.microsoft.com/en-us/windows/win32/direct3ddds/dx-graphics-dds-pguide\n * https://learn.microsoft.com/en-us/windows/win32/direct3d9/d3dformat\n * @internal\n */\nexport enum D3DFMT\n{\n    UNKNOWN = 0,\n    R8G8B8 = 20,\n    A8R8G8B8 = 21,\n    X8R8G8B8 = 22,\n    R5G6B5 = 23,\n    X1R5G5B5 = 24,\n    A1R5G5B5 = 25,\n    A4R4G4B4 = 26,\n    R3G3B2 = 27,\n    A8 = 28,\n    A8R3G3B2 = 29,\n    X4R4G4B4 = 30,\n    A2B10G10R10 = 31,\n    A8B8G8R8 = 32,\n    X8B8G8R8 = 33,\n    G16R16 = 34,\n    A2R10G10B10 = 35,\n    A16B16G16R16 = 36,\n    A8P8 = 40,\n    P8 = 41,\n    L8 = 50,\n    A8L8 = 51,\n    A4L4 = 52,\n    V8U8 = 60,\n    L6V5U5 = 61,\n    X8L8V8U8 = 62,\n    Q8W8V8U8 = 63,\n    V16U16 = 64,\n    A2W10V10U10 = 67,\n    Q16W16V16U16 = 110,\n    R16F = 111,\n    G16R16F = 112,\n    A16B16G16R16F = 113,\n    R32F = 114,\n    G32R32F = 115,\n    A32B32G32R32F = 116,\n    UYVY = fourCCToInt32('UYVY'),\n    R8G8_B8G8 = fourCCToInt32('RGBG'),\n    YUY2 = fourCCToInt32('YUY2'),\n    D3DFMT_G8R8_G8B8 = fourCCToInt32('GRGB'),\n    DXT1 = fourCCToInt32('DXT1'),\n    DXT2 = fourCCToInt32('DXT2'),\n    DXT3 = fourCCToInt32('DXT3'),\n    DXT4 = fourCCToInt32('DXT4'),\n    DXT5 = fourCCToInt32('DXT5'),\n    ATI1 = fourCCToInt32('ATI1'),\n    AT1N = fourCCToInt32('AT1N'),\n    ATI2 = fourCCToInt32('ATI2'),\n    AT2N = fourCCToInt32('AT2N'),\n    BC4U = fourCCToInt32('BC4U'),\n    BC4S = fourCCToInt32('BC4S'),\n    BC5U = fourCCToInt32('BC5U'),\n    BC5S = fourCCToInt32('BC5S'),\n\n    DX10 = fourCCToInt32('DX10'),\n}\n\n/**\n * Maps `FOURCC_*` formats to {@link TEXTURE_FORMATS}.\n * https://en.wikipedia.org/wiki/S3_Texture_Compression#S3TC_format_comparison\n * https://github.com/microsoft/DirectXTex/blob/main/DDSTextureLoader/DDSTextureLoader11.cpp\n * @ignore\n */\nexport const FOURCC_TO_TEXTURE_FORMAT: { [id: number]: TEXTURE_FORMATS } = {\n    [D3DFMT.DXT1]: 'bc1-rgba-unorm',\n    [D3DFMT.DXT2]: 'bc2-rgba-unorm',\n    [D3DFMT.DXT3]: 'bc2-rgba-unorm',\n    [D3DFMT.DXT4]: 'bc3-rgba-unorm',\n    [D3DFMT.DXT5]: 'bc3-rgba-unorm',\n\n    [D3DFMT.ATI1]: 'bc4-r-unorm',\n    [D3DFMT.BC4U]: 'bc4-r-unorm',\n    [D3DFMT.BC4S]: 'bc4-r-snorm',\n\n    [D3DFMT.ATI2]: 'bc5-rg-unorm',\n    [D3DFMT.BC5U]: 'bc5-rg-unorm',\n    [D3DFMT.BC5S]: 'bc5-rg-snorm',\n\n    [D3DFMT.A16B16G16R16]: 'rgba16uint',\n    [D3DFMT.Q16W16V16U16]: 'rgba16sint',\n    [D3DFMT.R16F]: 'r16float',\n    [D3DFMT.G16R16F]: 'rg16float',\n    [D3DFMT.A16B16G16R16F]: 'rgba16float',\n    [D3DFMT.R32F]: 'r32float',\n    [D3DFMT.G32R32F]: 'rg32float',\n    [D3DFMT.A32B32G32R32F]: 'rgba32float',\n};\n\n/**\n * Maps {@link DXGI_FORMAT} to {@link TEXTURE_FORMATS}\n * @ignore\n */\nexport const DXGI_TO_TEXTURE_FORMAT: { [id: number]: TEXTURE_FORMATS } = {\n    [DXGI_FORMAT.DXGI_FORMAT_BC1_TYPELESS]: 'bc1-rgba-unorm',\n    [DXGI_FORMAT.DXGI_FORMAT_BC1_UNORM]: 'bc1-rgba-unorm',\n    [DXGI_FORMAT.DXGI_FORMAT_BC1_UNORM_SRGB]: 'bc1-rgba-unorm-srgb',\n\n    [DXGI_FORMAT.DXGI_FORMAT_BC2_TYPELESS]: 'bc2-rgba-unorm',\n    [DXGI_FORMAT.DXGI_FORMAT_BC2_UNORM]: 'bc2-rgba-unorm',\n    [DXGI_FORMAT.DXGI_FORMAT_BC2_UNORM_SRGB]: 'bc2-rgba-unorm-srgb',\n\n    [DXGI_FORMAT.DXGI_FORMAT_BC3_TYPELESS]: 'bc3-rgba-unorm',\n    [DXGI_FORMAT.DXGI_FORMAT_BC3_UNORM]: 'bc3-rgba-unorm',\n    [DXGI_FORMAT.DXGI_FORMAT_BC3_UNORM_SRGB]: 'bc3-rgba-unorm-srgb',\n\n    [DXGI_FORMAT.DXGI_FORMAT_BC4_TYPELESS]: 'bc4-r-unorm',\n    [DXGI_FORMAT.DXGI_FORMAT_BC4_UNORM]: 'bc4-r-unorm',\n    [DXGI_FORMAT.DXGI_FORMAT_BC4_SNORM]: 'bc4-r-snorm',\n\n    [DXGI_FORMAT.DXGI_FORMAT_BC5_TYPELESS]: 'bc5-rg-unorm',\n    [DXGI_FORMAT.DXGI_FORMAT_BC5_UNORM]: 'bc5-rg-unorm',\n    [DXGI_FORMAT.DXGI_FORMAT_BC5_SNORM]: 'bc5-rg-snorm',\n\n    [DXGI_FORMAT.DXGI_FORMAT_BC6H_TYPELESS]: 'bc6h-rgb-ufloat',\n    [DXGI_FORMAT.DXGI_FORMAT_BC6H_UF16]: 'bc6h-rgb-ufloat',\n    [DXGI_FORMAT.DXGI_FORMAT_BC6H_SF16]: 'bc6h-rgb-float',\n\n    [DXGI_FORMAT.DXGI_FORMAT_BC7_TYPELESS]: 'bc7-rgba-unorm',\n    [DXGI_FORMAT.DXGI_FORMAT_BC7_UNORM]: 'bc7-rgba-unorm',\n    [DXGI_FORMAT.DXGI_FORMAT_BC7_UNORM_SRGB]: 'bc7-rgba-unorm-srgb',\n\n    [DXGI_FORMAT.DXGI_FORMAT_R8G8B8A8_UNORM]: 'rgba8unorm',\n    [DXGI_FORMAT.DXGI_FORMAT_R8G8B8A8_UNORM_SRGB]: 'rgba8unorm-srgb',\n    [DXGI_FORMAT.DXGI_FORMAT_B8G8R8A8_UNORM]: 'bgra8unorm',\n    [DXGI_FORMAT.DXGI_FORMAT_B8G8R8A8_UNORM_SRGB]: 'bgra8unorm-srgb',\n    [DXGI_FORMAT.DXGI_FORMAT_R32_FLOAT]: 'r32float',\n\n    [DXGI_FORMAT.DXGI_FORMAT_R8G8_UNORM]: 'rg8unorm',\n    [DXGI_FORMAT.DXGI_FORMAT_R16_UNORM]: 'r16uint',\n\n    [DXGI_FORMAT.DXGI_FORMAT_R8_UNORM]: 'r8unorm',\n    [DXGI_FORMAT.DXGI_FORMAT_R10G10B10A2_UNORM]: 'rgb10a2unorm',\n\n    [DXGI_FORMAT.DXGI_FORMAT_R16G16B16A16_UNORM]: 'rgba16uint',\n    [DXGI_FORMAT.DXGI_FORMAT_R16G16B16A16_SNORM]: 'rgba16sint',\n    [DXGI_FORMAT.DXGI_FORMAT_R16G16B16A16_FLOAT]: 'rgba16float',\n    [DXGI_FORMAT.DXGI_FORMAT_R16_FLOAT]: 'r16float',\n    [DXGI_FORMAT.DXGI_FORMAT_R16G16_FLOAT]: 'rg16float',\n    [DXGI_FORMAT.DXGI_FORMAT_R32G32_FLOAT]: 'rg32float',\n    [DXGI_FORMAT.DXGI_FORMAT_R32G32B32A32_FLOAT]: 'rgba32float',\n\n};\n\n/**\n * Maps {@link DXGI_FORMAT} to {@link D3DFMT}\n * @internal\n */\nexport const DDS = {\n    MAGIC_VALUE: 0x20534444,\n    MAGIC_SIZE: 4,\n    HEADER_SIZE: 124,\n    HEADER_DX10_SIZE: 20,\n    PIXEL_FORMAT_FLAGS: {\n        // PIXEL_FORMAT flags\n        // https://github.com/Microsoft/DirectXTex/blob/main/DirectXTex/DDS.h\n        // https://learn.microsoft.com/en-us/windows/win32/direct3ddds/dds-pixelformat\n        ALPHAPIXELS: 0x1,\n        ALPHA: 0x2,\n        FOURCC: 0x4,\n        RGB: 0x40,\n        RGBA: 0x41,\n        YUV: 0x200,\n        LUMINANCE: 0x20000,\n        LUMINANCEA: 0x20001,\n    },\n\n    RESOURCE_MISC_TEXTURECUBE: 0x4,\n\n    HEADER_FIELDS: DDS_HEADER_FIELDS,\n    HEADER_DX10_FIELDS: DDS_DX10_FIELDS,\n    DXGI_FORMAT,\n    D3D10_RESOURCE_DIMENSION,\n    D3DFMT\n};\n\n/** @internal */\nexport const TEXTURE_FORMAT_BLOCK_SIZE: Record<string, number> = {\n    'bc1-rgba-unorm':  8,\n    'bc1-rgba-unorm-srgb':  8,\n    'bc2-rgba-unorm':  16,\n    'bc2-rgba-unorm-srgb':  16,\n    'bc3-rgba-unorm':  16,\n    'bc3-rgba-unorm-srgb':  16,\n    'bc4-r-unorm':  8,\n    'bc4-r-snorm':  8,\n    'bc5-rg-unorm':  16,\n    'bc5-rg-snorm':  16,\n    'bc6h-rgb-ufloat':  16,\n    'bc6h-rgb-float':  16,\n    'bc7-rgba-unorm':  16,\n    'bc7-rgba-unorm-srgb':  16\n};\n", "import { DDS, DXGI_TO_TEXTURE_FORMAT, FOURCC_TO_TEXTURE_FORMAT, TEXTURE_FORMAT_BLOCK_SIZE } from './const';\n\nimport type { TEXTURE_FORMATS } from '../../rendering/renderers/shared/texture/const';\nimport type { TextureSourceOptions } from '../../rendering/renderers/shared/texture/sources/TextureSource';\n\n/**\n * @param arrayBuffer\n * @param supportedFormats\n * @internal\n */\nexport function parseDDS(arrayBuffer: ArrayBuffer, supportedFormats: TEXTURE_FORMATS[]): TextureSourceOptions<Uint8Array[]>\n{\n    const {\n        format,\n        fourCC,\n        width,\n        height,\n        dataOffset,\n        mipmapCount,\n    } = parseDDSHeader(arrayBuffer);\n\n    if (!supportedFormats.includes(format))\n    {\n        throw new Error(`Unsupported texture format: ${fourCC} ${format}, supported: ${supportedFormats}`);\n    }\n\n    if (mipmapCount <= 1)\n    { // No need bothering with the imageSize calculation!\n        return {\n            format,\n            width,\n            height,\n            resource: [new Uint8Array(arrayBuffer, dataOffset)],\n            alphaMode: 'no-premultiply-alpha',\n        } as TextureSourceOptions;\n    }\n\n    const levelBuffers = getMipmapLevelBuffers(format, width, height, dataOffset, mipmapCount, arrayBuffer);\n\n    const textureOptions: TextureSourceOptions = {\n        format,\n        width,\n        height,\n        resource: levelBuffers,\n        alphaMode: 'no-premultiply-alpha'\n    };\n\n    return textureOptions;\n}\n\nfunction getMipmapLevelBuffers(format: TEXTURE_FORMATS, width: number, height: number,\n    dataOffset: any, mipmapCount: number, arrayBuffer: ArrayBuffer)\n{\n    const levelBuffers = [];\n    const blockBytes = TEXTURE_FORMAT_BLOCK_SIZE[format];\n\n    let mipWidth = width;\n    let mipHeight = height;\n    let offset = dataOffset;\n\n    for (let level = 0; level < mipmapCount; ++level)\n    {\n        // Each dimension must be aligned to a multiple of 4\n        const alignedWidth = Math.ceil(Math.max(4, mipWidth) / 4) * 4;\n        const alignedHeight = Math.ceil(Math.max(4, mipHeight) / 4) * 4;\n        const byteLength = blockBytes\n            ? alignedWidth / 4 * alignedHeight / 4 * blockBytes\n            : mipWidth * mipHeight * 4;\n\n        const levelBuffer = new Uint8Array(arrayBuffer, offset, byteLength);\n\n        levelBuffers.push(levelBuffer);\n\n        offset += byteLength;\n\n        mipWidth = Math.max(mipWidth >> 1, 1);\n        mipHeight = Math.max(mipHeight >> 1, 1);\n    }\n\n    return levelBuffers;\n}\n\nfunction parseDDSHeader(buffer: ArrayBuffer)\n{\n    const header = new Uint32Array(buffer, 0, DDS.HEADER_SIZE / Uint32Array.BYTES_PER_ELEMENT);\n\n    if (header[DDS.HEADER_FIELDS.MAGIC] !== DDS.MAGIC_VALUE)\n    {\n        throw new Error('Invalid magic number in DDS header');\n    }\n\n    // DDS header fields\n    const height = header[DDS.HEADER_FIELDS.HEIGHT];\n    const width = header[DDS.HEADER_FIELDS.WIDTH];\n    const mipmapCount = Math.max(1, header[DDS.HEADER_FIELDS.MIPMAP_COUNT]);\n    const flags = header[DDS.HEADER_FIELDS.PF_FLAGS];\n    const fourCC = header[DDS.HEADER_FIELDS.FOURCC];\n    const format = getTextureFormat(header, flags, fourCC, buffer);\n\n    const dataOffset = DDS.MAGIC_SIZE + DDS.HEADER_SIZE\n        + ((fourCC === DDS.D3DFMT.DX10) ? DDS.HEADER_DX10_SIZE : 0);\n\n    return {\n        format,\n        fourCC,\n        width,\n        height,\n        dataOffset,\n        mipmapCount\n    };\n}\n\nfunction getTextureFormat(header: Uint32Array, flags: number, fourCC: number, buffer: ArrayBuffer)\n{\n    if (flags & DDS.PIXEL_FORMAT_FLAGS.FOURCC)\n    {\n        if (fourCC === DDS.D3DFMT.DX10)\n        {\n            const dx10Header = new Uint32Array(\n                buffer,\n                DDS.MAGIC_SIZE + DDS.HEADER_SIZE, // there is a 20-byte DDS_HEADER_DX10 after DDS_HEADER\n                DDS.HEADER_DX10_SIZE / Uint32Array.BYTES_PER_ELEMENT);\n\n            const miscFlag = dx10Header[DDS.HEADER_DX10_FIELDS.MISC_FLAG];\n\n            if (miscFlag === DDS.RESOURCE_MISC_TEXTURECUBE)\n            {\n                throw new Error('DDSParser does not support cubemap textures');\n            }\n\n            const resourceDimension = dx10Header[DDS.HEADER_DX10_FIELDS.RESOURCE_DIMENSION];\n\n            if (resourceDimension === DDS.D3D10_RESOURCE_DIMENSION.DDS_DIMENSION_TEXTURE3D)\n            {\n                throw new Error('DDSParser does not supported 3D texture data');\n            }\n\n            const dxgiFormat = dx10Header[DDS.HEADER_DX10_FIELDS.DXGI_FORMAT];\n\n            if (dxgiFormat in DXGI_TO_TEXTURE_FORMAT)\n            {\n                return DXGI_TO_TEXTURE_FORMAT[dxgiFormat];\n            }\n\n            throw new Error(`DDSParser cannot parse texture data with DXGI format ${dxgiFormat}`);\n        }\n\n        if (fourCC in FOURCC_TO_TEXTURE_FORMAT)\n        {\n            return FOURCC_TO_TEXTURE_FORMAT[fourCC];\n        }\n\n        throw new Error(`DDSParser cannot parse texture data with fourCC format ${fourCC}`);\n    }\n\n    if (flags & DDS.PIXEL_FORMAT_FLAGS.RGB || flags & DDS.PIXEL_FORMAT_FLAGS.RGBA)\n    {\n        return getUncompressedTextureFormat(header);\n    }\n\n    if (flags & DDS.PIXEL_FORMAT_FLAGS.YUV)\n    {\n        throw new Error('DDSParser does not supported YUV uncompressed texture data.');\n    }\n    if (flags & DDS.PIXEL_FORMAT_FLAGS.LUMINANCE || flags & DDS.PIXEL_FORMAT_FLAGS.LUMINANCEA)\n    {\n        throw new Error('DDSParser does not support single-channel (lumninance) texture data!');\n    }\n    if (flags & DDS.PIXEL_FORMAT_FLAGS.ALPHA || flags & DDS.PIXEL_FORMAT_FLAGS.ALPHAPIXELS)\n    {\n        throw new Error('DDSParser does not support single-channel (alpha) texture data!');\n    }\n\n    throw new Error('DDSParser failed to load a texture file due to an unknown reason!');\n}\n\nfunction getUncompressedTextureFormat(header: Uint32Array)\n{\n    const bitCount = header[DDS.HEADER_FIELDS.RGB_BITCOUNT];\n    const rBitMask = header[DDS.HEADER_FIELDS.R_BIT_MASK];\n    const gBitMask = header[DDS.HEADER_FIELDS.G_BIT_MASK];\n    const bBitMask = header[DDS.HEADER_FIELDS.B_BIT_MASK];\n    const aBitMask = header[DDS.HEADER_FIELDS.A_BIT_MASK];\n\n    // https://learn.microsoft.com/en-us/windows/win32/direct3ddds/dx-graphics-dds-pguide\n    // https://github.com/microsoft/DirectXTex/blob/main/DDSTextureLoader/DDSTextureLoader11.cpp#L892\n    switch (bitCount)\n    {\n        case 32:\n            if (rBitMask === 0x000000ff && gBitMask === 0x0000ff00 && bBitMask === 0x00ff0000 && aBitMask === 0xff000000)\n            {\n                return DXGI_TO_TEXTURE_FORMAT[DDS.DXGI_FORMAT.DXGI_FORMAT_R8G8B8A8_UNORM];\n            }\n            if (rBitMask === 0x00ff0000 && gBitMask === 0x0000ff00 && bBitMask === 0x000000ff && aBitMask === 0xff000000)\n            {\n                return DXGI_TO_TEXTURE_FORMAT[DDS.DXGI_FORMAT.DXGI_FORMAT_B8G8R8A8_UNORM];\n            }\n            if (rBitMask === 0x3ff00000 && gBitMask === 0x000ffc00 && bBitMask === 0x000003ff && aBitMask === 0xc0000000)\n            {\n                return DXGI_TO_TEXTURE_FORMAT[DDS.DXGI_FORMAT.DXGI_FORMAT_R10G10B10A2_UNORM];\n            }\n            if (rBitMask === 0x0000ffff && gBitMask === 0xffff0000 && bBitMask === 0 && aBitMask === 0)\n            {\n                return DXGI_TO_TEXTURE_FORMAT[DDS.DXGI_FORMAT.DXGI_FORMAT_R16G16_UNORM];\n            }\n            if (rBitMask === 0xffffffff && gBitMask === 0 && bBitMask === 0 && aBitMask === 0)\n            {\n                return DXGI_TO_TEXTURE_FORMAT[DDS.DXGI_FORMAT.DXGI_FORMAT_R32_FLOAT];\n            }\n            break;\n        case 24:\n            if (rBitMask === 0xff0000 && gBitMask === 0xff00 && bBitMask === 0xff && aBitMask === 0x8000)\n            {\n                // rgb8unorm not supported?\n                // return DXGI_TO_TEXTURE_FORMAT[DDS.DXGI_FORMAT.DXGI_FORMAT_B5G5R5A1_UNORM];\n            }\n            break;\n        case 16:\n            if (rBitMask === 0x7c00 && gBitMask === 0x03e0 && bBitMask === 0x001f && aBitMask === 0x8000)\n            {\n                return DXGI_TO_TEXTURE_FORMAT[DDS.DXGI_FORMAT.DXGI_FORMAT_B5G5R5A1_UNORM];\n            }\n            if (rBitMask === 0xf800 && gBitMask === 0x07e0 && bBitMask === 0x001f && aBitMask === 0)\n            {\n                return DXGI_TO_TEXTURE_FORMAT[DDS.DXGI_FORMAT.DXGI_FORMAT_B5G6R5_UNORM];\n            }\n            if (rBitMask === 0x0f00 && gBitMask === 0x00f0 && bBitMask === 0x000f && aBitMask === 0xf000)\n            {\n                return DXGI_TO_TEXTURE_FORMAT[DDS.DXGI_FORMAT.DXGI_FORMAT_B4G4R4A4_UNORM];\n            }\n            if (rBitMask === 0x00ff && gBitMask === 0 && bBitMask === 0 && aBitMask === 0xff00)\n            {\n                return DXGI_TO_TEXTURE_FORMAT[DDS.DXGI_FORMAT.DXGI_FORMAT_R8G8_UNORM];\n            }\n            if (rBitMask === 0xffff && gBitMask === 0 && bBitMask === 0 && aBitMask === 0)\n            {\n                return DXGI_TO_TEXTURE_FORMAT[DDS.DXGI_FORMAT.DXGI_FORMAT_R16_UNORM];\n            }\n            break;\n\n        case 8:\n            if (rBitMask === 0xff && gBitMask === 0 && bBitMask === 0 && aBitMask === 0)\n            {\n                return DXGI_TO_TEXTURE_FORMAT[DDS.DXGI_FORMAT.DXGI_FORMAT_R8_UNORM];\n            }\n            break;\n    }\n\n    throw new Error(`DDSParser does not support uncompressed texture with configuration:\n                bitCount = ${bitCount}, rBitMask = ${rBitMask}, gBitMask = ${gBitMask}, aBitMask = ${aBitMask}`);\n}\n", "import { LoaderParserPriority } from '../../assets/loader/parsers/LoaderParser';\nimport { createTexture } from '../../assets/loader/parsers/textures/utils/createTexture';\nimport { checkExtension } from '../../assets/utils/checkExtension';\nimport { ExtensionType } from '../../extensions/Extensions';\nimport { CompressedSource } from '../../rendering/renderers/shared/texture/sources/CompressedSource';\nimport { getSupportedTextureFormats } from '../../rendering/renderers/shared/texture/utils/getSupportedTextureFormats';\nimport { parseDDS } from './parseDDS';\n\nimport type { Loader } from '../../assets/loader/Loader';\nimport type { LoaderParser } from '../../assets/loader/parsers/LoaderParser';\nimport type { ResolvedAsset } from '../../assets/types';\nimport type { TextureSourceOptions } from '../../rendering/renderers/shared/texture/sources/TextureSource';\nimport type { Texture } from '../../rendering/renderers/shared/texture/Texture';\n\n/**\n * Loads DDS textures.\n * @category assets\n * @advanced\n */\nexport const loadDDS = {\n    extension: {\n        type: ExtensionType.LoadParser,\n        priority: LoaderParserPriority.High,\n        name: 'loadDDS',\n    },\n\n    /** used for deprecation purposes */\n    name: 'loadDDS',\n    id: 'dds',\n\n    test(url: string): boolean\n    {\n        return checkExtension(url, ['.dds']);\n    },\n\n    async load(url: string, _asset: ResolvedAsset, loader: Loader): Promise<Texture | Texture[]>\n    {\n        const supportedTextures = await getSupportedTextureFormats();\n\n        const ddsResponse = await fetch(url);\n\n        const ddsArrayBuffer = await ddsResponse.arrayBuffer();\n\n        const textureOptions = parseDDS(ddsArrayBuffer, supportedTextures);\n\n        const compressedTextureSource = new CompressedSource(textureOptions);\n\n        return createTexture(compressedTextureSource, loader, url);\n    },\n\n    unload(texture: Texture | Texture[]): void\n    {\n        if (Array.isArray(texture))\n        {\n            texture.forEach((t) => t.destroy(true));\n        }\n        else\n        {\n            texture.destroy(true);\n        }\n    }\n\n} satisfies LoaderParser<Texture | Texture[], TextureSourceOptions>;\n\n", "import type { TEXTURE_FORMATS } from '../../rendering/renderers/shared/texture/const';\n\n/** @internal */\nexport enum GL_INTERNAL_FORMAT\n{\n    RGBA8_SNORM = 0x8F97,\n    RGBA = 0x1908,\n    RGBA8UI = 0x8D7C,\n    SRGB8_ALPHA8 = 0x8C43,\n    RGBA8I = 0x8D8E,\n    RGBA8 = 0x8058,\n\n    COMPRESSED_RGB_S3TC_DXT1_EXT = 0x83F0,\n    COMPRESSED_RGBA_S3TC_DXT1_EXT = 0x83F1,\n    COMPRESSED_RGBA_S3TC_DXT3_EXT = 0x83F2,\n    COMPRESSED_RGBA_S3TC_DXT5_EXT = 0x83F3,\n    COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT = 35917,\n    COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT = 35918,\n    COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT = 35919,\n    COMPRESSED_SRGB_S3TC_DXT1_EXT = 35916,\n\n    COMPRESSED_RED_RGTC1_EXT = 0x8DBB,\n    COMPRESSED_SIGNED_RED_RGTC1_EXT = 0x8DBC,\n    COMPRESSED_RED_GREEN_RGTC2_EXT = 0x8DBD,\n    COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT = 0x8DBE,\n\n    COMPRESSED_R11_EAC = 0x9270,\n    COMPRESSED_SIGNED_R11_EAC = 0x9271,\n    COMPRESSED_RG11_EAC = 0x9272,\n    COMPRESSED_SIGNED_RG11_EAC = 0x9273,\n    COMPRESSED_RGB8_ETC2 = 0x9274,\n    COMPRESSED_RGBA8_ETC2_EAC = 0x9278,\n    COMPRESSED_SRGB8_ETC2 = 0x9275,\n    COMPRESSED_SRGB8_ALPHA8_ETC2_EAC = 0x9279,\n    COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2 = 0x9276,\n    COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2 = 0x9277,\n\n    COMPRESSED_RGBA_ASTC_4x4_KHR = 0x93B0,\n    COMPRESSED_RGBA_ASTC_5x4_KHR = 0x93B1,\n    COMPRESSED_RGBA_ASTC_5x5_KHR = 0x93B2,\n    COMPRESSED_RGBA_ASTC_6x5_KHR = 0x93B3,\n    COMPRESSED_RGBA_ASTC_6x6_KHR = 0x93B4,\n    COMPRESSED_RGBA_ASTC_8x5_KHR = 0x93B5,\n    COMPRESSED_RGBA_ASTC_8x6_KHR = 0x93B6,\n    COMPRESSED_RGBA_ASTC_8x8_KHR = 0x93B7,\n    COMPRESSED_RGBA_ASTC_10x5_KHR = 0x93B8,\n    COMPRESSED_RGBA_ASTC_10x6_KHR = 0x93B9,\n    COMPRESSED_RGBA_ASTC_10x8_KHR = 0x93BA,\n    COMPRESSED_RGBA_ASTC_10x10_KHR = 0x93BB,\n    COMPRESSED_RGBA_ASTC_12x10_KHR = 0x93BC,\n    COMPRESSED_RGBA_ASTC_12x12_KHR = 0x93BD,\n    COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR = 0x93D0,\n    COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR = 0x93D1,\n    COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR = 0x93D2,\n    COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR = 0x93D3,\n    COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR = 0x93D4,\n    COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR = 0x93D5,\n    COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR = 0x93D6,\n    COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR = 0x93D7,\n    COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR = 0x93D8,\n    COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR = 0x93D9,\n    COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR = 0x93DA,\n    COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR = 0x93DB,\n    COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR = 0x93DC,\n    COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR = 0x93DD,\n\n    COMPRESSED_RGBA_BPTC_UNORM_EXT = 0x8E8C,\n    COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT = 0x8E8D,\n    COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT = 0x8E8E,\n    COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT = 0x8E8F\n}\n\nenum GL_FORMATS\n{\n    RGBA = 6408,\n    RGB = 6407,\n    RG = 33319,\n    RED = 6403,\n    RGBA_INTEGER = 36249,\n    RGB_INTEGER = 36248,\n    RG_INTEGER = 33320,\n    RED_INTEGER = 36244,\n    ALPHA = 6406,\n    LUMINANCE = 6409,\n    LUMINANCE_ALPHA = 6410,\n    DEPTH_COMPONENT = 6402,\n    DEPTH_STENCIL = 34041,\n}\n\nenum GL_TYPES\n{\n    UNSIGNED_BYTE = 5121,\n    UNSIGNED_SHORT = 5123,\n    UNSIGNED_SHORT_5_6_5 = 33635,\n    UNSIGNED_SHORT_4_4_4_4 = 32819,\n    UNSIGNED_SHORT_5_5_5_1 = 32820,\n    UNSIGNED_INT = 5125,\n    UNSIGNED_INT_10F_11F_11F_REV = 35899,\n    UNSIGNED_INT_2_10_10_10_REV = 33640,\n    UNSIGNED_INT_24_8 = 34042,\n    UNSIGNED_INT_5_9_9_9_REV = 35902,\n    BYTE = 5120,\n    SHORT = 5122,\n    INT = 5124,\n    FLOAT = 5126,\n    FLOAT_32_UNSIGNED_INT_24_8_REV = 36269,\n    HALF_FLOAT = 36193,\n}\n\nconst INTERNAL_FORMAT_TO_TEXTURE_FORMATS: { [id: number]: TEXTURE_FORMATS } = {\n\n    [GL_INTERNAL_FORMAT.COMPRESSED_RGB_S3TC_DXT1_EXT]: 'bc1-rgba-unorm', // TODO: ???\n    [GL_INTERNAL_FORMAT.COMPRESSED_RGBA_S3TC_DXT1_EXT]: 'bc1-rgba-unorm',\n    [GL_INTERNAL_FORMAT.COMPRESSED_RGBA_S3TC_DXT3_EXT]: 'bc2-rgba-unorm',\n    [GL_INTERNAL_FORMAT.COMPRESSED_RGBA_S3TC_DXT5_EXT]: 'bc3-rgba-unorm',\n\n    [GL_INTERNAL_FORMAT.COMPRESSED_SRGB_S3TC_DXT1_EXT]: 'bc1-rgba-unorm-srgb', // TODO: ???\n    [GL_INTERNAL_FORMAT.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT]: 'bc1-rgba-unorm-srgb',\n    [GL_INTERNAL_FORMAT.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT]: 'bc2-rgba-unorm-srgb',\n    [GL_INTERNAL_FORMAT.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT]: 'bc3-rgba-unorm-srgb',\n\n    [GL_INTERNAL_FORMAT.COMPRESSED_RED_RGTC1_EXT]: 'bc4-r-unorm',\n    [GL_INTERNAL_FORMAT.COMPRESSED_SIGNED_RED_RGTC1_EXT]: 'bc4-r-snorm',\n    [GL_INTERNAL_FORMAT.COMPRESSED_RED_GREEN_RGTC2_EXT]: 'bc5-rg-unorm',\n    [GL_INTERNAL_FORMAT.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT]: 'bc5-rg-snorm',\n\n    [GL_INTERNAL_FORMAT.COMPRESSED_R11_EAC]: 'eac-r11unorm',\n    // [GL_INTERNAL_FORMAT.COMPRESSED_SIGNED_R11_EAC]: 'eac-r11snorm',\n    [GL_INTERNAL_FORMAT.COMPRESSED_RG11_EAC]: 'eac-rg11snorm',\n    // [GL_INTERNAL_FORMAT.COMPRESSED_SIGNED_RG11_EAC]: 'eac-rg11unorm',\n    [GL_INTERNAL_FORMAT.COMPRESSED_RGB8_ETC2]: 'etc2-rgb8unorm',\n    [GL_INTERNAL_FORMAT.COMPRESSED_RGBA8_ETC2_EAC]: 'etc2-rgba8unorm',\n    [GL_INTERNAL_FORMAT.COMPRESSED_SRGB8_ETC2]: 'etc2-rgb8unorm-srgb',\n    [GL_INTERNAL_FORMAT.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC]: 'etc2-rgba8unorm-srgb',\n    [GL_INTERNAL_FORMAT.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2]: 'etc2-rgb8a1unorm',\n    [GL_INTERNAL_FORMAT.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2]: 'etc2-rgb8a1unorm-srgb',\n\n    [GL_INTERNAL_FORMAT.COMPRESSED_RGBA_ASTC_4x4_KHR]: 'astc-4x4-unorm',\n    [GL_INTERNAL_FORMAT.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR]: 'astc-4x4-unorm-srgb',\n    [GL_INTERNAL_FORMAT.COMPRESSED_RGBA_ASTC_5x4_KHR]: 'astc-5x4-unorm',\n    [GL_INTERNAL_FORMAT.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR]: 'astc-5x4-unorm-srgb',\n    [GL_INTERNAL_FORMAT.COMPRESSED_RGBA_ASTC_5x5_KHR]: 'astc-5x5-unorm',\n    [GL_INTERNAL_FORMAT.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR]: 'astc-5x5-unorm-srgb',\n    [GL_INTERNAL_FORMAT.COMPRESSED_RGBA_ASTC_6x5_KHR]: 'astc-6x5-unorm',\n    [GL_INTERNAL_FORMAT.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR]: 'astc-6x5-unorm-srgb',\n    [GL_INTERNAL_FORMAT.COMPRESSED_RGBA_ASTC_6x6_KHR]: 'astc-6x6-unorm',\n    [GL_INTERNAL_FORMAT.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR]: 'astc-6x6-unorm-srgb',\n    [GL_INTERNAL_FORMAT.COMPRESSED_RGBA_ASTC_8x5_KHR]: 'astc-8x5-unorm',\n    [GL_INTERNAL_FORMAT.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR]: 'astc-8x5-unorm-srgb',\n    [GL_INTERNAL_FORMAT.COMPRESSED_RGBA_ASTC_8x6_KHR]: 'astc-8x6-unorm',\n    [GL_INTERNAL_FORMAT.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR]: 'astc-8x6-unorm-srgb',\n    [GL_INTERNAL_FORMAT.COMPRESSED_RGBA_ASTC_8x8_KHR]: 'astc-8x8-unorm',\n    [GL_INTERNAL_FORMAT.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR]: 'astc-8x8-unorm-srgb',\n    [GL_INTERNAL_FORMAT.COMPRESSED_RGBA_ASTC_10x5_KHR]: 'astc-10x5-unorm',\n    [GL_INTERNAL_FORMAT.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR]: 'astc-10x5-unorm-srgb',\n    [GL_INTERNAL_FORMAT.COMPRESSED_RGBA_ASTC_10x6_KHR]: 'astc-10x6-unorm',\n    [GL_INTERNAL_FORMAT.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR]: 'astc-10x6-unorm-srgb',\n    [GL_INTERNAL_FORMAT.COMPRESSED_RGBA_ASTC_10x8_KHR]: 'astc-10x8-unorm',\n    [GL_INTERNAL_FORMAT.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR]: 'astc-10x8-unorm-srgb',\n    [GL_INTERNAL_FORMAT.COMPRESSED_RGBA_ASTC_10x10_KHR]: 'astc-10x10-unorm',\n    [GL_INTERNAL_FORMAT.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR]: 'astc-10x10-unorm-srgb',\n    [GL_INTERNAL_FORMAT.COMPRESSED_RGBA_ASTC_12x10_KHR]: 'astc-12x10-unorm',\n    [GL_INTERNAL_FORMAT.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR]: 'astc-12x10-unorm-srgb',\n    [GL_INTERNAL_FORMAT.COMPRESSED_RGBA_ASTC_12x12_KHR]: 'astc-12x12-unorm',\n    [GL_INTERNAL_FORMAT.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR]: 'astc-12x12-unorm-srgb',\n\n    [GL_INTERNAL_FORMAT.COMPRESSED_RGBA_BPTC_UNORM_EXT]: 'bc7-rgba-unorm',\n    [GL_INTERNAL_FORMAT.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT]: 'bc7-rgba-unorm-srgb',\n    [GL_INTERNAL_FORMAT.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT]: 'bc6h-rgb-float',\n    [GL_INTERNAL_FORMAT.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT]: 'bc6h-rgb-ufloat',\n\n    [GL_INTERNAL_FORMAT.SRGB8_ALPHA8]: 'rgba8unorm-srgb',\n\n    [GL_INTERNAL_FORMAT.RGBA8_SNORM]: 'rgba8snorm',\n    [GL_INTERNAL_FORMAT.RGBA8UI]: 'rgba8uint',\n    [GL_INTERNAL_FORMAT.RGBA8I]: 'rgba8sint',\n    [GL_INTERNAL_FORMAT.RGBA]: 'rgba8unorm',\n    // [GL_INTERNAL_FORMAT.RGBA8]: 'bgra8unorm'\n};\n\n/**\n * The 12-byte KTX file identifier\n * @see https://www.khronos.org/opengles/sdk/tools/KTX/file_format_spec/#2.1\n * @ignore\n */\nconst FILE_IDENTIFIER = [0xAB, 0x4B, 0x54, 0x58, 0x20, 0x31, 0x31, 0xBB, 0x0D, 0x0A, 0x1A, 0x0A];\n\n/**\n * The value stored in the \"endianness\" field.\n * @see https://www.khronos.org/opengles/sdk/tools/KTX/file_format_spec/#2.2\n * @ignore\n */\n\nconst FIELDS = {\n    FILE_IDENTIFIER: 0,\n    ENDIANNESS: 12,\n    GL_TYPE: 16,\n    GL_TYPE_SIZE: 20,\n    GL_FORMAT: 24,\n    GL_INTERNAL_FORMAT: 28,\n    GL_BASE_INTERNAL_FORMAT: 32,\n    PIXEL_WIDTH: 36,\n    PIXEL_HEIGHT: 40,\n    PIXEL_DEPTH: 44,\n    NUMBER_OF_ARRAY_ELEMENTS: 48,\n    NUMBER_OF_FACES: 52,\n    NUMBER_OF_MIPMAP_LEVELS: 56,\n    BYTES_OF_KEY_VALUE_DATA: 60,\n};\n\nconst FILE_HEADER_SIZE = 64;\nconst ENDIANNESS = 0x04030201;\n\nconst TYPES_TO_BYTES_PER_COMPONENT: { [id: number]: number } = {\n    [GL_TYPES.UNSIGNED_BYTE]: 1,\n    [GL_TYPES.UNSIGNED_SHORT]: 2,\n    [GL_TYPES.INT]: 4,\n    [GL_TYPES.UNSIGNED_INT]: 4,\n    [GL_TYPES.FLOAT]: 4,\n    [GL_TYPES.HALF_FLOAT]: 8,\n};\n\nconst FORMATS_TO_COMPONENTS: { [id: number]: number } = {\n    [GL_FORMATS.RGBA]: 4,\n    [GL_FORMATS.RGB]: 3,\n    [GL_FORMATS.RG]: 2,\n    [GL_FORMATS.RED]: 1,\n    [GL_FORMATS.LUMINANCE]: 1,\n    [GL_FORMATS.LUMINANCE_ALPHA]: 2,\n    [GL_FORMATS.ALPHA]: 1,\n};\n\nconst TYPES_TO_BYTES_PER_PIXEL: { [id: number]: number } = {\n    [GL_TYPES.UNSIGNED_SHORT_4_4_4_4]: 2,\n    [GL_TYPES.UNSIGNED_SHORT_5_5_5_1]: 2,\n    [GL_TYPES.UNSIGNED_SHORT_5_6_5]: 2,\n};\n\nconst INTERNAL_FORMAT_TO_BYTES_PER_PIXEL: { [id: number]: number } = {\n    [GL_INTERNAL_FORMAT.COMPRESSED_RGB_S3TC_DXT1_EXT]: 0.5,\n    [GL_INTERNAL_FORMAT.COMPRESSED_RGBA_S3TC_DXT1_EXT]: 0.5,\n    [GL_INTERNAL_FORMAT.COMPRESSED_RGBA_S3TC_DXT3_EXT]: 1,\n    [GL_INTERNAL_FORMAT.COMPRESSED_RGBA_S3TC_DXT5_EXT]: 1,\n\n    [GL_INTERNAL_FORMAT.COMPRESSED_SRGB_S3TC_DXT1_EXT]: 0.5,\n    [GL_INTERNAL_FORMAT.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT]: 0.5,\n    [GL_INTERNAL_FORMAT.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT]: 1,\n    [GL_INTERNAL_FORMAT.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT]: 1,\n\n    [GL_INTERNAL_FORMAT.COMPRESSED_RED_RGTC1_EXT]: 0.5,\n    [GL_INTERNAL_FORMAT.COMPRESSED_SIGNED_RED_RGTC1_EXT]: 0.5,\n    [GL_INTERNAL_FORMAT.COMPRESSED_RED_GREEN_RGTC2_EXT]: 1,\n    [GL_INTERNAL_FORMAT.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT]: 1,\n\n    [GL_INTERNAL_FORMAT.COMPRESSED_R11_EAC]: 0.5,\n    [GL_INTERNAL_FORMAT.COMPRESSED_SIGNED_R11_EAC]: 0.5,\n    [GL_INTERNAL_FORMAT.COMPRESSED_RG11_EAC]: 1,\n    [GL_INTERNAL_FORMAT.COMPRESSED_SIGNED_RG11_EAC]: 1,\n    [GL_INTERNAL_FORMAT.COMPRESSED_RGB8_ETC2]: 0.5,\n    [GL_INTERNAL_FORMAT.COMPRESSED_RGBA8_ETC2_EAC]: 1,\n    [GL_INTERNAL_FORMAT.COMPRESSED_SRGB8_ETC2]: 0.5,\n    [GL_INTERNAL_FORMAT.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC]: 1,\n    [GL_INTERNAL_FORMAT.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2]: 0.5,\n    [GL_INTERNAL_FORMAT.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2]: 0.5,\n\n    [GL_INTERNAL_FORMAT.COMPRESSED_RGBA_ASTC_4x4_KHR]: 1,\n    [GL_INTERNAL_FORMAT.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR]: 1,\n    [GL_INTERNAL_FORMAT.COMPRESSED_RGBA_ASTC_5x4_KHR]: 0.8,\n    [GL_INTERNAL_FORMAT.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR]: 0.8,\n    [GL_INTERNAL_FORMAT.COMPRESSED_RGBA_ASTC_5x5_KHR]: 0.64,\n    [GL_INTERNAL_FORMAT.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR]: 0.64,\n    [GL_INTERNAL_FORMAT.COMPRESSED_RGBA_ASTC_6x5_KHR]: 0.53375,\n    [GL_INTERNAL_FORMAT.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR]: 0.53375,\n    [GL_INTERNAL_FORMAT.COMPRESSED_RGBA_ASTC_6x6_KHR]: 0.445,\n    [GL_INTERNAL_FORMAT.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR]: 0.445,\n    [GL_INTERNAL_FORMAT.COMPRESSED_RGBA_ASTC_8x5_KHR]: 0.4,\n    [GL_INTERNAL_FORMAT.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR]: 0.4,\n    [GL_INTERNAL_FORMAT.COMPRESSED_RGBA_ASTC_8x6_KHR]: 0.33375,\n    [GL_INTERNAL_FORMAT.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR]: 0.33375,\n    [GL_INTERNAL_FORMAT.COMPRESSED_RGBA_ASTC_8x8_KHR]: 0.25,\n    [GL_INTERNAL_FORMAT.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR]: 0.25,\n    [GL_INTERNAL_FORMAT.COMPRESSED_RGBA_ASTC_10x5_KHR]: 0.32,\n    [GL_INTERNAL_FORMAT.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR]: 0.32,\n    [GL_INTERNAL_FORMAT.COMPRESSED_RGBA_ASTC_10x6_KHR]: 0.26625,\n    [GL_INTERNAL_FORMAT.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR]: 0.26625,\n    [GL_INTERNAL_FORMAT.COMPRESSED_RGBA_ASTC_10x8_KHR]: 0.2,\n    [GL_INTERNAL_FORMAT.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR]: 0.2,\n    [GL_INTERNAL_FORMAT.COMPRESSED_RGBA_ASTC_10x10_KHR]: 0.16,\n    [GL_INTERNAL_FORMAT.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR]: 0.16,\n    [GL_INTERNAL_FORMAT.COMPRESSED_RGBA_ASTC_12x10_KHR]: 0.13375,\n    [GL_INTERNAL_FORMAT.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR]: 0.13375,\n    [GL_INTERNAL_FORMAT.COMPRESSED_RGBA_ASTC_12x12_KHR]: 0.11125,\n    [GL_INTERNAL_FORMAT.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR]: 0.11125,\n\n    [GL_INTERNAL_FORMAT.COMPRESSED_RGBA_BPTC_UNORM_EXT]: 1,\n    [GL_INTERNAL_FORMAT.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT]: 1,\n    [GL_INTERNAL_FORMAT.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT]: 1,\n    [GL_INTERNAL_FORMAT.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT]: 1,\n};\n\n/**\n * The KTX file format constants.\n * @internal\n */\nexport const KTX = {\n    FILE_HEADER_SIZE,\n    FILE_IDENTIFIER,\n    FORMATS_TO_COMPONENTS,\n    INTERNAL_FORMAT_TO_BYTES_PER_PIXEL,\n    INTERNAL_FORMAT_TO_TEXTURE_FORMATS,\n    FIELDS,\n    TYPES_TO_BYTES_PER_COMPONENT,\n    TYPES_TO_BYTES_PER_PIXEL,\n    ENDIANNESS\n};\n", "import { KTX } from '../ktx2/const';\n\nimport type { TEXTURE_FORMATS } from '../../rendering/renderers/shared/texture/const';\nimport type { TextureSourceOptions } from '../../rendering/renderers/shared/texture/sources/TextureSource';\n\n/**\n * @param arrayBuffer\n * @param supportedFormats\n * @internal\n */\nexport function parseKTX(arrayBuffer: ArrayBuffer, supportedFormats: TEXTURE_FORMATS[]): TextureSourceOptions<Uint8Array[]>\n{\n    const dataView = new DataView(arrayBuffer);\n\n    if (!validate(dataView))\n    {\n        throw new Error('Invalid KTX identifier in header');\n    }\n\n    const {\n        littleEndian,\n        glType,\n        glFormat,\n        glInternalFormat,\n        pixelWidth,\n        pixelHeight,\n        numberOfMipmapLevels,\n        offset,\n    } = parseKTXHeader(dataView);\n\n    const textureFormat = KTX.INTERNAL_FORMAT_TO_TEXTURE_FORMATS[glInternalFormat];\n\n    if (!textureFormat)\n    {\n        throw new Error(`Unknown texture format ${glInternalFormat}`);\n    }\n    if (!supportedFormats.includes(textureFormat))\n    {\n        throw new Error(`Unsupported texture format: ${textureFormat}, supportedFormats: ${supportedFormats}`);\n    }\n\n    const imagePixelByteSize = getImagePixelByteSize(glType, glFormat, glInternalFormat);\n\n    const imageBuffers = getImageBuffers(dataView, glType, imagePixelByteSize, pixelWidth, pixelHeight, offset,\n        numberOfMipmapLevels, littleEndian);\n\n    return {\n        format: textureFormat,\n        width: pixelWidth,\n        height: pixelHeight,\n        resource: imageBuffers,\n        alphaMode: 'no-premultiply-alpha'\n    };\n}\n\nfunction getImageBuffers(dataView: DataView, glType: number, imagePixelByteSize: number, pixelWidth: number,\n    pixelHeight: number, offset: number, numberOfMipmapLevels: number, littleEndian: boolean)\n{\n    const alignedWidth = (pixelWidth + 3) & ~3;\n    const alignedHeight = (pixelHeight + 3) & ~3;\n    let imagePixels = pixelWidth * pixelHeight;\n\n    if (glType === 0)\n    {\n        // Align to 16 pixels (4x4 blocks)\n        imagePixels = alignedWidth * alignedHeight;\n    }\n\n    let mipByteSize = imagePixels * imagePixelByteSize;\n    let mipWidth = pixelWidth;\n    let mipHeight = pixelHeight;\n    let alignedMipWidth = alignedWidth;\n    let alignedMipHeight = alignedHeight;\n    let imageOffset = offset;\n\n    const imageBuffers = new Array<Uint8Array>(numberOfMipmapLevels);\n\n    for (let mipmapLevel = 0; mipmapLevel < numberOfMipmapLevels; mipmapLevel++)\n    {\n        const imageSize = dataView.getUint32(imageOffset, littleEndian);\n        let elementOffset = imageOffset + 4;\n\n        imageBuffers[mipmapLevel] = new Uint8Array(dataView.buffer, elementOffset, mipByteSize);\n\n        elementOffset += mipByteSize;\n\n        // HINT: Aligns to 4-byte boundary after jumping imageSize (in lieu of mipPadding)\n        imageOffset += imageSize + 4;// (+4 to jump the imageSize field itself)\n        imageOffset = imageOffset % 4 !== 0 ? imageOffset + 4 - (imageOffset % 4) : imageOffset;\n\n        // Calculate mipWidth, mipHeight for _next_ iteration\n        mipWidth = (mipWidth >> 1) || 1;\n        mipHeight = (mipHeight >> 1) || 1;\n        alignedMipWidth = (mipWidth + 4 - 1) & ~(4 - 1);\n        alignedMipHeight = (mipHeight + 4 - 1) & ~(4 - 1);\n\n        // Each mipmap level is 4-times smaller?\n        mipByteSize = alignedMipWidth * alignedMipHeight * imagePixelByteSize;\n    }\n\n    return imageBuffers;\n}\n\nfunction getImagePixelByteSize(glType: number, glFormat: number, glInternalFormat: number)\n{\n    let imagePixelByteSize = KTX.INTERNAL_FORMAT_TO_BYTES_PER_PIXEL[glInternalFormat];\n\n    if (glType !== 0)\n    {\n        // Uncompressed texture format\n        if (KTX.TYPES_TO_BYTES_PER_COMPONENT[glType])\n        {\n            imagePixelByteSize = KTX.TYPES_TO_BYTES_PER_COMPONENT[glType] * KTX.FORMATS_TO_COMPONENTS[glFormat];\n        }\n        else\n        {\n            imagePixelByteSize = KTX.TYPES_TO_BYTES_PER_PIXEL[glType];\n        }\n    }\n\n    if (imagePixelByteSize === undefined)\n    {\n        throw new Error('Unable to resolve the pixel format stored in the *.ktx file!');\n    }\n\n    return imagePixelByteSize;\n}\n\nfunction parseKTXHeader(dataView: DataView)\n{\n    const littleEndian = dataView.getUint32(KTX.FIELDS.ENDIANNESS, true) === KTX.ENDIANNESS;\n    const glType = dataView.getUint32(KTX.FIELDS.GL_TYPE, littleEndian);\n    const glFormat = dataView.getUint32(KTX.FIELDS.GL_FORMAT, littleEndian);\n    const glInternalFormat = dataView.getUint32(KTX.FIELDS.GL_INTERNAL_FORMAT, littleEndian);\n    const pixelWidth = dataView.getUint32(KTX.FIELDS.PIXEL_WIDTH, littleEndian);\n    const pixelHeight = dataView.getUint32(KTX.FIELDS.PIXEL_HEIGHT, littleEndian) || 1;// \"pixelHeight = 0\" -> \"1\"\n    const pixelDepth = dataView.getUint32(KTX.FIELDS.PIXEL_DEPTH, littleEndian) || 1;// ^^\n    const numberOfArrayElements = dataView.getUint32(KTX.FIELDS.NUMBER_OF_ARRAY_ELEMENTS, littleEndian) || 1;// ^^\n    const numberOfFaces = dataView.getUint32(KTX.FIELDS.NUMBER_OF_FACES, littleEndian);\n    const numberOfMipmapLevels = dataView.getUint32(KTX.FIELDS.NUMBER_OF_MIPMAP_LEVELS, littleEndian);\n    const bytesOfKeyValueData = dataView.getUint32(KTX.FIELDS.BYTES_OF_KEY_VALUE_DATA, littleEndian);\n\n    if (pixelHeight === 0 || pixelDepth !== 1)\n    {\n        throw new Error('Only 2D textures are supported');\n    }\n    if (numberOfFaces !== 1)\n    {\n        throw new Error('CubeTextures are not supported by KTXLoader yet!');\n    }\n    if (numberOfArrayElements !== 1)\n    {\n        throw new Error('WebGL does not support array textures');\n    }\n\n    return {\n        littleEndian,\n        glType,\n        glFormat,\n        glInternalFormat,\n        pixelWidth,\n        pixelHeight,\n        numberOfMipmapLevels,\n        offset: KTX.FILE_HEADER_SIZE + bytesOfKeyValueData\n    };\n}\n\n/**\n * Checks whether the arrayBuffer contains a valid *.ktx file.\n * @param dataView\n */\nfunction validate(dataView: DataView): boolean\n{\n    // NOTE: Do not optimize this into 3 32-bit integer comparison because the endianness\n    // of the data is not specified.\n    for (let i = 0; i < KTX.FILE_IDENTIFIER.length; i++)\n    {\n        if (dataView.getUint8(i) !== KTX.FILE_IDENTIFIER[i])\n        {\n            return false;\n        }\n    }\n\n    return true;\n}\n", "import { LoaderParserPriority } from '../../assets/loader/parsers/LoaderParser';\nimport { createTexture } from '../../assets/loader/parsers/textures/utils/createTexture';\nimport { checkExtension } from '../../assets/utils/checkExtension';\nimport { ExtensionType } from '../../extensions/Extensions';\nimport { CompressedSource } from '../../rendering/renderers/shared/texture/sources/CompressedSource';\nimport { getSupportedTextureFormats } from '../../rendering/renderers/shared/texture/utils/getSupportedTextureFormats';\nimport { parseKTX } from './parseKTX';\n\nimport type { Loader } from '../../assets/loader/Loader';\nimport type { LoaderParser } from '../../assets/loader/parsers/LoaderParser';\nimport type { ResolvedAsset } from '../../assets/types';\nimport type { TextureSourceOptions } from '../../rendering/renderers/shared/texture/sources/TextureSource';\nimport type { Texture } from '../../rendering/renderers/shared/texture/Texture';\n\n/**\n * Loads KTX textures.\n * @category assets\n * @advanced\n */\nexport const loadKTX = {\n    extension: {\n        type: ExtensionType.LoadParser,\n        priority: LoaderParserPriority.High,\n        name: 'loadKTX',\n    },\n\n    /** used for deprecation purposes */\n    name: 'loadKTX',\n    id: 'ktx',\n\n    test(url: string): boolean\n    {\n        return checkExtension(url, '.ktx');\n    },\n\n    async load(url: string, _asset: ResolvedAsset, loader: Loader): Promise<Texture | Texture[]>\n    {\n        const supportedTextures = await getSupportedTextureFormats();\n\n        const ktxResponse = await fetch(url);\n\n        const ktxArrayBuffer = await ktxResponse.arrayBuffer();\n\n        const textureOptions = parseKTX(ktxArrayBuffer, supportedTextures);\n\n        const compressedTextureSource = new CompressedSource(textureOptions);\n\n        return createTexture(compressedTextureSource, loader, url);\n    },\n\n    unload(texture: Texture | Texture[]): void\n    {\n        if (Array.isArray(texture))\n        {\n            texture.forEach((t) => t.destroy(true));\n        }\n        else\n        {\n            texture.destroy(true);\n        }\n    }\n\n} satisfies LoaderParser<Texture | Texture[], TextureSourceOptions>;\n\n", "const WORKER_CODE = \"(function () {\\n    'use strict';\\n\\n    const converters = {\\n      rgb8unorm: {\\n        convertedFormat: \\\"rgba8unorm\\\",\\n        convertFunction: convertRGBtoRGBA\\n      },\\n      \\\"rgb8unorm-srgb\\\": {\\n        convertedFormat: \\\"rgba8unorm-srgb\\\",\\n        convertFunction: convertRGBtoRGBA\\n      }\\n    };\\n    function convertFormatIfRequired(textureOptions) {\\n      const format = textureOptions.format;\\n      if (converters[format]) {\\n        const convertFunction = converters[format].convertFunction;\\n        const levelBuffers = textureOptions.resource;\\n        for (let i = 0; i < levelBuffers.length; i++) {\\n          levelBuffers[i] = convertFunction(levelBuffers[i]);\\n        }\\n        textureOptions.format = converters[format].convertedFormat;\\n      }\\n    }\\n    function convertRGBtoRGBA(levelBuffer) {\\n      const pixelCount = levelBuffer.byteLength / 3;\\n      const levelBufferWithAlpha = new Uint32Array(pixelCount);\\n      for (let i = 0; i < pixelCount; ++i) {\\n        levelBufferWithAlpha[i] = levelBuffer[i * 3] + (levelBuffer[i * 3 + 1] << 8) + (levelBuffer[i * 3 + 2] << 16) + 4278190080;\\n      }\\n      return new Uint8Array(levelBufferWithAlpha.buffer);\\n    }\\n\\n    function createLevelBuffersFromKTX(ktxTexture) {\\n      const levelBuffers = [];\\n      for (let i = 0; i < ktxTexture.numLevels; i++) {\\n        const imageData = ktxTexture.getImageData(i, 0, 0);\\n        const levelBuffer = new Uint8Array(imageData.byteLength);\\n        levelBuffer.set(imageData);\\n        levelBuffers.push(levelBuffer);\\n      }\\n      return levelBuffers;\\n    }\\n\\n    const glFormatToGPUFormatMap = {\\n      6408: \\\"rgba8unorm\\\",\\n      32856: \\\"bgra8unorm\\\",\\n      //\\n      32857: \\\"rgb10a2unorm\\\",\\n      33189: \\\"depth16unorm\\\",\\n      33190: \\\"depth24plus\\\",\\n      33321: \\\"r8unorm\\\",\\n      33323: \\\"rg8unorm\\\",\\n      33325: \\\"r16float\\\",\\n      33326: \\\"r32float\\\",\\n      33327: \\\"rg16float\\\",\\n      33328: \\\"rg32float\\\",\\n      33329: \\\"r8sint\\\",\\n      33330: \\\"r8uint\\\",\\n      33331: \\\"r16sint\\\",\\n      33332: \\\"r16uint\\\",\\n      33333: \\\"r32sint\\\",\\n      33334: \\\"r32uint\\\",\\n      33335: \\\"rg8sint\\\",\\n      33336: \\\"rg8uint\\\",\\n      33337: \\\"rg16sint\\\",\\n      33338: \\\"rg16uint\\\",\\n      33339: \\\"rg32sint\\\",\\n      33340: \\\"rg32uint\\\",\\n      33778: \\\"bc2-rgba-unorm\\\",\\n      33779: \\\"bc3-rgba-unorm\\\",\\n      34836: \\\"rgba32float\\\",\\n      34842: \\\"rgba16float\\\",\\n      35056: \\\"depth24plus-stencil8\\\",\\n      35898: \\\"rg11b10ufloat\\\",\\n      35901: \\\"rgb9e5ufloat\\\",\\n      35907: \\\"rgba8unorm-srgb\\\",\\n      // bgra8unorm-srgb\\n      36012: \\\"depth32float\\\",\\n      36013: \\\"depth32float-stencil8\\\",\\n      36168: \\\"stencil8\\\",\\n      36208: \\\"rgba32uint\\\",\\n      36214: \\\"rgba16uint\\\",\\n      36220: \\\"rgba8uint\\\",\\n      36226: \\\"rgba32sint\\\",\\n      36232: \\\"rgba16sint\\\",\\n      36238: \\\"rgba8sint\\\",\\n      36492: \\\"bc7-rgba-unorm\\\",\\n      36756: \\\"r8snorm\\\",\\n      36757: \\\"rg8snorm\\\",\\n      36759: \\\"rgba8snorm\\\",\\n      37496: \\\"etc2-rgba8unorm\\\",\\n      37808: \\\"astc-4x4-unorm\\\"\\n    };\\n    function glFormatToGPUFormat(glInternalFormat) {\\n      const format = glFormatToGPUFormatMap[glInternalFormat];\\n      if (format) {\\n        return format;\\n      }\\n      throw new Error(`Unsupported glInternalFormat: ${glInternalFormat}`);\\n    }\\n\\n    const vkFormatToGPUFormatMap = {\\n      23: \\\"rgb8unorm\\\",\\n      // VK_FORMAT_R8G8B8_UNORM\\n      37: \\\"rgba8unorm\\\",\\n      // VK_FORMAT_R8G8B8A8_UNORM\\n      43: \\\"rgba8unorm-srgb\\\"\\n      // VK_FORMAT_R8G8B8A8_SRGB\\n      // TODO add more!\\n    };\\n    function vkFormatToGPUFormat(vkFormat) {\\n      const format = vkFormatToGPUFormatMap[vkFormat];\\n      if (format) {\\n        return format;\\n      }\\n      throw new Error(`Unsupported VkFormat: ${vkFormat}`);\\n    }\\n\\n    function getTextureFormatFromKTXTexture(ktxTexture) {\\n      if (ktxTexture.classId === 2) {\\n        return vkFormatToGPUFormat(ktxTexture.vkFormat);\\n      }\\n      return glFormatToGPUFormat(ktxTexture.glInternalformat);\\n    }\\n\\n    const gpuFormatToBasisTranscoderFormatMap = {\\n      \\\"bc3-rgba-unorm\\\": \\\"BC3_RGBA\\\",\\n      \\\"bc7-rgba-unorm\\\": \\\"BC7_M5_RGBA\\\",\\n      \\\"etc2-rgba8unorm\\\": \\\"ETC2_RGBA\\\",\\n      \\\"astc-4x4-unorm\\\": \\\"ASTC_4x4_RGBA\\\",\\n      // Uncompressed\\n      rgba8unorm: \\\"RGBA32\\\",\\n      rg11b10ufloat: \\\"R11F_G11F_B10F\\\"\\n    };\\n    function gpuFormatToKTXBasisTranscoderFormat(transcoderFormat) {\\n      const format = gpuFormatToBasisTranscoderFormatMap[transcoderFormat];\\n      if (format) {\\n        return format;\\n      }\\n      throw new Error(`Unsupported transcoderFormat: ${transcoderFormat}`);\\n    }\\n\\n    const settings = {\\n      jsUrl: \\\"\\\",\\n      wasmUrl: \\\"\\\"\\n    };\\n    let basisTranscoderFormat;\\n    let basisTranscodedTextureFormat;\\n    let ktxPromise;\\n    async function getKTX() {\\n      if (!ktxPromise) {\\n        const absoluteJsUrl = new URL(settings.jsUrl, location.origin).href;\\n        const absoluteWasmUrl = new URL(settings.wasmUrl, location.origin).href;\\n        importScripts(absoluteJsUrl);\\n        ktxPromise = new Promise((resolve) => {\\n          LIBKTX({\\n            locateFile: (_file) => absoluteWasmUrl\\n          }).then((libktx) => {\\n            resolve(libktx);\\n          });\\n        });\\n      }\\n      return ktxPromise;\\n    }\\n    async function fetchKTXTexture(url, ktx) {\\n      const ktx2Response = await fetch(url);\\n      if (ktx2Response.ok) {\\n        const ktx2ArrayBuffer = await ktx2Response.arrayBuffer();\\n        return new ktx.ktxTexture(new Uint8Array(ktx2ArrayBuffer));\\n      }\\n      throw new Error(`Failed to load KTX(2) texture: ${url}`);\\n    }\\n    const preferredTranscodedFormat = [\\n      \\\"bc7-rgba-unorm\\\",\\n      \\\"astc-4x4-unorm\\\",\\n      \\\"etc2-rgba8unorm\\\",\\n      \\\"bc3-rgba-unorm\\\",\\n      \\\"rgba8unorm\\\"\\n    ];\\n    async function load(url) {\\n      const ktx = await getKTX();\\n      const ktxTexture = await fetchKTXTexture(url, ktx);\\n      let format;\\n      if (ktxTexture.needsTranscoding) {\\n        format = basisTranscodedTextureFormat;\\n        const transcodeFormat = ktx.TranscodeTarget[basisTranscoderFormat];\\n        const result = ktxTexture.transcodeBasis(transcodeFormat, 0);\\n        if (result !== ktx.ErrorCode.SUCCESS) {\\n          throw new Error(\\\"Unable to transcode basis texture.\\\");\\n        }\\n      } else {\\n        format = getTextureFormatFromKTXTexture(ktxTexture);\\n      }\\n      const levelBuffers = createLevelBuffersFromKTX(ktxTexture);\\n      const textureOptions = {\\n        width: ktxTexture.baseWidth,\\n        height: ktxTexture.baseHeight,\\n        format,\\n        mipLevelCount: ktxTexture.numLevels,\\n        resource: levelBuffers,\\n        alphaMode: \\\"no-premultiply-alpha\\\"\\n      };\\n      convertFormatIfRequired(textureOptions);\\n      return textureOptions;\\n    }\\n    async function init(jsUrl, wasmUrl, supportedTextures) {\\n      if (jsUrl) settings.jsUrl = jsUrl;\\n      if (wasmUrl) settings.wasmUrl = wasmUrl;\\n      basisTranscodedTextureFormat = preferredTranscodedFormat.filter((format) => supportedTextures.includes(format))[0];\\n      basisTranscoderFormat = gpuFormatToKTXBasisTranscoderFormat(basisTranscodedTextureFormat);\\n      await getKTX();\\n    }\\n    const messageHandlers = {\\n      init: async (data) => {\\n        const { jsUrl, wasmUrl, supportedTextures } = data;\\n        await init(jsUrl, wasmUrl, supportedTextures);\\n      },\\n      load: async (data) => {\\n        try {\\n          const textureOptions = await load(data.url);\\n          return {\\n            type: \\\"load\\\",\\n            url: data.url,\\n            success: true,\\n            textureOptions,\\n            transferables: textureOptions.resource?.map((arr) => arr.buffer)\\n          };\\n        } catch (e) {\\n          throw e;\\n        }\\n      }\\n    };\\n    self.onmessage = (async (messageEvent) => {\\n      const message = messageEvent.data;\\n      try {\\n        const response = await messageHandlers[message.type]?.(message);\\n        if (response) {\\n          self.postMessage(response, response.transferables);\\n        }\\n      } catch (err) {\\n        self.postMessage({\\n          type: \\\"error\\\",\\n          err,\\n          url: message.url\\n        });\\n      }\\n    });\\n\\n})();\\n\";\nlet WORKER_URL = null;\nclass WorkerInstance\n{\n    constructor()\n    {\n        if (!WORKER_URL)\n        {\n            WORKER_URL = URL.createObjectURL(new Blob([WORKER_CODE], { type: 'application/javascript' }));\n        }\n        this.worker = new Worker(WORKER_URL);\n    }\n}\nWorkerInstance.revokeObjectURL = function revokeObjectURL()\n{\n    if (WORKER_URL)\n    {\n        URL.revokeObjectURL(WORKER_URL);\n        WORKER_URL = null;\n    }\n};\n\nexport { WorkerInstance as default };\n//# sourceMappingURL=ktx.worker.mjs.map\n", "/**\n * The urls for the KTX transcoder library.\n * These can be set to custom paths if needed.\n * @category assets\n * @advanced\n */\nexport const ktxTranscoderUrls = {\n    jsUrl: 'https://cdn.jsdelivr.net/npm/pixi.js/transcoders/ktx/libktx.js',\n    wasmUrl: 'https://cdn.jsdelivr.net/npm/pixi.js/transcoders/ktx/libktx.wasm'\n};\n\n/**\n * Sets the paths for the KTX transcoder library.\n * @param config - Partial configuration object to set custom paths for the KTX transcoder.\n * This allows you to override the default URLs for the KTX transcoder library.\n * @category assets\n * @advanced\n */\nexport function setKTXTranscoderPath(config: Partial<typeof ktxTranscoderUrls>)\n{\n    Object.assign(ktxTranscoderUrls, config);\n}\n", "import KTXWorker from 'worker:./ktx.worker.ts';\nimport { ktxTranscoderUrls } from '../utils/setKTXTranscoderPath';\n\nimport type { TEXTURE_FORMATS } from '../../../rendering/renderers/shared/texture/const';\nimport type { TextureSourceOptions } from '../../../rendering/renderers/shared/texture/sources/TextureSource';\n\nlet ktxWorker: Worker;\nconst urlHash: Record<string, (value: any) => void> = {};\nconst errorHash: Record<string, (err: any) => void> = {};\n\nfunction getKTX2Worker(supportedTextures: TEXTURE_FORMATS[]): Worker\n{\n    if (!ktxWorker)\n    {\n        ktxWorker = new KTXWorker().worker;\n\n        ktxWorker.onmessage = (messageEvent) =>\n        {\n            const { err, success, url, textureOptions } = messageEvent.data;\n\n            if (err)\n            {\n                errorHash[url](err);\n\n                return;\n            }\n\n            if (!success)\n            {\n                console.warn('Failed to load KTX texture', url);\n            }\n\n            urlHash[url](textureOptions);\n        };\n\n        ktxWorker.postMessage({\n            type: 'init',\n            jsUrl: ktxTranscoderUrls.jsUrl,\n            wasmUrl: ktxTranscoderUrls.wasmUrl,\n            supportedTextures\n        });\n    }\n\n    return ktxWorker;\n}\n\n/**\n * @param url\n * @param supportedTextures\n * @internal\n */\nexport function loadKTX2onWorker(\n    url: string,\n    supportedTextures: TEXTURE_FORMATS[]\n): Promise<TextureSourceOptions>\n{\n    const ktxWorker = getKTX2Worker(supportedTextures);\n\n    return new Promise((resolve, reject) =>\n    {\n        urlHash[url] = resolve;\n        errorHash[url] = reject;\n\n        ktxWorker.postMessage({ type: 'load', url });\n    });\n}\n", "import { LoaderParserPriority } from '../../assets/loader/parsers/LoaderParser';\nimport { createTexture } from '../../assets/loader/parsers/textures/utils/createTexture';\nimport { checkExtension } from '../../assets/utils/checkExtension';\nimport { ExtensionType } from '../../extensions/Extensions';\nimport { CompressedSource } from '../../rendering/renderers/shared/texture/sources/CompressedSource';\nimport { getSupportedTextureFormats } from '../../rendering/renderers/shared/texture/utils/getSupportedTextureFormats';\nimport { loadKTX2onWorker } from './worker/loadKTX2onWorker';\n\nimport type { Loader } from '../../assets/loader/Loader';\nimport type { LoaderParser } from '../../assets/loader/parsers/LoaderParser';\nimport type { ResolvedAsset } from '../../assets/types';\nimport type { TextureSourceOptions } from '../../rendering/renderers/shared/texture/sources/TextureSource';\nimport type { Texture } from '../../rendering/renderers/shared/texture/Texture';\n\n/**\n * Loader parser for KTX2 textures.\n * This parser loads KTX2 textures using a web worker for transcoding.\n * It supports both single and multiple textures.\n * @category assets\n * @advanced\n */\nexport const loadKTX2 = {\n    extension: {\n        type: ExtensionType.LoadParser,\n        priority: LoaderParserPriority.High,\n        name: 'loadKTX2',\n    },\n\n    /** used for deprecation purposes */\n    name: 'loadKTX2',\n    id: 'ktx2',\n\n    test(url: string): boolean\n    {\n        return checkExtension(url, '.ktx2');\n    },\n\n    async load(url: string, _asset: ResolvedAsset, loader: Loader): Promise<Texture | Texture[]>\n    {\n        const supportedTextures = await getSupportedTextureFormats();\n\n        const textureOptions = await loadKTX2onWorker(url, supportedTextures);\n\n        const compressedTextureSource = new CompressedSource(textureOptions);\n\n        return createTexture(compressedTextureSource, loader, url);\n    },\n\n    async unload(texture: Texture | Texture[]): Promise<void>\n    {\n        if (Array.isArray(texture))\n        {\n            texture.forEach((t) => t.destroy(true));\n        }\n        else\n        {\n            texture.destroy(true);\n        }\n    }\n\n} satisfies LoaderParser<Texture | Texture[], TextureSourceOptions>;\n\n", "import type { TEXTURE_FORMATS } from '../../../rendering/renderers/shared/texture/const';\nimport type { TextureSourceOptions } from '../../../rendering/renderers/shared/texture/sources/TextureSource';\n\ninterface ColorConverter\n{\n    convertedFormat: TEXTURE_FORMATS,\n    convertFunction: (levelBuffer: Uint8Array) => Uint8Array\n}\n\nconst converters: Record<string, ColorConverter> = {\n    rgb8unorm: {\n        convertedFormat: 'rgba8unorm',\n        convertFunction: convertRGBtoRGBA,\n    },\n    'rgb8unorm-srgb': {\n        convertedFormat: 'rgba8unorm-srgb',\n        convertFunction: convertRGBtoRGBA,\n    }\n};\n\n/**\n * @param textureOptions\n * @internal\n */\nexport function convertFormatIfRequired(textureOptions: TextureSourceOptions)\n{\n    const format = textureOptions.format;\n\n    if (converters[format])\n    {\n        const convertFunction = converters[format].convertFunction;\n\n        const levelBuffers = textureOptions.resource;\n\n        for (let i = 0; i < levelBuffers.length; i++)\n        {\n            levelBuffers[i] = convertFunction(levelBuffers[i]);\n        }\n\n        textureOptions.format = converters[format].convertedFormat;\n    }\n}\n\nfunction convertRGBtoRGBA(levelBuffer: Uint8Array): Uint8Array\n{\n    const pixelCount = levelBuffer.byteLength / 3;\n\n    const levelBufferWithAlpha = new Uint32Array(pixelCount);\n\n    for (let i = 0; i < pixelCount; ++i)\n    {\n        levelBufferWithAlpha[i] = (levelBuffer[i * 3]) // R\n               + (levelBuffer[(i * 3) + 1] << 8) // G\n               + (levelBuffer[(i * 3) + 2] << 16) // B\n               + 0xff000000; // A (255)\n    }\n\n    return new Uint8Array(levelBufferWithAlpha.buffer);\n}\n", "import type { KTXTexture } from '../types';\n\n/**\n * @param ktxTexture\n * @internal\n */\nexport function createLevelBuffersFromKTX(ktxTexture: KTXTexture): Uint8Array[]\n{\n    const levelBuffers = [];\n\n    // create the levels..\n    for (let i = 0; i < ktxTexture.numLevels; i++)\n    {\n        const imageData = ktxTexture.getImageData(i, 0, 0);\n\n        const levelBuffer = new Uint8Array(imageData.byteLength);\n\n        levelBuffer.set(imageData);\n\n        levelBuffers.push(levelBuffer);\n    }\n\n    return levelBuffers;\n}\n", "import type { COMPRESSED_TEXTURE_FORMATS } from '../types';\n\nconst glFormatToGPUFormatMap: Record<number, COMPRESSED_TEXTURE_FORMATS> = {\n    6408: 'rgba8unorm',\n    32856: 'bgra8unorm', //\n    32857: 'rgb10a2unorm',\n    33189: 'depth16unorm',\n    33190: 'depth24plus',\n    33321: 'r8unorm',\n    33323: 'rg8unorm',\n    33325: 'r16float',\n    33326: 'r32float',\n    33327: 'rg16float',\n    33328: 'rg32float',\n    33329: 'r8sint',\n    33330: 'r8uint',\n    33331: 'r16sint',\n    33332: 'r16uint',\n    33333: 'r32sint',\n    33334: 'r32uint',\n    33335: 'rg8sint',\n    33336: 'rg8uint',\n    33337: 'rg16sint',\n    33338: 'rg16uint',\n    33339: 'rg32sint',\n    33340: 'rg32uint',\n    33778: 'bc2-rgba-unorm',\n    33779: 'bc3-rgba-unorm',\n    34836: 'rgba32float',\n    34842: 'rgba16float',\n    35056: 'depth24plus-stencil8',\n    35898: 'rg11b10ufloat',\n    35901: 'rgb9e5ufloat',\n    35907: 'rgba8unorm-srgb', // bgra8unorm-srgb\n    36012: 'depth32float',\n    36013: 'depth32float-stencil8',\n    36168: 'stencil8',\n    36208: 'rgba32uint',\n    36214: 'rgba16uint',\n    36220: 'rgba8uint',\n    36226: 'rgba32sint',\n    36232: 'rgba16sint',\n    36238: 'rgba8sint',\n    36492: 'bc7-rgba-unorm',\n    36756: 'r8snorm',\n    36757: 'rg8snorm',\n    36759: 'rgba8snorm',\n    37496: 'etc2-rgba8unorm',\n    37808: 'astc-4x4-unorm'\n};\n\n/**\n * @param glInternalFormat\n * @internal\n */\nexport function glFormatToGPUFormat(glInternalFormat: number): COMPRESSED_TEXTURE_FORMATS\n{\n    const format = glFormatToGPUFormatMap[glInternalFormat];\n\n    if (format)\n    {\n        return format;\n    }\n\n    throw new Error(`Unsupported glInternalFormat: ${glInternalFormat}`);\n}\n", "import type { COMPRESSED_TEXTURE_FORMATS } from '../types';\n\nconst vkFormatToGPUFormatMap: Record<number, COMPRESSED_TEXTURE_FORMATS> = {\n    23: 'rgb8unorm', // VK_FORMAT_R8G8B8_UNORM\n    37: 'rgba8unorm', // VK_FORMAT_R8G8B8A8_UNORM\n    43: 'rgba8unorm-srgb', // VK_FORMAT_R8G8B8A8_SRGB\n    // TODO add more!\n};\n\n/**\n * @param vkFormat\n * @internal\n */\nexport function vkFormatToGPUFormat(vkFormat: number): COMPRESSED_TEXTURE_FORMATS\n{\n    const format = vkFormatToGPUFormatMap[vkFormat];\n\n    if (format)\n    {\n        return format;\n    }\n\n    throw new Error(`Unsupported VkFormat: ${vkFormat}`);\n}\n", "import { glFormatToGPUFormat } from './glFormatToGPUFormat';\nimport { vkFormatToGPUFormat } from './vkFormatToGPUFormat';\n\nimport type { COMPRESSED_TEXTURE_FORMATS, KTXTexture } from '../types';\n\n/**\n * @param ktxTexture\n * @internal\n */\nexport function getTextureFormatFromKTXTexture(ktxTexture: KTXTexture): COMPRESSED_TEXTURE_FORMATS\n{\n    if (ktxTexture.classId === 2)\n    {\n        return vkFormatToGPUFormat(ktxTexture.vkFormat);\n    }\n\n    return glFormatToGPUFormat(ktxTexture.glInternalformat);\n}\n", "const gpuFormatToBasisTranscoderFormatMap: Record<string, string> = {\n    'bc3-rgba-unorm': 'BC3_RGBA',\n    'bc7-rgba-unorm': 'BC7_M5_RGBA',\n    'etc2-rgba8unorm': 'ETC2_RGBA',\n    'astc-4x4-unorm': 'ASTC_4x4_RGBA',\n    // Uncompressed\n    rgba8unorm: 'RGBA32',\n    rg11b10ufloat: 'R11F_G11F_B10F',\n};\n\n/**\n * @param transcoderFormat\n * @internal\n */\nexport function gpuFormatToKTXBasisTranscoderFormat(transcoderFormat: string): string\n{\n    const format = gpuFormatToBasisTranscoderFormatMap[transcoderFormat];\n\n    if (format)\n    {\n        return format;\n    }\n\n    throw new Error(`Unsupported transcoderFormat: ${transcoderFormat}`);\n}\n", "import { Resolver } from '../../assets/resolver/Resolver';\nimport { checkExtension } from '../../assets/utils/checkExtension';\nimport { ExtensionType } from '../../extensions/Extensions';\n\nimport type { ResolveURLParser } from '../../assets/resolver/types';\n\n/** @internal */\nexport const validFormats = ['basis', 'bc7', 'bc6h', 'astc', 'etc2', 'bc5', 'bc4', 'bc3', 'bc2', 'bc1', 'eac'];\n\n/**\n * A parser that will resolve a compressed texture url\n * @category assets\n * @internal\n */\nexport const resolveCompressedTextureUrl = {\n    extension: ExtensionType.ResolveParser,\n    test: (value: string) =>\n        checkExtension(value, ['.ktx', '.ktx2', '.dds']),\n    parse: (value: string) =>\n    {\n        let format;\n\n        const splitValue = value.split('.');\n\n        if (splitValue.length > 2)\n        {\n            const newFormat = splitValue[splitValue.length - 2];\n\n            if (validFormats.includes(newFormat))\n            {\n                format = newFormat;\n            }\n        }\n        else\n        {\n            format = splitValue[splitValue.length - 1];\n        }\n\n        return {\n            resolution: parseFloat(Resolver.RETINA_PREFIX.exec(value)?.[1] ?? '1'),\n            format,\n            src: value,\n        };\n    }\n} satisfies ResolveURLParser;\n", "import { ExtensionType } from '../../extensions/Extensions';\n// eslint-disable-next-line max-len\nimport { getSupportedCompressedTextureFormats } from '../../rendering/renderers/shared/texture/utils/getSupportedCompressedTextureFormats';\nimport { isWebGLSupported } from '../../utils/browser/isWebGLSupported';\nimport { isWebGPUSupported } from '../../utils/browser/isWebGPUSupported';\nimport { validFormats } from './resolveCompressedTextureUrl';\n\nimport type { FormatDetectionParser } from '../../assets/detections/types';\nimport type { TEXTURE_FORMATS } from '../../rendering/renderers/shared/texture/const';\n\nlet compressedTextureExtensions: string[];\n\n/**\n * Detects if the browser supports compressed texture formats.\n * @category assets\n * @internal\n */\nexport const detectCompressed = {\n    extension: {\n        type: ExtensionType.DetectionParser,\n        priority: 2,\n    },\n    test: async (): Promise<boolean> =>\n    {\n        if (await isWebGPUSupported()) return true;\n        if (isWebGLSupported()) return true;\n\n        return false;\n    },\n    add: async (formats: string[]): Promise<string[]> =>\n    {\n        const supportedCompressedTextureFormats = await getSupportedCompressedTextureFormats();\n\n        compressedTextureExtensions = extractExtensionsForCompressedTextureFormats(supportedCompressedTextureFormats);\n\n        return [...compressedTextureExtensions, ...formats];\n    },\n    remove: async (formats: string[]): Promise<string[]> =>\n    {\n        if (compressedTextureExtensions)\n        {\n            return formats.filter((f) => !(f in compressedTextureExtensions));\n        }\n\n        return formats;\n    },\n} as FormatDetectionParser;\n\nfunction extractExtensionsForCompressedTextureFormats(formats: TEXTURE_FORMATS[]): string[]\n{\n    const extensions: string[] = ['basis'];\n\n    const dupeMap: Record<string, boolean> = {};\n\n    formats.forEach((format) =>\n    {\n        const extension = format.split('-')[0];\n\n        if (extension && !dupeMap[extension])\n        {\n            dupeMap[extension] = true;\n            extensions.push(extension);\n        }\n    });\n\n    // sort extensions by priority\n    extensions.sort((a, b) =>\n    {\n        const aIndex = validFormats.indexOf(a);\n        const bIndex = validFormats.indexOf(b);\n\n        if (aIndex === -1)\n        {\n            return 1;\n        }\n        if (bIndex === -1)\n        {\n            return -1;\n        }\n\n        return aIndex - bIndex;\n    });\n\n    return extensions;\n}\n", "import { Matrix } from '../maths/matrix/Matrix';\nimport { Rectangle } from '../maths/shapes/Rectangle';\nimport { Bounds } from '../scene/container/bounds/Bounds';\nimport { getGlobalBounds } from '../scene/container/bounds/getGlobalBounds';\n\nimport type { Container } from '../scene/container/Container';\n\nconst tempBounds = new Bounds();\nconst tempMatrix = new Matrix();\nconst tempRectangle = new Rectangle();\n\n/**\n * A rectangle-like object that contains x, y, width, and height properties.\n * @example\n * const rect = { x: 0, y: 0, width: 100, height: 100 };\n * @category utils\n * @advanced\n */\nexport type RectangleLike = {x: number, y: number, width: number, height: number};\n\n/**\n * The Culler class is responsible for managing and culling containers.\n * Culling optimizes rendering performance by skipping objects outside the visible area.\n *\n * > [!IMPORTANT] culling is not always a golden bullet, it can be more expensive than rendering\n * > objects that are not visible, so it is best used in scenarios where you have many objects\n * > that are not visible at the same time, such as in large scenes or games with many sprites.\n * @example\n * ```ts\n * import { Culler, Container, Rectangle } from 'pixi.js';\n *\n * // Create a culler and container\n * const culler = new Culler();\n * const stage = new Container();\n *\n * // Set up container with culling\n * stage.cullable = true;\n * stage.cullArea = new Rectangle(0, 0, 800, 600);\n *\n * // Add some sprites that will be culled\n * for (let i = 0; i < 1000; i++) {\n *     const sprite = Sprite.from('texture.png');\n *     sprite.x = Math.random() * 2000;\n *     sprite.y = Math.random() * 2000;\n *     sprite.cullable = true;\n *     stage.addChild(sprite);\n * }\n *\n * // Cull objects outside view\n * culler.cull(stage, {\n *     x: 0,\n *     y: 0,\n *     width: 800,\n *     height: 600\n * });\n *\n * // Only visible objects will be rendered\n * renderer.render(stage);\n * ```\n * @see {@link CullerPlugin} For automatic culling in applications\n * @see {@link CullingMixinConstructor} For culling properties\n * @category scene\n * @standard\n */\nexport class Culler\n{\n    /**\n     * Culls the children of a specific container based on the given view rectangle.\n     * This determines which objects should be rendered and which can be skipped.\n     * @param container - The container to cull. Must be a Container instance.\n     * @param view - The view rectangle that defines the visible area\n     * @param skipUpdateTransform - Whether to skip updating transforms for better performance\n     * @example\n     * ```ts\n     * // Basic culling with view bounds\n     * const culler = new Culler();\n     * culler.cull(stage, {\n     *     x: 0,\n     *     y: 0,\n     *     width: 800,\n     *     height: 600\n     * });\n     *\n     * // Culling to renderer screen\n     * culler.cull(stage, renderer.screen, false);\n     * ```\n     * @remarks\n     * - Recursively processes all cullable children\n     * - Uses cullArea if defined, otherwise calculates bounds\n     * - Performance depends on scene complexity\n     * @see {@link CullingMixinConstructor.cullable} For enabling culling on objects\n     * @see {@link CullingMixinConstructor.cullArea} For custom culling boundaries\n     */\n    public cull(container: Container, view: RectangleLike, skipUpdateTransform = true)\n    {\n        this._cullRecursive(container, view, skipUpdateTransform);\n    }\n\n    private _cullRecursive(container: Container, view: RectangleLike, skipUpdateTransform = true)\n    {\n        if (container.cullable && container.measurable && container.includeInBuild)\n        {\n            if (container.cullArea)\n            {\n                tempRectangle.x = view.x;\n                tempRectangle.y = view.y;\n                tempRectangle.width = view.width;\n                tempRectangle.height = view.height;\n\n                const transform = skipUpdateTransform\n                    ? container.worldTransform\n                    : container.getGlobalTransform(tempMatrix, skipUpdateTransform);\n\n                container.culled = !tempRectangle.intersects(\n                    container.cullArea,\n                    transform\n                );\n            }\n            else\n            {\n                const bounds = getGlobalBounds(container, skipUpdateTransform, tempBounds);\n\n                // check view intersection..\n                container.culled = bounds.x >= view.x + view.width\n                    || bounds.y >= view.y + view.height\n                    || bounds.x + bounds.width <= view.x\n                    || bounds.y + bounds.height <= view.y;\n            }\n        }\n        else\n        {\n            container.culled = false;\n        }\n\n        // dont process children if not needed\n        if (\n            !container.cullableChildren\n            || container.culled\n            || !container.renderable\n            || !container.measurable\n            || !container.includeInBuild\n        ) return;\n\n        for (let i = 0; i < container.children.length; i++)\n        {\n            this._cullRecursive(container.children[i], view, skipUpdateTransform);\n        }\n    }\n\n    /**\n     * A shared instance of the Culler class. Provides a global culler instance for convenience.\n     * @example\n     * ```ts\n     * // Use the shared instance instead of creating a new one\n     * Culler.shared.cull(stage, {\n     *     x: 0,\n     *     y: 0,\n     *     width: 800,\n     *     height: 600\n     * });\n     * ```\n     * @see {@link CullerPlugin} For automatic culling using this instance\n     */\n    public static shared = new Culler();\n}\n", "import { ExtensionType } from '../extensions/Extensions';\nimport { Culler } from './Culler';\n\nimport type { ExtensionMetadata } from '../extensions/Extensions';\nimport type { Renderer } from '../rendering/renderers/types';\nimport type { Container } from '../scene/container/Container';\n\n/**\n * Application options for the {@link CullerPlugin}.\n * These options control how your application handles culling of display objects.\n * @example\n * ```ts\n * import { Application } from 'pixi.js';\n *\n * // Create application\n * const app = new Application();\n * await app.init({\n *     culler: {\n *         updateTransform: false // Skip updating transforms for culled objects\n *     }\n * });\n * ```\n * @category app\n * @standard\n */\nexport interface CullerPluginOptions\n{\n    /**\n     * Options for the culler behavior.\n     * @example\n     * ```ts\n     * // Basic culling options\n     * const app = new Application();\n     * await app.init({\n     *     culler: {...}\n     * });\n     * ```\n     */\n    culler?: {\n        /**\n         * Update the transform of culled objects.\n         *\n         * > [!IMPORTANT] Keeping this as `false` can improve performance by avoiding unnecessary calculations,\n         * > however, the transform used for culling may not be up-to-date if the object has moved since the last render.\n         * @default true\n         * @example\n         * ```ts\n         * const app = new Application();\n         * await app.init({\n         *     culler: {\n         *         updateTransform: false // Skip updating transforms for culled objects\n         *     }\n         * });\n         * ```\n         */\n        updateTransform?: boolean;\n    };\n}\n\n/**\n * An {@link Application} plugin that automatically culls (hides) display objects that are outside\n * the visible screen area. This improves performance by not rendering objects that aren't visible.\n *\n * Key Features:\n * - Automatic culling based on screen boundaries\n * - Configurable culling areas and behavior per container\n * - Can improve rendering performance\n * @example\n * ```ts\n * import { Application, CullerPlugin, Container, Rectangle } from 'pixi.js';\n *\n * // Register the plugin\n * extensions.add(CullerPlugin);\n *\n * // Create application\n * const app = new Application();\n * await app.init({...});\n *\n * // Create a container with culling enabled\n * const container = new Container();\n * container.cullable = true;         // Enable culling for this container\n * container.cullableChildren = true; // Enable culling for children (default)\n * app.stage.addChild(container);\n *\n * // Optional: Set custom cull area to avoid expensive bounds calculations\n * container.cullArea = new Rectangle(0, 0, app.screen.width, app.screen.height);\n *\n * // Add many sprites to the group\n * for (let j = 0; j < 100; j++) {\n *     const sprite = Sprite.from('texture.png');\n *     sprite.x = Math.random() * 2000;\n *     sprite.y = Math.random() * 2000;\n *\n *     sprite.cullable = true; // Enable culling for each sprite\n *\n *     // Set cullArea if needed\n *     // sprite.cullArea = new Rectangle(0, 0, 100, 100); // Optional\n *\n *     // Add to container\n *     container.addChild(sprite);\n * }\n * ```\n * @remarks\n * To enable culling, you must set the following properties on your containers:\n * - `cullable`: Set to `true` to enable culling for the container\n * - `cullableChildren`: Set to `true` to enable culling for children (default)\n * - `cullArea`: Optional custom Rectangle for culling bounds\n *\n * Performance Tips:\n * - Group objects that are spatially related\n * - Use `cullArea` for containers with many children to avoid bounds calculations\n * - Set `cullableChildren = false` for containers that are always fully visible\n * @category app\n * @standard\n * @see {@link Culler} For the underlying culling implementation\n * @see {@link CullingMixinConstructor} For culling properties documentation\n */\nexport class CullerPlugin\n{\n    /** @ignore */\n    public static extension: ExtensionMetadata = {\n        priority: 10,\n        type: ExtensionType.Application,\n        name: 'culler',\n    };\n\n    /** @internal */\n    public static renderer: Renderer;\n    /** @internal */\n    public static stage: Container;\n    /** @internal */\n    public static render: () => void;\n    private static _renderRef: () => void;\n\n    /**\n     * Initialize the plugin with scope of application instance\n     * @private\n     * @param {object} [options] - See application options\n     */\n    public static init(options?: PixiMixins.ApplicationOptions): void\n    {\n        this._renderRef = this.render.bind(this);\n\n        this.render = (): void =>\n        {\n            // default to true for updateTransform, unless specified otherwise\n            const updateTransform = options?.culler?.updateTransform !== true;\n\n            Culler.shared.cull(this.stage, this.renderer.screen, updateTransform);\n            this.renderer.render({ container: this.stage });\n        };\n    }\n\n    /** @internal */\n    public static destroy(): void\n    {\n        this.render = this._renderRef;\n    }\n}\n", "/* eslint-disable no-restricted-globals */\nimport { ExtensionType } from '../extensions/Extensions';\nimport { CanvasObserver } from './CanvasObserver';\nimport { type DOMContainer } from './DOMContainer';\n\nimport type { InstructionSet } from '../rendering/renderers/shared/instructions/InstructionSet';\nimport type { RenderPipe } from '../rendering/renderers/shared/instructions/RenderPipe';\nimport type { Renderer } from '../rendering/renderers/types';\n\n/**\n * The DOMPipe class is responsible for managing and rendering DOM elements within a PixiJS scene.\n * It maps dom elements to the canvas and ensures they are correctly positioned and visible.\n * @internal\n */\nexport class DOMPipe implements RenderPipe<DOMContainer>\n{\n    /**\n     * Static property defining the extension type and name for the DOMPipe.\n     * This is used to register the DOMPipe with different rendering pipelines.\n     */\n    public static extension = {\n        type: [\n            ExtensionType.WebGLPipes,\n            ExtensionType.WebGPUPipes,\n            ExtensionType.CanvasPipes,\n        ],\n        name: 'dom',\n    } as const;\n\n    private _renderer: Renderer;\n\n    /** Array to keep track of attached DOM elements */\n    private readonly _attachedDomElements: DOMContainer[] = [];\n    /** The main DOM element that acts as a container for other DOM elements */\n    private readonly _domElement: HTMLDivElement;\n    /** The CanvasTransformSync instance that keeps the DOM element in sync with the canvas */\n    private _canvasObserver: CanvasObserver;\n\n    /**\n     * Constructor for the DOMPipe class.\n     * @param renderer - The renderer instance that this DOMPipe will be associated with.\n     */\n    constructor(renderer: Renderer)\n    {\n        this._renderer = renderer;\n\n        // Add this DOMPipe to the postrender runner of the renderer\n        // we want to dom elements are calculated after all things have been rendered\n        this._renderer.runners.postrender.add(this);\n\n        // add DOMPipe to init runners\n        this._renderer.runners.init.add(this);\n\n        // Create a main DOM element to contain other DOM elements\n        this._domElement = document.createElement('div');\n        this._domElement.style.position = 'absolute';\n        this._domElement.style.top = '0';\n        this._domElement.style.left = '0';\n        this._domElement.style.pointerEvents = 'none';\n        this._domElement.style.zIndex = '1000';\n    }\n\n    /** Initializes the DOMPipe, setting up the main DOM element and adding it to the document body. */\n    public init(): void\n    {\n        // Initialize the CanvasTransformSync to keep the DOM element in sync with the canvas\n        this._canvasObserver = new CanvasObserver({\n            domElement: this._domElement,\n            renderer: this._renderer,\n        });\n    }\n\n    /**\n     * Adds a renderable DOM container to the list of attached elements.\n     * @param domContainer - The DOM container to be added.\n     * @param _instructionSet - The instruction set (unused).\n     */\n    public addRenderable(domContainer: DOMContainer, _instructionSet: InstructionSet): void\n    {\n        if (!this._attachedDomElements.includes(domContainer))\n        {\n            this._attachedDomElements.push(domContainer);\n        }\n    }\n\n    /**\n     * Updates a renderable DOM container.\n     * @param _domContainer - The DOM container to be updated (unused).\n     */\n    public updateRenderable(_domContainer: DOMContainer): void\n    {\n        // Updates happen in postrender\n    }\n\n    /**\n     * Validates a renderable DOM container.\n     * @param _domContainer - The DOM container to be validated (unused).\n     * @returns Always returns true as validation is not required.\n     */\n    public validateRenderable(_domContainer: DOMContainer): boolean\n    {\n        return true;\n    }\n\n    /** Handles the post-rendering process, ensuring DOM elements are correctly positioned and visible. */\n    public postrender(): void\n    {\n        const attachedDomElements = this._attachedDomElements;\n\n        if (attachedDomElements.length === 0)\n        {\n            this._domElement.remove();\n\n            return;\n        }\n\n        // Ensure the main DOM element is attached to the same parent as the canvas\n        this._canvasObserver.ensureAttached();\n\n        for (let i = 0; i < attachedDomElements.length; i++)\n        {\n            const domContainer = attachedDomElements[i];\n            const element = domContainer.element;\n\n            if (!domContainer.parent || domContainer.globalDisplayStatus < 0b111)\n            {\n                element?.remove();\n                attachedDomElements.splice(i, 1);\n                i--;\n            }\n            else\n            {\n                if (!this._domElement.contains(element))\n                {\n                    element.style.position = 'absolute';\n                    element.style.pointerEvents = 'auto';\n                    this._domElement.appendChild(element);\n                }\n\n                const wt = domContainer.worldTransform;\n                const anchor = domContainer._anchor;\n                const ax = domContainer.width * anchor.x;\n                const ay = domContainer.height * anchor.y;\n\n                element.style.transformOrigin = `${ax}px ${ay}px`;\n                element.style.transform = `matrix(${wt.a}, ${wt.b}, ${wt.c}, ${wt.d}, ${wt.tx - ax}, ${wt.ty - ay})`;\n                element.style.opacity = domContainer.groupAlpha.toString();\n            }\n        }\n    }\n\n    /** Destroys the DOMPipe, removing all attached DOM elements and cleaning up resources. */\n    public destroy(): void\n    {\n        this._renderer.runners.postrender.remove(this);\n\n        for (let i = 0; i < this._attachedDomElements.length; i++)\n        {\n            const domContainer = this._attachedDomElements[i];\n\n            domContainer.element?.remove();\n        }\n\n        this._attachedDomElements.length = 0;\n        this._domElement.remove();\n        this._canvasObserver.destroy();\n        this._renderer = null;\n    }\n}\n", "/* eslint-disable no-restricted-globals */\nimport { extensions } from '../extensions/Extensions';\nimport { Point } from '../maths/point/Point';\nimport { ViewContainer, type ViewContainerOptions } from '../scene/view/ViewContainer';\nimport { DOMPipe } from './DOMPipe';\n\nimport type { PointData } from '../maths/point/PointData';\n\nextensions.add(DOMPipe);\n\n/**\n * Options for configuring a {@link DOMContainer}.\n * Controls how DOM elements are integrated into the PixiJS scene graph.\n * @example\n * ```ts\n * // Create with a custom element\n * const domContainer = new DOMContainer({\n *     element: document.createElement('input'),\n *     anchor: { x: 0.5, y: 0.5 } // or anchor: 0.5 to center both x and y\n * });\n * ```\n * @category scene\n * @standard\n * @noInheritDoc\n */\nexport interface DOMContainerOptions extends ViewContainerOptions\n{\n    /**\n     * The DOM element to use for the container.\n     * Can be any HTML element like div, input, textarea, etc.\n     *\n     * If not provided, creates a new div element.\n     * @default document.createElement('div')\n     */\n    element?: HTMLElement;\n\n    /**\n     * The anchor point of the container.\n     * - Can be a single number to set both x and y\n     * - Can be a point-like object with x,y coordinates\n     * - (0,0) is top-left\n     * - (1,1) is bottom-right\n     * - (0.5,0.5) is center\n     * @default 0\n     */\n    anchor?: PointData | number;\n}\n\n/**\n * The DOMContainer object is used to render DOM elements within the PixiJS scene graph.\n * It allows you to integrate HTML elements into your PixiJS application while maintaining\n * proper transform hierarchy and visibility.\n *\n * DOMContainer is especially useful for rendering standard DOM elements\n * that handle user input, such as `<input>` or `<textarea>`.\n * This is often simpler and more flexible than trying to implement text input\n * directly in PixiJS. For instance, if you need text fields or text areas,\n * you can embed them through this container for native browser text handling.\n *\n * --------- EXPERIMENTAL ---------\n *\n * This is a new API, things may change and it may not work as expected.\n * We want to hear your feedback as we go!\n *\n * --------------------------------\n * @example\n * @example\n * ```ts\n * // Basic text display\n * const textContainer = new DOMContainer();\n * textContainer.element.innerHTML = 'Hello World!';\n * app.stage.addChild(textContainer);\n *\n * // Input field with centered anchor\n * const inputContainer = new DOMContainer({\n *     element: document.createElement('input'),\n *     anchor: 0.5\n * });\n * inputContainer.position.set(400, 300);\n * app.stage.addChild(inputContainer);\n *\n * // Rich text area\n * const textArea = new DOMContainer({\n *     element: document.createElement('textarea'),\n *     anchor: { x: 0, y: 0 }\n * });\n * textArea.scale.set(2);\n * app.stage.addChild(textArea);\n * ```\n * @category scene\n * @standard\n */\nexport class DOMContainer extends ViewContainer<never>\n{\n    /** @internal */\n    public override readonly renderPipeId: string = 'dom';\n\n    /** @internal */\n    public batched = false;\n    /**\n     * The anchor point of the container.\n     * @internal\n     */\n    public readonly _anchor: Point;\n\n    /** The DOM element that this container is using. */\n    private _element: HTMLElement;\n\n    /**\n     * @param options - The options for creating the DOM container.\n     */\n    constructor(options: DOMContainerOptions = {})\n    {\n        const { element, anchor, ...rest } = options;\n\n        super({\n            label: 'DOMContainer',\n            ...rest\n        });\n\n        this._anchor = new Point(0, 0);\n\n        if (anchor)\n        {\n            this.anchor = anchor;\n        }\n\n        this.element = options.element || document.createElement('div');\n    }\n\n    /**\n     * The anchor sets the origin point of the container.\n     * Controls the relative positioning of the DOM element.\n     *\n     * The default is `(0,0)`, this means the container's origin is the top left.\n     * Setting the anchor to `(0.5,0.5)` means the container's origin is centered.\n     * Setting the anchor to `(1,1)` would mean the container's origin point will be the bottom right corner.\n     * @example\n     * ```ts\n     * const container = new DOMContainer();\n     *\n     * // Set anchor to center (shorthand)\n     * container.anchor = 0.5;\n     *\n     * // Set anchor to bottom-right\n     * container.anchor = { x: 1, y: 1 };\n     *\n     * // Set anchor to custom position\n     * container.anchor = new Point(0.3, 0.7);\n     * ```\n     */\n    get anchor(): Point\n    {\n        return this._anchor;\n    }\n\n    /**\n     * Sets the anchor point of the container.\n     * @param value - New anchor value:\n     * - number: Sets both x and y to same value\n     * - PointData: Sets x and y separately\n     */\n    set anchor(value: PointData | number)\n    {\n        typeof value === 'number' ? this._anchor.set(value) : this._anchor.copyFrom(value);\n    }\n\n    /**\n     * Sets the DOM element for this container.\n     * This will replace the current element and update the view.\n     * @param value - The new DOM element to use\n     * @example\n     * ```ts\n     * const domContainer = new DOMContainer();\n     * domContainer.element = document.createElement('input');\n     * ```\n     */\n    set element(value: HTMLElement)\n    {\n        if (this._element === value) return;\n\n        this._element = value;\n        this.onViewUpdate();\n    }\n\n    /**\n     * The DOM element associated with this container.\n     * @example\n     * ```ts\n     * const domContainer = new DOMContainer();\n     * domContainer.element.innerHTML = 'Hello World!';\n     * document.body.appendChild(domContainer.element);\n     * ```\n     */\n    get element(): HTMLElement\n    {\n        return this._element;\n    }\n\n    /** @private */\n    protected updateBounds()\n    {\n        const bounds = this._bounds;\n        const element = this._element;\n\n        if (!element)\n        {\n            bounds.minX = 0;\n            bounds.minY = 0;\n            bounds.maxX = 0;\n            bounds.maxY = 0;\n\n            return;\n        }\n\n        const { offsetWidth, offsetHeight } = element;\n\n        bounds.minX = 0;\n        bounds.maxX = offsetWidth;\n        bounds.minY = 0;\n        bounds.maxY = offsetHeight;\n    }\n\n    /**\n     * Destroys this DOM container.\n     * @param options - Options parameter. A boolean will act as if all options\n     *  have been set to that\n     * @example\n     * domContainer.destroy();\n     * domContainer.destroy(true);\n     */\n    public override destroy(options: boolean = false)\n    {\n        super.destroy(options);\n\n        this._element?.parentNode?.removeChild(this._element);\n        this._element = null;\n        (this._anchor as null) = null;\n    }\n}\n", "/* eslint-disable no-restricted-globals */\nimport { type Adapter } from '../environment/adapter';\nimport { type ImageLike } from '../environment/ImageLike';\nimport { DOMParser } from '@xmldom/xmldom';\n\n/**\n * This is an implementation of the {@link Adapter} interface.\n * It can be used to make Pixi work in a Web Worker.\n * @category environment\n * @property {Function} createCanvas - Creates a canvas element of the given size using the browser's native OffscreenCanvas.\n * @property {Function} getCanvasRenderingContext2D - Returns a 2D rendering context.\n * @property {Function} getWebGLRenderingContext - Returns a WebGL rendering context.\n * @property {Function} getNavigator - Returns browsers window.navigator\n * @property {Function} getBaseUrl - Returns the current base URL of the worker, which is globalThis.location.href\n * @property {Function} getFontFaceSet - Return the font face set if available\n * @property {Function} fetch - Returns a Response object that has been fetched from the given URL.\n * @property {Function} parseXML - Returns Document object that has been parsed from the given XML string.\n * @category environment\n * @advanced\n */\nexport const WebWorkerAdapter = {\n    createCanvas: (width?: number, height?: number) => new OffscreenCanvas(width ?? 0, height ?? 0),\n    createImage: (): ImageLike => new Image(),\n    getCanvasRenderingContext2D: () => OffscreenCanvasRenderingContext2D,\n    getWebGLRenderingContext: () => WebGLRenderingContext,\n    getNavigator: () => navigator,\n    getBaseUrl: () => globalThis.location.href,\n    getFontFaceSet: () => (globalThis as unknown as WorkerGlobalScope).fonts,\n    fetch: (url: RequestInfo, options?: RequestInit) => fetch(url, options),\n    parseXML: (xml: string) =>\n    {\n        const parser = new DOMParser();\n\n        return parser.parseFromString(xml, 'text/xml');\n    },\n} as Adapter;\n", "var fragment = \"\\nin vec2 vTextureCoord;\\n\\nout vec4 finalColor;\\n\\nuniform float uAlpha;\\nuniform sampler2D uTexture;\\n\\nvoid main()\\n{\\n    finalColor =  texture(uTexture, vTextureCoord) * uAlpha;\\n}\\n\";\n\nexport { fragment as default };\n//# sourceMappingURL=alpha.frag.mjs.map\n", "var source = \"struct GlobalFilterUniforms {\\n  uInputSize:vec4<f32>,\\n  uInputPixel:vec4<f32>,\\n  uInputClamp:vec4<f32>,\\n  uOutputFrame:vec4<f32>,\\n  uGlobalFrame:vec4<f32>,\\n  uOutputTexture:vec4<f32>,\\n};\\n\\nstruct AlphaUniforms {\\n  uAlpha:f32,\\n};\\n\\n@group(0) @binding(0) var<uniform> gfu: GlobalFilterUniforms;\\n@group(0) @binding(1) var uTexture: texture_2d<f32>;\\n@group(0) @binding(2) var uSampler : sampler;\\n\\n@group(1) @binding(0) var<uniform> alphaUniforms : AlphaUniforms;\\n\\nstruct VSOutput {\\n    @builtin(position) position: vec4<f32>,\\n    @location(0) uv : vec2<f32>\\n  };\\n\\nfn filterVertexPosition(aPosition:vec2<f32>) -> vec4<f32>\\n{\\n    var position = aPosition * gfu.uOutputFrame.zw + gfu.uOutputFrame.xy;\\n\\n    position.x = position.x * (2.0 / gfu.uOutputTexture.x) - 1.0;\\n    position.y = position.y * (2.0*gfu.uOutputTexture.z / gfu.uOutputTexture.y) - gfu.uOutputTexture.z;\\n\\n    return vec4(position, 0.0, 1.0);\\n}\\n\\nfn filterTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>\\n{\\n    return aPosition * (gfu.uOutputFrame.zw * gfu.uInputSize.zw);\\n}\\n\\nfn globalTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>\\n{\\n  return  (aPosition.xy / gfu.uGlobalFrame.zw) + (gfu.uGlobalFrame.xy / gfu.uGlobalFrame.zw);  \\n}\\n\\nfn getSize() -> vec2<f32>\\n{\\n  return gfu.uGlobalFrame.zw;\\n}\\n  \\n@vertex\\nfn mainVertex(\\n  @location(0) aPosition : vec2<f32>, \\n) -> VSOutput {\\n  return VSOutput(\\n   filterVertexPosition(aPosition),\\n   filterTextureCoord(aPosition)\\n  );\\n}\\n\\n@fragment\\nfn mainFragment(\\n  @location(0) uv: vec2<f32>,\\n  @builtin(position) position: vec4<f32>\\n) -> @location(0) vec4<f32> {\\n \\n    var sample = textureSample(uTexture, uSampler, uv);\\n    \\n    return sample * alphaUniforms.uAlpha;\\n}\";\n\nexport { source as default };\n//# sourceMappingURL=alpha.wgsl.mjs.map\n", "import { GlProgram } from '../../../rendering/renderers/gl/shader/GlProgram';\nimport { GpuProgram } from '../../../rendering/renderers/gpu/shader/GpuProgram';\nimport { UniformGroup } from '../../../rendering/renderers/shared/shader/UniformGroup';\nimport { Filter } from '../../Filter';\nimport vertex from '../defaultFilter.vert';\nimport fragment from './alpha.frag';\nimport source from './alpha.wgsl';\n\nimport type { FilterOptions } from '../../Filter';\n\n/**\n * Options for AlphaFilter\n * @category filters\n * @standard\n */\nexport interface AlphaFilterOptions extends FilterOptions\n{\n    /**\n     * Amount of alpha from 0 to 1, where 0 is transparent\n     * @default 1\n     */\n    alpha: number;\n}\n\n/**\n * Simplest filter - applies alpha.\n *\n * Use this instead of Container's alpha property to avoid visual layering of individual elements.\n * AlphaFilter applies alpha evenly across the entire display object and any opaque elements it contains.\n * If elements are not opaque, they will blend with each other anyway.\n *\n * Very handy if you want to use common features of all filters:\n *\n * 1. Assign a blendMode to this filter, blend all elements inside display object with background.\n *\n * 2. To use clipping in display coordinates, assign a filterArea to the same container that has this filter.\n * @category filters\n * @standard\n * @noInheritDoc\n * @example\n * import { AlphaFilter } from 'pixi.js';\n *\n * const filter = new AlphaFilter({ alpha: 0.5 });\n * sprite.filters = filter;\n *\n * // update alpha\n * filter.alpha = 0.8;\n */\nexport class AlphaFilter extends Filter\n{\n    /**\n     * Default options for the AlphaFilter.\n     * @example\n     * ```ts\n     * AlphaFilter.defaultOptions = {\n     *     alpha: 0.5, // Default alpha value\n     * };\n     * // Use default options\n     * const filter = new AlphaFilter(); // Uses default alpha of 0.5\n     * ```\n     */\n    public static defaultOptions: AlphaFilterOptions = {\n        /**\n         * Amount of alpha transparency to apply.\n         * - 0 = fully transparent\n         * - 1 = fully opaque (default)\n         * @default 1\n         */\n        alpha: 1,\n    };\n\n    constructor(options?: AlphaFilterOptions)\n    {\n        options = { ...AlphaFilter.defaultOptions, ...options };\n\n        const gpuProgram = GpuProgram.from({\n            vertex: {\n                source,\n                entryPoint: 'mainVertex',\n            },\n            fragment: {\n                source,\n                entryPoint: 'mainFragment',\n            },\n        });\n\n        const glProgram = GlProgram.from({\n            vertex,\n            fragment,\n            name: 'alpha-filter'\n        });\n\n        const { alpha, ...rest } = options;\n\n        const alphaUniforms = new UniformGroup({\n            uAlpha: { value: alpha, type: 'f32' },\n        });\n\n        super({\n            ...rest,\n            gpuProgram,\n            glProgram,\n            resources: {\n                alphaUniforms\n            },\n        });\n    }\n\n    /**\n     * The alpha value of the filter.\n     * Controls the transparency of the filtered display object.\n     * @example\n     * ```ts\n     * // Create filter with initial alpha\n     * const filter = new AlphaFilter({ alpha: 0.5 });\n     *\n     * // Update alpha value dynamically\n     * filter.alpha = 0.8;\n     * ```\n     * @default 1\n     * @remarks\n     * - 0 = fully transparent\n     * - 1 = fully opaque\n     * - Values are clamped between 0 and 1\n     */\n    get alpha(): number { return this.resources.alphaUniforms.uniforms.uAlpha; }\n    set alpha(value: number) { this.resources.alphaUniforms.uniforms.uAlpha = value; }\n}\n", "interface IGAUSSIAN_VALUES\n{\n    [x: number]: number[];\n}\n\n/** @internal */\nexport const GAUSSIAN_VALUES: IGAUSSIAN_VALUES = {\n    5: [0.153388, 0.221461, 0.250301],\n    7: [0.071303, 0.131514, 0.189879, 0.214607],\n    9: [0.028532, 0.067234, 0.124009, 0.179044, 0.20236],\n    11: [0.0093, 0.028002, 0.065984, 0.121703, 0.175713, 0.198596],\n    13: [0.002406, 0.009255, 0.027867, 0.065666, 0.121117, 0.174868, 0.197641],\n    15: [0.000489, 0.002403, 0.009246, 0.02784, 0.065602, 0.120999, 0.174697, 0.197448],\n};\n", "import { GAUSSIAN_VALUES } from '../const';\n\nconst fragTemplate = [\n    'in vec2 vBlurTexCoords[%size%];',\n    'uniform sampler2D uTexture;',\n    'out vec4 finalColor;',\n\n    'void main(void)',\n    '{',\n    '    finalColor = vec4(0.0);',\n    '    %blur%',\n    '}',\n\n].join('\\n');\n\n/**\n * @internal\n * @param kernelSize - The size of the kernel.\n */\nexport function generateBlurFragSource(kernelSize: number): string\n{\n    const kernel = GAUSSIAN_VALUES[kernelSize];\n    const halfLength = kernel.length;\n\n    let fragSource = fragTemplate;\n\n    let blurLoop = '';\n    const template = 'finalColor += texture(uTexture, vBlurTexCoords[%index%]) * %value%;';\n    let value: number;\n\n    for (let i = 0; i < kernelSize; i++)\n    {\n        let blur = template.replace('%index%', i.toString());\n\n        value = i;\n\n        if (i >= halfLength)\n        {\n            value = kernelSize - i - 1;\n        }\n\n        blur = blur.replace('%value%', kernel[value].toString());\n\n        blurLoop += blur;\n        blurLoop += '\\n';\n    }\n\n    fragSource = fragSource.replace('%blur%', blurLoop);\n    fragSource = fragSource.replace('%size%', kernelSize.toString());\n\n    return fragSource;\n}\n", "const vertTemplate = `\n    in vec2 aPosition;\n\n    uniform float uStrength;\n\n    out vec2 vBlurTexCoords[%size%];\n\n    uniform vec4 uInputSize;\n    uniform vec4 uOutputFrame;\n    uniform vec4 uOutputTexture;\n\n    vec4 filterVertexPosition( void )\n{\n    vec2 position = aPosition * uOutputFrame.zw + uOutputFrame.xy;\n\n    position.x = position.x * (2.0 / uOutputTexture.x) - 1.0;\n    position.y = position.y * (2.0*uOutputTexture.z / uOutputTexture.y) - uOutputTexture.z;\n\n    return vec4(position, 0.0, 1.0);\n}\n\n    vec2 filterTextureCoord( void )\n    {\n        return aPosition * (uOutputFrame.zw * uInputSize.zw);\n    }\n\n    void main(void)\n    {\n        gl_Position = filterVertexPosition();\n\n        float pixelStrength = uInputSize.%dimension% * uStrength;\n\n        vec2 textureCoord = filterTextureCoord();\n        %blur%\n    }`;\n\n/**\n * @internal\n * @param kernelSize - The size of the kernel.\n * @param x - Whether to generate a horizontal or vertical blur program.\n */\nexport function generateBlurVertSource(kernelSize: number, x: boolean): string\n{\n    const halfLength = Math.ceil(kernelSize / 2);\n\n    let vertSource = vertTemplate;\n\n    let blurLoop = '';\n    let template;\n\n    if (x)\n    {\n        template = 'vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * pixelStrength, 0.0);';\n    }\n    else\n    {\n        template = 'vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * pixelStrength);';\n    }\n\n    for (let i = 0; i < kernelSize; i++)\n    {\n        let blur = template.replace('%index%', i.toString());\n\n        blur = blur.replace('%sampleIndex%', `${i - (halfLength - 1)}.0`);\n\n        blurLoop += blur;\n        blurLoop += '\\n';\n    }\n\n    vertSource = vertSource.replace('%blur%', blurLoop);\n    vertSource = vertSource.replace('%size%', kernelSize.toString());\n    vertSource = vertSource.replace('%dimension%', x ? 'z' : 'w');\n\n    return vertSource;\n}\n", "import { GlProgram } from '../../../../rendering/renderers/gl/shader/GlProgram';\nimport { generateBlurFragSource } from './generateBlurFragSource';\nimport { generateBlurVertSource } from './generateBlurVertSource';\n\n/**\n * @internal\n * @param horizontal - Whether to generate a horizontal or vertical blur program.\n * @param kernelSize - The size of the kernel.\n */\nexport function generateBlurGlProgram(horizontal: boolean, kernelSize: number)\n{\n    const vertex = generateBlurVertSource(kernelSize, horizontal);\n    const fragment = generateBlurFragSource(kernelSize);\n\n    return GlProgram.from({\n        vertex,\n        fragment,\n        name: `blur-${horizontal ? 'horizontal' : 'vertical'}-pass-filter`\n    });\n}\n", "var source = \"\\n\\nstruct GlobalFilterUniforms {\\n  uInputSize:vec4<f32>,\\n  uInputPixel:vec4<f32>,\\n  uInputClamp:vec4<f32>,\\n  uOutputFrame:vec4<f32>,\\n  uGlobalFrame:vec4<f32>,\\n  uOutputTexture:vec4<f32>,\\n};\\n\\nstruct BlurUniforms {\\n  uStrength:f32,\\n};\\n\\n@group(0) @binding(0) var<uniform> gfu: GlobalFilterUniforms;\\n@group(0) @binding(1) var uTexture: texture_2d<f32>;\\n@group(0) @binding(2) var uSampler : sampler;\\n\\n@group(1) @binding(0) var<uniform> blurUniforms : BlurUniforms;\\n\\n\\nstruct VSOutput {\\n    @builtin(position) position: vec4<f32>,\\n    %blur-struct%\\n  };\\n\\nfn filterVertexPosition(aPosition:vec2<f32>) -> vec4<f32>\\n{\\n    var position = aPosition * gfu.uOutputFrame.zw + gfu.uOutputFrame.xy;\\n\\n    position.x = position.x * (2.0 / gfu.uOutputTexture.x) - 1.0;\\n    position.y = position.y * (2.0*gfu.uOutputTexture.z / gfu.uOutputTexture.y) - gfu.uOutputTexture.z;\\n\\n    return vec4(position, 0.0, 1.0);\\n}\\n\\nfn filterTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>\\n{\\n    return aPosition * (gfu.uOutputFrame.zw * gfu.uInputSize.zw);\\n}\\n\\nfn globalTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>\\n{\\n  return  (aPosition.xy / gfu.uGlobalFrame.zw) + (gfu.uGlobalFrame.xy / gfu.uGlobalFrame.zw);  \\n}\\n\\nfn getSize() -> vec2<f32>\\n{\\n  return gfu.uGlobalFrame.zw;\\n}\\n\\n\\n@vertex\\nfn mainVertex(\\n  @location(0) aPosition : vec2<f32>, \\n) -> VSOutput {\\n\\n  let filteredCord = filterTextureCoord(aPosition);\\n\\n  let pixelStrength = gfu.uInputSize.%dimension% * blurUniforms.uStrength;\\n\\n  return VSOutput(\\n   filterVertexPosition(aPosition),\\n    %blur-vertex-out%\\n  );\\n}\\n\\n@fragment\\nfn mainFragment(\\n  @builtin(position) position: vec4<f32>,\\n  %blur-fragment-in%\\n) -> @location(0) vec4<f32> {\\n\\n    var   finalColor = vec4(0.0);\\n\\n    %blur-sampling%\\n\\n    return finalColor;\\n}\";\n\nexport { source as default };\n//# sourceMappingURL=blur-template.wgsl.mjs.map\n", "import { GpuProgram } from '../../../../rendering/renderers/gpu/shader/GpuProgram';\nimport { GAUSSIAN_VALUES } from '../const';\nimport source from './blur-template.wgsl';\n\n/**\n * @internal\n * @param horizontal - Whether to generate a horizontal or vertical blur program.\n * @param kernelSize - The size of the kernel.\n */\nexport function generateBlurProgram(horizontal: boolean, kernelSize: number)\n{\n    const kernel = GAUSSIAN_VALUES[kernelSize];\n    const halfLength = kernel.length;\n\n    const blurStructSource: string[] = [];\n    const blurOutSource: string[] = [];\n    const blurSamplingSource: string[] = [];\n\n    for (let i = 0; i < kernelSize; i++)\n    {\n        blurStructSource[i] = `@location(${i}) offset${i}: vec2<f32>,`;\n\n        if (horizontal)\n        {\n            blurOutSource[i] = `filteredCord + vec2(${i - halfLength + 1} * pixelStrength, 0.0),`;\n        }\n        else\n        {\n            blurOutSource[i] = `filteredCord + vec2(0.0, ${i - halfLength + 1} * pixelStrength),`;\n        }\n\n        const kernelIndex = i < halfLength ? i : (kernelSize - i - 1);\n        const kernelValue = kernel[kernelIndex].toString();\n\n        blurSamplingSource[i] = `finalColor += textureSample(uTexture, uSampler, offset${i}) * ${kernelValue};`;\n    }\n\n    const blurStruct = blurStructSource.join('\\n');\n    const blurOut = blurOutSource.join('\\n');\n    const blurSampling = blurSamplingSource.join('\\n');\n\n    const finalSource = source\n        .replace('%blur-struct%', blurStruct)\n        .replace('%blur-vertex-out%', blurOut)\n        .replace('%blur-fragment-in%', blurStruct)\n        .replace('%blur-sampling%', blurSampling)\n        .replace('%dimension%', horizontal ? 'z' : 'w');\n\n    return GpuProgram.from({\n        vertex: {\n            source: finalSource,\n            entryPoint: 'mainVertex',\n        },\n        fragment: {\n            source: finalSource,\n            entryPoint: 'mainFragment',\n        },\n    });\n}\n\n", "import { TexturePool } from '../../../rendering/renderers/shared/texture/TexturePool';\nimport { RendererType } from '../../../rendering/renderers/types';\nimport { Filter } from '../../Filter';\nimport { generateBlurGlProgram } from './gl/generateBlurGlProgram';\nimport { generateBlurProgram } from './gpu/generateBlurProgram';\n\nimport type { RenderSurface } from '../../../rendering/renderers/shared/renderTarget/RenderTargetSystem';\nimport type { Texture } from '../../../rendering/renderers/shared/texture/Texture';\nimport type { FilterSystem } from '../../FilterSystem';\nimport type { BlurFilterOptions } from './BlurFilter';\n\n/**\n * Options for BlurFilterPass\n * @category filters\n * @internal\n */\nexport interface BlurFilterPassOptions extends BlurFilterOptions\n{\n    /** Do pass along the x-axis (`true`) or y-axis (`false`). */\n    horizontal: boolean;\n}\n\n/**\n * The BlurFilterPass applies a horizontal or vertical Gaussian blur to an object.\n * @category filters\n * @advanced\n * @example\n * import { BlurFilterPass } from 'pixi.js';\n *\n * const filter = new BlurFilterPass({ horizontal: true, strength: 8 });\n * sprite.filters = filter;\n *\n * // update blur\n * filter.blur = 16;\n */\nexport class BlurFilterPass extends Filter\n{\n    /** Default blur filter pass options */\n    public static defaultOptions: Partial<BlurFilterPassOptions> = {\n        /** The strength of the blur filter. */\n        strength: 8,\n        /** The quality of the blur filter. */\n        quality: 4,\n        /** The kernelSize of the blur filter.Options: 5, 7, 9, 11, 13, 15. */\n        kernelSize: 5,\n    };\n\n    /** Do pass along the x-axis (`true`) or y-axis (`false`). */\n    public horizontal: boolean;\n    /** The number of passes to run the filter. */\n    public passes!: number;\n    /** The strength of the blur filter. */\n    public strength!: number;\n\n    private _quality: number;\n    private readonly _uniforms: any;\n\n    /**\n     * @param options\n     * @param options.horizontal - Do pass along the x-axis (`true`) or y-axis (`false`).\n     * @param options.strength - The strength of the blur filter.\n     * @param options.quality - The quality of the blur filter.\n     * @param options.kernelSize - The kernelSize of the blur filter.Options: 5, 7, 9, 11, 13, 15.\n     */\n    constructor(options: BlurFilterPassOptions)\n    {\n        options = { ...BlurFilterPass.defaultOptions, ...options };\n\n        const glProgram = generateBlurGlProgram(options.horizontal, options.kernelSize);\n        const gpuProgram = generateBlurProgram(options.horizontal, options.kernelSize);\n\n        super({\n            glProgram,\n            gpuProgram,\n            resources: {\n                blurUniforms: {\n                    uStrength: { value: 0, type: 'f32' },\n                }\n            },\n            ...options\n        });\n\n        this.horizontal = options.horizontal;\n\n        this._quality = 0;\n\n        this.quality = options.quality;\n\n        this.blur = options.strength;\n\n        this._uniforms = this.resources.blurUniforms.uniforms;\n    }\n\n    /**\n     * Applies the filter.\n     * @param filterManager - The manager.\n     * @param input - The input target.\n     * @param output - The output target.\n     * @param clearMode - How to clear\n     */\n    public apply(\n        filterManager: FilterSystem,\n        input: Texture,\n        output: RenderSurface,\n        clearMode: boolean\n    ): void\n    {\n        this._uniforms.uStrength = this.strength / this.passes;\n\n        if (this.passes === 1)\n        {\n            filterManager.applyFilter(this, input, output, clearMode);\n        }\n        else\n        {\n            const tempTexture = TexturePool.getSameSizeTexture(input);\n\n            let flip = input;\n            let flop = tempTexture;\n\n            this._state.blend = false;\n\n            const shouldClear = filterManager.renderer.type === RendererType.WEBGPU;\n\n            for (let i = 0; i < this.passes - 1; i++)\n            {\n                filterManager.applyFilter(this, flip, flop, i === 0 ? true : shouldClear);\n\n                const temp = flop;\n\n                flop = flip;\n                flip = temp;\n            }\n\n            this._state.blend = true;\n            filterManager.applyFilter(this, flip, output, clearMode);\n            TexturePool.returnTexture(tempTexture);\n        }\n    }\n\n    /**\n     * Sets the strength of both the blur.\n     * @default 16\n     */\n    get blur(): number\n    {\n        return this.strength;\n    }\n\n    set blur(value: number)\n    {\n        this.padding = 1 + (Math.abs(value) * 2);\n        this.strength = value;\n    }\n\n    /**\n     * Sets the quality of the blur by modifying the number of passes. More passes means higher\n     * quality blurring but the lower the performance.\n     * @default 4\n     */\n    get quality(): number\n    {\n        return this._quality;\n    }\n\n    set quality(value: number)\n    {\n        this._quality = value;\n        this.passes = value;\n    }\n}\n", "import { TexturePool } from '../../../rendering/renderers/shared/texture/TexturePool';\nimport { RendererType } from '../../../rendering/renderers/types';\nimport { deprecation, v8_0_0 } from '../../../utils/logging/deprecation';\nimport { Filter } from '../../Filter';\nimport { BlurFilterPass } from './BlurFilterPass';\n\nimport type { RenderSurface } from '../../../rendering/renderers/shared/renderTarget/RenderTargetSystem';\nimport type { Texture } from '../../../rendering/renderers/shared/texture/Texture';\nimport type { FilterOptions } from '../../Filter';\nimport type { FilterSystem } from '../../FilterSystem';\n\n/**\n * Configuration options for the BlurFilter.\n * Controls how the Gaussian blur effect is applied.\n * @example\n * ```ts\n * // Basic blur with default values\n * const filter = new BlurFilter();\n *\n * // Custom blur configuration\n * const filter = new BlurFilter({\n *     strength: 8,        // Overall blur strength\n *     quality: 4,         // Higher quality = better blur\n *     kernelSize: 5      // Size of blur kernel\n * });\n *\n * // Different horizontal/vertical blur\n * const filter = new BlurFilter({\n *     strengthX: 4,      // Horizontal blur only\n *     strengthY: 12,     // Stronger vertical blur\n *     quality: 2         // Lower quality for better performance\n * });\n * ```\n * @remarks\n * - Higher quality values produce better blur but impact performance\n * - KernelSize affects blur precision and performance\n * - Strength values determine blur intensity\n * @see {@link BlurFilter} The filter that uses these options\n * @see {@link FilterOptions} Base filter options\n * @category filters\n * @standard\n */\nexport interface BlurFilterOptions extends FilterOptions\n{\n    /**\n     * The strength of the blur filter.\n     * Applied to both horizontal and vertical blur if strengthX/Y not set.\n     * @default 8\n     */\n    strength?: number;\n\n    /**\n     * The horizontal strength of the blur.\n     * Overrides strength parameter for x-axis.\n     * @default 8\n     */\n    strengthX?: number;\n\n    /**\n     * The vertical strength of the blur.\n     * Overrides strength parameter for y-axis.\n     * @default 8\n     */\n    strengthY?: number;\n\n    /**\n     * The quality of the blur filter.\n     * Higher values mean better quality but slower performance.\n     * @default 4\n     */\n    quality?: number;\n\n    /**\n     * The kernelSize of the blur filter.\n     * Larger values create more precise blur but impact performance.\n     * Options: 5, 7, 9, 11, 13, 15.\n     * @default 5\n     */\n    kernelSize?: number;\n}\n\n/**\n * The BlurFilter applies a Gaussian blur to an object.\n * The strength of the blur can be set for the x-axis and y-axis separately.\n * @example\n * ```ts\n * import { BlurFilter } from 'pixi.js';\n *\n * // Create with default settings\n * const filter = new BlurFilter();\n *\n * // Create with custom settings\n * const filter = new BlurFilter({\n *     strength: 8,      // Overall blur strength\n *     quality: 4,       // Blur quality (higher = better but slower)\n *     kernelSize: 5     // Size of blur kernel matrix\n * });\n *\n * // Apply to a display object\n * sprite.filters = [filter];\n *\n * // Update properties\n * filter.strength = 10;          // Set both X and Y blur\n * filter.strengthX = 5;          // Set only horizontal blur\n * filter.strengthY = 15;         // Set only vertical blur\n * filter.quality = 2;            // Adjust quality\n *\n * // Enable edge pixel clamping\n * filter.repeatEdgePixels = true;\n * ```\n * @remarks\n * - Higher quality values produce better blur but impact performance\n * - Strength controls blur intensity independently for X and Y\n * - Can be optimized using quality and kernelSize settings\n * - Supports edge pixel clamping for special effects\n * @see {@link BlurFilterPass} For single-direction blur\n * @see {@link FilterOptions} For base filter options\n * @category filters\n * @standard\n * @noInheritDoc\n */\nexport class BlurFilter extends Filter\n{\n    /**\n     * Default blur filter options\n     * @example\n     * ```ts\n     * // Set default options for all BlurFilters\n     * BlurFilter.defaultOptions = {\n     *     strength: 10,       // Default blur strength\n     *     quality: 2,        // Default blur quality\n     *     kernelSize: 7      // Default kernel size\n     * };\n     * // Create a filter with these defaults\n     * const filter = new BlurFilter(); // Uses default options\n     * ```\n     * @remarks\n     * - These options are used when creating a new BlurFilter without specific parameters\n     * - Can be overridden by passing options to the constructor\n     * - Useful for setting global defaults for all blur filters in your application\n     * @see {@link BlurFilterOptions} For detailed options\n     * @see {@link BlurFilter} The filter that uses these options\n     */\n    public static defaultOptions: Partial<BlurFilterOptions> = {\n        /** The strength of the blur filter. */\n        strength: 8,\n        /** The quality of the blur filter. */\n        quality: 4,\n        /** The kernelSize of the blur filter.Options: 5, 7, 9, 11, 13, 15. */\n        kernelSize: 5,\n    };\n\n    /**\n     * The horizontal blur filter\n     * @advanced\n     */\n    public blurXFilter: BlurFilterPass;\n    /**\n     * The vertical blur filter\n     * @advanced\n     */\n    public blurYFilter: BlurFilterPass;\n\n    private _repeatEdgePixels = false;\n\n    /**\n     * @param {filters.BlurFilterOptions} options - The options of the blur filter.\n     */\n    constructor(options?: BlurFilterOptions);\n    /** @deprecated since 8.0.0 */\n    constructor(strength?: number, quality?: number, resolution?: number | null, kernelSize?: number);\n    constructor(...args: [BlurFilterOptions?] | [number?, number?, number?, number?])\n    {\n        let options = args[0] ?? {};\n\n        // if options is a number)\n        if (typeof options === 'number')\n        {\n            // #if _DEBUG\n            // eslint-disable-next-line max-len\n            deprecation(v8_0_0, 'BlurFilter constructor params are now options object. See params: { strength, quality, resolution, kernelSize }');\n            // #endif\n\n            options = { strength: options };\n\n            if (args[1] !== undefined)options.quality = args[1];\n            if (args[2] !== undefined)options.resolution = args[2] || 'inherit';\n            if (args[3] !== undefined)options.kernelSize = args[3];\n        }\n\n        options = { ...BlurFilterPass.defaultOptions, ...options };\n\n        const { strength, strengthX, strengthY, quality, ...rest } = options;\n\n        super({\n            ...rest,\n            compatibleRenderers: RendererType.BOTH,\n            resources: {}\n        });\n\n        this.blurXFilter = new BlurFilterPass({ horizontal: true, ...options });\n        this.blurYFilter = new BlurFilterPass({ horizontal: false, ...options });\n\n        this.quality = quality;\n        this.strengthX = strengthX ?? strength;\n        this.strengthY = strengthY ?? strength;\n        this.repeatEdgePixels = false;\n    }\n\n    /**\n     * Applies the filter.\n     * @param filterManager - The manager.\n     * @param input - The input target.\n     * @param output - The output target.\n     * @param clearMode - How to clear\n     * @advanced\n     */\n    public apply(\n        filterManager: FilterSystem,\n        input: Texture,\n        output: RenderSurface,\n        clearMode: boolean\n    ): void\n    {\n        const xStrength = Math.abs(this.blurXFilter.strength);\n        const yStrength = Math.abs(this.blurYFilter.strength);\n\n        if (xStrength && yStrength)\n        {\n            const tempTexture = TexturePool.getSameSizeTexture(input);\n\n            this.blurXFilter.blendMode = 'normal';\n            this.blurXFilter.apply(filterManager, input, tempTexture, true);\n            this.blurYFilter.blendMode = this.blendMode;\n            this.blurYFilter.apply(filterManager, tempTexture, output, clearMode);\n\n            TexturePool.returnTexture(tempTexture);\n        }\n        else if (yStrength)\n        {\n            this.blurYFilter.blendMode = this.blendMode;\n            this.blurYFilter.apply(filterManager, input, output, clearMode);\n        }\n        else\n        {\n            this.blurXFilter.blendMode = this.blendMode;\n            this.blurXFilter.apply(filterManager, input, output, clearMode);\n        }\n    }\n\n    protected updatePadding(): void\n    {\n        if (this._repeatEdgePixels)\n        {\n            this.padding = 0;\n        }\n        else\n        {\n            this.padding = Math.max(Math.abs(this.blurXFilter.blur), Math.abs(this.blurYFilter.blur)) * 2;\n        }\n    }\n\n    /**\n     * Sets the strength of both the blurX and blurY properties simultaneously.\n     * Controls the overall intensity of the Gaussian blur effect.\n     * @example\n     * ```ts\n     * // Set equal blur strength for both axes\n     * filter.strength = 8;\n     *\n     * // Will throw error if X and Y are different\n     * filter.strengthX = 4;\n     * filter.strengthY = 8;\n     * filter.strength; // Error: BlurFilter's strengthX and strengthY are different\n     * ```\n     * @default 8\n     * @throws {Error} If strengthX and strengthY are different values\n     */\n    get strength(): number\n    {\n        if (this.strengthX !== this.strengthY)\n        {\n            throw new Error('BlurFilter\\'s strengthX and strengthY are different');\n        }\n\n        return this.strengthX;\n    }\n\n    set strength(value: number)\n    {\n        this.blurXFilter.blur = this.blurYFilter.blur = value;\n        this.updatePadding();\n    }\n\n    /**\n     * Sets the number of passes for blur. More passes means higher quality blurring.\n     * Controls the precision and smoothness of the blur effect at the cost of performance.\n     * @example\n     * ```ts\n     * // High quality blur (slower)\n     * filter.quality = 8;\n     *\n     * // Low quality blur (faster)\n     * filter.quality = 2;\n     * ```\n     * @default 4\n     * @remarks Higher values produce better quality but impact performance\n     */\n    get quality(): number\n    {\n        return this.blurXFilter.quality;\n    }\n\n    set quality(value: number)\n    {\n        this.blurXFilter.quality = this.blurYFilter.quality = value;\n    }\n\n    /**\n     * Sets the strength of horizontal blur.\n     * Controls the blur intensity along the x-axis independently.\n     * @example\n     * ```ts\n     * // Apply horizontal-only blur\n     * filter.strengthX = 8;\n     * filter.strengthY = 0;\n     *\n     * // Create motion blur effect\n     * filter.strengthX = 16;\n     * filter.strengthY = 2;\n     * ```\n     * @default 8\n     */\n    get strengthX(): number\n    {\n        return this.blurXFilter.blur;\n    }\n\n    set strengthX(value: number)\n    {\n        this.blurXFilter.blur = value;\n        this.updatePadding();\n    }\n\n    /**\n     * Sets the strength of the vertical blur.\n     * Controls the blur intensity along the y-axis independently.\n     * @example\n     * ```ts\n     * // Apply vertical-only blur\n     * filter.strengthX = 0;\n     * filter.strengthY = 8;\n     *\n     * // Create radial blur effect\n     * filter.strengthX = 8;\n     * filter.strengthY = 8;\n     * ```\n     * @default 8\n     */\n    get strengthY(): number\n    {\n        return this.blurYFilter.blur;\n    }\n\n    set strengthY(value: number)\n    {\n        this.blurYFilter.blur = value;\n        this.updatePadding();\n    }\n\n    /**\n     * Sets the strength of both the blurX and blurY properties simultaneously\n     * @default 2\n     * @deprecated since 8.3.0\n     * @see BlurFilter.strength\n     */\n    get blur(): number\n    {\n        // #if _DEBUG\n        deprecation('8.3.0', 'BlurFilter.blur is deprecated, please use BlurFilter.strength instead.');\n        // #endif\n\n        return this.strength;\n    }\n\n    set blur(value: number)\n    {\n        // #if _DEBUG\n        deprecation('8.3.0', 'BlurFilter.blur is deprecated, please use BlurFilter.strength instead.');\n        // #endif\n        this.strength = value;\n    }\n\n    /**\n     * Sets the strength of the blurX property\n     * @default 2\n     * @deprecated since 8.3.0\n     * @see BlurFilter.strengthX\n     */\n    get blurX(): number\n    {\n        // #if _DEBUG\n        deprecation('8.3.0', 'BlurFilter.blurX is deprecated, please use BlurFilter.strengthX instead.');\n        // #endif\n\n        return this.strengthX;\n    }\n\n    set blurX(value: number)\n    {\n        // #if _DEBUG\n        deprecation('8.3.0', 'BlurFilter.blurX is deprecated, please use BlurFilter.strengthX instead.');\n        // #endif\n        this.strengthX = value;\n    }\n\n    /**\n     * Sets the strength of the blurY property\n     * @default 2\n     * @deprecated since 8.3.0\n     * @see BlurFilter.strengthY\n     */\n    get blurY(): number\n    {\n        // #if _DEBUG\n        deprecation('8.3.0', 'BlurFilter.blurY is deprecated, please use BlurFilter.strengthY instead.');\n        // #endif\n\n        return this.strengthY;\n    }\n\n    set blurY(value: number)\n    {\n        // #if _DEBUG\n        deprecation('8.3.0', 'BlurFilter.blurY is deprecated, please use BlurFilter.strengthY instead.');\n        // #endif\n        this.strengthY = value;\n    }\n\n    /**\n     * If set to true the edge of the target will be clamped\n     * @default false\n     */\n    get repeatEdgePixels(): boolean\n    {\n        return this._repeatEdgePixels;\n    }\n\n    set repeatEdgePixels(value: boolean)\n    {\n        this._repeatEdgePixels = value;\n        this.updatePadding();\n    }\n}\n", "var fragment = \"\\nin vec2 vTextureCoord;\\nin vec4 vColor;\\n\\nout vec4 finalColor;\\n\\nuniform float uColorMatrix[20];\\nuniform float uAlpha;\\n\\nuniform sampler2D uTexture;\\n\\nfloat rand(vec2 co)\\n{\\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\\n}\\n\\nvoid main()\\n{\\n    vec4 color = texture(uTexture, vTextureCoord);\\n    float randomValue = rand(gl_FragCoord.xy * 0.2);\\n    float diff = (randomValue - 0.5) *  0.5;\\n\\n    if (uAlpha == 0.0) {\\n        finalColor = color;\\n        return;\\n    }\\n\\n    if (color.a > 0.0) {\\n        color.rgb /= color.a;\\n    }\\n\\n    vec4 result;\\n\\n    result.r = (uColorMatrix[0] * color.r);\\n        result.r += (uColorMatrix[1] * color.g);\\n        result.r += (uColorMatrix[2] * color.b);\\n        result.r += (uColorMatrix[3] * color.a);\\n        result.r += uColorMatrix[4];\\n\\n    result.g = (uColorMatrix[5] * color.r);\\n        result.g += (uColorMatrix[6] * color.g);\\n        result.g += (uColorMatrix[7] * color.b);\\n        result.g += (uColorMatrix[8] * color.a);\\n        result.g += uColorMatrix[9];\\n\\n    result.b = (uColorMatrix[10] * color.r);\\n       result.b += (uColorMatrix[11] * color.g);\\n       result.b += (uColorMatrix[12] * color.b);\\n       result.b += (uColorMatrix[13] * color.a);\\n       result.b += uColorMatrix[14];\\n\\n    result.a = (uColorMatrix[15] * color.r);\\n       result.a += (uColorMatrix[16] * color.g);\\n       result.a += (uColorMatrix[17] * color.b);\\n       result.a += (uColorMatrix[18] * color.a);\\n       result.a += uColorMatrix[19];\\n\\n    vec3 rgb = mix(color.rgb, result.rgb, uAlpha);\\n\\n    // Premultiply alpha again.\\n    rgb *= result.a;\\n\\n    finalColor = vec4(rgb, result.a);\\n}\\n\";\n\nexport { fragment as default };\n//# sourceMappingURL=colorMatrixFilter.frag.mjs.map\n", "var source = \"struct GlobalFilterUniforms {\\n  uInputSize:vec4<f32>,\\n  uInputPixel:vec4<f32>,\\n  uInputClamp:vec4<f32>,\\n  uOutputFrame:vec4<f32>,\\n  uGlobalFrame:vec4<f32>,\\n  uOutputTexture:vec4<f32>,\\n};\\n\\nstruct ColorMatrixUniforms {\\n  uColorMatrix:array<vec4<f32>, 5>,\\n  uAlpha:f32,\\n};\\n\\n\\n@group(0) @binding(0) var<uniform> gfu: GlobalFilterUniforms;\\n@group(0) @binding(1) var uTexture: texture_2d<f32>;\\n@group(0) @binding(2) var uSampler : sampler;\\n@group(1) @binding(0) var<uniform> colorMatrixUniforms : ColorMatrixUniforms;\\n\\n\\nstruct VSOutput {\\n    @builtin(position) position: vec4<f32>,\\n    @location(0) uv : vec2<f32>,\\n  };\\n  \\nfn filterVertexPosition(aPosition:vec2<f32>) -> vec4<f32>\\n{\\n    var position = aPosition * gfu.uOutputFrame.zw + gfu.uOutputFrame.xy;\\n\\n    position.x = position.x * (2.0 / gfu.uOutputTexture.x) - 1.0;\\n    position.y = position.y * (2.0*gfu.uOutputTexture.z / gfu.uOutputTexture.y) - gfu.uOutputTexture.z;\\n\\n    return vec4(position, 0.0, 1.0);\\n}\\n\\nfn filterTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>\\n{\\n  return aPosition * (gfu.uOutputFrame.zw * gfu.uInputSize.zw);\\n}\\n\\n@vertex\\nfn mainVertex(\\n  @location(0) aPosition : vec2<f32>, \\n) -> VSOutput {\\n  return VSOutput(\\n   filterVertexPosition(aPosition),\\n   filterTextureCoord(aPosition),\\n  );\\n}\\n\\n\\n@fragment\\nfn mainFragment(\\n  @location(0) uv: vec2<f32>,\\n) -> @location(0) vec4<f32> {\\n\\n\\n  var c = textureSample(uTexture, uSampler, uv);\\n  \\n  if (colorMatrixUniforms.uAlpha == 0.0) {\\n    return c;\\n  }\\n\\n \\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\\n    if (c.a > 0.0) {\\n      c.r /= c.a;\\n      c.g /= c.a;\\n      c.b /= c.a;\\n    }\\n\\n    var cm = colorMatrixUniforms.uColorMatrix;\\n\\n\\n    var result = vec4<f32>(0.);\\n\\n    result.r = (cm[0][0] * c.r);\\n    result.r += (cm[0][1] * c.g);\\n    result.r += (cm[0][2] * c.b);\\n    result.r += (cm[0][3] * c.a);\\n    result.r += cm[1][0];\\n\\n    result.g = (cm[1][1] * c.r);\\n    result.g += (cm[1][2] * c.g);\\n    result.g += (cm[1][3] * c.b);\\n    result.g += (cm[2][0] * c.a);\\n    result.g += cm[2][1];\\n\\n    result.b = (cm[2][2] * c.r);\\n    result.b += (cm[2][3] * c.g);\\n    result.b += (cm[3][0] * c.b);\\n    result.b += (cm[3][1] * c.a);\\n    result.b += cm[3][2];\\n\\n    result.a = (cm[3][3] * c.r);\\n    result.a += (cm[4][0] * c.g);\\n    result.a += (cm[4][1] * c.b);\\n    result.a += (cm[4][2] * c.a);\\n    result.a += cm[4][3];\\n\\n    var rgb = mix(c.rgb, result.rgb, colorMatrixUniforms.uAlpha);\\n\\n    rgb.r *= result.a;\\n    rgb.g *= result.a;\\n    rgb.b *= result.a;\\n\\n    return vec4(rgb, result.a);\\n}\";\n\nexport { source as default };\n//# sourceMappingURL=colorMatrixFilter.wgsl.mjs.map\n", "import { Color } from '../../../color/Color';\nimport { GlProgram } from '../../../rendering/renderers/gl/shader/GlProgram';\nimport { GpuProgram } from '../../../rendering/renderers/gpu/shader/GpuProgram';\nimport { UniformGroup } from '../../../rendering/renderers/shared/shader/UniformGroup';\nimport { Filter } from '../../Filter';\nimport vertex from '../defaultFilter.vert';\nimport fragment from './colorMatrixFilter.frag';\nimport source from './colorMatrixFilter.wgsl';\n\nimport type { ColorSource } from '../../../color/Color';\nimport type { ArrayFixed } from '../../../utils/types';\nimport type { FilterOptions } from '../../Filter';\n\n/**\n * 5x4 matrix for transforming RGBA color and alpha\n * @category filters\n * @standard\n */\nexport type ColorMatrix = ArrayFixed<number, 20>;\n\n/**\n * The ColorMatrixFilter class lets you apply color transformations to display objects using a 5x4 matrix.\n * The matrix transforms the RGBA color and alpha values of every pixel to produce a new set of values.\n *\n * The class provides convenient methods for common color adjustments like brightness, contrast, saturation,\n * and various photo filter effects.\n * @example\n * ```js\n * import { ColorMatrixFilter } from 'pixi.js';\n *\n * // Create a new color matrix filter\n * const colorMatrix = new ColorMatrixFilter();\n *\n * // Apply it to a container\n * container.filters = [colorMatrix];\n *\n * // Adjust contrast\n * colorMatrix.contrast(2);\n *\n * // Chain multiple effects\n * colorMatrix\n *     .saturate(0.5)     // 50% saturation\n *     .brightness(1.2)    // 20% brighter\n *     .hue(90);          // 90 degree hue rotation\n * ```\n *\n * Common use cases:\n * - Adjusting brightness, contrast, or saturation\n * - Applying color tints or color grading\n * - Creating photo filter effects (sepia, negative, etc.)\n * - Converting to grayscale\n * - Implementing dynamic day/night transitions\n * @author Clment Chenebault <clement@goodboydigital.com>\n * @category filters\n * @standard\n * @noInheritDoc\n */\nexport class ColorMatrixFilter extends Filter\n{\n    constructor(options: FilterOptions = {})\n    {\n        const colorMatrixUniforms = new UniformGroup({\n            uColorMatrix: {\n                value: [\n                    1, 0, 0, 0, 0,\n                    0, 1, 0, 0, 0,\n                    0, 0, 1, 0, 0,\n                    0, 0, 0, 1, 0,\n                ],\n                type: 'f32',\n                size: 20,\n            },\n            uAlpha: {\n                value: 1,\n                type: 'f32'\n            }\n        });\n\n        const gpuProgram = GpuProgram.from({\n            vertex: {\n                source,\n                entryPoint: 'mainVertex',\n            },\n            fragment: {\n                source,\n                entryPoint: 'mainFragment',\n            },\n        });\n\n        const glProgram = GlProgram.from({\n            vertex,\n            fragment,\n            name: 'color-matrix-filter'\n        });\n\n        super({\n            ...options,\n            gpuProgram,\n            glProgram,\n            resources: {\n                colorMatrixUniforms\n            },\n        });\n\n        this.alpha = 1;\n    }\n\n    /**\n     * Transforms current matrix and set the new one\n     * @param {number[]} matrix - 5x4 matrix\n     * @param multiply - if true, current matrix and matrix are multiplied. If false,\n     *  just set the current matrix with matrix\n     */\n    private _loadMatrix(matrix: ColorMatrix, multiply = false): void\n    {\n        let newMatrix = matrix;\n\n        if (multiply)\n        {\n            this._multiply(newMatrix, this.matrix, matrix);\n            newMatrix = this._colorMatrix(newMatrix) as any;\n        }\n\n        // set the new matrix\n\n        this.resources.colorMatrixUniforms.uniforms.uColorMatrix = newMatrix;\n        this.resources.colorMatrixUniforms.update();\n    }\n\n    /**\n     * Multiplies two mat5's\n     * @private\n     * @param out - 5x4 matrix the receiving matrix\n     * @param a - 5x4 matrix the first operand\n     * @param b - 5x4 matrix the second operand\n     * @returns {number[]} 5x4 matrix\n     */\n    private _multiply(out: ColorMatrix, a: ColorMatrix, b: ColorMatrix): ColorMatrix\n    {\n        // Red Channel\n        out[0] = (a[0] * b[0]) + (a[1] * b[5]) + (a[2] * b[10]) + (a[3] * b[15]);\n        out[1] = (a[0] * b[1]) + (a[1] * b[6]) + (a[2] * b[11]) + (a[3] * b[16]);\n        out[2] = (a[0] * b[2]) + (a[1] * b[7]) + (a[2] * b[12]) + (a[3] * b[17]);\n        out[3] = (a[0] * b[3]) + (a[1] * b[8]) + (a[2] * b[13]) + (a[3] * b[18]);\n        out[4] = (a[0] * b[4]) + (a[1] * b[9]) + (a[2] * b[14]) + (a[3] * b[19]) + a[4];\n\n        // Green Channel\n        out[5] = (a[5] * b[0]) + (a[6] * b[5]) + (a[7] * b[10]) + (a[8] * b[15]);\n        out[6] = (a[5] * b[1]) + (a[6] * b[6]) + (a[7] * b[11]) + (a[8] * b[16]);\n        out[7] = (a[5] * b[2]) + (a[6] * b[7]) + (a[7] * b[12]) + (a[8] * b[17]);\n        out[8] = (a[5] * b[3]) + (a[6] * b[8]) + (a[7] * b[13]) + (a[8] * b[18]);\n        out[9] = (a[5] * b[4]) + (a[6] * b[9]) + (a[7] * b[14]) + (a[8] * b[19]) + a[9];\n\n        // Blue Channel\n        out[10] = (a[10] * b[0]) + (a[11] * b[5]) + (a[12] * b[10]) + (a[13] * b[15]);\n        out[11] = (a[10] * b[1]) + (a[11] * b[6]) + (a[12] * b[11]) + (a[13] * b[16]);\n        out[12] = (a[10] * b[2]) + (a[11] * b[7]) + (a[12] * b[12]) + (a[13] * b[17]);\n        out[13] = (a[10] * b[3]) + (a[11] * b[8]) + (a[12] * b[13]) + (a[13] * b[18]);\n        out[14] = (a[10] * b[4]) + (a[11] * b[9]) + (a[12] * b[14]) + (a[13] * b[19]) + a[14];\n\n        // Alpha Channel\n        out[15] = (a[15] * b[0]) + (a[16] * b[5]) + (a[17] * b[10]) + (a[18] * b[15]);\n        out[16] = (a[15] * b[1]) + (a[16] * b[6]) + (a[17] * b[11]) + (a[18] * b[16]);\n        out[17] = (a[15] * b[2]) + (a[16] * b[7]) + (a[17] * b[12]) + (a[18] * b[17]);\n        out[18] = (a[15] * b[3]) + (a[16] * b[8]) + (a[17] * b[13]) + (a[18] * b[18]);\n        out[19] = (a[15] * b[4]) + (a[16] * b[9]) + (a[17] * b[14]) + (a[18] * b[19]) + a[19];\n\n        return out;\n    }\n\n    /**\n     * Create a Float32 Array and normalize the offset component to 0-1\n     * @param {number[]} matrix - 5x4 matrix\n     * @returns {number[]} 5x4 matrix with all values between 0-1\n     */\n    private _colorMatrix(matrix: ColorMatrix): ColorMatrix\n    {\n        // Create a Float32 Array and normalize the offset component to 0-1\n        const m = new Float32Array(matrix);\n\n        m[4] /= 255;\n        m[9] /= 255;\n        m[14] /= 255;\n        m[19] /= 255;\n\n        return m as any;\n    }\n\n    /**\n     * Adjusts the brightness of a display object.\n     *\n     * The brightness adjustment works by multiplying the RGB channels by a scalar value while keeping\n     * the alpha channel unchanged. Values below 1 darken the image, while values above 1 brighten it.\n     * @param b - The brightness multiplier to apply. Values between 0-1 darken the image (0 being black),\n     *           while values > 1 brighten it (2.0 would make it twice as bright)\n     * @param multiply - When true, the new matrix is multiplied with the current one instead of replacing it.\n     *                  This allows for cumulative effects when calling multiple color adjustments.\n     * @example\n     * ```ts\n     * // Create a new color matrix filter\n     * const colorMatrix = new ColorMatrixFilter();\n     *\n     * // Darken the image to 50% brightness\n     * colorMatrix.brightness(0.5, false);\n     *\n     * // Chain with other effects by using multiply\n     * colorMatrix\n     *     .brightness(1.2, true)  // Brighten by 20%\n     *     .saturate(1.1, true);   // Increase saturation by 10%\n     * ```\n     */\n    public brightness(b: number, multiply: boolean): void\n    {\n        const matrix: ColorMatrix = [\n            b, 0, 0, 0, 0,\n            0, b, 0, 0, 0,\n            0, 0, b, 0, 0,\n            0, 0, 0, 1, 0,\n        ];\n\n        this._loadMatrix(matrix, multiply);\n    }\n\n    /**\n     * Sets each channel on the diagonal of the color matrix to apply a color tint.\n     *\n     * This method provides a way to tint display objects using the color matrix filter, similar to\n     * the tint property available on Sprites and other display objects. The tint is applied by\n     * scaling the RGB channels of each pixel.\n     * @param color - The color to use for tinting, this can be any valid color source.\n     * @param multiply - When true, the new tint matrix is multiplied with the current matrix instead\n     *                  of replacing it. This allows for combining tints with other color effects.\n     * @example\n     * ```ts\n     * const colorMatrix = new ColorMatrixFilter();\n     *\n     * // Apply a red tint\n     * colorMatrix.tint(0xff0000);\n     *\n     * // Layer a green tint on top of existing effects\n     * colorMatrix.tint('green', true);\n     *\n     * // Chain with other color adjustments\n     * colorMatrix\n     *     .tint('blue')       // Blue tint\n     *     .brightness(1.2, true) // Increase brightness\n     * ```\n     */\n    public tint(color: ColorSource, multiply?: boolean): void\n    {\n        const [r, g, b] = Color.shared.setValue(color).toArray();\n        const matrix: ColorMatrix = [\n            r, 0, 0, 0, 0,\n            0, g, 0, 0, 0,\n            0, 0, b, 0, 0,\n            0, 0, 0, 1, 0,\n        ];\n\n        this._loadMatrix(matrix, multiply);\n    }\n\n    /**\n     * Converts the display object to greyscale by applying a weighted matrix transformation.\n     *\n     * The greyscale effect works by setting equal RGB values for each pixel based on the scale parameter,\n     * effectively removing color information while preserving luminance.\n     * @param scale - The intensity of the greyscale effect. Value between 0-1, where:\n     *               - 0 produces black\n     *               - 0.5 produces 50% grey\n     *               - 1 produces white\n     * @param multiply - When true, the new matrix is multiplied with the current matrix instead of replacing it.\n     *                  This allows for cumulative effects when calling multiple color adjustments.\n     * @example\n     * ```ts\n     * const colorMatrix = new ColorMatrixFilter();\n     *\n     * // Convert to 50% grey\n     * colorMatrix.greyscale(0.5, false);\n     *\n     * // Chain with other effects\n     * colorMatrix\n     *     .greyscale(0.6, true)    // Add grey tint\n     *     .brightness(1.2, true);   // Brighten the result\n     * ```\n     */\n    public greyscale(scale: number, multiply: boolean): void\n    {\n        const matrix: ColorMatrix = [\n            scale, scale, scale, 0, 0,\n            scale, scale, scale, 0, 0,\n            scale, scale, scale, 0, 0,\n            0, 0, 0, 1, 0,\n        ];\n\n        this._loadMatrix(matrix, multiply);\n    }\n\n    /**\n     * Converts the display object to grayscale by applying a weighted matrix transformation.\n     *\n     * The grayscale effect works by setting equal RGB values for each pixel based on the scale parameter,\n     * effectively removing color information while preserving luminance.\n     * @param scale - The intensity of the grayscale effect. Value between 0-1, where:\n     *               - 0 produces black\n     *               - 0.5 produces 50% grey\n     *               - 1 produces white\n     * @param multiply - When true, the new matrix is multiplied with the current matrix instead of replacing it.\n     *                  This allows for cumulative effects when calling multiple color adjustments.\n     * @example\n     * ```ts\n     * const colorMatrix = new ColorMatrixFilter();\n     *\n     * // Convert to 50% grey\n     * colorMatrix.grayscale(0.5, false);\n     *\n     * // Chain with other effects\n     * colorMatrix\n     *     .grayscale(0.6, true)    // Add grey tint\n     *     .brightness(1.2, true);   // Brighten the result\n     * ```\n     */\n    public grayscale(scale: number, multiply: boolean): void\n    {\n        this.greyscale(scale, multiply);\n    }\n\n    /**\n     * Converts the display object to pure black and white using a luminance-based threshold.\n     *\n     * This method applies a matrix transformation that removes all color information and reduces\n     * the image to just black and white values based on the luminance of each pixel. The transformation\n     * uses standard luminance weightings: 30% red, 60% green, and 10% blue.\n     * @param multiply - When true, the new matrix is multiplied with the current matrix instead of replacing it.\n     *                  This allows for cumulative effects when calling multiple color adjustments.\n     * @example\n     * ```ts\n     * const colorMatrix = new ColorMatrixFilter();\n     *\n     * // Convert to black and white\n     * colorMatrix.blackAndWhite(false);\n     *\n     * // Chain with other effects\n     * colorMatrix\n     *     .blackAndWhite(true)     // Apply B&W effect\n     *     .brightness(1.2, true);   // Then increase brightness\n     * ```\n     */\n    public blackAndWhite(multiply: boolean): void\n    {\n        const matrix: ColorMatrix = [\n            0.3, 0.6, 0.1, 0, 0,\n            0.3, 0.6, 0.1, 0, 0,\n            0.3, 0.6, 0.1, 0, 0,\n            0, 0, 0, 1, 0,\n        ];\n\n        this._loadMatrix(matrix, multiply);\n    }\n\n    /**\n     * Adjusts the hue of the display object by rotating the color values around the color wheel.\n     *\n     * This method uses an optimized matrix transformation that accurately rotates the RGB color space\n     * around its luminance axis. The implementation is based on RGB cube rotation in 3D space, providing\n     * better results than traditional matrices with magic luminance constants.\n     * @param rotation - The angle of rotation in degrees around the color wheel:\n     *                  - 0 = no change\n     *                  - 90 = rotate colors 90 clockwise\n     *                  - 180 = invert all colors\n     *                  - 270 = rotate colors 90 counter-clockwise\n     * @param multiply - When true, the new matrix is multiplied with the current matrix instead of replacing it.\n     *                  This allows for cumulative effects when calling multiple color adjustments.\n     * @example\n     * ```ts\n     * const colorMatrix = new ColorMatrixFilter();\n     *\n     * // Rotate hue by 90 degrees\n     * colorMatrix.hue(90, false);\n     *\n     * // Chain multiple color adjustments\n     * colorMatrix\n     *     .hue(45, true)          // Rotate colors by 45\n     *     .saturate(1.2, true)    // Increase saturation\n     *     .brightness(1.1, true); // Slightly brighten\n     * ```\n     */\n    public hue(rotation: number, multiply: boolean): void\n    {\n        rotation = (rotation || 0) / 180 * Math.PI;\n\n        const cosR = Math.cos(rotation);\n        const sinR = Math.sin(rotation);\n        const sqrt = Math.sqrt;\n\n        /* a good approximation for hue rotation\n         This matrix is far better than the versions with magic luminance constants\n         formerly used here, but also used in the starling framework (flash) and known from this\n         old part of the internet: quasimondo.com/archives/000565.php\n\n         This new matrix is based on rgb cube rotation in space. Look here for a more descriptive\n         implementation as a shader not a general matrix:\n         https://github.com/evanw/glfx.js/blob/58841c23919bd59787effc0333a4897b43835412/src/filters/adjust/huesaturation.js\n\n         This is the source for the code:\n         see http://stackoverflow.com/questions/8507885/shift-hue-of-an-rgb-color/8510751#8510751\n         */\n\n        const w = 1 / 3;\n        const sqrW = sqrt(w); // weight is\n\n        const a00 = cosR + ((1.0 - cosR) * w);\n        const a01 = (w * (1.0 - cosR)) - (sqrW * sinR);\n        const a02 = (w * (1.0 - cosR)) + (sqrW * sinR);\n\n        const a10 = (w * (1.0 - cosR)) + (sqrW * sinR);\n        const a11 = cosR + (w * (1.0 - cosR));\n        const a12 = (w * (1.0 - cosR)) - (sqrW * sinR);\n\n        const a20 = (w * (1.0 - cosR)) - (sqrW * sinR);\n        const a21 = (w * (1.0 - cosR)) + (sqrW * sinR);\n        const a22 = cosR + (w * (1.0 - cosR));\n\n        const matrix: ColorMatrix = [\n            a00, a01, a02, 0, 0,\n            a10, a11, a12, 0, 0,\n            a20, a21, a22, 0, 0,\n            0, 0, 0, 1, 0,\n        ];\n\n        this._loadMatrix(matrix, multiply);\n    }\n\n    /**\n     * Adjusts the contrast of the display object by modifying the separation between dark and bright values.\n     *\n     * This method applies a matrix transformation that affects the difference between dark and light areas\n     * in the image. Increasing contrast makes shadows darker and highlights brighter, while decreasing\n     * contrast brings shadows up and highlights down, reducing the overall dynamic range.\n     * @param amount - The contrast adjustment value. Range is 0 to 1, where:\n     *                - 0 represents minimum contrast (flat gray)\n     *                - 0.5 represents normal contrast\n     *                - 1 represents maximum contrast\n     * @param multiply - When true, the new matrix is multiplied with the current matrix instead of replacing it.\n     *                  This allows for cumulative effects when calling multiple color adjustments.\n     * @example\n     * ```ts\n     * const colorMatrix = new ColorMatrixFilter();\n     *\n     * // Increase contrast by 50%\n     * colorMatrix.contrast(0.75, false);\n     *\n     * // Chain with other effects\n     * colorMatrix\n     *     .contrast(0.6, true)     // Boost contrast\n     *     .brightness(1.1, true)   // Slightly brighten\n     *     .saturate(1.2, true);    // Increase color intensity\n     * ```\n     */\n    public contrast(amount: number, multiply: boolean): void\n    {\n        const v = (amount || 0) + 1;\n        const o = -0.5 * (v - 1);\n\n        const matrix: ColorMatrix = [\n            v, 0, 0, 0, o,\n            0, v, 0, 0, o,\n            0, 0, v, 0, o,\n            0, 0, 0, 1, 0,\n        ];\n\n        this._loadMatrix(matrix, multiply);\n    }\n\n    /**\n     * Adjusts the saturation of the display object by modifying color separation.\n     *\n     * This method applies a matrix transformation that affects the intensity of colors.\n     * Increasing saturation makes colors more vivid and intense, while decreasing saturation\n     * moves colors toward grayscale.\n     * @param amount - The saturation adjustment value. Range is -1 to 1, where:\n     *                - -1 produces grayscale\n     *                - 0 represents no change\n     *                - 1 produces maximum saturation\n     * @param multiply - When true, the new matrix is multiplied with the current matrix instead of replacing it.\n     *                  This allows for cumulative effects when calling multiple color adjustments.\n     * @example\n     * ```ts\n     * const colorMatrix = new ColorMatrixFilter();\n     *\n     * // Double the saturation\n     * colorMatrix.saturate(1, false);\n     *\n     * // Chain with other effects\n     * colorMatrix\n     *     .saturate(0.5, true)     // Increase saturation by 50%\n     *     .brightness(1.1, true)    // Slightly brighten\n     *     .contrast(0.8, true);     // Reduce contrast\n     * ```\n     */\n    public saturate(amount = 0, multiply?: boolean): void\n    {\n        const x = (amount * 2 / 3) + 1;\n        const y = ((x - 1) * -0.5);\n\n        const matrix: ColorMatrix = [\n            x, y, y, 0, 0,\n            y, x, y, 0, 0,\n            y, y, x, 0, 0,\n            0, 0, 0, 1, 0,\n        ];\n\n        this._loadMatrix(matrix, multiply);\n    }\n\n    /**\n     * Completely removes color information from the display object, creating a grayscale version.\n     *\n     * This is a convenience method that calls `saturate(-1)` internally. The transformation preserves\n     * the luminance of the original image while removing all color information.\n     * @example\n     * ```ts\n     * const colorMatrix = new ColorMatrixFilter();\n     *\n     * // Convert image to grayscale\n     * colorMatrix.desaturate();\n     *\n     * // Can be chained with other effects\n     * colorMatrix\n     *     .desaturate()         // Remove all color\n     *     .brightness(1.2);     // Then increase brightness\n     * ```\n     */\n    public desaturate(): void\n    {\n        this.saturate(-1);\n    }\n\n    /**\n     * Creates a negative effect by inverting all colors in the display object.\n     *\n     * This method applies a matrix transformation that inverts the RGB values of each pixel\n     * while preserving the alpha channel. The result is similar to a photographic negative.\n     * @param multiply - When true, the new matrix is multiplied with the current matrix instead of replacing it.\n     *                  This allows for cumulative effects when calling multiple color adjustments.\n     * @example\n     * ```ts\n     * const colorMatrix = new ColorMatrixFilter();\n     *\n     * // Create negative effect\n     * colorMatrix.negative(false);\n     *\n     * // Chain with other effects\n     * colorMatrix\n     *     .negative(true)       // Apply negative effect\n     *     .brightness(1.2, true) // Increase brightness\n     *     .contrast(0.8, true);  // Reduce contrast\n     * ```\n     */\n    public negative(multiply: boolean): void\n    {\n        const matrix: ColorMatrix = [\n            -1, 0, 0, 1, 0,\n            0, -1, 0, 1, 0,\n            0, 0, -1, 1, 0,\n            0, 0, 0, 1, 0,\n        ];\n\n        this._loadMatrix(matrix, multiply);\n    }\n\n    /**\n     * Applies a sepia tone effect to the display object, creating a warm brown tint reminiscent of vintage photographs.\n     *\n     * This method applies a matrix transformation that converts colors to various shades of brown while\n     * preserving the original luminance values.\n     * @param multiply - When true, the new matrix is multiplied with the current matrix instead of replacing it.\n     *                  This allows for cumulative effects when calling multiple color adjustments.\n     * @example\n     * ```ts\n     * const colorMatrix = new ColorMatrixFilter();\n     *\n     * // Apply sepia effect\n     * colorMatrix.sepia(false);\n     *\n     * // Chain with other effects\n     * colorMatrix\n     *     .sepia(true)           // Add sepia tone\n     *     .brightness(1.1, true)  // Slightly brighten\n     *     .contrast(0.9, true);   // Reduce contrast\n     * ```\n     */\n    public sepia(multiply: boolean): void\n    {\n        const matrix: ColorMatrix = [\n            0.393, 0.7689999, 0.18899999, 0, 0,\n            0.349, 0.6859999, 0.16799999, 0, 0,\n            0.272, 0.5339999, 0.13099999, 0, 0,\n            0, 0, 0, 1, 0,\n        ];\n\n        this._loadMatrix(matrix, multiply);\n    }\n\n    /**\n     * Applies a Technicolor-style effect that simulates the early color motion picture process.\n     *\n     * This method applies a matrix transformation that recreates the distinctive look of the\n     * Technicolor process. The effect produces highly\n     * saturated colors with a particular emphasis on reds, greens, and blues.\n     * @param multiply - When true, the new matrix is multiplied with the current matrix instead of replacing it.\n     *                  This allows for cumulative effects when calling multiple color adjustments.\n     * @example\n     * ```ts\n     * const colorMatrix = new ColorMatrixFilter();\n     *\n     * // Apply Technicolor effect\n     * colorMatrix.technicolor(false);\n     *\n     * // Chain with other effects\n     * colorMatrix\n     *     .technicolor(true)      // Add Technicolor effect\n     *     .contrast(1.1, true)    // Boost contrast\n     *     .brightness(0.9, true); // Slightly darken\n     * ```\n     */\n    public technicolor(multiply: boolean): void\n    {\n        const matrix: ColorMatrix = [\n            1.9125277891456083, -0.8545344976951645, -0.09155508482755585, 0, 11.793603434377337,\n            -0.3087833385928097, 1.7658908555458428, -0.10601743074722245, 0, -70.35205161461398,\n            -0.231103377548616, -0.7501899197440212, 1.847597816108189, 0, 30.950940869491138,\n            0, 0, 0, 1, 0,\n        ];\n\n        this._loadMatrix(matrix, multiply);\n    }\n\n    /**\n     * Applies a vintage Polaroid camera effect to the display object.\n     *\n     * This method applies a matrix transformation that simulates the distinctive look of\n     * Polaroid instant photographs, characterized by slightly enhanced contrast, subtle color shifts,\n     * and a warm overall tone.\n     * @param multiply - When true, the new matrix is multiplied with the current matrix instead of replacing it.\n     *                  This allows for cumulative effects when calling multiple color adjustments.\n     * @example\n     * ```ts\n     * const colorMatrix = new ColorMatrixFilter();\n     *\n     * // Apply Polaroid effect\n     * colorMatrix.polaroid(false);\n     *\n     * // Chain with other effects\n     * colorMatrix\n     *     .polaroid(true)         // Add Polaroid effect\n     *     .brightness(1.1, true)  // Slightly brighten\n     *     .contrast(1.1, true);   // Boost contrast\n     * ```\n     */\n    public polaroid(multiply: boolean): void\n    {\n        const matrix: ColorMatrix = [\n            1.438, -0.062, -0.062, 0, 0,\n            -0.122, 1.378, -0.122, 0, 0,\n            -0.016, -0.016, 1.483, 0, 0,\n            0, 0, 0, 1, 0,\n        ];\n\n        this._loadMatrix(matrix, multiply);\n    }\n\n    /**\n     * Swaps the red and blue color channels in the display object.\n     *\n     * This method applies a matrix transformation that exchanges the red and blue color values\n     * while keeping the green channel and alpha unchanged.\n     * @param multiply - When true, the new matrix is multiplied with the current matrix instead of replacing it.\n     *                  This allows for cumulative effects when calling multiple color adjustments.\n     * @example\n     * ```ts\n     * const colorMatrix = new ColorMatrixFilter();\n     *\n     * // Swap red and blue channels\n     * colorMatrix.toBGR(false);\n     *\n     * // Chain with other effects\n     * colorMatrix\n     *     .toBGR(true)           // Swap R and B channels\n     *     .brightness(1.1, true)  // Slightly brighten\n     *     .contrast(0.9, true);   // Reduce contrast\n     * ```\n     */\n    public toBGR(multiply: boolean): void\n    {\n        const matrix: ColorMatrix = [\n            0, 0, 1, 0, 0,\n            0, 1, 0, 0, 0,\n            1, 0, 0, 0, 0,\n            0, 0, 0, 1, 0,\n        ];\n\n        this._loadMatrix(matrix, multiply);\n    }\n\n    /**\n     * Applies a Kodachrome color effect that simulates the iconic film stock.\n     *\n     * This method applies a matrix transformation that recreates the distinctive look of Kodachrome film,\n     * known for its rich, vibrant colors and excellent image preservation qualities. The effect emphasizes\n     * reds and blues while producing deep, true blacks.\n     * @param multiply - When true, the new matrix is multiplied with the current matrix instead of replacing it.\n     *                  This allows for cumulative effects when calling multiple color adjustments.\n     * @example\n     * ```ts\n     * const colorMatrix = new ColorMatrixFilter();\n     *\n     * // Apply Kodachrome effect\n     * colorMatrix.kodachrome(false);\n     *\n     * // Chain with other effects\n     * colorMatrix\n     *     .kodachrome(true)       // Add Kodachrome effect\n     *     .contrast(1.1, true)    // Boost contrast\n     *     .brightness(0.9, true); // Slightly darken\n     * ```\n     */\n    public kodachrome(multiply: boolean): void\n    {\n        const matrix: ColorMatrix = [\n            1.1285582396593525, -0.3967382283601348, -0.03992559172921793, 0, 63.72958762196502,\n            -0.16404339962244616, 1.0835251566291304, -0.05498805115633132, 0, 24.732407896706203,\n            -0.16786010706155763, -0.5603416277695248, 1.6014850761964943, 0, 35.62982807460946,\n            0, 0, 0, 1, 0,\n        ];\n\n        this._loadMatrix(matrix, multiply);\n    }\n\n    /**\n     * Applies a stylized brown-tinted effect to the display object.\n     *\n     * This method applies a matrix transformation that creates a rich, warm brown tone\n     * with enhanced contrast and subtle color shifts.\n     * @param multiply - When true, the new matrix is multiplied with the current matrix instead of replacing it.\n     *                  This allows for cumulative effects when calling multiple color adjustments.\n     * @example\n     * ```ts\n     * const colorMatrix = new ColorMatrixFilter();\n     *\n     * // Apply browni effect\n     * colorMatrix.browni(false);\n     *\n     * // Chain with other effects\n     * colorMatrix\n     *     .browni(true)          // Add brown tint\n     *     .brightness(1.1, true)  // Slightly brighten\n     *     .contrast(1.2, true);   // Boost contrast\n     * ```\n     */\n    public browni(multiply: boolean): void\n    {\n        const matrix: ColorMatrix = [\n            0.5997023498159715, 0.34553243048391263, -0.2708298674538042, 0, 47.43192855600873,\n            -0.037703249837783157, 0.8609577587992641, 0.15059552388459913, 0, -36.96841498319127,\n            0.24113635128153335, -0.07441037908422492, 0.44972182064877153, 0, -7.562075277591283,\n            0, 0, 0, 1, 0,\n        ];\n\n        this._loadMatrix(matrix, multiply);\n    }\n\n    /**\n     * Applies a vintage photo effect that simulates old photography techniques.\n     *\n     * This method applies a matrix transformation that creates a nostalgic, aged look\n     * with muted colors, enhanced warmth, and subtle vignetting.\n     * @param multiply - When true, the new matrix is multiplied with the current matrix instead of replacing it.\n     *                  This allows for cumulative effects when calling multiple color adjustments.\n     * @example\n     * ```ts\n     * const colorMatrix = new ColorMatrixFilter();\n     *\n     * // Apply vintage effect\n     * colorMatrix.vintage(false);\n     *\n     * // Chain with other effects\n     * colorMatrix\n     *     .vintage(true)          // Add vintage look\n     *     .brightness(0.9, true)  // Slightly darken\n     *     .contrast(1.1, true);   // Boost contrast\n     * ```\n     */\n    public vintage(multiply: boolean): void\n    {\n        const matrix: ColorMatrix = [\n            0.6279345635605994, 0.3202183420819367, -0.03965408211312453, 0, 9.651285835294123,\n            0.02578397704808868, 0.6441188644374771, 0.03259127616149294, 0, 7.462829176470591,\n            0.0466055556782719, -0.0851232987247891, 0.5241648018700465, 0, 5.159190588235296,\n            0, 0, 0, 1, 0,\n        ];\n\n        this._loadMatrix(matrix, multiply);\n    }\n\n    /**\n     * We don't know exactly what it does, kind of gradient map, but funny to play with!\n     * @param desaturation - Tone values.\n     * @param toned - Tone values.\n     * @param lightColor - Tone values, example: `0xFFE580`\n     * @param darkColor - Tone values, example: `0xFFE580`\n     * @param multiply - if true, current matrix and matrix are multiplied. If false,\n     *  just set the current matrix with matrix\n     * @example\n     * ```ts\n     * const colorMatrix = new ColorMatrixFilter();\n     *\n     * // Create sepia-like effect with custom colors\n     * colorMatrix.colorTone(\n     *     0.3,        // Moderate desaturation\n     *     0.2,        // Moderate toning\n     *     0xFFE580,   // Warm highlight color\n     *     0x338000,   // Dark green shadows\n     *     false\n     * );\n     *\n     * // Chain with other effects\n     * colorMatrix\n     *     .colorTone(0.2, 0.15, 0xFFE580, 0x338000, true)\n     *     .brightness(1.1, true);  // Slightly brighten\n     * ```\n     */\n    public colorTone(\n        desaturation: number,\n        toned: number,\n        lightColor: ColorSource,\n        darkColor: ColorSource,\n        multiply: boolean\n    ): void\n    {\n        desaturation ||= 0.2;\n        toned ||= 0.15;\n        lightColor ||= 0xFFE580;\n        darkColor ||= 0x338000;\n\n        const temp = Color.shared;\n        const [lR, lG, lB] = temp.setValue(lightColor).toArray();\n        const [dR, dG, dB] = temp.setValue(darkColor).toArray();\n\n        const matrix: ColorMatrix = [\n            0.3, 0.59, 0.11, 0, 0,\n            lR, lG, lB, desaturation, 0,\n            dR, dG, dB, toned, 0,\n            lR - dR, lG - dG, lB - dB, 0, 0,\n        ];\n\n        this._loadMatrix(matrix, multiply);\n    }\n\n    /**\n     * Applies a night vision effect to the display object.\n     *\n     * This method applies a matrix transformation that simulates night vision by enhancing\n     * certain color channels while suppressing others, creating a green-tinted effect\n     * similar to night vision goggles.\n     * @param intensity - The intensity of the night effect (0-1):\n     *                   - 0 produces no effect\n     *                   - 0.1 produces a subtle night vision effect (default)\n     *                   - 1 produces maximum night vision effect\n     * @param multiply - When true, the new matrix is multiplied with the current matrix instead of replacing it.\n     *                  This allows for cumulative effects when calling multiple color adjustments.\n     * @example\n     * ```ts\n     * const colorMatrix = new ColorMatrixFilter();\n     *\n     * // Apply night vision effect\n     * colorMatrix.night(0.3, false);\n     *\n     * // Chain with other effects\n     * colorMatrix\n     *     .night(0.2, true)        // Add night vision\n     *     .brightness(1.1, true)    // Slightly brighten\n     *     .contrast(1.2, true);     // Boost contrast\n     * ```\n     */\n    public night(intensity: number, multiply: boolean): void\n    {\n        intensity ||= 0.1;\n\n        const matrix: ColorMatrix = [\n            intensity * (-2.0), -intensity, 0, 0, 0,\n            -intensity, 0, intensity, 0, 0,\n            0, intensity, intensity * 2.0, 0, 0,\n            0, 0, 0, 1, 0,\n        ];\n\n        this._loadMatrix(matrix, multiply);\n    }\n\n    /**\n     * Predator effect\n     *\n     * Erase the current matrix by setting a new independent one\n     * @param amount - how much the predator feels his future victim\n     * @param multiply - if true, current matrix and matrix are multiplied. If false,\n     *  just set the current matrix with matrix\n     * @example\n     * ```ts\n     * const colorMatrix = new ColorMatrixFilter();\n     *\n     * // Apply thermal vision effect\n     * colorMatrix.predator(0.5, false);\n     *\n     * // Chain with other effects\n     * colorMatrix\n     *     .predator(0.3, true)      // Add thermal effect\n     *     .contrast(1.2, true)      // Boost contrast\n     *     .brightness(1.1, true);   // Slightly brighten\n     * ```\n     */\n    public predator(amount: number, multiply: boolean): void\n    {\n        const matrix: ColorMatrix = [\n            // row 1\n            11.224130630493164 * amount,\n            -4.794486999511719 * amount,\n            -2.8746118545532227 * amount,\n            0 * amount,\n            0.40342438220977783 * amount,\n            // row 2\n            -3.6330697536468506 * amount,\n            9.193157196044922 * amount,\n            -2.951810836791992 * amount,\n            0 * amount,\n            -1.316135048866272 * amount,\n            // row 3\n            -3.2184197902679443 * amount,\n            -4.2375030517578125 * amount,\n            7.476448059082031 * amount,\n            0 * amount,\n            0.8044459223747253 * amount,\n            // row 4\n            0, 0, 0, 1, 0,\n        ];\n\n        this._loadMatrix(matrix, multiply);\n    }\n\n    /**\n     * Applies a psychedelic color effect that creates dramatic color shifts.\n     *\n     * This method applies a matrix transformation that produces vibrant colors\n     * through channel mixing and amplification. Creates an effect reminiscent of\n     * color distortions in psychedelic art.\n     * @param multiply - When true, the new matrix is multiplied with the current matrix instead of replacing it.\n     *                  This allows for cumulative effects when calling multiple color adjustments.\n     * @example\n     * ```ts\n     * const colorMatrix = new ColorMatrixFilter();\n     *\n     * // Apply psychedelic effect\n     * colorMatrix.lsd(false);\n     *\n     * // Chain with other effects\n     * colorMatrix\n     *     .lsd(true)             // Add color distortion\n     *     .brightness(0.9, true)  // Slightly darken\n     *     .contrast(1.2, true);   // Boost contrast\n     * ```\n     */\n    public lsd(multiply: boolean): void\n    {\n        const matrix: ColorMatrix = [\n            2, -0.4, 0.5, 0, 0,\n            -0.5, 2, -0.4, 0, 0,\n            -0.4, -0.5, 3, 0, 0,\n            0, 0, 0, 1, 0,\n        ];\n\n        this._loadMatrix(matrix, multiply);\n    }\n\n    /**\n     * Resets the color matrix filter to its default state.\n     *\n     * This method resets all color transformations by setting the matrix back to its identity state.\n     * The identity matrix leaves colors unchanged, effectively removing all previously applied effects.\n     * @example\n     * ```ts\n     * const colorMatrix = new ColorMatrixFilter();\n     *\n     * // Apply some effects\n     * colorMatrix\n     *     .sepia(true)\n     *     .brightness(1.2, true);\n     *\n     * // Reset back to original colors\n     * colorMatrix.reset();\n     * ```\n     */\n    public reset(): void\n    {\n        const matrix: ColorMatrix = [\n            1, 0, 0, 0, 0,\n            0, 1, 0, 0, 0,\n            0, 0, 1, 0, 0,\n            0, 0, 0, 1, 0,\n        ];\n\n        this._loadMatrix(matrix, false);\n    }\n\n    /**\n     * The current color transformation matrix of the filter.\n     *\n     * This 5x4 matrix transforms RGBA color and alpha values of each pixel. The matrix is stored\n     * as a 20-element array in row-major order.\n     * @type {ColorMatrix}\n     * @default [\n     *     1, 0, 0, 0, 0,  // Red channel\n     *     0, 1, 0, 0, 0,  // Green channel\n     *     0, 0, 1, 0, 0,  // Blue channel\n     *     0, 0, 0, 1, 0   // Alpha channel\n     * ]\n     * @example\n     * ```ts\n     * const colorMatrix = new ColorMatrixFilter();\n     * // Get the current color matrix\n     * const currentMatrix = colorMatrix.matrix;\n     * // Modify the matrix\n     * colorMatrix.matrix = [\n     *     1, 0, 0, 0, 0,\n     *     0, 1, 0, 0, 0,\n     *     0, 0, 1, 0, 0,\n     *     0, 0, 0, 1, 0\n     * ];\n     */\n    get matrix(): ColorMatrix\n    {\n        return this.resources.colorMatrixUniforms.uniforms.uColorMatrix;\n    }\n\n    set matrix(value: ColorMatrix)\n    {\n        this.resources.colorMatrixUniforms.uniforms.uColorMatrix = value;\n    }\n\n    /**\n     * The opacity value used to blend between the original and transformed colors.\n     *\n     * This value controls how much of the color transformation is applied:\n     * - 0 = Original color only (no effect)\n     * - 0.5 = 50% blend of original and transformed colors\n     * - 1 = Fully transformed color (default)\n     * @default 1\n     * @example\n     * ```ts\n     * const colorMatrix = new ColorMatrixFilter();\n     *\n     * // Apply sepia at 50% strength\n     * colorMatrix.sepia(false);\n     * colorMatrix.alpha = 0.5;\n     *\n     * // Fade between effects\n     * colorMatrix\n     *     .saturate(1.5)      // Increase saturation\n     *     .contrast(1.2);     // Boost contrast\n     * colorMatrix.alpha = 0.7; // Apply at 70% strength\n     * ```\n     */\n    get alpha(): number\n    {\n        return this.resources.colorMatrixUniforms.uniforms.uAlpha;\n    }\n\n    set alpha(value: number)\n    {\n        this.resources.colorMatrixUniforms.uniforms.uAlpha = value;\n    }\n}\n", "var fragment = \"\\nin vec2 vTextureCoord;\\nin vec2 vFilterUv;\\n\\nout vec4 finalColor;\\n\\nuniform sampler2D uTexture;\\nuniform sampler2D uMapTexture;\\n\\nuniform vec4 uInputClamp;\\nuniform highp vec4 uInputSize;\\nuniform mat2 uRotation;\\nuniform vec2 uScale;\\n\\nvoid main()\\n{\\n    vec4 map = texture(uMapTexture, vFilterUv);\\n    \\n    vec2 offset = uInputSize.zw * (uRotation * (map.xy - 0.5)) * uScale; \\n\\n    finalColor = texture(uTexture, clamp(vTextureCoord + offset, uInputClamp.xy, uInputClamp.zw));\\n}\\n\";\n\nexport { fragment as default };\n//# sourceMappingURL=displacement.frag.mjs.map\n", "var vertex = \"in vec2 aPosition;\\nout vec2 vTextureCoord;\\nout vec2 vFilterUv;\\n\\n\\nuniform vec4 uInputSize;\\nuniform vec4 uOutputFrame;\\nuniform vec4 uOutputTexture;\\n\\nuniform mat3 uFilterMatrix;\\n\\nvec4 filterVertexPosition( void )\\n{\\n    vec2 position = aPosition * uOutputFrame.zw + uOutputFrame.xy;\\n    \\n    position.x = position.x * (2.0 / uOutputTexture.x) - 1.0;\\n    position.y = position.y * (2.0*uOutputTexture.z / uOutputTexture.y) - uOutputTexture.z;\\n\\n    return vec4(position, 0.0, 1.0);\\n}\\n\\nvec2 filterTextureCoord( void )\\n{\\n    return aPosition * (uOutputFrame.zw * uInputSize.zw);\\n}\\n\\nvec2 getFilterCoord( void )\\n{\\n  return ( uFilterMatrix * vec3( filterTextureCoord(), 1.0)  ).xy;\\n}\\n\\n\\nvoid main(void)\\n{\\n    gl_Position = filterVertexPosition();\\n    vTextureCoord = filterTextureCoord();\\n    vFilterUv = getFilterCoord();\\n}\\n\";\n\nexport { vertex as default };\n//# sourceMappingURL=displacement.vert.mjs.map\n", "var source = \"\\nstruct GlobalFilterUniforms {\\n  uInputSize:vec4<f32>,\\n  uInputPixel:vec4<f32>,\\n  uInputClamp:vec4<f32>,\\n  uOutputFrame:vec4<f32>,\\n  uGlobalFrame:vec4<f32>,\\n  uOutputTexture:vec4<f32>,\\n};\\n\\nstruct DisplacementUniforms {\\n  uFilterMatrix:mat3x3<f32>,\\n  uScale:vec2<f32>,\\n  uRotation:mat2x2<f32>\\n};\\n\\n\\n\\n@group(0) @binding(0) var<uniform> gfu: GlobalFilterUniforms;\\n@group(0) @binding(1) var uTexture: texture_2d<f32>;\\n@group(0) @binding(2) var uSampler : sampler;\\n\\n@group(1) @binding(0) var<uniform> filterUniforms : DisplacementUniforms;\\n@group(1) @binding(1) var uMapTexture: texture_2d<f32>;\\n@group(1) @binding(2) var uMapSampler : sampler;\\n\\nstruct VSOutput {\\n    @builtin(position) position: vec4<f32>,\\n    @location(0) uv : vec2<f32>,\\n    @location(1) filterUv : vec2<f32>,\\n  };\\n\\nfn filterVertexPosition(aPosition:vec2<f32>) -> vec4<f32>\\n{\\n    var position = aPosition * gfu.uOutputFrame.zw + gfu.uOutputFrame.xy;\\n\\n    position.x = position.x * (2.0 / gfu.uOutputTexture.x) - 1.0;\\n    position.y = position.y * (2.0*gfu.uOutputTexture.z / gfu.uOutputTexture.y) - gfu.uOutputTexture.z;\\n\\n    return vec4(position, 0.0, 1.0);\\n}\\n\\nfn filterTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>\\n{\\n    return aPosition * (gfu.uOutputFrame.zw * gfu.uInputSize.zw);\\n}\\n\\nfn globalTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>\\n{\\n  return  (aPosition.xy / gfu.uGlobalFrame.zw) + (gfu.uGlobalFrame.xy / gfu.uGlobalFrame.zw);  \\n}\\n\\nfn getFilterCoord(aPosition:vec2<f32> ) -> vec2<f32>\\n{\\n  return ( filterUniforms.uFilterMatrix * vec3( filterTextureCoord(aPosition), 1.0)  ).xy;\\n}\\n\\nfn getSize() -> vec2<f32>\\n{\\n\\n  \\n  return gfu.uGlobalFrame.zw;\\n}\\n  \\n@vertex\\nfn mainVertex(\\n  @location(0) aPosition : vec2<f32>, \\n) -> VSOutput {\\n  return VSOutput(\\n   filterVertexPosition(aPosition),\\n   filterTextureCoord(aPosition),\\n   getFilterCoord(aPosition)\\n  );\\n}\\n\\n@fragment\\nfn mainFragment(\\n  @location(0) uv: vec2<f32>,\\n  @location(1) filterUv: vec2<f32>,\\n  @builtin(position) position: vec4<f32>\\n) -> @location(0) vec4<f32> {\\n\\n    var map = textureSample(uMapTexture, uMapSampler, filterUv);\\n\\n    var offset =  gfu.uInputSize.zw * (filterUniforms.uRotation * (map.xy - 0.5)) * filterUniforms.uScale; \\n   \\n    return textureSample(uTexture, uSampler, clamp(uv + offset, gfu.uInputClamp.xy, gfu.uInputClamp.zw));\\n}\";\n\nexport { source as default };\n//# sourceMappingURL=displacement.wgsl.mjs.map\n", "import { Matrix } from '../../../maths/matrix/Matrix';\nimport { Point } from '../../../maths/point/Point';\nimport { GlProgram } from '../../../rendering/renderers/gl/shader/GlProgram';\nimport { GpuProgram } from '../../../rendering/renderers/gpu/shader/GpuProgram';\nimport { UniformGroup } from '../../../rendering/renderers/shared/shader/UniformGroup';\nimport { Sprite } from '../../../scene/sprite/Sprite';\nimport { deprecation, v8_0_0 } from '../../../utils/logging/deprecation';\nimport { Filter } from '../../Filter';\nimport fragment from './displacement.frag';\nimport vertex from './displacement.vert';\nimport source from './displacement.wgsl';\n\nimport type { PointData } from '../../../maths/point/PointData';\nimport type { Texture } from '../../../rendering/renderers/shared/texture/Texture';\nimport type { FilterOptions } from '../../Filter';\nimport type { FilterSystem } from '../../FilterSystem';\n\n/**\n * Configuration options for the DisplacementFilter.\n *\n * A displacement filter uses a sprite's texture as a displacement map,\n * moving pixels of the target based on the color values of corresponding\n * pixels in the displacement sprite.\n * @example\n * ```ts\n * const options: DisplacementFilterOptions = {\n *     sprite: displacementSprite,\n *     scale: { x: 20, y: 20 }\n * };\n *\n * const filter = new DisplacementFilter(options);\n * ```\n * @category filters\n * @standard\n */\nexport interface DisplacementFilterOptions extends FilterOptions\n{\n    /**\n     * The sprite whose texture will be used as the displacement map.\n     * Red channel = horizontal displacement\n     * Green channel = vertical displacement\n     * @example\n     * ```ts\n     * const displacementSprite = new Sprite(texture);\n     * const filter = new DisplacementFilter({ sprite: displacementSprite });\n     * ```\n     */\n    sprite: Sprite;\n\n    /**\n     * The scale of the displacement effect. Can be a single number for uniform\n     * scaling or a point-like object for separate x/y scaling.\n     * @default 20\n     * @example\n     * ```ts\n     * // Uniform scaling\n     * new DisplacementFilter({ sprite, scale: 20 });\n     * // Separate scaling\n     * new DisplacementFilter({ sprite, scale: { x: 10, y: 15 } });\n     * ```\n     */\n    scale?: number | PointData;\n}\n\n/**\n * A filter that applies a displacement map effect using a sprite's texture.\n *\n * The DisplacementFilter uses another texture (from a sprite) as a displacement map,\n * where the red and green channels of each pixel in the map determine how the corresponding\n * pixel in the filtered object should be offset:\n * - Red channel controls horizontal displacement\n * - Green channel controls vertical displacement\n *\n * Common use cases:\n * - Creating ripple or wave effects\n * - Distorting images dynamically\n * - Implementing heat haze effects\n * - Creating transition effects\n * @example\n * ```ts\n * import { Sprite, DisplacementFilter } from 'pixi.js';\n *\n * // Create a sprite to use as the displacement map\n * const displacementSprite = Sprite.from('displacement-map.png');\n *\n * // Create and configure the filter\n * const displacementFilter = new DisplacementFilter({\n *     sprite: displacementSprite,\n *     scale: { x: 20, y: 20 }\n * });\n *\n * // Apply to any display object\n * container.filters = [displacementFilter];\n * ```\n * @category filters\n * @author Vico: vicocotea\n * @standard\n * @noInheritDoc\n */\nexport class DisplacementFilter extends Filter\n{\n    private readonly _sprite: Sprite;\n\n    /**\n     * @param {Sprite | DisplacementFilterOptions} options - The sprite or options object.\n     * @param {Sprite} options.sprite - The texture used for the displacement map.\n     * @param {number | PointData} options.scale - The scale of the displacement.\n     */\n    constructor(options: Sprite | DisplacementFilterOptions);\n    /** @deprecated since 8.0.0 */\n    constructor(sprite: Sprite, scale?: number | PointData);\n    constructor(...args: [Sprite | DisplacementFilterOptions] | [Sprite, (number | PointData)?])\n    {\n        let options = args[0];\n\n        if (options instanceof Sprite)\n        {\n            // #if _DEBUG\n            if (args[1])\n            {\n                deprecation(v8_0_0, 'DisplacementFilter now uses options object instead of params. {sprite, scale}');\n            }\n            // #endif\n\n            options = { sprite: options, scale: args[1] };\n        }\n\n        const { sprite, scale: scaleOption, ...rest } = options;\n\n        let scale = scaleOption ?? 20;\n\n        // check if is a number or a point\n        if (typeof scale === 'number')\n        {\n            scale = new Point(scale, scale);\n        }\n\n        const filterUniforms = new UniformGroup({\n            uFilterMatrix: { value: new Matrix(), type: 'mat3x3<f32>' },\n            uScale: { value: scale, type: 'vec2<f32>' },\n            uRotation: { value: new Float32Array([0, 0, 0, 0]), type: 'mat2x2<f32>' },\n        });\n\n        const glProgram = GlProgram.from({\n            vertex,\n            fragment,\n            name: 'displacement-filter'\n        });\n\n        const gpuProgram = GpuProgram.from({\n            vertex: {\n                source,\n                entryPoint: 'mainVertex',\n            },\n            fragment: {\n                source,\n                entryPoint: 'mainFragment',\n            },\n        });\n\n        const textureSource = sprite.texture.source;\n\n        super({\n            ...rest,\n            gpuProgram,\n            glProgram,\n            resources: {\n                filterUniforms,\n                uMapTexture: textureSource,\n                uMapSampler: textureSource.style,\n            },\n        });\n\n        this._sprite = options.sprite;\n        this._sprite.renderable = false;\n    }\n\n    /**\n     * Applies the filter.\n     * @param filterManager - The manager.\n     * @param input - The input target.\n     * @param output - The output target.\n     * @param clearMode - clearMode.\n     * @advanced\n     */\n    public apply(\n        filterManager: FilterSystem,\n        input: Texture,\n        output: Texture,\n        clearMode: boolean\n    ): void\n    {\n        const uniforms = this.resources.filterUniforms.uniforms;\n\n        filterManager.calculateSpriteMatrix(\n            uniforms.uFilterMatrix,\n            this._sprite\n        );\n\n        // Extract rotation from world transform\n        const wt = this._sprite.worldTransform;\n        const lenX = Math.sqrt((wt.a * wt.a) + (wt.b * wt.b));\n        const lenY = Math.sqrt((wt.c * wt.c) + (wt.d * wt.d));\n\n        if (lenX !== 0 && lenY !== 0)\n        {\n            uniforms.uRotation[0] = wt.a / lenX;\n            uniforms.uRotation[1] = wt.b / lenX;\n            uniforms.uRotation[2] = wt.c / lenY;\n            uniforms.uRotation[3] = wt.d / lenY;\n        }\n\n        this.resources.uMapTexture = this._sprite.texture.source;\n\n        filterManager.applyFilter(this, input, output, clearMode);\n    }\n\n    /**\n     * The scale of the displacement effect.\n     *\n     * Gets the current x and y scaling values used for the displacement mapping.\n     * - x: Horizontal displacement scale\n     * - y: Vertical displacement scale\n     * @returns {Point} The current scale as a Point object\n     * @example\n     * ```ts\n     * const filter = new DisplacementFilter({ sprite });\n     *\n     * // Get current scale\n     * console.log(filter.scale.x, filter.scale.y);\n     *\n     * // Update scale\n     * filter.scale.x = 100;\n     * filter.scale.y = 50;\n     * ```\n     */\n    get scale(): Point\n    {\n        return this.resources.filterUniforms.uniforms.uScale as Point;\n    }\n}\n", "var fragment = \"\\nin vec2 vTextureCoord;\\nin vec4 vColor;\\n\\nout vec4 finalColor;\\n\\nuniform float uNoise;\\nuniform float uSeed;\\nuniform sampler2D uTexture;\\n\\nfloat rand(vec2 co)\\n{\\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\\n}\\n\\nvoid main()\\n{\\n    vec4 color = texture(uTexture, vTextureCoord);\\n    float randomValue = rand(gl_FragCoord.xy * uSeed);\\n    float diff = (randomValue - 0.5) *  uNoise;\\n\\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\\n    if (color.a > 0.0) {\\n        color.rgb /= color.a;\\n    }\\n\\n    color.r += diff;\\n    color.g += diff;\\n    color.b += diff;\\n\\n    // Premultiply alpha again.\\n    color.rgb *= color.a;\\n\\n    finalColor = color;\\n}\\n\";\n\nexport { fragment as default };\n//# sourceMappingURL=noise.frag.mjs.map\n", "var source = \"\\n\\nstruct GlobalFilterUniforms {\\n  uInputSize:vec4<f32>,\\n  uInputPixel:vec4<f32>,\\n  uInputClamp:vec4<f32>,\\n  uOutputFrame:vec4<f32>,\\n  uGlobalFrame:vec4<f32>,\\n  uOutputTexture:vec4<f32>,\\n};\\n\\nstruct NoiseUniforms {\\n  uNoise:f32,\\n  uSeed:f32,\\n};\\n\\n@group(0) @binding(0) var<uniform> gfu: GlobalFilterUniforms;\\n@group(0) @binding(1) var uTexture: texture_2d<f32>;\\n@group(0) @binding(2) var uSampler : sampler;\\n\\n@group(1) @binding(0) var<uniform> noiseUniforms : NoiseUniforms;\\n\\nstruct VSOutput {\\n    @builtin(position) position: vec4<f32>,\\n    @location(0) uv : vec2<f32>\\n  };\\n\\nfn filterVertexPosition(aPosition:vec2<f32>) -> vec4<f32>\\n{\\n    var position = aPosition * gfu.uOutputFrame.zw + gfu.uOutputFrame.xy;\\n\\n    position.x = position.x * (2.0 / gfu.uOutputTexture.x) - 1.0;\\n    position.y = position.y * (2.0*gfu.uOutputTexture.z / gfu.uOutputTexture.y) - gfu.uOutputTexture.z;\\n\\n    return vec4(position, 0.0, 1.0);\\n}\\n\\nfn filterTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>\\n{\\n    return aPosition * (gfu.uOutputFrame.zw * gfu.uInputSize.zw);\\n}\\n\\nfn globalTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>\\n{\\n  return  (aPosition.xy / gfu.uGlobalFrame.zw) + (gfu.uGlobalFrame.xy / gfu.uGlobalFrame.zw);  \\n}\\n\\nfn getSize() -> vec2<f32>\\n{\\n  return gfu.uGlobalFrame.zw;\\n}\\n  \\n@vertex\\nfn mainVertex(\\n  @location(0) aPosition : vec2<f32>, \\n) -> VSOutput {\\n  return VSOutput(\\n   filterVertexPosition(aPosition),\\n   filterTextureCoord(aPosition)\\n  );\\n}\\n\\nfn rand(co:vec2<f32>) -> f32\\n{\\n  return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\\n}\\n\\n\\n\\n@fragment\\nfn mainFragment(\\n  @location(0) uv: vec2<f32>,\\n  @builtin(position) position: vec4<f32>\\n) -> @location(0) vec4<f32> {\\n\\n    var pixelPosition =  globalTextureCoord(position.xy);// / (getSize());//-  gfu.uOutputFrame.xy);\\n  \\n    \\n    var sample = textureSample(uTexture, uSampler, uv);\\n    var randomValue =  rand(pixelPosition.xy * noiseUniforms.uSeed);\\n    var diff = (randomValue - 0.5) * noiseUniforms.uNoise;\\n  \\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\\n    if (sample.a > 0.0) {\\n      sample.r /= sample.a;\\n      sample.g /= sample.a;\\n      sample.b /= sample.a;\\n    }\\n\\n    sample.r += diff;\\n    sample.g += diff;\\n    sample.b += diff;\\n\\n    // Premultiply alpha again.\\n    sample.r *= sample.a;\\n    sample.g *= sample.a;\\n    sample.b *= sample.a;\\n    \\n    return sample;\\n}\";\n\nexport { source as default };\n//# sourceMappingURL=noise.wgsl.mjs.map\n", "import { GlProgram } from '../../../rendering/renderers/gl/shader/GlProgram';\nimport { GpuProgram } from '../../../rendering/renderers/gpu/shader/GpuProgram';\nimport { UniformGroup } from '../../../rendering/renderers/shared/shader/UniformGroup';\nimport { Filter } from '../../Filter';\nimport vertex from '../defaultFilter.vert';\nimport fragment from './noise.frag';\nimport source from './noise.wgsl';\n\nimport type { FilterOptions } from '../../Filter';\n\n/**\n * Configuration options for the NoiseFilter.\n *\n * The NoiseFilter adds random noise to the rendered content. The noise effect can be\n * controlled through the noise intensity and an optional seed value for reproducible results.\n * @example\n * ```ts\n * // Basic noise effect\n * const options: NoiseFilterOptions = {\n *     noise: 0.5,\n *     seed: Math.random()\n * };\n *\n * // Create filter with options\n * const noiseFilter = new NoiseFilter(options);\n * ```\n * @category filters\n * @standard\n */\nexport interface NoiseFilterOptions extends FilterOptions\n{\n    /**\n     * The amount of noise to apply. Should be in range (0, 1]:\n     * - 0.1 = subtle noise\n     * - 0.5 = moderate noise (default)\n     * - 1.0 = maximum noise\n     * @default 0.5\n     * @example\n     * ```ts\n     * // Moderate noise effect\n     * const noiseFilter = new NoiseFilter({ noise: 0.5 });\n     * ```\n     */\n    noise?: number;\n    /**\n     * A seed value to apply to the random noise generation.\n     * Using the same seed will generate the same noise pattern.\n     * @default Math.random()\n     * @example\n     * ```ts\n     * // Using a fixed seed for reproducible noise\n     * const noiseFilter = new NoiseFilter({ seed: 12345 });\n     * ```\n     */\n    seed?: number;\n}\n\n/**\n * A filter that adds configurable random noise to rendered content.\n *\n * This filter generates pixel noise based on a noise intensity value and an optional seed.\n * It can be used to create various effects like film grain, static, or texture variation.\n *\n * Based on: https://github.com/evanw/glfx.js/blob/master/src/filters/adjust/noise.js\n * @example\n * ```ts\n * import { NoiseFilter } from 'pixi.js';\n *\n * // Create with options\n * const filter = new NoiseFilter({\n *     noise: 0.5,    // 50% noise intensity\n *     seed: 12345    // Fixed seed for consistent noise\n * });\n *\n * // Apply to a display object\n * sprite.filters = [filter];\n *\n * // Adjust noise dynamically\n * filter.noise = 0.8;    // Increase noise\n * filter.seed = Math.random(); // New random pattern\n * ```\n * @category filters\n * @author Vico: vicocotea\n * @standard\n * @noInheritDoc\n */\nexport class NoiseFilter extends Filter\n{\n    /**\n     * The default configuration options for the NoiseFilter.\n     *\n     * These values will be used when no specific options are provided to the constructor.\n     * You can override any of these values by passing your own options object.\n     * @example\n     * ```ts\n     * NoiseFilter.defaultOptions.noise = 0.7; // Change default noise to 0.7\n     * const filter = new NoiseFilter(); // Will use noise 0.7 by default\n     * ```\n     */\n    public static defaultOptions: NoiseFilterOptions = {\n        noise: 0.5,\n    };\n\n    /**\n     * @param options - The options of the noise filter.\n     */\n    constructor(options: NoiseFilterOptions = {})\n    {\n        options = { ...NoiseFilter.defaultOptions, ...options };\n\n        const gpuProgram = GpuProgram.from({\n            vertex: {\n                source,\n                entryPoint: 'mainVertex',\n            },\n            fragment: {\n                source,\n                entryPoint: 'mainFragment',\n            },\n        });\n\n        const glProgram = GlProgram.from({\n            vertex,\n            fragment,\n            name: 'noise-filter'\n        });\n\n        const { noise, seed, ...rest } = options;\n\n        super({\n            ...rest,\n            gpuProgram,\n            glProgram,\n            resources: {\n                noiseUniforms: new UniformGroup({\n                    uNoise: { value: 1, type: 'f32' },\n                    uSeed: { value: 1, type: 'f32' },\n                })\n            },\n        });\n\n        this.noise = noise;\n        this.seed = seed ?? Math.random();\n    }\n\n    /**\n     * The amount of noise to apply to the filtered content.\n     *\n     * This value controls the intensity of the random noise effect:\n     * - Values close to 0 produce subtle noise\n     * - Values around 0.5 produce moderate noise\n     * - Values close to 1 produce strong noise\n     * @default 0.5\n     * @example\n     * ```ts\n     * const noiseFilter = new NoiseFilter();\n     *\n     * // Set to subtle noise\n     * noiseFilter.noise = 0.2;\n     *\n     * // Set to maximum noise\n     * noiseFilter.noise = 1.0;\n     * ```\n     */\n    get noise(): number\n    {\n        return this.resources.noiseUniforms.uniforms.uNoise;\n    }\n\n    set noise(value: number)\n    {\n        this.resources.noiseUniforms.uniforms.uNoise = value;\n    }\n\n    /**\n     * The seed value used for random noise generation.\n     *\n     * This value determines the noise pattern:\n     * - Using the same seed will generate identical noise patterns\n     * - Different seeds produce different but consistent patterns\n     * - `Math.random()` can be used for random patterns\n     * @default Math.random()\n     * @example\n     * ```ts\n     * const noiseFilter = new NoiseFilter();\n     *\n     * // Use a fixed seed for consistent noise\n     * noiseFilter.seed = 12345;\n     *\n     * // Generate new random pattern\n     * noiseFilter.seed = Math.random();\n     * ```\n     */\n    get seed(): number\n    {\n        return this.resources.noiseUniforms.uniforms.uSeed;\n    }\n\n    set seed(value: number)\n    {\n        this.resources.noiseUniforms.uniforms.uSeed = value;\n    }\n}\n", "var hsl = \"fn getLuminosity(c: vec3<f32>) -> f32 {\\n  return 0.3 * c.r + 0.59 * c.g + 0.11 * c.b;\\n}\\n\\nfn setLuminosity(c: vec3<f32>, lum: f32) -> vec3<f32> {\\n  let d: f32 = lum - getLuminosity(c);\\n  let newColor: vec3<f32> = c.rgb + vec3<f32>(d, d, d);\\n\\n  // clip back into legal range\\n  let newLum: f32 = getLuminosity(newColor);\\n  let cMin: f32 = min(newColor.r, min(newColor.g, newColor.b));\\n  let cMax: f32 = max(newColor.r, max(newColor.g, newColor.b));\\n\\n  let t1: f32 = newLum / (newLum - cMin);\\n  let t2: f32 = (1.0 - newLum) / (cMax - newLum);\\n\\n  let finalColor = mix(vec3<f32>(newLum, newLum, newLum), newColor, select(select(1.0, t2, cMax > 1.0), t1, cMin < 0.0));\\n\\n  return finalColor;\\n}\\n\\nfn getSaturation(c: vec3<f32>) -> f32 {\\n  return max(c.r, max(c.g, c.b)) - min(c.r, min(c.g, c.b));\\n}\\n\\n// Set saturation if color components are sorted in ascending order.\\nfn setSaturationMinMidMax(cSorted: vec3<f32>, s: f32) -> vec3<f32> {\\n  var result: vec3<f32>;\\n  if (cSorted.z > cSorted.x) {\\n    let newY = (((cSorted.y - cSorted.x) * s) / (cSorted.z - cSorted.x));\\n    result = vec3<f32>(0.0, newY, s);\\n  } else {\\n    result = vec3<f32>(0.0, 0.0, 0.0);\\n  }\\n  return vec3<f32>(result.x, result.y, result.z);\\n}\\n\\nfn setSaturation(c: vec3<f32>, s: f32) -> vec3<f32> {\\n    var result: vec3<f32> = c;\\n\\n    if (c.r <= c.g && c.r <= c.b) {\\n        if (c.g <= c.b) {\\n            result = setSaturationMinMidMax(result, s);\\n        } else {\\n            var temp: vec3<f32> = vec3<f32>(result.r, result.b, result.g);\\n            temp = setSaturationMinMidMax(temp, s);\\n            result = vec3<f32>(temp.r, temp.b, temp.g);\\n        }\\n    } else if (c.g <= c.r && c.g <= c.b) {\\n        if (c.r <= c.b) {\\n            var temp: vec3<f32> = vec3<f32>(result.g, result.r, result.b);\\n            temp = setSaturationMinMidMax(temp, s);\\n            result = vec3<f32>(temp.g, temp.r, temp.b);\\n        } else {\\n            var temp: vec3<f32> = vec3<f32>(result.g, result.b, result.r);\\n            temp = setSaturationMinMidMax(temp, s);\\n            result = vec3<f32>(temp.g, temp.b, temp.r);\\n        }\\n    } else {\\n        if (c.r <= c.g) {\\n            var temp: vec3<f32> = vec3<f32>(result.b, result.r, result.g);\\n            temp = setSaturationMinMidMax(temp, s);\\n            result = vec3<f32>(temp.b, temp.r, temp.g);\\n        } else {\\n            var temp: vec3<f32> = vec3<f32>(result.b, result.g, result.r);\\n            temp = setSaturationMinMidMax(temp, s);\\n            result = vec3<f32>(temp.b, temp.g, temp.r);\\n        }\\n    }\\n\\n    return result;\\n}\";\n\nexport { hsl as default };\n//# sourceMappingURL=hsl.wgsl.mjs.map\n", "import { Container } from '../scene/container/Container';\nimport { UPDATE_PRIORITY } from '../ticker/const';\nimport { Ticker } from '../ticker/Ticker';\n\nimport type { TextureSource } from '../rendering/renderers/shared/texture/sources/TextureSource';\nimport type { Texture } from '../rendering/renderers/shared/texture/Texture';\nimport type { Renderer } from '../rendering/renderers/types';\nimport type { GraphicsContext } from '../scene/graphics/shared/GraphicsContext';\nimport type { Text } from '../scene/text/Text';\n\n/**\n * The accepted types to pass to the prepare system\n * @category rendering\n * @advanced\n */\nexport type PrepareSourceItem = Container | TextureSource | Texture | GraphicsContext;\n\n/**\n * The valid types resolved to the queue ready for upload\n * @category rendering\n * @advanced\n */\nexport type PrepareQueueItem = TextureSource | Text | GraphicsContext;\n\n/**\n * Part of the prepare system. Responsible for uploading all the items to the GPU.\n * This class provides the base functionality and handles processing the queue asynchronously.\n * @category rendering\n * @advanced\n */\nexport abstract class PrepareBase\n{\n    /** The number of uploads to process per frame */\n    public static uploadsPerFrame = 4;\n\n    /** Reference to the renderer */\n    protected renderer: Renderer;\n\n    /** The queue to process over a async timer */\n    protected queue: PrepareQueueItem[];\n\n    /** Collection of callbacks to call when the uploads are finished */\n    protected resolves: ((value: void | PromiseLike<void>) => void)[];\n\n    /** Timeout id for next processing call */\n    protected timeout?: number;\n\n    private _destroyed: boolean;\n\n    /**\n     * @param {Renderer} renderer - A reference to the current renderer\n     */\n    constructor(renderer: Renderer)\n    {\n        this.renderer = renderer;\n        this.queue = [];\n        this.resolves = [];\n    }\n\n    /** Resolve the given resource type and return an item for the queue */\n    protected abstract resolveQueueItem(source: PrepareSourceItem, queue: PrepareQueueItem[]): void;\n    protected abstract uploadQueueItem(item: PrepareQueueItem): void;\n\n    /**\n     * Return a copy of the queue\n     * @returns {PrepareQueueItem[]} The queue\n     */\n    public getQueue(): PrepareQueueItem[]\n    {\n        return [...this.queue];\n    }\n\n    /**\n     * Add a textures or graphics resource to the queue\n     * @param {PrepareSourceItem | PrepareSourceItem[]} resource\n     */\n    public add(resource: PrepareSourceItem | PrepareSourceItem[]): this\n    {\n        const resourceArray = Array.isArray(resource) ? resource : [resource];\n\n        for (const resourceItem of resourceArray)\n        {\n            // handle containers and their children\n            if (resourceItem instanceof Container)\n            {\n                this._addContainer(resourceItem);\n            }\n            else\n            {\n                this.resolveQueueItem(resourceItem, this.queue);\n            }\n        }\n\n        return this;\n    }\n\n    /**\n     * Recursively add a container and its children to the queue\n     * @param {Container} container - The container to add to the queue\n     */\n    private _addContainer(container: Container): void\n    {\n        this.resolveQueueItem(container, this.queue);\n\n        // recursively add children\n        for (const child of container.children)\n        {\n            this._addContainer(child);\n        }\n    }\n\n    /**\n     * Upload all the textures and graphics to the GPU (optionally add more resources to the queue first)\n     * @param {PrepareSourceItem | PrepareSourceItem[] | undefined} resource\n     */\n    public upload(resource?: PrepareSourceItem | PrepareSourceItem[]): Promise<void>\n    {\n        if (resource)\n        {\n            this.add(resource);\n        }\n\n        return new Promise((resolve) =>\n        {\n            if (this.queue.length)\n            {\n                // add resolve callback to the collection\n                this.resolves.push(resolve);\n\n                // eliminate duplicates first\n                this.dedupeQueue();\n\n                // launch first tick\n                Ticker.system.addOnce(this._tick, this, UPDATE_PRIORITY.UTILITY);\n            }\n            else\n            {\n                // queue is empty, resolve immediately\n                resolve();\n            }\n        });\n    }\n\n    /** eliminate duplicates before processing */\n    public dedupeQueue(): void\n    {\n        const hash = Object.create(null);\n        let nextUnique = 0;\n\n        for (let i = 0; i < this.queue.length; i++)\n        {\n            const current = this.queue[i];\n\n            if (!hash[current.uid])\n            {\n                hash[current.uid] = true;\n                this.queue[nextUnique++] = current;\n            }\n        }\n\n        this.queue.length = nextUnique;\n    }\n\n    public destroy(): void\n    {\n        this._destroyed = true;\n        clearTimeout(this.timeout);\n    }\n\n    /** called per frame by the ticker, defer processing to next tick */\n    private readonly _tick = () =>\n    {\n        if (this._destroyed) return;\n\n        this.timeout = setTimeout(this._processQueue, 0) as unknown as number;\n    };\n\n    /** process the queue up to max item limit per frame */\n    private readonly _processQueue = () =>\n    {\n        if (this._destroyed) return;\n\n        const { queue } = this;\n        let itemsProcessed = 0;\n\n        // process the maximum number of items per frame\n        while (queue.length && itemsProcessed < PrepareBase.uploadsPerFrame)\n        {\n            const queueItem = queue.shift();\n\n            this.uploadQueueItem(queueItem);\n\n            itemsProcessed++;\n        }\n\n        if (queue.length)\n        {\n            // queue is not empty, continue processing on next frame\n            Ticker.system.addOnce(this._tick, this, UPDATE_PRIORITY.UTILITY);\n        }\n        else\n        {\n            // queue is empty, resolve immediately\n            this._resolve();\n        }\n    };\n\n    /** Call all the resolve callbacks */\n    private _resolve(): void\n    {\n        const { resolves } = this;\n\n        // call all resolve callbacks\n        const array = resolves.slice(0);\n\n        resolves.length = 0;\n\n        for (const resolve of array)\n        {\n            resolve();\n        }\n    }\n}\n", "import { Buffer } from '../../../rendering/renderers/shared/buffer/Buffer';\nimport { BufferUsage } from '../../../rendering/renderers/shared/buffer/const';\nimport { Geometry } from '../../../rendering/renderers/shared/geometry/Geometry';\nimport { deprecation, v8_0_0 } from '../../../utils/logging/deprecation';\n\nimport type { Topology } from '../../../rendering/renderers/shared/geometry/const';\nimport type { BatchMode } from '../../graphics/shared/GraphicsContext';\n\n/**\n * Options for the mesh geometry.\n * @category scene\n * @advanced\n */\nexport interface MeshGeometryOptions\n{\n    /** The positions of the mesh. */\n    positions?: Float32Array;\n    /** The UVs of the mesh. If not provided, they will be filled with 0 and match the size of the positions. */\n    uvs?: Float32Array;\n    /** The indices of the mesh. */\n    indices?: Uint32Array;\n    /** The topology of the mesh. */\n    topology?: Topology;\n    /** Whether to shrink the buffers to fit the data. */\n    shrinkBuffersToFit?: boolean;\n}\n\n/**\n * A geometry used to batch multiple meshes with the same texture.\n * @category scene\n * @advanced\n */\nexport class MeshGeometry extends Geometry\n{\n    public static defaultOptions: MeshGeometryOptions = {\n        topology: 'triangle-list',\n        shrinkBuffersToFit: false,\n    };\n\n    public batchMode: BatchMode = 'auto';\n\n    /**\n     * @param {MeshGeometryOptions} options - The options of the mesh geometry.\n     */\n    constructor(options: MeshGeometryOptions);\n    /** @deprecated since 8.0.0 */\n    constructor(positions: Float32Array, uvs: Float32Array, indices: Uint32Array);\n    constructor(...args: [MeshGeometryOptions] | [Float32Array, Float32Array, Uint32Array])\n    {\n        let options = args[0] ?? {};\n\n        if (options instanceof Float32Array)\n        {\n            // #if _DEBUG\n            deprecation(v8_0_0, 'use new MeshGeometry({ positions, uvs, indices }) instead');\n            // #endif\n\n            options = {\n                positions: options,\n                uvs: args[1],\n                indices: args[2],\n            };\n        }\n\n        options = { ...MeshGeometry.defaultOptions, ...options };\n\n        const positions = options.positions || new Float32Array([0, 0, 1, 0, 1, 1, 0, 1]);\n\n        let uvs = options.uvs;\n\n        if (!uvs)\n        {\n            if (options.positions)\n            {\n                uvs = new Float32Array(positions.length);\n            }\n            else\n            {\n                uvs = new Float32Array([0, 0, 1, 0, 1, 1, 0, 1]);\n            }\n        }\n\n        const indices = options.indices || new Uint32Array([0, 1, 2, 0, 2, 3]);\n\n        const shrinkToFit = options.shrinkBuffersToFit;\n\n        const positionBuffer = new Buffer({\n            data: positions,\n            label: 'attribute-mesh-positions',\n            shrinkToFit,\n            usage: BufferUsage.VERTEX | BufferUsage.COPY_DST,\n        });\n\n        const uvBuffer = new Buffer({\n            data: uvs,\n            label: 'attribute-mesh-uvs',\n            shrinkToFit,\n            usage: BufferUsage.VERTEX | BufferUsage.COPY_DST,\n        });\n\n        const indexBuffer = new Buffer({\n            data: indices,\n            label: 'index-mesh-buffer',\n            shrinkToFit,\n            usage: BufferUsage.INDEX | BufferUsage.COPY_DST,\n        });\n\n        super({\n            attributes: {\n                aPosition: {\n                    buffer: positionBuffer,\n                    format: 'float32x2',\n                    stride: 2 * 4,\n                    offset: 0,\n                },\n                aUV: {\n                    buffer: uvBuffer,\n                    format: 'float32x2',\n                    stride: 2 * 4,\n                    offset: 0,\n                },\n            },\n            indexBuffer,\n            topology: options.topology,\n        });\n    }\n\n    /** The positions of the mesh. */\n    get positions(): Float32Array\n    {\n        return this.attributes.aPosition.buffer.data as Float32Array;\n    }\n\n    /**\n     * Set the positions of the mesh.\n     * When setting the positions, its important that the uvs array is at least as long as the positions array.\n     * otherwise the geometry will not be valid.\n     * @param {Float32Array} value - The positions of the mesh.\n     */\n    set positions(value: Float32Array)\n    {\n        this.attributes.aPosition.buffer.data = value;\n    }\n\n    /** The UVs of the mesh. */\n    get uvs(): Float32Array\n    {\n        return this.attributes.aUV.buffer.data as Float32Array;\n    }\n\n    /**\n     * Set the UVs of the mesh.\n     * Its important that the uvs array you set is at least as long as the positions array.\n     * otherwise the geometry will not be valid.\n     * @param {Float32Array} value - The UVs of the mesh.\n     */\n    set uvs(value: Float32Array)\n    {\n        this.attributes.aUV.buffer.data = value;\n    }\n\n    /** The indices of the mesh. */\n    get indices(): Uint32Array\n    {\n        return this.indexBuffer.data as Uint32Array;\n    }\n\n    set indices(value: Uint32Array)\n    {\n        this.indexBuffer.data = value;\n    }\n}\n", "import type { Matrix } from '../../../maths/matrix/Matrix';\nimport type { Batch, Batcher } from '../../../rendering/batcher/shared/Batcher';\nimport type { DefaultBatchableMeshElement } from '../../../rendering/batcher/shared/DefaultBatcher';\nimport type { Topology } from '../../../rendering/renderers/shared/geometry/const';\nimport type { Texture } from '../../../rendering/renderers/shared/texture/Texture';\nimport type { ViewContainer } from '../../view/ViewContainer';\nimport type { MeshGeometry } from './MeshGeometry';\n\n/**\n * A batchable mesh object.\n * @ignore\n */\nexport class BatchableMesh implements DefaultBatchableMeshElement\n{\n    public batcherName = 'default';\n\n    public _topology: Topology;\n\n    public readonly packAsQuad = false;\n    public location: number;\n\n    public renderable: ViewContainer;\n\n    public indexOffset = 0;\n    public attributeOffset = 0;\n\n    public texture: Texture;\n    public geometry: MeshGeometry;\n    public transform: Matrix;\n    public roundPixels: 0 | 1 = 0;\n\n    public _attributeStart: number;\n    public _batcher: Batcher = null;\n    public _batch: Batch = null;\n    public _indexStart: number;\n    public _textureId: number;\n    public _textureMatrixUpdateId: number = -1;\n\n    private _transformedUvs: Float32Array;\n    private _uvUpdateId: number = -1;\n\n    get blendMode() { return this.renderable.groupBlendMode; }\n\n    get topology() { return this._topology || this.geometry.topology; }\n    set topology(value: Topology) { this._topology = value; }\n\n    public reset()\n    {\n        this.renderable = null;\n        this.texture = null;\n        this._batcher = null;\n        this._batch = null;\n        this.geometry = null;\n        this._uvUpdateId = -1;\n        this._textureMatrixUpdateId = -1;\n    }\n\n    /**\n     * Sets the texture for the batchable mesh.\n     * As it does so, it resets the texture matrix update ID.\n     * this is to ensure that the texture matrix is recalculated when the uvs are referenced\n     * @param value - The texture to set.\n     */\n    public setTexture(value: Texture)\n    {\n        if (this.texture === value) return;\n\n        this.texture = value;\n        this._textureMatrixUpdateId = -1;\n    }\n\n    get uvs()\n    {\n        const geometry = this.geometry;\n\n        const uvBuffer = geometry.getBuffer('aUV');\n\n        const uvs = uvBuffer.data;\n\n        let transformedUvs = uvs;\n        const textureMatrix = this.texture.textureMatrix;\n\n        if (!textureMatrix.isSimple)\n        {\n            transformedUvs = this._transformedUvs;\n\n            if (this._textureMatrixUpdateId !== textureMatrix._updateID || this._uvUpdateId !== uvBuffer._updateID)\n            {\n                if (!transformedUvs || transformedUvs.length < uvs.length)\n                {\n                    transformedUvs = this._transformedUvs = new Float32Array(uvs.length);\n                }\n\n                this._textureMatrixUpdateId = textureMatrix._updateID;\n                this._uvUpdateId = uvBuffer._updateID;\n\n                textureMatrix.multiplyUvs(uvs as Float32Array, transformedUvs);\n            }\n        }\n\n        return transformedUvs as Float32Array;\n    }\n\n    get positions()\n    {\n        return this.geometry.positions;\n    }\n\n    get indices()\n    {\n        return this.geometry.indices;\n    }\n\n    get color()\n    {\n        return this.renderable.groupColorAlpha;\n    }\n\n    get groupTransform()\n    {\n        return this.renderable.groupTransform;\n    }\n\n    get attributeSize()\n    {\n        return this.geometry.positions.length / 2;\n    }\n\n    get indexSize()\n    {\n        return this.geometry.indices.length;\n    }\n}\n", "import { ExtensionType } from '../../../extensions/Extensions';\nimport { Matrix } from '../../../maths/matrix/Matrix';\nimport { BindGroup } from '../../../rendering/renderers/gpu/shader/BindGroup';\nimport { UniformGroup } from '../../../rendering/renderers/shared/shader/UniformGroup';\nimport { getAdjustedBlendModeBlend } from '../../../rendering/renderers/shared/state/getAdjustedBlendModeBlend';\nimport { color32BitToUniform } from '../../graphics/gpu/colorToUniform';\nimport { type GPUData } from '../../view/ViewContainer';\nimport { BatchableMesh } from './BatchableMesh';\n\nimport type { InstructionSet } from '../../../rendering/renderers/shared/instructions/InstructionSet';\nimport type {\n    InstructionPipe,\n    RenderPipe\n} from '../../../rendering/renderers/shared/instructions/RenderPipe';\nimport type { Renderer } from '../../../rendering/renderers/types';\nimport type { Mesh } from './Mesh';\n\n// TODO Record mode is a P2, will get back to this as it's not a priority\n// const recordMode = true;\n\n/**\n * GPUData for Mesh\n * @internal\n */\nexport class MeshGpuData implements GPUData\n{\n    public meshData?: MeshData;\n    public batchableMesh?: BatchableMesh;\n\n    public destroy()\n    {\n        // BOOM!\n    }\n}\n\n/**\n * The data for the mesh\n * @internal\n */\ninterface MeshData\n{\n    /** if the mesh is batched or not */\n    batched: boolean;\n    /** the size of the index buffer */\n    indexSize: number;\n    /** the size of the vertex buffer */\n    vertexSize: number;\n}\n\n/** @internal */\nexport interface MeshAdaptor\n{\n    init(): void;\n    execute(meshPipe: MeshPipe, mesh: Mesh): void;\n    destroy(): void;\n}\n\n/**\n * The MeshPipe is responsible for handling the rendering of Mesh objects.\n * It manages the batching of meshes, updates their GPU data, and executes the rendering instructions.\n * It also handles the local uniforms for each mesh, such as transformation matrices and colors.\n * @category scene\n * @internal\n */\nexport class MeshPipe implements RenderPipe<Mesh>, InstructionPipe<Mesh>\n{\n    /** @ignore */\n    public static extension = {\n        type: [\n            ExtensionType.WebGLPipes,\n            ExtensionType.WebGPUPipes,\n        ],\n        name: 'mesh',\n    } as const;\n\n    public localUniforms = new UniformGroup({\n        uTransformMatrix: { value: new Matrix(), type: 'mat3x3<f32>' },\n        uColor: { value: new Float32Array([1, 1, 1, 1]), type: 'vec4<f32>' },\n        uRound: { value: 0, type: 'f32' },\n    });\n\n    public localUniformsBindGroup = new BindGroup({\n        0: this.localUniforms,\n    });\n\n    public renderer: Renderer;\n\n    private _adaptor: MeshAdaptor;\n\n    constructor(renderer: Renderer, adaptor: MeshAdaptor)\n    {\n        this.renderer = renderer;\n        this._adaptor = adaptor;\n\n        this._adaptor.init();\n    }\n\n    public validateRenderable(mesh: Mesh): boolean\n    {\n        const meshData = this._getMeshData(mesh);\n\n        const wasBatched = meshData.batched;\n\n        const isBatched = mesh.batched;\n\n        meshData.batched = isBatched;\n\n        if (wasBatched !== isBatched)\n        {\n            return true;\n        }\n        else if (isBatched)\n        {\n            const geometry = mesh._geometry;\n\n            // no need to break the batch if it's the same size\n            if (geometry.indices.length !== meshData.indexSize\n                    || geometry.positions.length !== meshData.vertexSize)\n            {\n                meshData.indexSize = geometry.indices.length;\n                meshData.vertexSize = geometry.positions.length;\n\n                return true;\n            }\n\n            const batchableMesh = this._getBatchableMesh(mesh);\n\n            if (batchableMesh.texture.uid !== mesh._texture.uid)\n            {\n                batchableMesh._textureMatrixUpdateId = -1;\n            }\n\n            return !batchableMesh._batcher.checkAndUpdateTexture(\n                batchableMesh,\n                mesh._texture\n            );\n        }\n\n        return false;\n    }\n\n    public addRenderable(mesh: Mesh, instructionSet: InstructionSet)\n    {\n        const batcher = this.renderer.renderPipes.batch;\n\n        const meshData = this._getMeshData(mesh);\n\n        if (mesh.didViewUpdate)\n        {\n            meshData.indexSize = mesh._geometry.indices?.length;\n            meshData.vertexSize = mesh._geometry.positions?.length;\n        }\n\n        if (meshData.batched)\n        {\n            const gpuBatchableMesh = this._getBatchableMesh(mesh);\n\n            gpuBatchableMesh.setTexture(mesh._texture);\n            gpuBatchableMesh.geometry = mesh._geometry;\n\n            batcher.addToBatch(gpuBatchableMesh, instructionSet);\n        }\n        else\n        {\n            batcher.break(instructionSet);\n\n            instructionSet.add(mesh);\n        }\n    }\n\n    public updateRenderable(mesh: Mesh)\n    {\n        if (mesh.batched)\n        {\n            const gpuBatchableMesh = this._getBatchableMesh(mesh);\n\n            gpuBatchableMesh.setTexture(mesh._texture);\n\n            gpuBatchableMesh.geometry = mesh._geometry;\n\n            gpuBatchableMesh._batcher.updateElement(gpuBatchableMesh);\n        }\n    }\n\n    public execute(mesh: Mesh)\n    {\n        if (!mesh.isRenderable) return;\n\n        mesh.state.blendMode = getAdjustedBlendModeBlend(mesh.groupBlendMode, mesh.texture._source);\n\n        const localUniforms = this.localUniforms;\n\n        localUniforms.uniforms.uTransformMatrix = mesh.groupTransform;\n        localUniforms.uniforms.uRound = this.renderer._roundPixels | mesh._roundPixels;\n        localUniforms.update();\n\n        color32BitToUniform(\n            mesh.groupColorAlpha,\n            localUniforms.uniforms.uColor,\n            0\n        );\n\n        this._adaptor.execute(this, mesh);\n    }\n\n    private _getMeshData(mesh: Mesh): MeshData\n    {\n        mesh._gpuData[this.renderer.uid] ||= new MeshGpuData();\n\n        return mesh._gpuData[this.renderer.uid].meshData || this._initMeshData(mesh);\n    }\n\n    private _initMeshData(mesh: Mesh): MeshData\n    {\n        mesh._gpuData[this.renderer.uid].meshData = {\n            batched: mesh.batched,\n            indexSize: 0,\n            vertexSize: 0,\n        };\n\n        return mesh._gpuData[this.renderer.uid].meshData;\n    }\n\n    private _getBatchableMesh(mesh: Mesh): BatchableMesh\n    {\n        mesh._gpuData[this.renderer.uid] ||= new MeshGpuData();\n\n        return mesh._gpuData[this.renderer.uid].batchableMesh || this._initBatchableMesh(mesh);\n    }\n\n    private _initBatchableMesh(mesh: Mesh): BatchableMesh\n    {\n        // TODO - make this batchable graphics??\n        const gpuMesh: BatchableMesh = new BatchableMesh();\n\n        gpuMesh.renderable = mesh;\n        gpuMesh.setTexture(mesh._texture);\n        gpuMesh.transform = mesh.groupTransform;\n        gpuMesh.roundPixels = (this.renderer._roundPixels | mesh._roundPixels) as 0 | 1;\n\n        mesh._gpuData[this.renderer.uid].batchableMesh = gpuMesh;\n\n        return gpuMesh;\n    }\n\n    public destroy()\n    {\n        this.localUniforms = null;\n        this.localUniformsBindGroup = null;\n\n        this._adaptor.destroy();\n        this._adaptor = null;\n\n        this.renderer = null;\n    }\n}\n", "import { extensions } from '../../extensions/Extensions';\nimport { MeshPipe } from './shared/MeshPipe';\n\nextensions.add(MeshPipe);\n", "import { pointInTriangle } from '../../../maths/point/pointInTriangle';\nimport { Geometry } from '../../../rendering/renderers/shared/geometry/Geometry';\nimport { State } from '../../../rendering/renderers/shared/state/State';\nimport { Texture } from '../../../rendering/renderers/shared/texture/Texture';\nimport { deprecation, v8_0_0 } from '../../../utils/logging/deprecation';\nimport { ViewContainer } from '../../view/ViewContainer';\nimport { MeshGeometry } from './MeshGeometry';\nimport { type MeshGpuData } from './MeshPipe';\nimport '../init';\n\nimport type { PointData } from '../../../maths/point/PointData';\nimport type { Topology } from '../../../rendering/renderers/shared/geometry/const';\nimport type { Instruction } from '../../../rendering/renderers/shared/instructions/Instruction';\nimport type { Shader } from '../../../rendering/renderers/shared/shader/Shader';\nimport type { View } from '../../../rendering/renderers/shared/view/View';\nimport type { ContainerOptions } from '../../container/Container';\nimport type { DestroyOptions } from '../../container/destroyTypes';\n\n/**\n * Shader that uses a texture.\n * This is the default shader used by `Mesh` when no shader is provided.\n * It is a simple shader that samples a texture and applies it to the geometry.\n * @category scene\n * @advanced\n */\nexport interface TextureShader extends Shader\n{\n    /** The texture that the shader uses. */\n    texture: Texture;\n}\n\n/**\n * Constructor options used for `Mesh` instances. Extends {@link MeshViewOptions}\n * ```js\n * const mesh = new Mesh({\n *    texture: Texture.from('assets/image.png'),\n *    geometry: new PlaneGeometry(),\n *    shader: Shader.from(VERTEX, FRAGMENT),\n * });\n * ```\n * @see {@link Mesh}\n * @see {@link MeshViewOptions}\n * @category scene\n */\n\n/**\n * Options for creating a Mesh instance.\n * @category scene\n * @advanced\n * @noInheritDoc\n */\nexport interface MeshOptions<\n    GEOMETRY extends Geometry = MeshGeometry,\n    SHADER extends Shader = TextureShader\n> extends PixiMixins.MeshOptions, ContainerOptions\n{\n    /**\n     * Includes vertex positions, face indices, colors, UVs, and\n     * custom attributes within buffers, reducing the cost of passing all\n     * this data to the GPU. Can be shared between multiple Mesh objects.\n     */\n    geometry: GEOMETRY;\n    /**\n     * Represents the vertex and fragment shaders that processes the geometry and runs on the GPU.\n     * Can be shared between multiple Mesh objects.\n     */\n    shader?: SHADER | null;\n    /** The state of WebGL required to render the mesh. */\n    state?: State;\n    /** The texture that the Mesh uses. Null for non-MeshMaterial shaders */\n    texture?: Texture;\n    /** Whether or not to round the x/y position. */\n    roundPixels?: boolean;\n}\n// eslint-disable-next-line requireExport/require-export-jsdoc, requireMemberAPI/require-member-api-doc\nexport interface Mesh extends PixiMixins.Mesh, ViewContainer<MeshGpuData> {}\n\n/**\n * Base mesh class.\n *\n * This class empowers you to have maximum flexibility to render any kind of WebGL/WebGPU visuals you can think of.\n * This class assumes a certain level of WebGL/WebGPU knowledge.\n * If you know a bit this should abstract enough away to make your life easier!\n *\n * Pretty much ALL WebGL/WebGPU can be broken down into the following:\n * - Geometry - The structure and data for the mesh. This can include anything from positions, uvs, normals, colors etc..\n * - Shader - This is the shader that PixiJS will render the geometry with (attributes in the shader must match the geometry)\n * - State - This is the state of WebGL required to render the mesh.\n *\n * Through a combination of the above elements you can render anything you want, 2D or 3D!\n * @category scene\n * @advanced\n */\nexport class Mesh<\n    GEOMETRY extends Geometry = MeshGeometry,\n    SHADER extends Shader = TextureShader\n> extends ViewContainer<MeshGpuData> implements View, Instruction\n{\n    /** @internal */\n    public override readonly renderPipeId: string = 'mesh';\n    public state: State;\n\n    /** @internal */\n    public _texture: Texture;\n    /** @internal */\n    public _geometry: GEOMETRY;\n    /** @internal */\n    public _shader: SHADER | null = null;\n    /**\n     * @param {MeshOptions} options - options for the mesh instance\n     */\n    constructor(options: MeshOptions<GEOMETRY, SHADER>);\n    /** @deprecated since 8.0.0 */\n    constructor(geometry: GEOMETRY, shader: SHADER, state?: State, drawMode?: Topology);\n    constructor(...args: [MeshOptions<GEOMETRY, SHADER>] | [GEOMETRY, SHADER, State?, Topology?])\n    {\n        let options = args[0];\n\n        if (options instanceof Geometry)\n        {\n            // #if _DEBUG\n            deprecation(v8_0_0, 'Mesh: use new Mesh({ geometry, shader }) instead');\n            // #endif\n\n            options = {\n                geometry: options,\n                shader: args[1],\n            } as MeshOptions<GEOMETRY, SHADER>;\n\n            if (args[3])\n            {\n                // #if _DEBUG\n                deprecation(v8_0_0, 'Mesh: drawMode argument has been removed, use geometry.topology instead');\n                // #endif\n\n                options.geometry.topology = args[3];\n            }\n        }\n\n        const { geometry, shader, texture, roundPixels, state, ...rest } = options;\n\n        super({\n            label: 'Mesh',\n            ...rest\n        });\n\n        this.allowChildren = false;\n\n        this.shader = shader ?? null;\n        this.texture = texture ?? (shader as unknown as TextureShader)?.texture ?? Texture.WHITE;\n        this.state = state ?? State.for2d();\n\n        this._geometry = geometry;\n        this._geometry.on('update', this.onViewUpdate, this);\n\n        this.roundPixels = roundPixels ?? false;\n    }\n\n    /** Alias for {@link Mesh#shader}. */\n    get material()\n    {\n        // #if _DEBUG\n        deprecation(v8_0_0, 'mesh.material property has been removed, use mesh.shader instead');\n        // #endif\n\n        return this._shader;\n    }\n\n    /**\n     * Represents the vertex and fragment shaders that processes the geometry and runs on the GPU.\n     * Can be shared between multiple Mesh objects.\n     */\n    set shader(value: SHADER | null)\n    {\n        if (this._shader === value) return;\n\n        this._shader = value;\n        this.onViewUpdate();\n    }\n\n    get shader(): SHADER | null\n    {\n        return this._shader;\n    }\n\n    /**\n     * Includes vertex positions, face indices, colors, UVs, and\n     * custom attributes within buffers, reducing the cost of passing all\n     * this data to the GPU. Can be shared between multiple Mesh objects.\n     */\n    set geometry(value: GEOMETRY)\n    {\n        if (this._geometry === value) return;\n\n        this._geometry?.off('update', this.onViewUpdate, this);\n        value.on('update', this.onViewUpdate, this);\n\n        this._geometry = value;\n        this.onViewUpdate();\n    }\n\n    get geometry()\n    {\n        return this._geometry;\n    }\n\n    /** The texture that the Mesh uses. Null for non-MeshMaterial shaders */\n    set texture(value: Texture)\n    {\n        value ||= Texture.EMPTY;\n\n        const currentTexture = this._texture;\n\n        if (currentTexture === value) return;\n\n        if (currentTexture && currentTexture.dynamic) currentTexture.off('update', this.onViewUpdate, this);\n        if (value.dynamic) value.on('update', this.onViewUpdate, this);\n\n        if (this.shader)\n        {\n            (this.shader as unknown as TextureShader).texture = value;\n        }\n\n        this._texture = value;\n        this.onViewUpdate();\n    }\n\n    get texture()\n    {\n        return this._texture;\n    }\n\n    get batched()\n    {\n        if (this._shader) return false;\n\n        // The state must be compatible with the batcher pipe.\n        // It isn't compatible if depth test or culling is enabled.\n        if ((this.state.data & 0b001100) !== 0) return false;\n\n        if (this._geometry instanceof MeshGeometry)\n        {\n            if (this._geometry.batchMode === 'auto')\n            {\n                return this._geometry.positions.length / 2 <= 100;\n            }\n\n            return this._geometry.batchMode === 'batch';\n        }\n\n        return false;\n    }\n\n    /**\n     * The local bounds of the mesh.\n     * @type {Bounds}\n     */\n    override get bounds()\n    {\n        return this._geometry.bounds;\n    }\n\n    /**\n     * Update local bounds of the mesh.\n     * @private\n     */\n    protected updateBounds()\n    {\n        this._bounds = this._geometry.bounds;\n    }\n\n    /**\n     * Checks if the object contains the given point.\n     * @param point - The point to check\n     */\n    public override containsPoint(point: PointData)\n    {\n        const { x, y } = point;\n\n        if (!this.bounds.containsPoint(x, y)) return false;\n\n        const vertices = this.geometry.getBuffer('aPosition').data;\n\n        const step = this.geometry.topology === 'triangle-strip' ? 3 : 1;\n\n        if (this.geometry.getIndex())\n        {\n            const indices = this.geometry.getIndex().data;\n            const len = indices.length;\n\n            for (let i = 0; i + 2 < len; i += step)\n            {\n                const ind0 = indices[i] * 2;\n                const ind1 = indices[i + 1] * 2;\n                const ind2 = indices[i + 2] * 2;\n\n                if (pointInTriangle(\n                    x, y,\n                    vertices[ind0],\n                    vertices[ind0 + 1],\n                    vertices[ind1],\n                    vertices[ind1 + 1],\n                    vertices[ind2],\n                    vertices[ind2 + 1],\n                ))\n                {\n                    return true;\n                }\n            }\n        }\n        else\n        {\n            const len = vertices.length / 2; // Each vertex has 2 coordinates, x and y\n\n            for (let i = 0; i + 2 < len; i += step)\n            {\n                const ind0 = i * 2;\n                const ind1 = (i + 1) * 2;\n                const ind2 = (i + 2) * 2;\n\n                if (pointInTriangle(\n                    x, y,\n                    vertices[ind0],\n                    vertices[ind0 + 1],\n                    vertices[ind1],\n                    vertices[ind1 + 1],\n                    vertices[ind2],\n                    vertices[ind2 + 1],\n                ))\n                {\n                    return true;\n                }\n            }\n        }\n\n        return false;\n    }\n\n    /**\n     * Destroys this sprite renderable and optionally its texture.\n     * @param options - Options parameter. A boolean will act as if all options\n     *  have been set to that value\n     * @example\n     * mesh.destroy();\n     * mesh.destroy(true);\n     * mesh.destroy({ texture: true, textureSource: true });\n     */\n    public override destroy(options?: DestroyOptions): void\n    {\n        super.destroy(options);\n\n        const destroyTexture = typeof options === 'boolean' ? options : options?.texture;\n\n        if (destroyTexture)\n        {\n            const destroyTextureSource = typeof options === 'boolean' ? options : options?.textureSource;\n\n            this._texture.destroy(destroyTextureSource);\n        }\n\n        this._geometry?.off('update', this.onViewUpdate, this);\n\n        this._texture = null;\n        this._geometry = null;\n        this._shader = null;\n    }\n}\n", "import { Texture } from '../../rendering/renderers/shared/texture/Texture';\nimport { UPDATE_PRIORITY } from '../../ticker/const';\nimport { Ticker } from '../../ticker/Ticker';\nimport { type DestroyOptions } from '../container/destroyTypes';\nimport { Sprite } from '../sprite/Sprite';\n\nimport type { SpriteOptions } from '../sprite/Sprite';\n\n/**\n * A collection of textures or frame objects that can be used to create an `AnimatedSprite`.\n * @see {@link AnimatedSprite}\n * @category scene\n * @standard\n */\nexport type AnimatedSpriteFrames = Texture[] | FrameObject[];\n\n/**\n * Constructor options used for `AnimatedSprite` instances. Allows configuration of animation\n * playback, speed, and texture frames.\n * @example\n * ```ts\n * // Create a basic animated sprite\n * const sprite = new AnimatedSprite({\n *     textures: [\n *         Texture.from('walk1.png'),\n *         Texture.from('walk2.png'),\n *         Texture.from('walk3.png')\n *     ],\n *     animationSpeed: 0.1,\n *     loop: true\n * });\n *\n * // Create with spritesheet frames and callbacks\n * const sheet = await Assets.load('character.json');\n * const animatedSprite = new AnimatedSprite({\n *     textures: sheet.animations['walk'],\n *     autoPlay: true,\n *     updateAnchor: true,\n *     onComplete: () => console.log('Animation complete'),\n *     onFrameChange: (frame) => console.log('Current frame:', frame),\n *     onLoop: () => console.log('Animation looped')\n * });\n *\n * // Create with custom timing for each frame\n * const customTimingSprite = new AnimatedSprite({\n *     textures: [\n *         { texture: Texture.from('frame1.png'), time: 100 },\n *         { texture: Texture.from('frame2.png'), time: 200 },\n *         { texture: Texture.from('frame3.png'), time: 300 }\n *     ],\n *     autoUpdate: true\n * });\n * ```\n * @see {@link AnimatedSprite} For the main sprite class\n * @see {@link Spritesheet} For loading animations from spritesheets\n * @category scene\n * @standard\n * @noInheritDoc\n */\nexport interface AnimatedSpriteOptions extends PixiMixins.AnimatedSpriteOptions, Omit<SpriteOptions, 'texture'>\n{\n    /**\n     * The speed that the AnimatedSprite will play at. Higher is faster, lower is slower.\n     * @example\n     * ```ts\n     * // Create an AnimatedSprite with a slower animation speed\n     * const animation = new AnimatedSprite({\n     *     textures: [Texture.from('frame1.png'), Texture.from('frame2.png')],\n     *     animationSpeed: 0.5 // Slower animation\n     * });\n     *\n     * // Update the animation speed to make it faster\n     * animation.animationSpeed = 2; // Faster animation\n     * ```\n     * @default 1\n     */\n    animationSpeed?: number;\n\n    /**\n     * Whether to start the animation immediately on creation.\n     * If set to `true`, the animation will start playing as soon as the\n     * `AnimatedSprite` is created.\n     * If set to `false`, you will need to call the `play` method to start the animation.\n     * @example\n     * ```ts\n     * // Create an AnimatedSprite that starts playing immediately\n     * const animation = new AnimatedSprite({\n     *     textures: [Texture.from('frame1.png'), Texture.from('frame2.png')],\n     *     autoPlay: true\n     * });\n     *\n     * // Create an AnimatedSprite that does not start playing immediately\n     * const animation = new AnimatedSprite({\n     *     textures: [Texture.from('frame1.png'), Texture.from('frame2.png')],\n     *     autoPlay: false\n     * });\n     * animation.play(); // Start the animation manually\n     * ```\n     * @default false\n     */\n    autoPlay?: boolean;\n\n    /**\n     * Whether to use Ticker.shared to auto update animation time.\n     * This is useful for animations that need to be updated every frame.\n     * If set to `false`, you will need to manually call the `update` method\n     * to update the animation.\n     * @example\n     * ```ts\n     * // Create an AnimatedSprite that does not auto update\n     * const animation = new AnimatedSprite({\n     *     textures: [Texture.from('frame1.png'), Texture.from('frame2.png')],\n     *     autoUpdate: false\n     * });\n     *\n     * // Manually update the animation in your game loop\n     * ticker.add((ticker) => {\n     *     animation.update(ticker);\n     * }\n     * ```\n     * @default true\n     */\n    autoUpdate?: boolean;\n\n    /**\n     * Whether or not the animation repeats after playing.\n     * @default true\n     */\n    loop?: boolean;\n\n    /**\n     * User-assigned function to call when an AnimatedSprite finishes playing.\n     * @example\n     * ```ts\n     * animation.onComplete = () => {\n     *     // Finished!\n     *     console.log('Animation complete');\n     * };\n     * ```\n     * @default null\n     * @see {@link AnimatedSprite#onFrameChange} For the callback when the frame changes\n     * @see {@link AnimatedSprite#onLoop} For the callback when the animation loops\n     * @see {@link AnimatedSprite#loop} For the loop behavior of the animation\n     */\n    onComplete?: () => void;\n\n    /**\n     * User-assigned function to call when an AnimatedSprite changes which texture is being rendered.\n     * @example\n     * ```ts\n     * animation.onFrameChange = (currentFrame) => {\n     *     // Updated!\n     *     console.log('Current frame:', currentFrame);\n     * };\n     * ```\n     * @see {@link AnimatedSprite#onComplete} For the callback when the animation finishes\n     * @see {@link AnimatedSprite#onLoop} For the callback when the animation loops\n     * @default null\n     */\n    onFrameChange?: (currentFrame: number) => void;\n\n    /**\n     * User-assigned function to call when `loop` is true,\n     * and an AnimatedSprite is played and loops around to start again.\n     * @example\n     * ```ts\n     * animation.onLoop = () => {\n     *     // Looped!\n     * };\n     * ```\n     * @see {@link AnimatedSprite#onComplete} For the callback when the animation finishes\n     * @see {@link AnimatedSprite#onFrameChange} For the callback when the frame changes\n     * @see {@link AnimatedSprite#loop} For the loop behavior of the animation\n     * @default null\n     */\n    onLoop?: () => void;\n\n    /**\n     * An array of {@link Texture} or frame objects that make up the animation.\n     * @example\n     * ```ts\n     * // Create an AnimatedSprite with an array of textures\n     * const animation = new AnimatedSprite({\n     *     textures: [\n     *         Texture.from('frame1.png'),\n     *         Texture.from('frame2.png'),\n     *         Texture.from('frame3.png')\n     *     ]\n     * });\n     * * // Create an AnimatedSprite with an array of frame objects\n     * const animation = new AnimatedSprite({\n     *     textures: [\n     *         { texture: Texture.from('frame1.png'), time: 100 },\n     *         { texture: Texture.from('frame2.png'), time: 200 },\n     *         { texture: Texture.from('frame3.png'), time: 300 }\n     *     ]\n     * });\n     * ```\n     * @see {@link AnimatedSpriteFrames} For the type of the textures array\n     */\n    textures: AnimatedSpriteFrames;\n\n    /**\n     * Update anchor to [Texture's defaultAnchor]{@link Texture#defaultAnchor} when frame changes.\n     *\n     * Useful with [sprite sheet animations]{@link Spritesheet#animations} created with tools.\n     * Changing anchor for each frame allows to pin sprite origin to certain moving feature\n     * of the frame (e.g. left foot).\n     * > [!NOTE] Enabling this will override any previously set `anchor` on each frame change.\n     * @example\n     * ```ts\n     * // Create an AnimatedSprite with updateAnchor enabled\n     * const animation = new AnimatedSprite({\n     *     textures: [Texture.from('frame1.png'), Texture.from('frame2.png')],\n     *     updateAnchor: true\n     * });\n     * ```\n     * @see {@link Texture#defaultAnchor} For the default anchor of the texture\n     * @default false\n     */\n    updateAnchor?: boolean;\n}\n// eslint-disable-next-line requireExport/require-export-jsdoc, requireMemberAPI/require-member-api-doc\nexport interface AnimatedSprite extends PixiMixins.AnimatedSprite, Sprite {}\n\n/**\n * An AnimatedSprite is a simple way to display an animation depicted by a list of textures.\n * @example\n * ```js\n * import { AnimatedSprite, Texture } from 'pixi.js';\n *\n * const alienImages = [\n *     'image_sequence_01.png',\n *     'image_sequence_02.png',\n *     'image_sequence_03.png',\n *     'image_sequence_04.png',\n * ];\n * const textureArray = [];\n *\n * for (let i = 0; i < 4; i++)\n * {\n *     const texture = Texture.from(alienImages[i]);\n *     textureArray.push(texture);\n * }\n *\n * const animatedSprite = new AnimatedSprite(textureArray);\n * ```\n *\n * The more efficient and simpler way to create an animated sprite is using a {@link Spritesheet}\n * containing the animation definitions:\n * @example\n * ```js\n * import { AnimatedSprite, Assets } from 'pixi.js';\n *\n * const sheet = await Assets.load('assets/spritesheet.json');\n * animatedSprite = new AnimatedSprite(sheet.animations['image_sequence']);\n * ```\n * @category scene\n * @standard\n */\nexport class AnimatedSprite extends Sprite\n{\n    /**\n     * The speed that the AnimatedSprite will play at. Higher is faster, lower is slower.\n     * @example\n     * ```ts\n     * // Create a sprite with normal speed animation\n     * const sprite = new AnimatedSprite({\n     *     textures: [\n     *         Texture.from('walk1.png'),\n     *         Texture.from('walk2.png'),\n     *         Texture.from('walk3.png')\n     *     ],\n     *     animationSpeed: 1 // Default speed\n     * });\n     *\n     * // Slow down the animation\n     * sprite.animationSpeed = 0.5;\n     *\n     * // Speed up the animation\n     * sprite.animationSpeed = 2;\n     *\n     * // Reverse the animation\n     * sprite.animationSpeed = -1;\n     *\n     * // Stop the animation\n     * sprite.animationSpeed = 0;\n     * ```\n     * @default 1\n     * @see {@link AnimatedSprite#currentFrame} For the current frame index\n     * @see {@link AnimatedSprite#totalFrames} For total number of frames\n     */\n    public animationSpeed: number;\n\n    /**\n     * Whether or not the animation repeats after playing.\n     * When true, the animation will restart from the beginning after reaching the last frame.\n     * When false, the animation will stop on the last frame.\n     * @example\n     * ```ts\n     * // Create a looping animation\n     * const sprite = new AnimatedSprite({\n     *     textures: [\n     *         Texture.from('walk1.png'),\n     *         Texture.from('walk2.png'),\n     *         Texture.from('walk3.png')\n     *     ],\n     *     loop: true // Will repeat\n     * });\n     *\n     * // Play animation once\n     * sprite.loop = false;\n     * sprite.onComplete = () => console.log('Animation finished!');\n     * sprite.play();\n     *\n     * // Toggle looping at runtime\n     * sprite.loop = !sprite.loop;\n     * ```\n     * @default true\n     * @see {@link AnimatedSprite#onComplete} Callback when non-looping animation completes\n     * @see {@link AnimatedSprite#onLoop} Callback when animation loops\n     */\n    public loop: boolean;\n\n    /**\n     * Update anchor to [Texture's defaultAnchor]{@link Texture#defaultAnchor} when frame changes.\n     *\n     * Useful with [sprite sheet animations]{@link Spritesheet#animations} created with tools.\n     * Changing anchor for each frame allows to pin sprite origin to certain moving feature\n     * of the frame (e.g. left foot).\n     *\n     * > [!NOTE] Enabling this will override any previously set `anchor` on each frame change.\n     * @default false\n     */\n    public updateAnchor: boolean;\n\n    /**\n     * User-assigned function to call when an AnimatedSprite finishes playing.\n     *\n     * This function is called when the animation reaches the end and stops playing.\n     * If the animation is set to loop, this function will not be called.\n     * @example\n     * ```ts\n     * animation.onComplete = () => {\n     *     // Finished!\n     * };\n     * ```\n     */\n    public onComplete?: () => void;\n\n    /**\n     * User-assigned function to call when an AnimatedSprite changes which texture is being rendered.\n     *\n     * This function is called every time the current frame changes during playback.\n     * It receives the current frame index as an argument.\n     * @example\n     * animation.onFrameChange = () => {\n     *     // Updated!\n     * };\n     */\n    public onFrameChange?: (currentFrame: number) => void;\n\n    /**\n     * User-assigned function to call when `loop` is true, and an AnimatedSprite is played and\n     * loops around to start again.\n     * @example\n     * animation.onLoop = () => {\n     *     // Looped!\n     * };\n     */\n    public onLoop?: () => void;\n\n    private _playing: boolean;\n    private _textures: Texture[];\n    private _durations: number[];\n\n    /**\n     * `true` uses Ticker.shared to auto update animation time.\n     * @default true\n     */\n    private _autoUpdate: boolean;\n\n    /**\n     * `true` if the instance is currently connected to Ticker.shared to auto update animation time.\n     * @default false\n     */\n    private _isConnectedToTicker: boolean;\n\n    /** Elapsed time since animation has been started, used internally to display current texture. */\n    private _currentTime: number;\n\n    /** The texture index that was displayed last time. */\n    private _previousFrame: number;\n\n    /**\n     * @param frames - Collection of textures or frames to use.\n     * @param autoUpdate - Whether to use Ticker.shared to auto update animation time.\n     */\n    constructor(frames: AnimatedSpriteFrames, autoUpdate?: boolean);\n    /**\n     * @param options - The options for the AnimatedSprite.\n     */\n    constructor(options: AnimatedSpriteOptions);\n\n    constructor(...args: [AnimatedSpriteOptions?] | [AnimatedSpriteFrames?] | [AnimatedSpriteFrames?, boolean?])\n    {\n        let options = args[0] as AnimatedSpriteOptions;\n\n        if (Array.isArray(args[0]))\n        {\n            options = {\n                textures: args[0] as AnimatedSpriteFrames,\n                autoUpdate: args[1] as boolean,\n            };\n        }\n\n        const {\n            animationSpeed = 1,\n            autoPlay = false,\n            autoUpdate = true,\n            loop = true,\n            onComplete = null,\n            onFrameChange = null,\n            onLoop = null,\n            textures,\n            updateAnchor = false,\n            ...rest\n        } = options;\n        const [firstFrame] = textures;\n\n        super({\n            ...rest,\n            texture: firstFrame instanceof Texture ? firstFrame : firstFrame.texture,\n        });\n\n        this._textures = null;\n        this._durations = null;\n        this._autoUpdate = autoUpdate;\n        this._isConnectedToTicker = false;\n\n        this.animationSpeed = animationSpeed;\n        this.loop = loop;\n        this.updateAnchor = updateAnchor;\n        this.onComplete = onComplete;\n        this.onFrameChange = onFrameChange;\n        this.onLoop = onLoop;\n\n        this._currentTime = 0;\n\n        this._playing = false;\n        this._previousFrame = null;\n\n        this.textures = textures;\n\n        if (autoPlay)\n        {\n            this.play();\n        }\n    }\n\n    /**\n     * Stops the animation playback and freezes the current frame.\n     * Does not reset the current frame or animation progress.\n     * @example\n     * ```ts\n     * // Create an animated sprite\n     * const sprite = new AnimatedSprite({\n     *     textures: [\n     *         Texture.from('walk1.png'),\n     *         Texture.from('walk2.png'),\n     *         Texture.from('walk3.png')\n     *     ],\n     *     autoPlay: true\n     * });\n     *\n     * // Stop at current frame\n     * sprite.stop();\n     *\n     * // Stop at specific frame\n     * sprite.gotoAndStop(1); // Stops at second frame\n     *\n     * // Stop and reset\n     * sprite.stop();\n     * sprite.currentFrame = 0;\n     *\n     * // Stop with completion check\n     * if (sprite.playing) {\n     *     sprite.stop();\n     *     sprite.onComplete?.();\n     * }\n     * ```\n     * @see {@link AnimatedSprite#play} For starting playback\n     * @see {@link AnimatedSprite#gotoAndStop} For stopping at a specific frame\n     * @see {@link AnimatedSprite#playing} For checking play state\n     */\n    public stop(): void\n    {\n        if (!this._playing)\n        {\n            return;\n        }\n\n        this._playing = false;\n        if (this._autoUpdate && this._isConnectedToTicker)\n        {\n            Ticker.shared.remove(this.update, this);\n            this._isConnectedToTicker = false;\n        }\n    }\n\n    /**\n     * Starts or resumes the animation playback.\n     * If the animation was previously stopped, it will continue from where it left off.\n     * @example\n     * ```ts\n     * // Basic playback\n     * const sprite = new AnimatedSprite({\n     *     textures: [\n     *         Texture.from('walk1.png'),\n     *         Texture.from('walk2.png'),\n     *     ],\n     *     autoPlay: false\n     * });\n     * sprite.play();\n     *\n     * // Play after stopping\n     * sprite.stop();\n     * sprite.currentFrame = 0; // Reset to start\n     * sprite.play(); // Play from beginning\n     *\n     * // Play with auto-update disabled\n     * sprite.autoUpdate = false;\n     * sprite.play();\n     * app.ticker.add(() => {\n     *     sprite.update(app.ticker); // Manual updates\n     * });\n     * ```\n     * @see {@link AnimatedSprite#stop} For stopping playback\n     * @see {@link AnimatedSprite#gotoAndPlay} For playing from a specific frame\n     * @see {@link AnimatedSprite#playing} For checking play state\n     */\n    public play(): void\n    {\n        if (this._playing)\n        {\n            return;\n        }\n\n        this._playing = true;\n        if (this._autoUpdate && !this._isConnectedToTicker)\n        {\n            Ticker.shared.add(this.update, this, UPDATE_PRIORITY.HIGH);\n            this._isConnectedToTicker = true;\n        }\n    }\n\n    /**\n     * Stops the AnimatedSprite and sets it to a specific frame.\n     * @example\n     * ```ts\n     * // Create an animated sprite\n     * const sprite = new AnimatedSprite({\n     *     textures: [\n     *         Texture.from('walk1.png'),\n     *         Texture.from('walk2.png'),\n     *         Texture.from('walk3.png'),\n     *     ]\n     * });\n     *\n     * // Go to specific frames\n     * sprite.gotoAndStop(0);  // First frame\n     * sprite.gotoAndStop(2);  // Third frame\n     *\n     * // Jump to last frame\n     * sprite.gotoAndStop(sprite.totalFrames - 1);\n     * ```\n     * @param frameNumber - Frame index to stop at (0-based)\n     * @throws {Error} If frameNumber is out of bounds\n     * @see {@link AnimatedSprite#gotoAndPlay} For going to a frame and playing\n     * @see {@link AnimatedSprite#currentFrame} For getting/setting current frame\n     * @see {@link AnimatedSprite#totalFrames} For total number of frames\n     */\n    public gotoAndStop(frameNumber: number): void\n    {\n        this.stop();\n        this.currentFrame = frameNumber;\n    }\n\n    /**\n     * Goes to a specific frame and begins playing the AnimatedSprite from that point.\n     * Combines frame navigation and playback start in one operation.\n     * @example\n     * ```ts\n     * // Start from specific frame\n     * sprite.gotoAndPlay(1); // Starts playing from second frame\n     * ```\n     * @param frameNumber - Frame index to start playing from (0-based)\n     * @throws {Error} If frameNumber is out of bounds\n     * @see {@link AnimatedSprite#gotoAndStop} For going to a frame without playing\n     * @see {@link AnimatedSprite#play} For playing from current frame\n     * @see {@link AnimatedSprite#currentFrame} For getting/setting current frame\n     */\n    public gotoAndPlay(frameNumber: number): void\n    {\n        this.currentFrame = frameNumber;\n        this.play();\n    }\n\n    /**\n     * Updates the object transform for rendering. This method handles animation timing, frame updates,\n     * and manages looping behavior.\n     * @example\n     * ```ts\n     * // Create an animated sprite with manual updates\n     * const sprite = new AnimatedSprite({\n     *     textures: [\n     *         Texture.from('frame1.png'),\n     *         Texture.from('frame2.png'),\n     *         Texture.from('frame3.png')\n     *     ],\n     *     autoUpdate: false // Disable automatic updates\n     * });\n     *\n     * // Manual update with app ticker\n     * app.ticker.add((ticker) => {\n     *     sprite.update(ticker);\n     * });\n     * ```\n     * @param ticker - The ticker to use for updating the animation timing\n     * @see {@link AnimatedSprite#autoUpdate} For controlling automatic updates\n     * @see {@link AnimatedSprite#animationSpeed} For controlling animation speed\n     * @see {@link Ticker} For timing system details\n     */\n    public update(ticker: Ticker): void\n    {\n        // If the animation isn't playing, no update is needed.\n        if (!this._playing)\n        {\n            return;\n        }\n\n        // Calculate elapsed time based on ticker's deltaTime and animation speed.\n        const deltaTime = ticker.deltaTime;\n        const elapsed = this.animationSpeed * deltaTime;\n        const previousFrame = this.currentFrame;\n\n        // If there are specific durations set for each frame:\n        if (this._durations !== null)\n        {\n            // Calculate the lag for the current frame based on the current time.\n            let lag = this._currentTime % 1 * this._durations[this.currentFrame];\n\n            // Adjust the lag based on elapsed time.\n            lag += elapsed / 60 * 1000;\n\n            // If the lag is negative, adjust the current time and the lag.\n            while (lag < 0)\n            {\n                this._currentTime--;\n                lag += this._durations[this.currentFrame];\n            }\n\n            const sign = Math.sign(this.animationSpeed * deltaTime);\n\n            // Floor the current time to get a whole number frame.\n            this._currentTime = Math.floor(this._currentTime);\n\n            // Adjust the current time and the lag until the lag is less than the current frame's duration.\n            while (lag >= this._durations[this.currentFrame])\n            {\n                lag -= this._durations[this.currentFrame] * sign;\n                this._currentTime += sign;\n            }\n\n            // Adjust the current time based on the lag and current frame's duration.\n            this._currentTime += lag / this._durations[this.currentFrame];\n        }\n        else\n        {\n            // If no specific durations set, simply adjust the current time by elapsed time.\n            this._currentTime += elapsed;\n        }\n\n        // Handle scenarios when animation reaches the start or the end.\n        if (this._currentTime < 0 && !this.loop)\n        {\n            // If the animation shouldn't loop and it reaches the start, go to the first frame.\n            this.gotoAndStop(0);\n\n            // If there's an onComplete callback, call it.\n            if (this.onComplete)\n            {\n                this.onComplete();\n            }\n        }\n        else if (this._currentTime >= this._textures.length && !this.loop)\n        {\n            // If the animation shouldn't loop and it reaches the end, go to the last frame.\n            this.gotoAndStop(this._textures.length - 1);\n\n            // If there's an onComplete callback, call it.\n            if (this.onComplete)\n            {\n                this.onComplete();\n            }\n        }\n        else if (previousFrame !== this.currentFrame)\n        {\n            // If the current frame is different from the last update, handle loop scenarios.\n            if (this.loop && this.onLoop)\n            {\n                if ((this.animationSpeed > 0 && this.currentFrame < previousFrame)\n                    || (this.animationSpeed < 0 && this.currentFrame > previousFrame))\n                {\n                    // If the animation loops, and there's an onLoop callback, call it.\n                    this.onLoop();\n                }\n            }\n\n            // Update the texture for the current frame.\n            this._updateTexture();\n        }\n    }\n\n    /** Updates the displayed texture to match the current frame index. */\n    private _updateTexture(): void\n    {\n        const currentFrame = this.currentFrame;\n\n        if (this._previousFrame === currentFrame)\n        {\n            return;\n        }\n\n        this._previousFrame = currentFrame;\n\n        this.texture = this._textures[currentFrame];\n\n        if (this.updateAnchor && this.texture.defaultAnchor)\n        {\n            this.anchor.copyFrom(this.texture.defaultAnchor);\n        }\n\n        if (this.onFrameChange)\n        {\n            this.onFrameChange(this.currentFrame);\n        }\n    }\n\n    /**\n     * Stops the AnimatedSprite and destroys it.\n     * This method stops the animation playback, removes it from the ticker,\n     * and cleans up any resources associated with the sprite.\n     * @param options - Options for destroying the sprite, such as whether to remove from parent\n     * @example\n     * ```ts\n     * // Destroy the sprite when done\n     * sprite.destroy();\n     * // Or with options\n     * sprite.destroy({ children: true, texture: true, textureSource: true });\n     * ```\n     */\n    public destroy(options: DestroyOptions = false): void\n    {\n        const destroyTexture = typeof options === 'boolean' ? options : options?.texture;\n\n        if (destroyTexture)\n        {\n            const destroyTextureSource = typeof options === 'boolean' ? options : options?.textureSource;\n\n            this._textures.forEach((texture) =>\n            {\n                // the current texture will be destroyed by the base sprite class\n                if (this.texture !== texture)\n                {\n                    texture.destroy(destroyTextureSource);\n                }\n            });\n        }\n        this._textures = [];\n        this._durations = null;\n\n        this.stop();\n        super.destroy(options);\n\n        this.onComplete = null;\n        this.onFrameChange = null;\n        this.onLoop = null;\n    }\n\n    /**\n     * A short hand way of creating an AnimatedSprite from an array of frame ids.\n     * Uses texture frames from the cache to create an animation sequence.\n     * @example\n     * ```ts\n     * // Create from frame IDs\n     * const frameIds = [\n     *     'walk_001.png',\n     *     'walk_002.png',\n     *     'walk_003.png'\n     * ];\n     *\n     * const walkingAnimation = AnimatedSprite.fromFrames(frameIds);\n     * walkingAnimation.play();\n     * ```\n     * @param frames - The array of frame ids to use for the animation\n     * @returns A new animated sprite using the frames\n     * @see {@link Texture.from} For texture creation from frames\n     * @see {@link Spritesheet} For loading spritesheets\n     */\n    public static fromFrames(frames: string[]): AnimatedSprite\n    {\n        const textures = [];\n\n        for (let i = 0; i < frames.length; ++i)\n        {\n            textures.push(Texture.from(frames[i]));\n        }\n\n        return new AnimatedSprite(textures);\n    }\n\n    /**\n     * A short hand way of creating an AnimatedSprite from an array of image urls.\n     * Each image will be used as a frame in the animation.\n     * @example\n     * ```ts\n     * // Create from image URLs\n     * const images = [\n     *     'assets/walk1.png',\n     *     'assets/walk2.png',\n     *     'assets/walk3.png'\n     * ];\n     *\n     * const walkingSprite = AnimatedSprite.fromImages(images);\n     * walkingSprite.play();\n     * ```\n     * @param images - The array of image urls to use as frames\n     * @returns A new animated sprite using the images as frames\n     * @see {@link Assets} For asset loading and management\n     * @see {@link Texture.from} For texture creation from images\n     */\n    public static fromImages(images: string[]): AnimatedSprite\n    {\n        const textures = [];\n\n        for (let i = 0; i < images.length; ++i)\n        {\n            textures.push(Texture.from(images[i]));\n        }\n\n        return new AnimatedSprite(textures);\n    }\n\n    /**\n     * The total number of frames in the AnimatedSprite. This is the same as number of textures\n     * assigned to the AnimatedSprite.\n     * @example\n     * ```ts\n     * // Create an animated sprite\n     * const sprite = new AnimatedSprite({\n     *     textures: [\n     *         Texture.from('frame1.png'),\n     *         Texture.from('frame2.png'),\n     *         Texture.from('frame3.png')\n     *     ]\n     * });\n     *\n     * // Get total frames\n     * console.log(sprite.totalFrames); // Outputs: 3\n     *\n     * // Use with frame navigation\n     * sprite.gotoAndStop(sprite.totalFrames - 1); // Go to last frame\n     * ```\n     * @readonly\n     * @see {@link AnimatedSprite#currentFrame} For the current frame index\n     * @see {@link AnimatedSprite#textures} For the array of textures\n     * @returns {number} The total number of frames\n     */\n    get totalFrames(): number\n    {\n        return this._textures.length;\n    }\n\n    /**\n     * The array of textures or frame objects used for the animation sequence.\n     * Can be set to either an array of Textures or an array of FrameObjects with custom timing.\n     * @example\n     * ```ts\n     * // Update textures at runtime\n     * sprite.textures = [\n     *     Texture.from('run1.png'),\n     *     Texture.from('run2.png')\n     * ];\n     *\n     * // Use custom frame timing\n     * sprite.textures = [\n     *     { texture: Texture.from('explosion1.png'), time: 100 },\n     *     { texture: Texture.from('explosion2.png'), time: 200 },\n     *     { texture: Texture.from('explosion3.png'), time: 300 }\n     * ];\n     *\n     * // Use with spritesheet\n     * const sheet = await Assets.load('animations.json');\n     * sprite.textures = sheet.animations['walk'];\n     * ```\n     * @type {AnimatedSpriteFrames}\n     * @see {@link FrameObject} For frame timing options\n     * @see {@link Spritesheet} For loading from spritesheets\n     */\n    get textures(): AnimatedSpriteFrames\n    {\n        return this._textures;\n    }\n\n    set textures(value: AnimatedSpriteFrames)\n    {\n        if (value[0] instanceof Texture)\n        {\n            this._textures = value as Texture[];\n            this._durations = null;\n        }\n        else\n        {\n            this._textures = [];\n            this._durations = [];\n\n            for (let i = 0; i < value.length; i++)\n            {\n                this._textures.push((value[i] as FrameObject).texture);\n                this._durations.push((value[i] as FrameObject).time);\n            }\n        }\n        this._previousFrame = null;\n        this.gotoAndStop(0);\n        this._updateTexture();\n    }\n\n    /**\n     * Gets or sets the current frame index of the animation.\n     * When setting, the value will be clamped between 0 and totalFrames - 1.\n     * @example\n     * ```ts\n     * // Create an animated sprite\n     * const sprite = new AnimatedSprite({\n     *     textures: [\n     *         Texture.from('walk1.png'),\n     *         Texture.from('walk2.png'),\n     *         Texture.from('walk3.png')\n     *     ]\n     * });\n     *\n     * // Get current frame\n     * console.log(sprite.currentFrame); // 0\n     *\n     * // Set specific frame\n     * sprite.currentFrame = 1; // Show second frame\n     *\n     * // Use with frame callbacks\n     * sprite.onFrameChange = (frame) => {\n     *     console.log(`Now showing frame: ${frame}`);\n     * };\n     * sprite.currentFrame = 2;\n     * ```\n     * @throws {Error} If attempting to set a frame index out of bounds\n     * @see {@link AnimatedSprite#totalFrames} For the total number of frames\n     * @see {@link AnimatedSprite#gotoAndPlay} For playing from a specific frame\n     * @see {@link AnimatedSprite#gotoAndStop} For stopping at a specific frame\n     */\n    get currentFrame(): number\n    {\n        let currentFrame = Math.floor(this._currentTime) % this._textures.length;\n\n        if (currentFrame < 0)\n        {\n            currentFrame += this._textures.length;\n        }\n\n        return currentFrame;\n    }\n\n    set currentFrame(value: number)\n    {\n        if (value < 0 || value > this.totalFrames - 1)\n        {\n            throw new Error(`[AnimatedSprite]: Invalid frame index value ${value}, `\n                + `expected to be between 0 and totalFrames ${this.totalFrames}.`);\n        }\n\n        const previousFrame = this.currentFrame;\n\n        this._currentTime = value;\n\n        if (previousFrame !== this.currentFrame)\n        {\n            this._updateTexture();\n        }\n    }\n\n    /**\n     * Indicates if the AnimatedSprite is currently playing.\n     * This is a read-only property that reflects the current playback state.\n     * @example\n     * ```ts\n     * // Check if animation is playing\n     * console.log('Playing:', sprite.playing); // true\n     *\n     * // Use with play control\n     * if (!sprite.playing) {\n     *     sprite.play();\n     * }\n     * ```\n     * @readonly\n     * @returns {boolean} True if the animation is currently playing\n     * @see {@link AnimatedSprite#play} For starting playback\n     * @see {@link AnimatedSprite#stop} For stopping playback\n     * @see {@link AnimatedSprite#loop} For controlling looping behavior\n     */\n    get playing(): boolean\n    {\n        return this._playing;\n    }\n\n    /**\n     * Controls whether the animation automatically updates using the shared ticker.\n     * When enabled, the animation will update on each frame. When disabled, you must\n     * manually call update() to advance the animation.\n     * @example\n     * ```ts\n     * // Create sprite with auto-update disabled\n     * const sprite = new AnimatedSprite({\n     *     textures: [],\n     *     autoUpdate: false\n     * });\n     *\n     * // Manual update with app ticker\n     * app.ticker.add((ticker) => {\n     *     sprite.update(ticker);\n     * });\n     *\n     * // Enable auto-update later\n     * sprite.autoUpdate = true;\n     * ```\n     * @default true\n     * @see {@link AnimatedSprite#update} For manual animation updates\n     * @see {@link Ticker} For the timing system\n     */\n    get autoUpdate(): boolean\n    {\n        return this._autoUpdate;\n    }\n\n    set autoUpdate(value: boolean)\n    {\n        if (value !== this._autoUpdate)\n        {\n            this._autoUpdate = value;\n\n            if (!this._autoUpdate && this._isConnectedToTicker)\n            {\n                Ticker.shared.remove(this.update, this);\n                this._isConnectedToTicker = false;\n            }\n            else if (this._autoUpdate && !this._isConnectedToTicker && this._playing)\n            {\n                Ticker.shared.add(this.update, this);\n                this._isConnectedToTicker = true;\n            }\n        }\n    }\n}\n\n/**\n * A reference to a frame in an {@link AnimatedSprite}\n * @category scene\n * @advanced\n */\nexport interface FrameObject\n{\n    /** The {@link Texture} of the frame. */\n    texture: Texture;\n\n    /** The duration of the frame, in milliseconds. */\n    time: number;\n}\n", "import { Matrix } from '../../maths/matrix/Matrix';\nimport { ObservablePoint } from '../../maths/point/ObservablePoint';\n\nimport type { Observer } from '../../maths/point/ObservablePoint';\n\n/**\n * Options for the {@link Transform} constructor.\n * @category utils\n * @advanced\n */\nexport interface TransformOptions\n{\n    /** The matrix to use. */\n    matrix?: Matrix;\n    /**\n     * The observer to use.\n     * @advanced\n     */\n    observer?: {_onUpdate: (transform: Transform) => void}\n}\n\n/**\n * The Transform class facilitates the manipulation of a 2D transformation matrix through\n * user-friendly properties: position, scale, rotation, skew, and pivot.\n * @example\n * ```ts\n * // Basic transform usage\n * const transform = new Transform();\n * transform.position.set(100, 100);\n * transform.rotation = Math.PI / 4; // 45 degrees\n * transform.scale.set(2, 2);\n *\n * // With pivot point\n * transform.pivot.set(50, 50);\n * transform.rotation = Math.PI; // Rotate around pivot\n *\n * // Matrix manipulation\n * const matrix = transform.matrix;\n * const position = { x: 0, y: 0 };\n * matrix.apply(position); // Transform point\n * ```\n * @remarks\n * - Manages 2D transformation properties\n * - Auto-updates matrix on changes\n * - Supports observable changes\n * - Common in display objects\n * @category utils\n * @standard\n * @see {@link Matrix} For direct matrix operations\n * @see {@link ObservablePoint} For point properties\n */\nexport class Transform\n{\n    /**\n     * The local transformation matrix.\n     * @internal\n     */\n    public _matrix: Matrix;\n\n    /**\n     * The coordinate of the object relative to the local coordinates of the parent.\n     * @example\n     * ```ts\n     * // Basic position setting\n     * transform.position.set(100, 100);\n     *\n     * // Individual coordinate access\n     * transform.position.x = 50;\n     * transform.position.y = 75;\n     * ```\n     */\n    public position: ObservablePoint;\n\n    /**\n     * The scale factor of the object.\n     * @example\n     * ```ts\n     * // Uniform scaling\n     * transform.scale.set(2, 2);\n     *\n     * // Non-uniform scaling\n     * transform.scale.x = 2; // Stretch horizontally\n     * transform.scale.y = 0.5; // Compress vertically\n     * ```\n     */\n    public scale: ObservablePoint;\n\n    /**\n     * The pivot point of the container that it rotates around.\n     * @example\n     * ```ts\n     * // Center pivot\n     * transform.pivot.set(sprite.width / 2, sprite.height / 2);\n     *\n     * // Corner rotation\n     * transform.pivot.set(0, 0);\n     * transform.rotation = Math.PI / 4; // 45 degrees\n     * ```\n     */\n    public pivot: ObservablePoint;\n\n    /**\n     * The skew amount, on the x and y axis.\n     * @example\n     * ```ts\n     * // Apply horizontal skew\n     * transform.skew.x = Math.PI / 6; // 30 degrees\n     *\n     * // Apply both skews\n     * transform.skew.set(Math.PI / 6, Math.PI / 8);\n     * ```\n     */\n    public skew: ObservablePoint;\n\n    /** The rotation amount. */\n    protected _rotation: number;\n\n    /**\n     * The X-coordinate value of the normalized local X axis,\n     * the first column of the local transformation matrix without a scale.\n     */\n    protected _cx: number;\n\n    /**\n     * The Y-coordinate value of the normalized local X axis,\n     * the first column of the local transformation matrix without a scale.\n     */\n    protected _sx: number;\n\n    /**\n     * The X-coordinate value of the normalized local Y axis,\n     * the second column of the local transformation matrix without a scale.\n     */\n    protected _cy: number;\n\n    /**\n     * The Y-coordinate value of the normalized local Y axis,\n     * the second column of the local transformation matrix without a scale.\n     */\n    protected _sy: number;\n\n    protected dirty = true;\n    protected observer: Observer<Transform>;\n\n    /**\n     * @param options - Options for the transform.\n     * @param options.matrix - The matrix to use.\n     * @param options.observer - The observer to use.\n     */\n    constructor({ matrix, observer }: TransformOptions = {})\n    {\n        this._matrix = matrix ?? new Matrix();\n        this.observer = observer;\n\n        this.position = new ObservablePoint(this, 0, 0);\n        this.scale = new ObservablePoint(this, 1, 1);\n        this.pivot = new ObservablePoint(this, 0, 0);\n        this.skew = new ObservablePoint(this, 0, 0);\n\n        this._rotation = 0;\n        this._cx = 1;\n        this._sx = 0;\n        this._cy = 0;\n        this._sy = 1;\n    }\n\n    /**\n     * The transformation matrix computed from the transform's properties.\n     * Combines position, scale, rotation, skew, and pivot into a single matrix.\n     * @example\n     * ```ts\n     * // Get current matrix\n     * const matrix = transform.matrix;\n     * console.log(matrix.toString());\n     * ```\n     * @readonly\n     * @see {@link Matrix} For matrix operations\n     * @see {@link Transform.setFromMatrix} For setting transform from matrix\n     */\n    get matrix(): Matrix\n    {\n        const lt = this._matrix;\n\n        if (!this.dirty) return lt;\n\n        lt.a = this._cx * this.scale.x;\n        lt.b = this._sx * this.scale.x;\n        lt.c = this._cy * this.scale.y;\n        lt.d = this._sy * this.scale.y;\n\n        lt.tx = this.position.x - ((this.pivot.x * lt.a) + (this.pivot.y * lt.c));\n        lt.ty = this.position.y - ((this.pivot.x * lt.b) + (this.pivot.y * lt.d));\n\n        this.dirty = false;\n\n        return lt;\n    }\n    /**\n     * Called when a value changes.\n     * @param point\n     * @internal\n     */\n    public _onUpdate(point?: ObservablePoint): void\n    {\n        this.dirty = true;\n\n        if (point === this.skew)\n        {\n            this.updateSkew();\n        }\n\n        this.observer?._onUpdate(this);\n    }\n\n    /** Called when the skew or the rotation changes. */\n    protected updateSkew(): void\n    {\n        this._cx = Math.cos(this._rotation + this.skew.y);\n        this._sx = Math.sin(this._rotation + this.skew.y);\n        this._cy = -Math.sin(this._rotation - this.skew.x); // cos, added PI/2\n        this._sy = Math.cos(this._rotation - this.skew.x); // sin, added PI/2\n\n        this.dirty = true;\n    }\n\n    // #if _DEBUG\n    public toString(): string\n    {\n        return `[pixi.js/math:Transform `\n            + `position=(${this.position.x}, ${this.position.y}) `\n            + `rotation=${this.rotation} `\n            + `scale=(${this.scale.x}, ${this.scale.y}) `\n            + `skew=(${this.skew.x}, ${this.skew.y}) `\n            + `]`;\n    }\n    // #endif\n\n    /**\n     * Decomposes a matrix and sets the transforms properties based on it.\n     * @example\n     * ```ts\n     * // Basic matrix decomposition\n     * const transform = new Transform();\n     * const matrix = new Matrix()\n     *     .translate(100, 100)\n     *     .rotate(Math.PI / 4)\n     *     .scale(2, 2);\n     *\n     * transform.setFromMatrix(matrix);\n     * console.log(transform.position.x); // 100\n     * console.log(transform.rotation); // ~0.785 (/4)\n     * ```\n     * @param matrix - The matrix to decompose\n     * @see {@link Matrix#decompose} For the decomposition logic\n     * @see {@link Transform#matrix} For getting the current matrix\n     */\n    public setFromMatrix(matrix: Matrix): void\n    {\n        matrix.decompose(this);\n        this.dirty = true;\n    }\n\n    /**\n     * The rotation of the object in radians.\n     * @example\n     * ```ts\n     * // Basic rotation\n     * transform.rotation = Math.PI / 4; // 45 degrees\n     *\n     * // Rotate around pivot point\n     * transform.pivot.set(50, 50);\n     * transform.rotation = Math.PI; // 180 degrees around pivot\n     *\n     * // Animate rotation\n     * app.ticker.add(() => {\n     *     transform.rotation += 0.1;\n     * });\n     * ```\n     * @see {@link Transform#pivot} For rotation point\n     * @see {@link Transform#skew} For skew effects\n     */\n    get rotation(): number\n    {\n        return this._rotation;\n    }\n\n    set rotation(value: number)\n    {\n        if (this._rotation !== value)\n        {\n            this._rotation = value;\n            this._onUpdate(this.skew);\n        }\n    }\n}\n", "import { ExtensionType } from '../../../extensions/Extensions';\nimport { Matrix } from '../../../maths/matrix/Matrix';\nimport { Point } from '../../../maths/point/Point';\nimport { canvasUtils } from '../../../rendering/renderers/canvas/utils/canvasUtils';\nimport { bgr2rgb } from '../../../scene/container/container-mixins/getGlobalMixin';\nimport { multiplyHexColors } from '../../../scene/container/utils/multiplyHexColors';\n\nimport type { CanvasRenderer } from '../../../rendering/renderers/canvas/CanvasRenderer';\nimport type { InstructionSet } from '../../../rendering/renderers/shared/instructions/InstructionSet';\nimport type { RenderPipe } from '../../../rendering/renderers/shared/instructions/RenderPipe';\nimport type { Renderer } from '../../../rendering/renderers/types';\nimport type { TilingSprite } from '../TilingSprite';\n\n// Reusable objects to avoid allocations (matching v7 approach)\nconst worldMatrix = new Matrix();\nconst patternMatrix = new Matrix();\nconst patternRect = [new Point(), new Point(), new Point(), new Point()];\n\n/** @internal */\nexport class CanvasTilingSpritePipe implements RenderPipe<TilingSprite>\n{\n    /** @ignore */\n    public static extension = {\n        type: [\n            ExtensionType.CanvasPipes,\n        ],\n        name: 'tilingSprite',\n    } as const;\n\n    private _renderer: CanvasRenderer;\n\n    constructor(renderer: Renderer)\n    {\n        this._renderer = renderer as CanvasRenderer;\n    }\n\n    public validateRenderable(_renderable: TilingSprite): boolean\n    {\n        return false;\n    }\n\n    public addRenderable(tilingSprite: TilingSprite, instructionSet: InstructionSet)\n    {\n        this._renderer.renderPipes.batch.break(instructionSet);\n        instructionSet.add(tilingSprite);\n    }\n\n    public updateRenderable(_tilingSprite: TilingSprite)\n    {\n        // no-op for canvas\n    }\n\n    public execute(tilingSprite: TilingSprite)\n    {\n        const renderer = this._renderer;\n        const contextSystem = renderer.canvasContext;\n        const context = contextSystem.activeContext;\n\n        context.save();\n\n        contextSystem.setBlendMode(tilingSprite.groupBlendMode);\n\n        const globalColor = renderer.globalUniforms.globalUniformData?.worldColor ?? 0xFFFFFFFF;\n        const groupColorAlpha = tilingSprite.groupColorAlpha;\n\n        const globalAlpha = ((globalColor >>> 24) & 0xFF) / 255;\n        const groupAlphaValue = ((groupColorAlpha >>> 24) & 0xFF) / 255;\n\n        const filterAlpha = (renderer.filter as { alphaMultiplier?: number } | null)?.alphaMultiplier ?? 1;\n        const alpha = globalAlpha * groupAlphaValue * filterAlpha;\n\n        if (alpha <= 0)\n        {\n            context.restore();\n\n            return;\n        }\n\n        context.globalAlpha = alpha;\n\n        const globalTint = globalColor & 0xFFFFFF;\n        const groupTintBGR = groupColorAlpha & 0xFFFFFF;\n\n        const tint = bgr2rgb(multiplyHexColors(groupTintBGR, globalTint));\n\n        const texture = tilingSprite.texture;\n        const pattern = canvasUtils.getTintedPattern(texture, tint);\n\n        const width = tilingSprite.width;\n        const height = tilingSprite.height;\n        const transform = tilingSprite.groupTransform;\n        const resolution = texture.source._resolution ?? texture.source.resolution ?? 1;\n\n        // Build patternMatrix from tileTransform (following v7 approach exactly)\n        // patternMatrix = tileTransform x shiftTransform x scaleTransform\n        patternMatrix.copyFrom(tilingSprite._tileTransform.matrix);\n\n        // Apply anchor shift if not applying anchor to texture (v7: uvRespectAnchor)\n        if (!tilingSprite.applyAnchorToTexture)\n        {\n            patternMatrix.translate(-tilingSprite.anchor.x * width, -tilingSprite.anchor.y * height);\n        }\n\n        // Apply resolution scaling\n        patternMatrix.scale(1 / resolution, 1 / resolution);\n\n        // Build worldMatrix = transform * patternMatrix (v7 used two prepends on identity)\n        worldMatrix.identity();\n        worldMatrix.prepend(patternMatrix);\n        worldMatrix.prepend(transform);\n\n        const roundPixels = (renderer._roundPixels | tilingSprite._roundPixels) as 0 | 1;\n\n        contextSystem.setContextTransform(worldMatrix, roundPixels === 1);\n\n        context.fillStyle = pattern;\n\n        // Calculate rect corners in local space\n        const lx = tilingSprite.anchor.x * -width;\n        const ly = tilingSprite.anchor.y * -height;\n\n        patternRect[0].set(lx, ly);\n        patternRect[1].set(lx + width, ly);\n        patternRect[2].set(lx + width, ly + height);\n        patternRect[3].set(lx, ly + height);\n\n        // Map rect corners from local space to pattern space\n        for (let i = 0; i < 4; i++)\n        {\n            patternMatrix.applyInverse(patternRect[i], patternRect[i]);\n        }\n\n        // Draw path in pattern space\n        context.beginPath();\n        context.moveTo(patternRect[0].x, patternRect[0].y);\n\n        for (let i = 1; i < 4; i++)\n        {\n            context.lineTo(patternRect[i].x, patternRect[i].y);\n        }\n\n        context.closePath();\n        context.fill();\n\n        context.restore();\n    }\n\n    public destroy()\n    {\n        this._renderer = null;\n    }\n}\n", "/** @internal */\nexport const tilingBit = {\n    name: 'tiling-bit',\n    vertex: {\n        header: /* wgsl */`\n            struct TilingUniforms {\n                uMapCoord:mat3x3<f32>,\n                uClampFrame:vec4<f32>,\n                uClampOffset:vec2<f32>,\n                uTextureTransform:mat3x3<f32>,\n                uSizeAnchor:vec4<f32>\n            };\n\n            @group(2) @binding(0) var<uniform> tilingUniforms: TilingUniforms;\n            @group(2) @binding(1) var uTexture: texture_2d<f32>;\n            @group(2) @binding(2) var uSampler: sampler;\n        `,\n        main: /* wgsl */`\n            uv = (tilingUniforms.uTextureTransform * vec3(uv, 1.0)).xy;\n\n            position = (position - tilingUniforms.uSizeAnchor.zw) * tilingUniforms.uSizeAnchor.xy;\n        `\n\n    },\n    fragment: {\n        header: /* wgsl */`\n            struct TilingUniforms {\n                uMapCoord:mat3x3<f32>,\n                uClampFrame:vec4<f32>,\n                uClampOffset:vec2<f32>,\n                uTextureTransform:mat3x3<f32>,\n                uSizeAnchor:vec4<f32>\n            };\n\n            @group(2) @binding(0) var<uniform> tilingUniforms: TilingUniforms;\n            @group(2) @binding(1) var uTexture: texture_2d<f32>;\n            @group(2) @binding(2) var uSampler: sampler;\n        `,\n        main: /* wgsl */`\n\n            var coord = vUV + ceil(tilingUniforms.uClampOffset - vUV);\n            coord = (tilingUniforms.uMapCoord * vec3(coord, 1.0)).xy;\n            var unclamped = coord;\n            coord = clamp(coord, tilingUniforms.uClampFrame.xy, tilingUniforms.uClampFrame.zw);\n\n            var bias = 0.;\n\n            if(unclamped.x == coord.x && unclamped.y == coord.y)\n            {\n                bias = -32.;\n            }\n\n            outColor = textureSampleBias(uTexture, uSampler, coord, bias);\n        `\n    }\n\n};\n\n/** @internal */\nexport const tilingBitGl = {\n    name: 'tiling-bit',\n    vertex: {\n        header: /* glsl */`\n            uniform mat3 uTextureTransform;\n            uniform vec4 uSizeAnchor;\n\n        `,\n        main: /* glsl */`\n            uv = (uTextureTransform * vec3(aUV, 1.0)).xy;\n\n            position = (position - uSizeAnchor.zw) * uSizeAnchor.xy;\n        `\n\n    },\n    fragment: {\n        header: /* glsl */`\n            uniform sampler2D uTexture;\n            uniform mat3 uMapCoord;\n            uniform vec4 uClampFrame;\n            uniform vec2 uClampOffset;\n        `,\n        main: /* glsl */`\n\n        vec2 coord = vUV + ceil(uClampOffset - vUV);\n        coord = (uMapCoord * vec3(coord, 1.0)).xy;\n        vec2 unclamped = coord;\n        coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);\n\n        outColor = texture(uTexture, coord, unclamped == coord ? 0.0 : -32.0);// lod-bias very negative to force lod 0\n\n        `\n    }\n\n};\n", "import { Matrix } from '../../../maths/matrix/Matrix';\nimport {\n    compileHighShaderGlProgram,\n    compileHighShaderGpuProgram\n} from '../../../rendering/high-shader/compileHighShaderToProgram';\nimport { localUniformBit, localUniformBitGl } from '../../../rendering/high-shader/shader-bits/localUniformBit';\nimport { roundPixelsBit, roundPixelsBitGl } from '../../../rendering/high-shader/shader-bits/roundPixelsBit';\nimport { Shader } from '../../../rendering/renderers/shared/shader/Shader';\nimport { UniformGroup } from '../../../rendering/renderers/shared/shader/UniformGroup';\nimport { Texture } from '../../../rendering/renderers/shared/texture/Texture';\nimport { tilingBit, tilingBitGl } from './tilingBit';\n\nimport type { GlProgram } from '../../../rendering/renderers/gl/shader/GlProgram';\nimport type { GpuProgram } from '../../../rendering/renderers/gpu/shader/GpuProgram';\n\nlet gpuProgram: GpuProgram;\nlet glProgram: GlProgram;\n\n/**\n * The shader used by the TilingSprite.\n * @internal\n */\nexport class TilingSpriteShader extends Shader\n{\n    constructor()\n    {\n        gpuProgram ??= compileHighShaderGpuProgram({\n            name: 'tiling-sprite-shader',\n            bits: [\n                localUniformBit,\n                tilingBit,\n                roundPixelsBit,\n            ],\n        });\n\n        glProgram ??= compileHighShaderGlProgram({\n            name: 'tiling-sprite-shader',\n            bits: [\n                localUniformBitGl,\n                tilingBitGl,\n                roundPixelsBitGl,\n            ]\n        });\n\n        const tilingUniforms = new UniformGroup({\n            uMapCoord: { value: new Matrix(), type: 'mat3x3<f32>' },\n            uClampFrame: { value: new Float32Array([0, 0, 1, 1]), type: 'vec4<f32>' },\n            uClampOffset: { value: new Float32Array([0, 0]), type: 'vec2<f32>' },\n            uTextureTransform: { value: new Matrix(), type: 'mat3x3<f32>' },\n            uSizeAnchor: { value: new Float32Array([100, 100, 0.5, 0.5]), type: 'vec4<f32>' },\n        });\n\n        super({\n            glProgram,\n            gpuProgram,\n            resources: {\n                localUniforms: new UniformGroup({\n                    uTransformMatrix: { value: new Matrix(), type: 'mat3x3<f32>' },\n                    uColor: { value: new Float32Array([1, 1, 1, 1]), type: 'vec4<f32>' },\n                    uRound: { value: 0, type: 'f32' },\n                }),\n                tilingUniforms,\n                uTexture: Texture.EMPTY.source,\n                uSampler: Texture.EMPTY.source.style,\n            }\n        });\n    }\n\n    public updateUniforms(\n        width: number, height: number,\n        matrix: Matrix,\n        anchorX: number, anchorY: number,\n        texture: Texture\n    ): void\n    {\n        const tilingUniforms = this.resources.tilingUniforms;\n\n        const textureWidth = texture.width;\n        const textureHeight = texture.height;\n        const textureMatrix = texture.textureMatrix;\n\n        const uTextureTransform = tilingUniforms.uniforms.uTextureTransform;\n\n        uTextureTransform.set(\n            matrix.a * textureWidth / width,\n            matrix.b * textureWidth / height,\n            matrix.c * textureHeight / width,\n            matrix.d * textureHeight / height,\n            matrix.tx / width,\n            matrix.ty / height);\n\n        uTextureTransform.invert();\n\n        tilingUniforms.uniforms.uMapCoord = textureMatrix.mapCoord;\n        tilingUniforms.uniforms.uClampFrame = textureMatrix.uClampFrame;\n        tilingUniforms.uniforms.uClampOffset = textureMatrix.uClampOffset;\n        tilingUniforms.uniforms.uTextureTransform = uTextureTransform;\n        tilingUniforms.uniforms.uSizeAnchor[0] = width;\n        tilingUniforms.uniforms.uSizeAnchor[1] = height;\n        tilingUniforms.uniforms.uSizeAnchor[2] = anchorX;\n        tilingUniforms.uniforms.uSizeAnchor[3] = anchorY;\n\n        if (texture)\n        {\n            this.resources.uTexture = texture.source;\n            this.resources.uSampler = texture.source.style;\n        }\n    }\n}\n", "import { MeshGeometry } from '../../mesh/shared/MeshGeometry';\n\n/** @internal */\nexport class QuadGeometry extends MeshGeometry\n{\n    constructor()\n    {\n        super({\n            positions: new Float32Array([0, 0, 1, 0, 1, 1, 0, 1]),\n            uvs: new Float32Array([0, 0, 1, 0, 1, 1, 0, 1]),\n            indices: new Uint32Array([0, 1, 2, 0, 2, 3]),\n        });\n    }\n}\n", "import type { TilingSprite } from '../TilingSprite';\n\n/**\n * @param tilingSprite\n * @param positions\n * @internal\n */\nexport function setPositions(tilingSprite: TilingSprite, positions: Float32Array)\n{\n    const anchorX = tilingSprite.anchor.x;\n    const anchorY = tilingSprite.anchor.y;\n\n    positions[0] = -anchorX * tilingSprite.width;\n    positions[1] = -anchorY * tilingSprite.height;\n    positions[2] = (1 - anchorX) * tilingSprite.width;\n    positions[3] = -anchorY * tilingSprite.height;\n    positions[4] = (1 - anchorX) * tilingSprite.width;\n    positions[5] = (1 - anchorY) * tilingSprite.height;\n    positions[6] = -anchorX * tilingSprite.width;\n    positions[7] = (1 - anchorY) * tilingSprite.height;\n}\n", "import type { Matrix } from '../../../maths/matrix/Matrix';\nimport type { TypedArray } from '../../../rendering/renderers/shared/buffer/Buffer';\n\n/**\n * @param array\n * @param stride\n * @param offset\n * @param matrix\n * @internal\n */\nexport function applyMatrix(array: TypedArray, stride: number, offset: number, matrix: Matrix)\n{\n    let index = 0;\n    const size = array.length / (stride || 2);\n\n    const a = matrix.a;\n    const b = matrix.b;\n    const c = matrix.c;\n    const d = matrix.d;\n    const tx = matrix.tx;\n    const ty = matrix.ty;\n\n    offset *= stride;\n\n    while (index < size)\n    {\n        const x = array[offset];\n        const y = array[offset + 1];\n\n        array[offset] = (a * x) + (c * y) + tx;\n        array[offset + 1] = (b * x) + (d * y) + ty;\n\n        offset += stride;\n\n        index++;\n    }\n}\n", "import { Matrix } from '../../../maths/matrix/Matrix';\nimport { applyMatrix } from './applyMatrix';\n\nimport type { TilingSprite } from '../TilingSprite';\n\n/**\n * @param tilingSprite\n * @param uvs\n * @internal\n */\nexport function setUvs(tilingSprite: TilingSprite, uvs: Float32Array)\n{\n    const texture = tilingSprite.texture;\n\n    const width = texture.frame.width;\n    const height = texture.frame.height;\n\n    let anchorX = 0;\n    let anchorY = 0;\n\n    if (tilingSprite.applyAnchorToTexture)\n    {\n        anchorX = tilingSprite.anchor.x;\n        anchorY = tilingSprite.anchor.y;\n    }\n\n    uvs[0] = uvs[6] = -anchorX;\n    uvs[2] = uvs[4] = 1 - anchorX;\n    uvs[1] = uvs[3] = -anchorY;\n    uvs[5] = uvs[7] = 1 - anchorY;\n\n    const textureMatrix = Matrix.shared;\n\n    textureMatrix.copyFrom(tilingSprite._tileTransform.matrix);\n\n    textureMatrix.tx /= tilingSprite.width;\n    textureMatrix.ty /= tilingSprite.height;\n\n    textureMatrix.invert();\n\n    textureMatrix.scale(tilingSprite.width / width, tilingSprite.height / height);\n\n    applyMatrix(uvs, 2, 0, textureMatrix);\n}\n", "import { ExtensionType } from '../../extensions/Extensions';\nimport { getAdjustedBlendModeBlend } from '../../rendering/renderers/shared/state/getAdjustedBlendModeBlend';\nimport { State } from '../../rendering/renderers/shared/state/State';\nimport { type Renderer, RendererType } from '../../rendering/renderers/types';\nimport { GCManagedHash } from '../../utils/data/GCManagedHash';\nimport { color32BitToUniform } from '../graphics/gpu/colorToUniform';\nimport { BatchableMesh } from '../mesh/shared/BatchableMesh';\nimport { MeshGeometry } from '../mesh/shared/MeshGeometry';\nimport { type GPUData } from '../view/ViewContainer';\nimport { TilingSpriteShader } from './shader/TilingSpriteShader';\nimport { QuadGeometry } from './utils/QuadGeometry';\nimport { setPositions } from './utils/setPositions';\nimport { setUvs } from './utils/setUvs';\n\nimport type { WebGLRenderer } from '../../rendering/renderers/gl/WebGLRenderer';\nimport type { WebGPURenderer } from '../../rendering/renderers/gpu/WebGPURenderer';\nimport type { InstructionSet } from '../../rendering/renderers/shared/instructions/InstructionSet';\nimport type { RenderPipe } from '../../rendering/renderers/shared/instructions/RenderPipe';\nimport type { TilingSprite } from './TilingSprite';\n\nconst sharedQuad = new QuadGeometry();\n\n/** @internal */\nexport class TilingSpriteGpuData implements GPUData\n{\n    public canBatch: boolean = true;\n    public renderable: TilingSprite;\n    public batchableMesh?: BatchableMesh;\n    public geometry?: MeshGeometry;\n    public shader?: TilingSpriteShader;\n\n    constructor()\n    {\n        this.geometry = new MeshGeometry({\n            indices: sharedQuad.indices.slice(),\n            positions: sharedQuad.positions.slice(),\n            uvs: sharedQuad.uvs.slice(),\n        });\n    }\n\n    public destroy()\n    {\n        this.geometry.destroy();\n        this.shader?.destroy();\n    }\n}\n\n/**\n * The TilingSpritePipe is a render pipe for rendering TilingSprites.\n * It handles the batching and rendering of TilingSprites using a shader.\n * @internal\n */\nexport class TilingSpritePipe implements RenderPipe<TilingSprite>\n{\n    /** @ignore */\n    public static extension = {\n        type: [\n            ExtensionType.WebGLPipes,\n            ExtensionType.WebGPUPipes,\n        ],\n        name: 'tilingSprite',\n    } as const;\n\n    private _renderer: Renderer;\n    private readonly _state: State = State.default2d;\n    private readonly _managedTilingSprites: GCManagedHash<TilingSprite>;\n\n    constructor(renderer: Renderer)\n    {\n        this._renderer = renderer;\n        this._managedTilingSprites = new GCManagedHash({ renderer, type: 'renderable', name: 'tilingSprite' });\n    }\n\n    public validateRenderable(renderable: TilingSprite): boolean\n    {\n        const tilingSpriteData = this._getTilingSpriteData(renderable);\n\n        const couldBatch = tilingSpriteData.canBatch;\n\n        this._updateCanBatch(renderable);\n\n        const canBatch = tilingSpriteData.canBatch;\n\n        if (canBatch && canBatch === couldBatch)\n        {\n            const { batchableMesh } = tilingSpriteData;\n\n            return !batchableMesh._batcher.checkAndUpdateTexture(\n                batchableMesh,\n                renderable.texture\n            );\n        }\n\n        return (couldBatch !== canBatch);\n\n        // // TODO - only update if required?\n        // // only texture\n        // // only uvs\n        // // only positions?\n    }\n\n    public addRenderable(tilingSprite: TilingSprite, instructionSet: InstructionSet)\n    {\n        const batcher = this._renderer.renderPipes.batch;\n\n        // init\n        this._updateCanBatch(tilingSprite);\n\n        const tilingSpriteData = this._getTilingSpriteData(tilingSprite);\n\n        const { geometry, canBatch } = tilingSpriteData;\n\n        if (canBatch)\n        {\n            tilingSpriteData.batchableMesh ||= new BatchableMesh();\n\n            const batchableMesh = tilingSpriteData.batchableMesh;\n\n            if (tilingSprite.didViewUpdate)\n            {\n                this._updateBatchableMesh(tilingSprite);\n\n                batchableMesh.geometry = geometry;\n                batchableMesh.renderable = tilingSprite;\n                batchableMesh.transform = tilingSprite.groupTransform;\n                batchableMesh.setTexture(tilingSprite._texture);\n            }\n\n            batchableMesh.roundPixels = (this._renderer._roundPixels | tilingSprite._roundPixels) as 0 | 1;\n\n            batcher.addToBatch(batchableMesh, instructionSet);\n        }\n        else\n        {\n            batcher.break(instructionSet);\n\n            tilingSpriteData.shader ||= new TilingSpriteShader();\n\n            this.updateRenderable(tilingSprite);\n\n            instructionSet.add(tilingSprite);\n        }\n    }\n\n    public execute(tilingSprite: TilingSprite)\n    {\n        const renderer = this._renderer as WebGLRenderer | WebGPURenderer;\n        const { shader } = this._getTilingSpriteData(tilingSprite);\n\n        shader.groups[0] = renderer.globalUniforms.bindGroup;\n\n        // deal with local uniforms...\n        const localUniforms = shader.resources.localUniforms.uniforms;\n\n        localUniforms.uTransformMatrix = tilingSprite.groupTransform;\n        localUniforms.uRound = renderer._roundPixels | tilingSprite._roundPixels;\n\n        color32BitToUniform(\n            tilingSprite.groupColorAlpha,\n            localUniforms.uColor,\n            0\n        );\n\n        this._state.blendMode = getAdjustedBlendModeBlend(tilingSprite.groupBlendMode, tilingSprite.texture._source);\n\n        renderer.encoder.draw({\n            geometry: sharedQuad,\n            shader,\n            state: this._state,\n        });\n    }\n\n    public updateRenderable(tilingSprite: TilingSprite)\n    {\n        const tilingSpriteData = this._getTilingSpriteData(tilingSprite);\n\n        const { canBatch } = tilingSpriteData;\n\n        if (canBatch)\n        {\n            const { batchableMesh } = tilingSpriteData;\n\n            if (tilingSprite.didViewUpdate) this._updateBatchableMesh(tilingSprite);\n\n            batchableMesh._batcher.updateElement(batchableMesh);\n        }\n        else if (tilingSprite.didViewUpdate)\n        {\n            const { shader } = tilingSpriteData;\n            // now update uniforms...\n\n            shader.updateUniforms(\n                tilingSprite.width,\n                tilingSprite.height,\n                tilingSprite._tileTransform.matrix,\n                tilingSprite.anchor.x,\n                tilingSprite.anchor.y,\n                tilingSprite.texture,\n            );\n        }\n    }\n\n    private _getTilingSpriteData(renderable: TilingSprite): TilingSpriteGpuData\n    {\n        return renderable._gpuData[this._renderer.uid] || this._initTilingSpriteData(renderable);\n    }\n\n    private _initTilingSpriteData(tilingSprite: TilingSprite): TilingSpriteGpuData\n    {\n        const gpuData = new TilingSpriteGpuData();\n\n        gpuData.renderable = tilingSprite;\n        tilingSprite._gpuData[this._renderer.uid] = gpuData;\n\n        this._managedTilingSprites.add(tilingSprite);\n\n        return gpuData;\n    }\n\n    private _updateBatchableMesh(tilingSprite: TilingSprite)\n    {\n        const renderableData = this._getTilingSpriteData(tilingSprite);\n\n        const { geometry } = renderableData;\n\n        const style = tilingSprite.texture.source.style;\n\n        if (style.addressMode !== 'repeat')\n        {\n            style.addressMode = 'repeat';\n            style.update();\n        }\n\n        setUvs(tilingSprite, geometry.uvs);\n        setPositions(tilingSprite, geometry.positions);\n    }\n\n    public destroy()\n    {\n        this._managedTilingSprites.destroy();\n        this._renderer = null;\n    }\n\n    private _updateCanBatch(tilingSprite: TilingSprite)\n    {\n        const renderableData = this._getTilingSpriteData(tilingSprite);\n        const texture = tilingSprite.texture;\n\n        let _nonPowOf2wrapping = true;\n\n        if (this._renderer.type === RendererType.WEBGL)\n        {\n            _nonPowOf2wrapping = (this._renderer as WebGLRenderer).context.supports.nonPowOf2wrapping;\n        }\n\n        renderableData.canBatch = texture.textureMatrix.isSimple && (_nonPowOf2wrapping || texture.source.isPowerOfTwo);\n\n        return renderableData.canBatch;\n    }\n}\n", "import { extensions } from '../../extensions/Extensions';\nimport { CanvasTilingSpritePipe } from './canvas/CanvasTilingSpritePipe';\nimport { TilingSpritePipe } from './TilingSpritePipe';\n\nextensions.add(CanvasTilingSpritePipe);\nextensions.add(TilingSpritePipe);\n", "import { Cache } from '../../assets/cache/Cache';\nimport { ObservablePoint } from '../../maths/point/ObservablePoint';\nimport { Texture } from '../../rendering/renderers/shared/texture/Texture';\nimport { deprecation, v8_0_0 } from '../../utils/logging/deprecation';\nimport { Transform } from '../../utils/misc/Transform';\nimport { ViewContainer, type ViewContainerOptions } from '../view/ViewContainer';\nimport { type TilingSpriteGpuData } from './TilingSpritePipe';\nimport './init';\n\nimport type { Size } from '../../maths/misc/Size';\nimport type { PointData } from '../../maths/point/PointData';\nimport type { Instruction } from '../../rendering/renderers/shared/instructions/Instruction';\nimport type { View } from '../../rendering/renderers/shared/view/View';\nimport type { Optional } from '../container/container-mixins/measureMixin';\nimport type { DestroyOptions } from '../container/destroyTypes';\n\n/**\n * Constructor options used for creating a TilingSprite instance.\n * Defines the texture, tiling behavior, and rendering properties of the sprite.\n * @example\n * ```ts\n * // Create a basic tiling sprite with repeating texture\n * const tilingSprite = new TilingSprite({\n *     texture: Texture.from('pattern.png'),\n *     width: 800,     // Width of the tiling area\n *     height: 600     // Height of the tiling area\n * });\n *\n * const background = new TilingSprite({\n *     texture: Texture.from('background.png'),\n *     width: app.screen.width,\n *     height: app.screen.height,\n *     tilePosition: { x: 0, y: 0 },\n *     tileScale: { x: 1.5, y: 1.5 }  // Scale up the texture\n *     anchor: 0.5,                    // Center anchor point\n *     roundPixels: true,              // Crisp pixel rendering\n * });\n * ```\n * @see {@link TilingSprite} For the main sprite class\n * @see {@link Texture} For texture management\n * @category scene\n * @standard\n * @noInheritDoc\n */\nexport interface TilingSpriteOptions extends PixiMixins.TilingSpriteOptions, ViewContainerOptions\n{\n    /**\n     * The anchor point of the TilingSprite (0-1 range)\n     *\n     * Controls the origin point for rotation, scaling, and positioning.\n     * Can be a number for uniform anchor or a PointData for separate x/y values.\n     * @example\n     * ```ts\n     * // Centered anchor\n     * const sprite = new TilingSprite({ ..., anchor: 0.5 });\n     * sprite.anchor = 0.5;\n     * // Separate x/y anchor\n     * sprite.anchor = { x: 0.5, y: 0.5 };\n     * // Right-aligned anchor\n     * sprite.anchor = { x: 1, y: 0 };\n     * // Update anchor directly\n     * sprite.anchor.set(0.5, 0.5);\n     * ```\n     * @default 0\n     */\n    anchor?: PointData | number;\n    /**\n     * The offset of the tiling texture.\n     * Used to scroll or position the repeated pattern.\n     * @example\n     * ```ts\n     * // Offset the tiling pattern by 100 pixels in both x and y directions\n     * tilingSprite.tilePosition = { x: 100, y: 100 };\n     * ```\n     * @default {x: 0, y: 0}\n     */\n    tilePosition?: PointData\n    /**\n     * Scale of the tiling texture.\n     * Affects the size of each repeated instance of the texture.\n     * @example\n     * ```ts\n     * // Scale the texture by 1.5 in both x and y directions\n     * tilingSprite.tileScale = { x: 1.5, y: 1.5 };\n     * ```\n     * @default {x: 1, y: 1}\n     */\n    tileScale?: PointData\n    /**\n     * Rotation of the tiling texture in radians.\n     * This controls the rotation applied to the texture before tiling.\n     * @example\n     * ```ts\n     * // Rotate the texture by 45 degrees (in radians)\n     * tilingSprite.tileRotation = Math.PI / 4; // 45 degrees\n     * ```\n     * @default 0\n     */\n    tileRotation?: number\n    /**\n     * The texture to use for tiling.\n     * This is the image that will be repeated across the sprite.\n     * @example\n     * ```ts\n     * // Use a texture from the asset cache\n     * tilingSprite.texture = Texture.from('assets/pattern.png');\n     * ```\n     * @default Texture.WHITE\n     */\n    texture?: Texture\n    /**\n     * The width of the tiling area.\n     * This defines how wide the tiling sprite will be.\n     * @example\n     * ```ts\n     * // Set the width of the tiling sprite to 800 pixels\n     * tilingSprite.width = 800;\n     * ```\n     * @default 256\n     */\n    width?: number\n    /**\n     * The height of the tiling area.\n     * This defines how tall the tiling sprite will be.\n     * @example\n     * ```ts\n     * // Set the height of the tiling sprite to 600 pixels\n     * tilingSprite.height = 600;\n     * ```\n     * @default 256\n     */\n    height?: number\n    /**\n     * Whether the tiling pattern should originate from the anchor point.\n     * When true, tiling starts from the origin instead of top-left.\n     *\n     * This will make the texture coordinates assigned to each vertex dependent on the value of the anchor. Without\n     * this, the top-left corner always gets the (0, 0) texture coordinate.\n     * @example\n     * ```ts\n     * // Enable anchor-based tiling\n     * tilingSprite.applyAnchorToTexture = true;\n     * ```\n     * @default false\n     */\n    applyAnchorToTexture?: boolean\n    /**\n     * Whether to round the sprite's position to whole pixels.\n     * This can help with crisp rendering, especially for pixel art.\n     * When true, the sprite's position will be rounded to the nearest pixel.\n     * @example\n     * ```ts\n     * // Enable pixel rounding for crisp rendering\n     * tilingSprite.roundPixels = true;\n     * ```\n     * @default false\n     */\n    roundPixels?: boolean;\n}\n// eslint-disable-next-line requireExport/require-export-jsdoc, requireMemberAPI/require-member-api-doc\nexport interface TilingSprite extends PixiMixins.TilingSprite, ViewContainer<TilingSpriteGpuData> {}\n\n/**\n * A TilingSprite is a fast and efficient way to render a repeating texture across a given area.\n * The texture can be scrolled, scaled, and rotated independently of the sprite itself.\n * @example\n * ```ts\n * // Create a simple tiling background\n * const background = new TilingSprite({\n *     texture: Texture.from('background.png'),\n *     width: app.screen.width,\n *     height: app.screen.height,\n * });\n * app.stage.addChild(background);\n *\n * // Create a scrolling parallax background\n * const parallax = new TilingSprite({\n *     texture: Texture.from('clouds.png'),\n *     width: app.screen.width,\n *     height: app.screen.height,\n *     tileScale: { x: 0.5, y: 0.5 }\n * });\n *\n * // Animate the tiling position\n * app.ticker.add(() => {\n *     parallax.tilePosition.x -= 1; // Scroll left\n *     parallax.tilePosition.y -= 0.5; // Scroll up slowly\n * });\n *\n * // Create a repeating pattern with rotation\n * const pattern = new TilingSprite({\n *     texture: Texture.from('pattern.png'),\n *     width: 300,\n *     height: 200,\n *     tileRotation: Math.PI / 4, // 45 degree rotation\n *     anchor: 0.5 // Center anchor point\n * });\n * ```\n * @category scene\n * @standard\n * @see {@link TilingSpriteOptions} For configuration options\n * @see {@link Texture} For texture management\n * @see {@link Assets} For asset loading\n */\nexport class TilingSprite extends ViewContainer<TilingSpriteGpuData> implements View, Instruction\n{\n    /**\n     * Creates a new tiling sprite based on a source texture or image path.\n     * This is a convenience method that automatically creates and manages textures.\n     * @example\n     * ```ts\n     * // Create a new tiling sprite from an image path\n     * const pattern = TilingSprite.from('pattern.png');\n     * pattern.width = 300; // Set the width of the tiling area\n     * pattern.height = 200; // Set the height of the tiling area\n     *\n     * // Create from options\n     * const texture = Texture.from('pattern.png');\n     * const pattern = TilingSprite.from(texture, {\n     *     width: 300,\n     *     height: 200,\n     *     tileScale: { x: 0.5, y: 0.5 }\n     * });\n     * ```\n     * @param source - The source to create the sprite from. Can be a path to an image or a texture\n     * @param options - Additional options for the tiling sprite\n     * @returns A new tiling sprite based on the source\n     * @see {@link Texture.from} For texture creation details\n     * @see {@link Assets} For asset loading and management\n     */\n    public static from(source: Texture | string, options: TilingSpriteOptions = {})\n    {\n        if (typeof source === 'string')\n        {\n            return new TilingSprite({\n                texture: Cache.get(source),\n                ...options,\n            });\n        }\n\n        return new TilingSprite({\n            texture: source,\n            ...options,\n        });\n    }\n\n    /**\n     * Default options used when creating a TilingSprite instance.\n     * These values are used as fallbacks when specific options are not provided.\n     * @example\n     * ```ts\n     * // Override default options globally\n     * TilingSprite.defaultOptions.texture = Texture.from('defaultPattern.png');\n     * TilingSprite.defaultOptions.tileScale = { x: 2, y: 2 };\n     *\n     * // Create sprite using default options\n     * const sprite = new TilingSprite();\n     * // Will use defaultPattern.png and scale 2x\n     * ```\n     * @type {TilingSpriteOptions}\n     * @see {@link TilingSpriteOptions} For all available options\n     * @see {@link TilingSprite.from} For creating sprites with custom options\n     * @see {@link Texture.EMPTY} For the default empty texture\n     */\n    public static defaultOptions: TilingSpriteOptions = {\n        /** The texture to use for the sprite. */\n        texture: Texture.EMPTY,\n        /** The anchor point of the sprite */\n        anchor: { x: 0, y: 0 },\n        /** The offset of the image that is being tiled. */\n        tilePosition: { x: 0, y: 0 },\n        /** Scaling of the image that is being tiled. */\n        tileScale: { x: 1, y: 1 },\n        /** The rotation of the image that is being tiled. */\n        tileRotation: 0,\n        /**\n         * Flags whether the tiling pattern should originate from the origin instead of the top-left corner in\n         * local space.\n         *\n         * This will make the texture coordinates assigned to each vertex dependent on the value of the anchor. Without\n         * this, the top-left corner always gets the (0, 0) texture coordinate.\n         * @default false\n         */\n        applyAnchorToTexture: false,\n    };\n\n    /** @internal */\n    public override readonly renderPipeId: string = 'tilingSprite';\n    /** @advanced */\n    public readonly batched = true;\n\n    /**\n     * Flags whether the tiling pattern should originate from the origin instead of the top-left corner in\n     * local space.\n     *\n     * This will make the texture coordinates assigned to each vertex dependent on the value of the anchor. Without\n     * this, the top-left corner always gets the (0, 0) texture coordinate.\n     * @example\n     * ```ts\n     * // Enable anchor-based tiling\n     * tilingSprite.applyAnchorToTexture = true;\n     * ```\n     * @default false\n     */\n    public applyAnchorToTexture: boolean;\n    /**\n     * @see {@link TilingSpriteOptions.applyAnchorToTexture}\n     * @deprecated since 8.0.0\n     * @advanced\n     */\n    public get uvRespectAnchor(): boolean\n    {\n        deprecation(v8_0_0, 'uvRespectAnchor is deprecated, please use applyAnchorToTexture instead');\n\n        return this.applyAnchorToTexture;\n    }\n    /** @advanced */\n    public set uvRespectAnchor(value: boolean)\n    {\n        deprecation(v8_0_0, 'uvRespectAnchor is deprecated, please use applyAnchorToTexture instead');\n        this.applyAnchorToTexture = value;\n    }\n\n    /** @internal */\n    public _anchor: ObservablePoint;\n    /** @internal */\n    public _tileTransform: Transform;\n    /** @internal */\n    public _texture: Texture;\n\n    private _width: number;\n    private _height: number;\n\n    /**\n     * @param {Texture | TilingSpriteOptions} options - The options for creating the tiling sprite.\n     */\n    constructor(options?: Texture | TilingSpriteOptions);\n    /** @deprecated since 8.0.0 */\n    constructor(texture: Texture, width: number, height: number);\n    constructor(...args: [(Texture | TilingSpriteOptions)?] | [Texture, number, number])\n    {\n        let options = args[0] || {};\n\n        if (options instanceof Texture)\n        {\n            options = { texture: options };\n        }\n\n        if (args.length > 1)\n        {\n            // #if _DEBUG\n            deprecation(v8_0_0, 'use new TilingSprite({ texture, width:100, height:100 }) instead');\n            // #endif\n\n            options.width = args[1];\n            options.height = args[2];\n        }\n\n        options = { ...TilingSprite.defaultOptions, ...options };\n\n        const {\n            texture,\n            anchor,\n            tilePosition,\n            tileScale,\n            tileRotation,\n            width,\n            height,\n            applyAnchorToTexture,\n            roundPixels,\n            ...rest\n        } = options ?? {};\n\n        super({\n\n            label: 'TilingSprite',\n            ...rest\n        });\n\n        this.allowChildren = false;\n\n        this._anchor = new ObservablePoint(\n            {\n                _onUpdate: () =>\n                {\n                    this.onViewUpdate();\n                }\n            },\n        );\n\n        this.applyAnchorToTexture = applyAnchorToTexture;\n\n        this.texture = texture;\n        this._width = width ?? texture.width;\n        this._height = height ?? texture.height;\n\n        this._tileTransform = new Transform({\n            observer: {\n                _onUpdate: () => this.onViewUpdate(),\n            }\n        });\n\n        if (anchor) this.anchor = anchor;\n        this.tilePosition = tilePosition;\n        this.tileScale = tileScale;\n        this.tileRotation = tileRotation;\n\n        this.roundPixels = roundPixels ?? false;\n    }\n\n    /**\n     * Changes frame clamping in corresponding textureMatrix\n     * Change to -0.5 to add a pixel to the edge, recommended for transparent trimmed textures in atlas\n     * @default 0.5\n     * @type {number}\n     * @advanced\n     */\n    get clampMargin()\n    {\n        return this._texture.textureMatrix.clampMargin;\n    }\n\n    /** @advanced */\n    set clampMargin(value: number)\n    {\n        this._texture.textureMatrix.clampMargin = value;\n    }\n\n    /**\n     * The anchor sets the origin point of the sprite. The default value is taken from the {@link Texture}\n     * and passed to the constructor.\n     *\n     * - The default is `(0,0)`, this means the sprite's origin is the top left.\n     * - Setting the anchor to `(0.5,0.5)` means the sprite's origin is centered.\n     * - Setting the anchor to `(1,1)` would mean the sprite's origin point will be the bottom right corner.\n     *\n     * If you pass only single parameter, it will set both x and y to the same value as shown in the example below.\n     * @example\n     * ```ts\n     * // Center the anchor point\n     * sprite.anchor = 0.5; // Sets both x and y to 0.5\n     * sprite.position.set(400, 300); // Sprite will be centered at this position\n     *\n     * // Set specific x/y anchor points\n     * sprite.anchor = {\n     *     x: 1, // Right edge\n     *     y: 0  // Top edge\n     * };\n     *\n     * // Using individual coordinates\n     * sprite.anchor.set(0.5, 1); // Center-bottom\n     *\n     * // For rotation around center\n     * sprite.anchor.set(0.5);\n     * sprite.rotation = Math.PI / 4; // 45 degrees around center\n     *\n     * // For scaling from center\n     * sprite.anchor.set(0.5);\n     * sprite.scale.set(2); // Scales from center point\n     * ```\n     */\n    get anchor(): ObservablePoint\n    {\n        return this._anchor;\n    }\n\n    set anchor(value: PointData | number)\n    {\n        typeof value === 'number' ? this._anchor.set(value) : this._anchor.copyFrom(value);\n    }\n\n    /**\n     * The offset of the tiling texture.\n     * Used to scroll or position the repeated pattern.\n     * @example\n     * ```ts\n     * // Offset the tiling pattern by 100 pixels in both x and y directions\n     * tilingSprite.tilePosition = { x: 100, y: 100 };\n     * ```\n     * @default {x: 0, y: 0}\n     */\n    get tilePosition(): ObservablePoint\n    {\n        return this._tileTransform.position;\n    }\n\n    set tilePosition(value: PointData)\n    {\n        this._tileTransform.position.copyFrom(value);\n    }\n\n    /**\n     * Scale of the tiling texture.\n     * Affects the size of each repeated instance of the texture.\n     * @example\n     * ```ts\n     * // Scale the texture by 1.5 in both x and y directions\n     * tilingSprite.tileScale = { x: 1.5, y: 1.5 };\n     * ```\n     * @default {x: 1, y: 1}\n     */\n    get tileScale(): ObservablePoint\n    {\n        return this._tileTransform.scale;\n    }\n\n    set tileScale(value: PointData | number)\n    {\n        typeof value === 'number' ? this._tileTransform.scale.set(value) : this._tileTransform.scale.copyFrom(value);\n    }\n\n    set tileRotation(value)\n    {\n        this._tileTransform.rotation = value;\n    }\n\n    /**\n     * Rotation of the tiling texture in radians.\n     * This controls the rotation applied to the texture before tiling.\n     * @example\n     * ```ts\n     * // Rotate the texture by 45 degrees (in radians)\n     * tilingSprite.tileRotation = Math.PI / 4; // 45 degrees\n     * ```\n     * @default 0\n     */\n    get tileRotation()\n    {\n        return this._tileTransform.rotation;\n    }\n\n    /**\n     * The transform object that controls the tiling texture's position, scale, and rotation.\n     * This transform is independent of the sprite's own transform properties.\n     * @example\n     * ```ts\n     * // Access transform properties directly\n     * sprite.tileTransform.position.set(100, 50);\n     * sprite.tileTransform.scale.set(2);\n     * sprite.tileTransform.rotation = Math.PI / 4;\n     *\n     * // Create smooth scrolling animation\n     * app.ticker.add(() => {\n     *     sprite.tileTransform.position.x += 1;\n     *     sprite.tileTransform.rotation += 0.01;\n     * });\n     *\n     * // Reset transform\n     * sprite.tileTransform.position.set(0);\n     * sprite.tileTransform.scale.set(1);\n     * sprite.tileTransform.rotation = 0;\n     * ```\n     * @returns {Transform} The transform object for the tiling texture\n     * @see {@link Transform} For transform operations\n     * @see {@link TilingSprite#tilePosition} For position control\n     * @see {@link TilingSprite#tileScale} For scale control\n     * @see {@link TilingSprite#tileRotation} For rotation control\n     * @advanced\n     */\n    get tileTransform()\n    {\n        return this._tileTransform;\n    }\n\n    set texture(value: Texture)\n    {\n        value ||= Texture.EMPTY;\n\n        const currentTexture = this._texture;\n\n        if (currentTexture === value) return;\n\n        if (currentTexture && currentTexture.dynamic) currentTexture.off('update', this.onViewUpdate, this);\n        if (value.dynamic) value.on('update', this.onViewUpdate, this);\n\n        this._texture = value;\n\n        this.onViewUpdate();\n    }\n\n    /**\n     * The texture to use for tiling.\n     * This is the image that will be repeated across the sprite.\n     * @example\n     * ```ts\n     * // Use a texture from the asset cache\n     * tilingSprite.texture = Texture.from('assets/pattern.png');\n     * ```\n     * @default Texture.WHITE\n     */\n    get texture()\n    {\n        return this._texture;\n    }\n\n    /**\n     * The width of the tiling area. This defines how wide the area is that the texture will be tiled across.\n     * @example\n     * ```ts\n     * // Create a tiling sprite\n     * const sprite = new TilingSprite({\n     *     texture: Texture.from('pattern.png'),\n     *     width: 500,\n     *     height: 300\n     * });\n     *\n     * // Adjust width dynamically\n     * sprite.width = 800; // Expands tiling area\n     *\n     * // Update on resize\n     * window.addEventListener('resize', () => {\n     *     sprite.width = app.screen.width;\n     * });\n     * ```\n     * @see {@link TilingSprite#setSize} For setting both width and height efficiently\n     * @see {@link TilingSprite#height} For setting height\n     */\n    override set width(value: number)\n    {\n        this._width = value;\n        this.onViewUpdate();\n    }\n\n    override get width()\n    {\n        return this._width;\n    }\n\n    override set height(value: number)\n    {\n        this._height = value;\n        this.onViewUpdate();\n    }\n\n    /**\n     * The height of the tiling area. This defines how tall the area is that the texture will be tiled across.\n     * @example\n     * ```ts\n     * // Create a tiling sprite\n     * const sprite = new TilingSprite({\n     *     texture: Texture.from('pattern.png'),\n     *     width: 500,\n     *     height: 300\n     * });\n     *\n     * // Adjust width dynamically\n     * sprite.height = 800; // Expands tiling area\n     *\n     * // Update on resize\n     * window.addEventListener('resize', () => {\n     *     sprite.height = app.screen.height;\n     * });\n     * ```\n     * @see {@link TilingSprite#setSize} For setting both width and height efficiently\n     * @see {@link TilingSprite#width} For setting width\n     */\n    override get height()\n    {\n        return this._height;\n    }\n\n    /**\n     * Sets the size of the TilingSprite to the specified width and height.\n     * This is faster than setting width and height separately as it only triggers one update.\n     * @example\n     * ```ts\n     * // Set specific dimensions\n     * sprite.setSize(300, 200); // Width: 300, Height: 200\n     *\n     * // Set uniform size (square)\n     * sprite.setSize(400); // Width: 400, Height: 400\n     *\n     * // Set size using object\n     * sprite.setSize({\n     *     width: 500,\n     *     height: 300\n     * });\n     * ```\n     * @param value - This can be either a number for uniform sizing or a Size object with width/height properties\n     * @param height - The height to set. Defaults to the value of `width` if not provided\n     * @see {@link TilingSprite#width} For setting width only\n     * @see {@link TilingSprite#height} For setting height only\n     */\n    public override setSize(value: number | Optional<Size, 'height'>, height?: number): void\n    {\n        if (typeof value === 'object')\n        {\n            height = value.height ?? value.width;\n            value = value.width;\n        }\n\n        this._width = value;\n        this._height = height ?? value;\n\n        this.onViewUpdate();\n    }\n\n    /**\n     * Retrieves the size of the TilingSprite as a {@link Size} object.\n     * This method is more efficient than getting width and height separately as it only allocates one object.\n     * @example\n     * ```ts\n     * // Get basic size\n     * const size = sprite.getSize();\n     * console.log(`Size: ${size.width}x${size.height}`);\n     *\n     * // Reuse existing size object\n     * const reuseSize = { width: 0, height: 0 };\n     * sprite.getSize(reuseSize);\n     * ```\n     * @param out - Optional object to store the size in, to avoid allocating a new object\n     * @returns The size of the TilingSprite\n     * @see {@link TilingSprite#width} For getting just the width\n     * @see {@link TilingSprite#height} For getting just the height\n     * @see {@link TilingSprite#setSize} For setting both width and height efficiently\n     */\n    public override getSize(out?: Size): Size\n    {\n        out ||= {} as Size;\n        out.width = this._width;\n        out.height = this._height;\n\n        return out;\n    }\n\n    /** @private */\n    protected override updateBounds()\n    {\n        const bounds = this._bounds;\n\n        const anchor = this._anchor;\n\n        const width = this._width;\n        const height = this._height;\n\n        bounds.minX = -anchor._x * width;\n        bounds.maxX = bounds.minX + width;\n\n        bounds.minY = -anchor._y * height;\n        bounds.maxY = bounds.minY + height;\n    }\n\n    /**\n     * Checks if the object contains the given point in local coordinates.\n     * Takes into account the anchor offset when determining boundaries.\n     * @example\n     * ```ts\n     * // Create a tiling sprite\n     * const sprite = new TilingSprite({\n     *     texture: Texture.from('pattern.png'),\n     *     width: 200,\n     *     height: 100,\n     *     anchor: 0.5 // Center anchor\n     * });\n     *\n     * // Basic point check\n     * const contains = sprite.containsPoint({ x: 50, y: 25 });\n     * console.log('Point is inside:', contains);\n     *\n     * // Check with different anchors\n     * sprite.anchor.set(0); // Top-left anchor\n     * console.log('Contains point:', sprite.containsPoint({ x: 150, y: 75 }));\n     * ```\n     * @param point - The point to check in local coordinates\n     * @returns True if the point is within the sprite's bounds\n     * @see {@link TilingSprite#toLocal} For converting global coordinates to local\n     * @see {@link TilingSprite#anchor} For understanding boundary calculations\n     */\n    public override containsPoint(point: PointData)\n    {\n        const width = this._width;\n        const height = this._height;\n        const x1 = -width * this._anchor._x;\n        let y1 = 0;\n\n        if (point.x >= x1 && point.x <= x1 + width)\n        {\n            y1 = -height * this._anchor._y;\n\n            if (point.y >= y1 && point.y <= y1 + height) return true;\n        }\n\n        return false;\n    }\n\n    /**\n     * Destroys this sprite renderable and optionally its texture.\n     * @param options - Options parameter. A boolean will act as if all options\n     *  have been set to that value\n     * @example\n     * tilingSprite.destroy();\n     * tilingSprite.destroy(true);\n     * tilingSprite.destroy({ texture: true, textureSource: true });\n     */\n    public override destroy(options: DestroyOptions = false)\n    {\n        super.destroy(options);\n\n        this._anchor = null;\n        this._tileTransform = null;\n        this._bounds = null;\n\n        const destroyTexture = typeof options === 'boolean' ? options : options?.texture;\n\n        if (destroyTexture)\n        {\n            const destroyTextureSource = typeof options === 'boolean' ? options : options?.textureSource;\n\n            this._texture.destroy(destroyTextureSource);\n        }\n\n        this._texture = null;\n    }\n}\n\n", "import { ObservablePoint } from '../../maths/point/ObservablePoint';\nimport { deprecation, v8_0_0 } from '../../utils/logging/deprecation';\nimport { ViewContainer, type ViewContainerOptions } from '../view/ViewContainer';\n\nimport type { Size } from '../../maths/misc/Size';\nimport type { PointData } from '../../maths/point/PointData';\nimport type { View } from '../../rendering/renderers/shared/view/View';\nimport type { Optional } from '../container/container-mixins/measureMixin';\nimport type { DestroyOptions } from '../container/destroyTypes';\nimport type { HTMLTextStyle, HTMLTextStyleOptions } from '../text-html/HTMLTextStyle';\nimport type { TextStyle, TextStyleOptions } from './TextStyle';\n\n/**\n * A string or number that can be used as text.\n * @example\n * ```ts\n * const text: TextString = 'Hello Pixi!';\n * const text2: TextString = 12345;\n * const text3: TextString = { toString: () => 'Hello Pixi!' };\n * ```\n * @category text\n * @standard\n */\nexport type TextString = string | number | { toString: () => string };\n/**\n * A union of all text styles, including HTML, Bitmap and Canvas text styles.\n * This is used to allow for any text style to be passed to a text object.\n * @example\n * ```ts\n * import { TextStyle, HTMLTextStyle } from 'pixi.js';\n * const style: AnyTextStyle = new TextStyle({ fontSize: 24 });\n * const htmlStyle: AnyTextStyle = new HTMLTextStyle({ fontSize: '24px' });\n * ```\n * @category text\n * @standard\n * @see TextStyle\n * @see HTMLTextStyle\n */\nexport type AnyTextStyle = TextStyle | HTMLTextStyle;\n/**\n * A union of all text style options, including HTML, Bitmap and Canvas text style options.\n * This is used to allow for any text style options to be passed to a text object.\n * @example\n * ```ts\n * import { TextStyleOptions, HTMLTextStyleOptions } from 'pixi.js';\n * const styleOptions: AnyTextStyleOptions = { fontSize: 24 } as TextStyleOptions;\n * const htmlStyleOptions: AnyTextStyleOptions = { fontSize: '24px' } as HTMLTextStyleOptions;\n * ```\n * @category text\n * @standard\n * @see TextStyleOptions\n * @see HTMLTextStyleOptions\n */\nexport type AnyTextStyleOptions = TextStyleOptions | HTMLTextStyleOptions;\n\n/**\n * Options for creating text objects in PixiJS. This interface defines the common properties\n * used across different text rendering implementations (Canvas, HTML, and Bitmap).\n * @example\n * ```ts\n * // Create basic text with minimal options\n * const basicText = new Text({\n *     text: 'Hello Pixi!',\n *     style: {\n *         fontSize: 24,\n *         fill: 0xff1010\n *     }\n * });\n *\n * // Create text with advanced styling\n * const styledText = new Text({\n *     text: 'Styled Text',\n *     style: {\n *         fontFamily: 'Arial',\n *         fontSize: 32,\n *         fill: new FillGradient({\n *             end: { x: 1, y: 1 },\n *             stops: [\n *                 { color: 0xff0000, offset: 0 }, // Red at start\n *                 { color: 0x0000ff, offset: 1 }, // Blue at end\n *             ]\n *         }),\n *         stroke: { color: '#4a1850', width: 5 },\n *         dropShadow: {\n *             color: '#000000',\n *             blur: 4,\n *             distance: 6\n *         },\n *         align: 'center'\n *     },\n *     anchor: 0.5,\n *     resolution: window.devicePixelRatio\n * });\n *\n * // Create multiline text with word wrap\n * const wrappedText = new Text({\n *     text: 'This is a long piece of text that will wrap onto multiple lines',\n *     style: {\n *         fontSize: 20,\n *         wordWrap: true,\n *         wordWrapWidth: 200,\n *         lineHeight: 30\n *     },\n *     resolution: 2,\n *     roundPixels: true\n * });\n * ```\n * @category text\n * @standard\n * @noInheritDoc\n */\nexport interface TextOptions<\n    TEXT_STYLE extends TextStyle = TextStyle,\n    TEXT_STYLE_OPTIONS extends TextStyleOptions = TextStyleOptions,\n> extends PixiMixins.TextOptions, ViewContainerOptions\n{\n    /**\n     * The anchor point of the text that controls the origin point for positioning and rotation.\n     * Can be a number (same value for x/y) or a PointData object.\n     * - (0,0) is top-left\n     * - (0.5,0.5) is center\n     * - (1,1) is bottom-right\n     * ```ts\n     * // Set anchor to center\n     * const text = new Text({\n     *     text: 'Hello Pixi!',\n     *     anchor: 0.5 // Same as { x: 0.5, y: 0.5 }\n     * });\n     * // Set anchor to top-left\n     * const text2 = new Text({\n     *     text: 'Hello Pixi!',\n     *     anchor: { x: 0, y: 0 } // Top-left corner\n     * });\n     * // Set anchor to bottom-right\n     * const text3 = new Text({\n     *     text: 'Hello Pixi!',\n     *     anchor: { x: 1, y: 1 } // Bottom-right corner\n     * });\n     * ```\n     * @default { x: 0, y: 0 }\n     */\n    anchor?: PointData | number;\n    /**\n     * The text content to display. Use '\\n' for line breaks.\n     * Accepts strings, numbers, or objects with toString() method.\n     * @example\n     * ```ts\n     * const text = new Text({\n     *     text: 'Hello Pixi!',\n     * });\n     * const multilineText = new Text({\n     *     text: 'Line 1\\nLine 2\\nLine 3',\n     * });\n     * const numberText = new Text({\n     *     text: 12345, // Will be converted to '12345'\n     * });\n     * const objectText = new Text({\n     *     text: { toString: () => 'Object Text' }, // Custom toString\n     * });\n     * ```\n     * @default ''\n     */\n    text?: TextString;\n    /**\n     * The resolution/device pixel ratio for rendering.\n     * Higher values result in sharper text at the cost of performance.\n     * Set to null for auto-resolution based on device.\n     * @example\n     * ```ts\n     * const text = new Text({\n     *     text: 'Hello Pixi!',\n     *     resolution: 2 // High DPI for sharper text\n     * });\n     * const autoResText = new Text({\n     *     text: 'Auto Resolution',\n     *     resolution: null // Use device's pixel ratio\n     * });\n     * ```\n     * @default null\n     */\n    resolution?: number;\n    /**\n     * The style configuration for the text.\n     * Can be a TextStyle instance or a configuration object.\n     * Supports canvas text styles, HTML text styles, and bitmap text styles.\n     * @example\n     * ```ts\n     * const text = new Text({\n     *     text: 'Styled Text',\n     *     style: {\n     *         fontSize: 24,\n     *         fill: 0xff1010, // Red color\n     *         fontFamily: 'Arial',\n     *         align: 'center', // Center alignment\n     *         stroke: { color: '#4a1850', width: 5 }, // Purple stroke\n     *         dropShadow: {\n     *             color: '#000000', // Black shadow\n     *             blur: 4, // Shadow blur\n     *             distance: 6 // Shadow distance\n     *         }\n     *     }\n     * });\n     * const htmlText = new HTMLText({\n     *     text: 'HTML Styled Text',\n     *     style: {\n     *         fontSize: '20px',\n     *         fill: 'blue',\n     *         fontFamily: 'Verdana',\n     *     }\n     * });\n     * const bitmapText = new BitmapText({\n     *     text: 'Bitmap Styled Text',\n     *     style: {\n     *         fontName: 'Arial',\n     *         fontSize: 32,\n     *     }\n     * })\n     */\n    style?: TEXT_STYLE | TEXT_STYLE_OPTIONS;\n    /**\n     * Whether to round the x/y position to whole pixels.\n     * Enabling can prevent anti-aliasing of text edges but may cause slight position shifting.\n     * @example\n     * ```ts\n     * const text = new Text({\n     *     text: 'Rounded Text',\n     *     roundPixels: true // Rounds position to whole pixels\n     * });\n     * @default false\n     */\n    roundPixels?: boolean;\n}\n\n/**\n * An abstract Text class, used by all text type in Pixi. This includes Canvas, HTML, and Bitmap Text.\n * @see Text\n * @see BitmapText\n * @see HTMLText\n * @category text\n * @advanced\n */\nexport abstract class AbstractText<\n    TEXT_STYLE extends TextStyle = TextStyle,\n    TEXT_STYLE_OPTIONS extends TextStyleOptions = TextStyleOptions,\n    TEXT_OPTIONS extends TextOptions<TEXT_STYLE, TEXT_STYLE_OPTIONS> = TextOptions<TEXT_STYLE, TEXT_STYLE_OPTIONS>,\n    GPU_DATA extends { destroy: () => void } = any\n> extends ViewContainer<GPU_DATA> implements View\n{\n    /** @internal */\n    public batched = true;\n    /** @internal */\n    public _anchor: ObservablePoint;\n\n    /** @internal */\n    public _resolution: number = null;\n    /** @internal */\n    public _autoResolution: boolean = true;\n\n    /** @internal */\n    public _style: TEXT_STYLE;\n    /** @internal */\n    public _didTextUpdate = true;\n\n    protected _text: string;\n    private readonly _styleClass: new (options: TEXT_STYLE_OPTIONS) => TEXT_STYLE;\n\n    constructor(\n        options: TEXT_OPTIONS,\n        styleClass: new (options: TEXT_STYLE_OPTIONS) => TEXT_STYLE\n    )\n    {\n        const { text, resolution, style, anchor, width, height, roundPixels, ...rest } = options;\n\n        super({\n            ...rest\n        });\n\n        this._styleClass = styleClass;\n\n        this.text = text ?? '';\n\n        this.style = style;\n\n        this.resolution = resolution ?? null;\n\n        this.allowChildren = false;\n\n        this._anchor = new ObservablePoint(\n            {\n                _onUpdate: () =>\n                {\n                    this.onViewUpdate();\n                },\n            },\n        );\n\n        if (anchor) this.anchor = anchor;\n        this.roundPixels = roundPixels ?? false;\n\n        // needs to be set after the container has initiated\n        if (width !== undefined) this.width = width;\n        if (height !== undefined) this.height = height;\n    }\n\n    /**\n     * The anchor point of the text that controls the origin point for positioning and rotation.\n     * Can be a number (same value for x/y) or a PointData object.\n     * - (0,0) is top-left\n     * - (0.5,0.5) is center\n     * - (1,1) is bottom-right\n     * ```ts\n     * // Set anchor to center\n     * const text = new Text({\n     *     text: 'Hello Pixi!',\n     *     anchor: 0.5 // Same as { x: 0.5, y: 0.5 }\n     * });\n     * // Set anchor to top-left\n     * const text2 = new Text({\n     *     text: 'Hello Pixi!',\n     *     anchor: { x: 0, y: 0 } // Top-left corner\n     * });\n     * // Set anchor to bottom-right\n     * const text3 = new Text({\n     *     text: 'Hello Pixi!',\n     *     anchor: { x: 1, y: 1 } // Bottom-right corner\n     * });\n     * ```\n     * @default { x: 0, y: 0 }\n     */\n    get anchor(): ObservablePoint\n    {\n        return this._anchor;\n    }\n\n    set anchor(value: PointData | number)\n    {\n        typeof value === 'number' ? this._anchor.set(value) : this._anchor.copyFrom(value);\n    }\n\n    /**\n     * The text content to display. Use '\\n' for line breaks.\n     * Accepts strings, numbers, or objects with toString() method.\n     * @example\n     * ```ts\n     * const text = new Text({\n     *     text: 'Hello Pixi!',\n     * });\n     * const multilineText = new Text({\n     *     text: 'Line 1\\nLine 2\\nLine 3',\n     * });\n     * const numberText = new Text({\n     *     text: 12345, // Will be converted to '12345'\n     * });\n     * const objectText = new Text({\n     *     text: { toString: () => 'Object Text' }, // Custom toString\n     * });\n     *\n     * // Update text dynamically\n     * text.text = 'Updated Text'; // Re-renders with new text\n     * text.text = 67890; // Updates to '67890'\n     * text.text = { toString: () => 'Dynamic Text' }; // Uses custom toString method\n     * // Clear text\n     * text.text = ''; // Clears the text\n     * ```\n     * @default ''\n     */\n    set text(value: TextString)\n    {\n        // check its a string\n        value = value.toString();\n\n        if (this._text === value) return;\n\n        this._text = value as string;\n        this.onViewUpdate();\n    }\n\n    get text(): string\n    {\n        return this._text;\n    }\n\n    /**\n     * The resolution/device pixel ratio for rendering.\n     * Higher values result in sharper text at the cost of performance.\n     * Set to null for auto-resolution based on device.\n     * @example\n     * ```ts\n     * const text = new Text({\n     *     text: 'Hello Pixi!',\n     *     resolution: 2 // High DPI for sharper text\n     * });\n     * const autoResText = new Text({\n     *     text: 'Auto Resolution',\n     *     resolution: null // Use device's pixel ratio\n     * });\n     * ```\n     * @default null\n     */\n    set resolution(value: number)\n    {\n        this._autoResolution = value === null;\n        this._resolution = value;\n        this.onViewUpdate();\n    }\n\n    get resolution(): number\n    {\n        return this._resolution;\n    }\n\n    get style(): TEXT_STYLE\n    {\n        return this._style;\n    }\n\n    /**\n     * The style configuration for the text.\n     * Can be a TextStyle instance or a configuration object.\n     * Supports canvas text styles, HTML text styles, and bitmap text styles.\n     * @example\n     * ```ts\n     * const text = new Text({\n     *     text: 'Styled Text',\n     *     style: {\n     *         fontSize: 24,\n     *         fill: 0xff1010, // Red color\n     *         fontFamily: 'Arial',\n     *         align: 'center', // Center alignment\n     *         stroke: { color: '#4a1850', width: 5 }, // Purple stroke\n     *         dropShadow: {\n     *             color: '#000000', // Black shadow\n     *             blur: 4, // Shadow blur\n     *             distance: 6 // Shadow distance\n     *         }\n     *     }\n     * });\n     * const htmlText = new HTMLText({\n     *     text: 'HTML Styled Text',\n     *     style: {\n     *         fontSize: '20px',\n     *         fill: 'blue',\n     *         fontFamily: 'Verdana',\n     *     }\n     * });\n     * const bitmapText = new BitmapText({\n     *     text: 'Bitmap Styled Text',\n     *     style: {\n     *         fontName: 'Arial',\n     *         fontSize: 32,\n     *     }\n     * })\n     *\n     * // Update style dynamically\n     * text.style = {\n     *     fontSize: 30, // Change font size\n     *     fill: 0x00ff00, // Change color to green\n     *     align: 'right', // Change alignment to right\n     *     stroke: { color: '#000000', width: 2 }, // Add black stroke\n     * }\n     */\n    set style(style: TEXT_STYLE | Partial<TEXT_STYLE> | TEXT_STYLE_OPTIONS)\n    {\n        style ||= {};\n\n        this._style?.off('update', this.onViewUpdate, this);\n\n        if (style instanceof this._styleClass)\n        {\n            this._style = style as TEXT_STYLE;\n        }\n        else\n        {\n            this._style = new this._styleClass(style as TEXT_STYLE_OPTIONS);\n        }\n\n        this._style.on('update', this.onViewUpdate, this);\n        this.onViewUpdate();\n    }\n\n    /**\n     * The width of the sprite, setting this will actually modify the scale to achieve the value set.\n     * @example\n     * ```ts\n     * // Set width directly\n     * texture.width = 200;\n     * console.log(texture.scale.x); // Scale adjusted to match width\n     *\n     * // For better performance when setting both width and height\n     * texture.setSize(300, 400); // Avoids recalculating bounds twice\n     * ```\n     */\n    override get width(): number\n    {\n        return Math.abs(this.scale.x) * this.bounds.width;\n    }\n\n    override set width(value: number)\n    {\n        this._setWidth(value, this.bounds.width);\n    }\n\n    /**\n     * The height of the sprite, setting this will actually modify the scale to achieve the value set.\n     * @example\n     * ```ts\n     * // Set height directly\n     * texture.height = 200;\n     * console.log(texture.scale.y); // Scale adjusted to match height\n     *\n     * // For better performance when setting both width and height\n     * texture.setSize(300, 400); // Avoids recalculating bounds twice\n     * ```\n     */\n    override get height(): number\n    {\n        return Math.abs(this.scale.y) * this.bounds.height;\n    }\n\n    override set height(value: number)\n    {\n        this._setHeight(value, this.bounds.height);\n    }\n\n    /**\n     * Retrieves the size of the Text as a [Size]{@link Size} object based on the texture dimensions and scale.\n     * This is faster than getting width and height separately as it only calculates the bounds once.\n     * @example\n     * ```ts\n     * // Basic size retrieval\n     * const text = new Text({\n     *     text: 'Hello Pixi!',\n     *     style: { fontSize: 24 }\n     * });\n     * const size = text.getSize();\n     * console.log(`Size: ${size.width}x${size.height}`);\n     *\n     * // Reuse existing size object\n     * const reuseSize = { width: 0, height: 0 };\n     * text.getSize(reuseSize);\n     * ```\n     * @param out - Optional object to store the size in, to avoid allocating a new object\n     * @returns The size of the Sprite\n     * @see {@link Text#width} For getting just the width\n     * @see {@link Text#height} For getting just the height\n     * @see {@link Text#setSize} For setting both width and height\n     */\n    public override getSize(out?: Size): Size\n    {\n        out ||= {} as Size;\n        out.width = Math.abs(this.scale.x) * this.bounds.width;\n        out.height = Math.abs(this.scale.y) * this.bounds.height;\n\n        return out;\n    }\n\n    /**\n     * Sets the size of the Text to the specified width and height.\n     * This is faster than setting width and height separately as it only recalculates bounds once.\n     * @example\n     * ```ts\n     * // Basic size setting\n     * const text = new Text({\n     *    text: 'Hello Pixi!',\n     *    style: { fontSize: 24 }\n     * });\n     * text.setSize(100, 200); // Width: 100, Height: 200\n     *\n     * // Set uniform size\n     * text.setSize(100); // Sets both width and height to 100\n     *\n     * // Set size with object\n     * text.setSize({\n     *     width: 200,\n     *     height: 300\n     * });\n     * ```\n     * @param value - This can be either a number or a {@link Size} object\n     * @param height - The height to set. Defaults to the value of `width` if not provided\n     * @see {@link Text#width} For setting width only\n     * @see {@link Text#height} For setting height only\n     */\n    public override setSize(value: number | Optional<Size, 'height'>, height?: number)\n    {\n        if (typeof value === 'object')\n        {\n            height = value.height ?? value.width;\n            value = value.width;\n        }\n        else\n        {\n            height ??= value;\n        }\n\n        value !== undefined && this._setWidth(value, this.bounds.width);\n        height !== undefined && this._setHeight(height, this.bounds.height);\n    }\n\n    /**\n     * Checks if the object contains the given point in local coordinates.\n     * Uses the text's bounds for hit testing.\n     * @example\n     * ```ts\n     * // Basic point check\n     * const localPoint = { x: 50, y: 25 };\n     * const contains = text.containsPoint(localPoint);\n     * console.log('Point is inside:', contains);\n     * ```\n     * @param point - The point to check in local coordinates\n     * @returns True if the point is within the text's bounds\n     * @see {@link Container#toLocal} For converting global coordinates to local\n     */\n    public override containsPoint(point: PointData)\n    {\n        const width = this.bounds.width;\n        const height = this.bounds.height;\n\n        const x1 = -width * this.anchor.x;\n        let y1 = 0;\n\n        if (point.x >= x1 && point.x <= x1 + width)\n        {\n            y1 = -height * this.anchor.y;\n\n            if (point.y >= y1 && point.y <= y1 + height) return true;\n        }\n\n        return false;\n    }\n\n    /** @internal */\n    public override onViewUpdate()\n    {\n        if (!this.didViewUpdate) this._didTextUpdate = true;\n        super.onViewUpdate();\n    }\n\n    /**\n     * Destroys this text renderable and optionally its style texture.\n     * @param options - Options parameter. A boolean will act as if all options\n     *  have been set to that value\n     * @example\n     * // Destroys the text and its style\n     * text.destroy({ style: true, texture: true, textureSource: true });\n     * text.destroy(true);\n     * text.destroy() // Destroys the text, but not its style\n     */\n    public override destroy(options: DestroyOptions = false): void\n    {\n        super.destroy(options);\n\n        (this as any).owner = null;\n        this._bounds = null;\n        this._anchor = null;\n\n        if (typeof options === 'boolean' ? options : options?.style)\n        {\n            this._style.destroy(options);\n        }\n\n        this._style = null;\n        this._text = null;\n    }\n\n    /**\n     * Returns a unique key for this instance.\n     * This key is used for caching.\n     * @returns {string} Unique key for the instance\n     */\n    public get styleKey(): string\n    {\n        return `${this._text}:${this._style.styleKey}:${this._resolution}`;\n    }\n}\n\n/**\n * Helper function to ensure consistent handling of text options across different text classes.\n * This function handles both the new options object format and the deprecated parameter format.\n * @example\n * // New recommended way:\n * const options = ensureTextOptions([{\n *     text: \"Hello\",\n *     style: { fontSize: 20 }\n * }], \"Text\");\n *\n * // Deprecated way (will show warning in debug):\n * const options = ensureTextOptions([\"Hello\", { fontSize: 20 }], \"Text\");\n * @param args - Arguments passed to text constructor\n * @param name - Name of the text class (used in deprecation warning)\n * @returns Normalized text options object\n * @template TEXT_OPTIONS - The type of the text options\n * @internal\n */\nexport function ensureTextOptions<\n    TEXT_OPTIONS extends TextOptions\n>(\n    args: any[],\n    name: string\n): TEXT_OPTIONS\n{\n    let options = (args[0] ?? {}) as TEXT_OPTIONS;\n\n    // @deprecated\n    if (typeof options === 'string' || args[1])\n    {\n        // #if _DEBUG\n        deprecation(v8_0_0, `use new ${name}({ text: \"hi!\", style }) instead`);\n        // #endif\n\n        options = {\n            text: options,\n            style: args[1],\n        } as unknown as TEXT_OPTIONS;\n    }\n\n    return options;\n}\n", "import { DOMAdapter } from '../../environment/adapter';\nimport { nextPow2 } from '../../maths/misc/pow2';\nimport { Rectangle } from '../../maths/shapes/Rectangle';\n\nimport type { ICanvas } from '../../environment/canvas/ICanvas';\nimport type { ICanvasRenderingContext2D } from '../../environment/canvas/ICanvasRenderingContext2D';\n\n// Internal canvas for measuring bounds\nlet _internalCanvas: ICanvas | null = null;\nlet _internalContext: ICanvasRenderingContext2D | null = null;\n\nfunction ensureInternalCanvas(width: number, height: number): void\n{\n    if (!_internalCanvas)\n    {\n        _internalCanvas = DOMAdapter.get().createCanvas(256, 128);\n        _internalContext = _internalCanvas.getContext('2d', { willReadFrequently: true });\n        _internalContext.globalCompositeOperation = 'copy';\n        _internalContext.globalAlpha = 1;\n    }\n\n    if (_internalCanvas.width < width || _internalCanvas.height < height)\n    {\n        // Use power-of-two dimensions for better performance\n        _internalCanvas.width = nextPow2(width);\n        _internalCanvas.height = nextPow2(height);\n    }\n}\n\nfunction checkRow(data: Uint8ClampedArray, width: number, y: number)\n{\n    for (let x = 0, index = 4 * y * width; x < width; ++x, index += 4)\n    {\n        if (data[index + 3] !== 0) return false;\n    }\n\n    return true;\n}\n\nfunction checkColumn(data: Uint8ClampedArray, width: number, x: number, top: number, bottom: number)\n{\n    const stride = 4 * width;\n\n    for (let y = top, index = (top * stride) + (4 * x); y <= bottom; ++y, index += stride)\n    {\n        if (data[index + 3] !== 0) return false;\n    }\n\n    return true;\n}\n\n/** @internal */\nexport interface GetCanvasBoundingBoxOptions\n{\n    /** The canvas to measure */\n    canvas: ICanvas;\n    /** Optional. The width to analyze (defaults to canvas.width) */\n    width?: number;\n    /** Optional. The height to analyze (defaults to canvas.height) */\n    height?: number;\n    /**\n     * Optional. The resolution at which to analyze the canvas, between 0-1.\n     * Lower values improve performance for large canvases but may be less precise.\n     * Default is 1 (full resolution).\n     */\n    resolution?: number;\n    /** Optional. The rectangle to store the result in. */\n    output?: Rectangle;\n}\n\n/**\n * Measures the bounding box of a canvas's visible (non-transparent) pixels.\n *\n * This function analyzes the alpha channel of the canvas pixels to find the smallest\n * rectangle containing all non-transparent pixels. It's useful for optimizing sprite\n * rendering by trimming transparent borders.\n *\n * Uses an internal canvas with `willReadFrequently: true` for efficient pixel data access.\n * This internal canvas is reused between calls for better performance.\n * @example\n * ```typescript\n * // Basic usage - get trim bounds at full resolution\n * const bounds = getCanvasBoundingBox({ canvas: myCanvas });\n * console.log(bounds); // Rectangle{x: 10, y: 5, width: 100, height: 200}\n * // Optimized for performance with lower resolution scanning\n * const fastBounds = getCanvasBoundingBox({\n *     canvas: largeCanvas,\n *     width: largeCanvas.width,\n *     height: largeCanvas.height,\n *     resolution: 0.5\n * });\n * // Resolution of 0.5 means scanning at half size, much faster for large canvases\n *\n * // Using custom dimensions - only analyze part of the canvas\n * const partialBounds = getCanvasBoundingBox({ canvas: myCanvas, width: 100, height: 100 });\n * // Only analyzes a 100x100 region starting from top-left\n * ```\n * @param options - The options for measuring the bounding box, including the canvas to measure.\n * @returns The bounding box as a Rectangle containing the visible content.\n *          Returns Rectangle.EMPTY if the canvas is completely transparent.\n * @internal\n */\nexport function getCanvasBoundingBox(\n    options: GetCanvasBoundingBoxOptions,\n): Rectangle;\n/**\n * @param canvas\n * @param resolution\n * @internal\n * @deprecated since 8.10.0\n */\nexport function getCanvasBoundingBox(canvas: ICanvas, resolution?: number): Rectangle;\n/**\n * @param {...any} args\n * @internal\n */\nexport function getCanvasBoundingBox(...args: [GetCanvasBoundingBoxOptions] | [ICanvas, number?]): Rectangle\n{\n    let options = args[0] as GetCanvasBoundingBoxOptions;\n\n    if (!options.canvas)\n    {\n        options = { canvas: args[0] as ICanvas, resolution: args[1] };\n    }\n\n    const { canvas } = options; // canvas is correctly extracted from options\n\n    // Cap resolution at 1\n    const resolution = Math.min(options.resolution ?? 1, 1);\n    const width = options.width ?? canvas.width;\n    const height = options.height ?? canvas.height;\n    let output = options.output;\n\n    // Ensure internal canvas is large enough\n    ensureInternalCanvas(width, height);\n\n    if (!_internalContext)\n    {\n        throw new TypeError('Failed to get canvas 2D context');\n    }\n\n    // Set up for pixel replacement (no blending)\n    _internalContext.drawImage(\n        canvas as unknown as CanvasImageSource,\n        0, 0,\n        width, height,\n        0, 0,\n        width * resolution, height * resolution\n    );\n\n    // Get the image data at full resolution\n    const imageData = _internalContext.getImageData(0, 0, width, height);\n    const data = imageData.data;\n\n    let left = 0;\n    let top = 0;\n    let right = width - 1;\n    let bottom = height - 1;\n\n    while (top < height && checkRow(data, width, top)) ++top;\n    if (top === height) return Rectangle.EMPTY;\n    while (checkRow(data, width, bottom)) --bottom;\n    while (checkColumn(data, width, left, top, bottom)) ++left;\n    while (checkColumn(data, width, right, top, bottom)) --right;\n\n    ++right;\n    ++bottom;\n\n    _internalContext.globalCompositeOperation = 'source-over';\n    // draw the rect on the canvas\n    _internalContext.strokeRect(left, top, right - left, bottom - top);\n    _internalContext.globalCompositeOperation = 'copy';\n\n    output ??= new Rectangle();\n\n    output.set(left / resolution, top / resolution, (right - left) / resolution, (bottom - top) / resolution);\n\n    return output;\n}\n\n", "import { Color } from '../../../color/Color';\nimport { Rectangle } from '../../../maths/shapes/Rectangle';\nimport { type CanvasAndContext, CanvasPool } from '../../../rendering/renderers/shared/texture/CanvasPool';\nimport { getCanvasBoundingBox } from '../../../utils/canvas/getCanvasBoundingBox';\nimport { type TextStyle } from '../TextStyle';\nimport { CanvasTextMetrics } from './CanvasTextMetrics';\nimport { fontStringFromTextStyle } from './utils/fontStringFromTextStyle';\nimport { getCanvasFillStyle } from './utils/getCanvasFillStyle';\n\n/**\n * Temporary rectangle for getting the bounding box of the text.\n * @internal\n */\nconst tempRect = new Rectangle();\n\n/**\n * Utility for generating and managing canvas-based text rendering.\n *\n * This class is responsible for rendering text to canvas elements based on provided styles,\n * measuring the resulting text dimensions, and managing the lifecycle of canvas resources.\n *\n * CanvasTextGenerator supports:\n * - Text rendering with various styles (fill, stroke, gradient, etc.)\n * - Drop shadows and letter spacing\n * - Automatic trimming of transparent pixels\n * - Canvas resource pooling\n *\n * As a singleton, it's accessed via the exported `CanvasTextGenerator` constant.\n * @example\n * ```typescript\n * // Basic usage - render text to a canvas\n * import { CanvasTextGenerator } from 'pixi.js';\n * import { TextStyle } from 'pixi.js';\n *\n * // Create a text style\n * const style = new TextStyle({\n *   fontFamily: 'Arial',\n *   fontSize: 24,\n *   fill: 0xff1010,\n *   align: 'center',\n * });\n *\n * // Get a canvas with the text rendered to it\n * const { canvasAndContext, frame } = CanvasTextGenerator.getCanvasAndContext({\n *   text: 'Hello Pixi!',\n *   style,\n *   resolution: 1\n * });\n *\n * @internal\n */\nclass CanvasTextGeneratorClass\n{\n    /**\n     * Creates a canvas with the specified text rendered to it.\n     *\n     * Generates a canvas of appropriate size, renders the text with the provided style,\n     * and returns both the canvas/context and a Rectangle representing the text bounds.\n     *\n     * When trim is enabled in the style, the frame will represent the bounds of the\n     * non-transparent pixels, which can be smaller than the full canvas.\n     * @param options - The options for generating the text canvas\n     * @param options.text - The text to render\n     * @param options.style - The style to apply to the text\n     * @param options.resolution - The resolution of the canvas (defaults to 1)\n     * @param options.padding\n     * @returns An object containing the canvas/context and the frame (bounds) of the text\n     */\n    public getCanvasAndContext(options: {text: string, style: TextStyle, resolution?: number, padding?: number})\n    {\n        const { text, style, resolution = 1 } = options;\n\n        const padding = (style as TextStyle)._getFinalPadding();\n\n        // create a canvas with the word hello on it\n        const measured = CanvasTextMetrics.measureText(text || ' ', style);\n\n        const width = Math.ceil(Math.ceil((Math.max(1, measured.width) + (padding * 2))) * resolution);\n        const height = Math.ceil(Math.ceil((Math.max(1, measured.height) + (padding * 2))) * resolution);\n\n        const canvasAndContext = CanvasPool.getOptimalCanvasAndContext(width, height);\n\n        this._renderTextToCanvas(style, padding, resolution, canvasAndContext, measured);\n\n        const frame = style.trim\n            ? getCanvasBoundingBox({ canvas: canvasAndContext.canvas, width, height, resolution: 1, output: tempRect })\n            : tempRect.set(0, 0, width, height);\n\n        return {\n            canvasAndContext,\n            frame\n        };\n    }\n\n    /**\n     * Returns a canvas and context to the pool.\n     *\n     * This should be called when you're done with the canvas to allow reuse\n     * and prevent memory leaks.\n     * @param canvasAndContext - The canvas and context to return to the pool\n     */\n    public returnCanvasAndContext(canvasAndContext: CanvasAndContext): void\n    {\n        CanvasPool.returnCanvasAndContext(canvasAndContext);\n    }\n\n    /**\n     * Renders text to its canvas, and updates its texture.\n     * @param style - The style of the text\n     * @param padding - The padding of the text\n     * @param resolution - The resolution of the text\n     * @param canvasAndContext - The canvas and context to render the text to\n     * @param measured - Pre-measured text metrics to avoid duplicate measurement\n     */\n    private _renderTextToCanvas(\n        style: TextStyle,\n        padding: number,\n        resolution: number,\n        canvasAndContext: CanvasAndContext,\n        measured: CanvasTextMetrics\n    ): void\n    {\n        // Check if we have tagged text data\n        if (measured.runsByLine && measured.runsByLine.length > 0)\n        {\n            this._renderTaggedTextToCanvas(measured, style, padding, resolution, canvasAndContext);\n\n            return;\n        }\n\n        const { canvas, context } = canvasAndContext as { canvas: HTMLCanvasElement, context: CanvasRenderingContext2D };\n\n        const font = fontStringFromTextStyle(style);\n\n        const lines = measured.lines;\n        const lineHeight = measured.lineHeight;\n        const lineWidths = measured.lineWidths;\n        const maxLineWidth = measured.maxLineWidth;\n        const fontProperties = measured.fontProperties;\n\n        const height = canvas.height;\n\n        context.resetTransform();\n        context.scale(resolution, resolution);\n        context.textBaseline = style.textBaseline;\n\n        // set stroke styles..\n\n        if (style._stroke?.width)\n        {\n            const strokeStyle = style._stroke;\n\n            context.lineWidth = strokeStyle.width;\n\n            context.miterLimit = strokeStyle.miterLimit;\n            context.lineJoin = strokeStyle.join;\n            context.lineCap = strokeStyle.cap;\n        }\n\n        // return;\n        context.font = font;\n\n        let linePositionX: number;\n        let linePositionY: number;\n\n        // require 2 passes if a shadow; the first to draw the drop shadow, the second to draw the text\n        const passesCount = style.dropShadow ? 2 : 1;\n\n        // For v4, we drew text at the colours of the drop shadow underneath the normal text. This gave the correct zIndex,\n        // but features such as alpha and shadowblur did not look right at all, since we were using actual text as a shadow.\n        //\n        // For v5.0.0, we moved over to just use the canvas API for drop shadows, which made them look much nicer and more\n        // visually please, but now because the stroke is drawn and then the fill, drop shadows would appear on both the fill\n        // and the stroke; and fill drop shadows would appear over the top of the stroke.\n        //\n        // For v5.1.1, the new route is to revert to v4 style of drawing text first to get the drop shadows underneath normal\n        // text, but instead drawing text in the correct location, we'll draw it off screen (-paddingY), and then adjust the\n        // drop shadow so only that appears on screen (+paddingY). Now we'll have the correct draw order of the shadow\n        // beneath the text, whilst also having the proper text shadow styling.\n        // Calculate alignment width - use wordWrapWidth when wrapping with non-left align\n        const alignWidth = style.wordWrap ? style.wordWrapWidth : maxLineWidth;\n        const strokeWidth = style._stroke?.width ?? 0;\n        const halfStroke = strokeWidth / 2;\n\n        let linePositionYShift = (lineHeight - fontProperties.fontSize) / 2;\n\n        if (lineHeight - fontProperties.fontSize < 0)\n        {\n            linePositionYShift = 0;\n        }\n\n        for (let i = 0; i < passesCount; ++i)\n        {\n            const isShadowPass = style.dropShadow && i === 0;\n            // we only want the drop shadow, so put text way off-screen\n            const dsOffsetText = isShadowPass ? Math.ceil(Math.max(1, height) + (padding * 2)) : 0;\n            const dsOffsetShadow = dsOffsetText * resolution;\n\n            if (isShadowPass)\n            {\n                this._setupDropShadow(context, style, resolution, dsOffsetShadow);\n            }\n            else\n            {\n                // When gradient bounds are set (e.g., from SplitText), use them for gradient calculation\n                const gradientBounds = style._gradientBounds;\n                const gradientOffset = style._gradientOffset;\n\n                if (gradientBounds)\n                {\n                    const gradientMetrics = {\n                        width: gradientBounds.width,\n                        height: gradientBounds.height,\n                        lineHeight: gradientBounds.height,\n                        lines: measured.lines,\n                    } as CanvasTextMetrics;\n\n                    this._setFillAndStrokeStyles(\n                        context, style, gradientMetrics, padding, halfStroke,\n                        gradientOffset?.x ?? 0, gradientOffset?.y ?? 0\n                    );\n                }\n                else if (gradientOffset)\n                {\n                    this._setFillAndStrokeStyles(\n                        context, style, measured, padding, halfStroke,\n                        gradientOffset.x, gradientOffset.y\n                    );\n                }\n                else\n                {\n                    this._setFillAndStrokeStyles(context, style, measured, padding, halfStroke);\n                }\n\n                context.shadowColor = 'black';\n            }\n\n            // draw lines line by line\n            for (let j = 0; j < lines.length; j++)\n            {\n                linePositionX = halfStroke;\n                linePositionY = (halfStroke + (j * lineHeight)) + fontProperties.ascent + linePositionYShift;\n\n                linePositionX += this._getAlignmentOffset(lineWidths[j], alignWidth, style.align);\n\n                if (style._stroke?.width)\n                {\n                    this._drawLetterSpacing(\n                        lines[j],\n                        style,\n                        canvasAndContext,\n                        linePositionX + padding,\n                        linePositionY + padding - dsOffsetText,\n                        true\n                    );\n                }\n\n                if (style._fill !== undefined)\n                {\n                    this._drawLetterSpacing(\n                        lines[j],\n                        style,\n                        canvasAndContext,\n                        linePositionX + padding,\n                        linePositionY + padding - dsOffsetText\n                    );\n                }\n            }\n        }\n    }\n\n    /**\n     * Renders tagged text (with per-run styles) to canvas.\n     * @param measured - The measured text metrics containing runsByLine\n     * @param style - The base text style\n     * @param padding - The padding of the text\n     * @param resolution - The resolution of the text\n     * @param canvasAndContext - The canvas and context to render to\n     */\n    private _renderTaggedTextToCanvas(\n        measured: CanvasTextMetrics,\n        style: TextStyle,\n        padding: number,\n        resolution: number,\n        canvasAndContext: CanvasAndContext\n    ): void\n    {\n        const { canvas, context } = canvasAndContext;\n        const { runsByLine, lineWidths, maxLineWidth, lineAscents, lineHeights, hasDropShadow } = measured;\n\n        const height = canvas.height;\n\n        context.resetTransform();\n        context.scale(resolution, resolution);\n        context.textBaseline = style.textBaseline;\n\n        // require 2 passes if a shadow; the first to draw the drop shadow, the second to draw the text\n        const passesCount = hasDropShadow ? 2 : 1;\n\n        // Calculate alignment width - use wordWrapWidth when wrapping with non-left align\n        const alignWidth = style.wordWrap ? style.wordWrapWidth : maxLineWidth;\n        const strokeWidth = style._stroke?.width ?? 0;\n        const halfStroke = strokeWidth / 2;\n\n        // Pre-calculate run widths and font strings to avoid redundant computation per pass\n        const runDataByLine: Array<Array<{ width: number; font: string }>> = [];\n\n        for (let lineIndex = 0; lineIndex < runsByLine.length; lineIndex++)\n        {\n            const lineRuns = runsByLine[lineIndex];\n            const runData: Array<{ width: number; font: string }> = [];\n\n            for (const run of lineRuns)\n            {\n                const font = fontStringFromTextStyle(run.style);\n\n                context.font = font;\n                runData.push({\n                    width: CanvasTextMetrics._measureText(run.text, run.style.letterSpacing, context),\n                    font,\n                });\n            }\n            runDataByLine.push(runData);\n        }\n\n        for (let pass = 0; pass < passesCount; ++pass)\n        {\n            const isShadowPass = hasDropShadow && pass === 0;\n            const dsOffsetText = isShadowPass ? Math.ceil(Math.max(1, height) + (padding * 2)) : 0;\n            const dsOffsetShadow = dsOffsetText * resolution;\n\n            if (!isShadowPass)\n            {\n                context.shadowColor = 'black';\n            }\n\n            let currentY = halfStroke;\n\n            // Draw lines\n            for (let lineIndex = 0; lineIndex < runsByLine.length; lineIndex++)\n            {\n                const lineRuns = runsByLine[lineIndex];\n                const lineWidth = lineWidths[lineIndex];\n                const lineAscent = lineAscents[lineIndex];\n                const currentLineHeight = lineHeights[lineIndex];\n                const lineRunData = runDataByLine[lineIndex];\n\n                // Calculate line X position based on alignment\n                let linePositionX = halfStroke;\n\n                linePositionX += this._getAlignmentOffset(lineWidth, alignWidth, style.align);\n\n                // Calculate Y position - use line ascent for proper baseline\n                const linePositionY = currentY + lineAscent;\n\n                // Track X position for runs\n                let runX = linePositionX + padding;\n\n                // First pass: draw strokes for all runs\n                for (let runIndex = 0; runIndex < lineRuns.length; runIndex++)\n                {\n                    const run = lineRuns[runIndex];\n                    const { width: runWidth, font: runFont } = lineRunData[runIndex];\n\n                    context.font = runFont;\n                    context.textBaseline = run.style.textBaseline;\n\n                    // Set stroke style for this run\n                    if (run.style._stroke?.width)\n                    {\n                        const runStroke = run.style._stroke;\n\n                        // Always set stroke properties (both passes need correct lineWidth)\n                        context.lineWidth = runStroke.width;\n                        context.miterLimit = runStroke.miterLimit;\n                        context.lineJoin = runStroke.join;\n                        context.lineCap = runStroke.cap;\n\n                        if (isShadowPass)\n                        {\n                            // Set up drop shadow for this specific run\n                            if (run.style.dropShadow)\n                            {\n                                this._setupDropShadow(\n                                    context as CanvasRenderingContext2D,\n                                    run.style,\n                                    resolution,\n                                    dsOffsetShadow\n                                );\n                            }\n                            else\n                            {\n                                // No shadow for this run, skip drawing\n                                runX += runWidth;\n                                continue;\n                            }\n                        }\n                        else\n                        {\n                            // Create per-run metrics for gradient calculation\n                            // Use run's font metrics for height to match non-tagged text behavior\n                            const runFontProps = CanvasTextMetrics.measureFont(runFont);\n                            const runHeight = run.style.lineHeight || runFontProps.fontSize;\n\n                            const runMetrics = {\n                                width: runWidth,\n                                height: runHeight,\n                                lineHeight: runHeight,\n                                lines: [run.text],\n                            } as CanvasTextMetrics;\n\n                            // Pass position offsets so gradient aligns with where the run is drawn\n                            // Subtract padding from runX because runX already includes padding,\n                            // but regular text rendering has gradient at origin with text at +padding\n                            context.strokeStyle = getCanvasFillStyle(\n                                runStroke, context, runMetrics, padding * 2, runX - padding, currentY\n                            );\n                        }\n\n                        this._drawLetterSpacing(\n                            run.text,\n                            run.style,\n                            canvasAndContext,\n                            runX,\n                            linePositionY + padding - dsOffsetText,\n                            true\n                        );\n                    }\n\n                    runX += runWidth;\n                }\n\n                // Reset X position for fill pass\n                runX = linePositionX + padding;\n\n                // Second pass: draw fills for all runs\n                for (let runIndex = 0; runIndex < lineRuns.length; runIndex++)\n                {\n                    const run = lineRuns[runIndex];\n                    const { width: runWidth, font: runFont } = lineRunData[runIndex];\n\n                    context.font = runFont;\n                    context.textBaseline = run.style.textBaseline;\n\n                    // Set fill style for this run if not shadow pass\n                    if (run.style._fill !== undefined)\n                    {\n                        if (isShadowPass)\n                        {\n                            // Set up drop shadow for this specific run\n                            if (run.style.dropShadow)\n                            {\n                                this._setupDropShadow(\n                                    context as CanvasRenderingContext2D,\n                                    run.style,\n                                    resolution,\n                                    dsOffsetShadow\n                                );\n                            }\n                            else\n                            {\n                                // No shadow for this run, skip drawing\n                                runX += runWidth;\n                                continue;\n                            }\n                        }\n                        else\n                        {\n                            // Create per-run metrics for gradient calculation\n                            // Use run's font metrics for height to match non-tagged text behavior\n                            const runFontProps = CanvasTextMetrics.measureFont(runFont);\n                            const runHeight = run.style.lineHeight || runFontProps.fontSize;\n\n                            const runMetrics = {\n                                width: runWidth,\n                                height: runHeight,\n                                lineHeight: runHeight,\n                                lines: [run.text],\n                            } as CanvasTextMetrics;\n\n                            // Pass position offsets so gradient aligns with where the run is drawn\n                            // Subtract padding from runX because runX already includes padding,\n                            // but regular text rendering has gradient at origin with text at +padding\n                            context.fillStyle = getCanvasFillStyle(\n                                run.style._fill, context, runMetrics, padding * 2, runX - padding, currentY\n                            );\n                        }\n\n                        this._drawLetterSpacing(\n                            run.text,\n                            run.style,\n                            canvasAndContext,\n                            runX,\n                            linePositionY + padding - dsOffsetText,\n                            false\n                        );\n                    }\n\n                    runX += runWidth;\n                }\n\n                currentY += currentLineHeight;\n            }\n        }\n    }\n\n    /**\n     * Sets fill and stroke styles on the canvas context for text rendering.\n     * @param context - The canvas context\n     * @param style - The text style\n     * @param metrics - The text metrics for gradient calculation\n     * @param padding - The padding value\n     * @param halfStroke - Half the stroke width\n     * @param offsetX - X offset for gradient positioning\n     * @param offsetY - Y offset for gradient positioning\n     */\n    private _setFillAndStrokeStyles(\n        context: CanvasRenderingContext2D | OffscreenCanvasRenderingContext2D,\n        style: TextStyle,\n        metrics: CanvasTextMetrics,\n        padding: number,\n        halfStroke: number,\n        offsetX: number = 0,\n        offsetY: number = 0\n    ): void\n    {\n        context.fillStyle = style._fill\n            ? getCanvasFillStyle(style._fill, context, metrics, padding * 2, offsetX, offsetY)\n            : null;\n\n        if (style._stroke?.width)\n        {\n            const strokePadding = halfStroke + (padding * 2);\n\n            context.strokeStyle = getCanvasFillStyle(\n                style._stroke, context, metrics, strokePadding, offsetX, offsetY\n            );\n        }\n    }\n\n    /**\n     * Sets up the canvas context for drop shadow rendering.\n     * @param context - The canvas context\n     * @param style - The text style containing drop shadow options\n     * @param resolution - The resolution multiplier\n     * @param dsOffsetShadow - The shadow Y offset\n     */\n    private _setupDropShadow(\n        context: CanvasRenderingContext2D | OffscreenCanvasRenderingContext2D,\n        style: TextStyle,\n        resolution: number,\n        dsOffsetShadow: number\n    ): void\n    {\n        // On Safari, text with gradient and drop shadows together do not position correctly\n        // if the scale of the canvas is not 1: https://bugs.webkit.org/show_bug.cgi?id=197689\n        // Therefore we'll set the styles to be a plain black whilst generating this drop shadow\n        context.fillStyle = 'black';\n        context.strokeStyle = 'black';\n\n        const shadowOptions = style.dropShadow;\n        const dropShadowColor = shadowOptions.color;\n        const dropShadowAlpha = shadowOptions.alpha;\n\n        context.shadowColor = Color.shared\n            .setValue(dropShadowColor)\n            .setAlpha(dropShadowAlpha)\n            .toRgbaString();\n\n        const dropShadowBlur = shadowOptions.blur * resolution;\n        const dropShadowDistance = shadowOptions.distance * resolution;\n\n        context.shadowBlur = dropShadowBlur;\n        context.shadowOffsetX = Math.cos(shadowOptions.angle) * dropShadowDistance;\n        context.shadowOffsetY = (Math.sin(shadowOptions.angle) * dropShadowDistance) + dsOffsetShadow;\n    }\n\n    /**\n     * Calculates the X offset for text alignment.\n     * @param lineWidth - The width of the current line\n     * @param alignWidth - The width to align against (maxLineWidth or wordWrapWidth)\n     * @param align - The text alignment\n     * @returns The X offset for this line\n     */\n    private _getAlignmentOffset(lineWidth: number, alignWidth: number, align: string): number\n    {\n        if (align === 'right')\n        {\n            return alignWidth - lineWidth;\n        }\n        else if (align === 'center')\n        {\n            return (alignWidth - lineWidth) / 2;\n        }\n\n        return 0;\n    }\n\n    /**\n     * Render the text with letter-spacing.\n     *\n     * This method handles rendering text with the correct letter spacing, using either:\n     * 1. Native letter spacing if supported by the browser\n     * 2. Manual letter spacing calculation if not natively supported\n     *\n     * For manual letter spacing, it calculates the position of each character\n     * based on its width and the desired spacing.\n     * @param text - The text to draw\n     * @param style - The text style to apply\n     * @param canvasAndContext - The canvas and context to draw to\n     * @param x - Horizontal position to draw the text\n     * @param y - Vertical position to draw the text\n     * @param isStroke - Whether to render the stroke (true) or fill (false)\n     * @private\n     */\n    private _drawLetterSpacing(\n        text: string,\n        style: TextStyle,\n        canvasAndContext: CanvasAndContext,\n        x: number, y: number,\n        isStroke = false\n    ): void\n    {\n        const { context } = canvasAndContext;\n\n        // letterSpacing of 0 means normal\n        const letterSpacing = style.letterSpacing;\n\n        let useExperimentalLetterSpacing = false;\n\n        if (CanvasTextMetrics.experimentalLetterSpacingSupported)\n        {\n            if (CanvasTextMetrics.experimentalLetterSpacing)\n            {\n                context.letterSpacing = `${letterSpacing}px`;\n                context.textLetterSpacing = `${letterSpacing}px`;\n                useExperimentalLetterSpacing = true;\n            }\n            else\n            {\n                context.letterSpacing = '0px';\n                context.textLetterSpacing = '0px';\n            }\n        }\n\n        if (letterSpacing === 0 || useExperimentalLetterSpacing)\n        {\n            if (isStroke)\n            {\n                context.strokeText(text, x, y);\n            }\n            else\n            {\n                context.fillText(text, x, y);\n            }\n\n            return;\n        }\n\n        let currentPosition = x;\n\n        const stringArray = CanvasTextMetrics.graphemeSegmenter(text);\n        let previousWidth = context.measureText(text).width;\n        let currentWidth = 0;\n\n        for (let i = 0; i < stringArray.length; ++i)\n        {\n            const currentChar = stringArray[i];\n\n            if (isStroke)\n            {\n                context.strokeText(currentChar, currentPosition, y);\n            }\n            else\n            {\n                context.fillText(currentChar, currentPosition, y);\n            }\n            let textStr = '';\n\n            for (let j = i + 1; j < stringArray.length; ++j)\n            {\n                textStr += stringArray[j];\n            }\n            currentWidth = context.measureText(textStr).width;\n            currentPosition += previousWidth - currentWidth + letterSpacing;\n            previousWidth = currentWidth;\n        }\n    }\n}\n\n/** @internal */\nexport const CanvasTextGenerator = new CanvasTextGeneratorClass();\n", "import { updateQuadBounds } from '../../../utils/data/updateQuadBounds';\nimport { type BatchableSprite } from '../../sprite/BatchableSprite';\nimport { type AbstractText } from '../AbstractText';\nimport { type TextStyle, type TextStyleOptions } from '../TextStyle';\n\n/**\n * Updates the bounds of the given batchable sprite based on the provided text object.\n *\n * This function adjusts the bounds of the batchable sprite to match the dimensions\n * and anchor point of the text's texture. Additionally, it compensates for any padding\n * specified in the text's style to ensure the text is rendered correctly on screen.\n * @param {BatchableSprite} batchableSprite - The sprite whose bounds need to be updated.\n * @param {AbstractText} text - The text object containing the texture and style information.\n * @internal\n */\nexport function updateTextBounds(batchableSprite: BatchableSprite, text: AbstractText<TextStyle, TextStyleOptions>)\n{\n    const { texture, bounds } = batchableSprite;\n    const padding = text._style._getFinalPadding();\n\n    // When HTML text textures are created, they include the padding around the text content\n    // to prevent text clipping and provide a buffer zone. This padding is built into\n    // the texture itself. However, we don't want this padding to affect the text's\n    // actual position on screen.\n\n    // First, calculate bounds using the full padded texture\n    updateQuadBounds(bounds, text._anchor, texture);\n\n    // Then adjust by the padding amount to compensate for the buffer zone\n    // This shifts the render position back by the padding amount, ensuring the text\n    // appears exactly where intended while maintaining the buffer zone around it.\n    const paddingOffset = text._anchor._x * padding * 2;\n    const paddingOffsetY = text._anchor._y * padding * 2;\n\n    bounds.minX -= padding - paddingOffset;\n    bounds.minY -= padding - paddingOffsetY;\n    bounds.maxX -= padding - paddingOffset;\n    bounds.maxY -= padding - paddingOffsetY;\n}\n", "import { BatchableSprite } from '../../sprite/BatchableSprite';\n\n/** @internal */\nexport class BatchableText extends BatchableSprite\n{\n    public currentKey: string;\n}\n", "import { ExtensionType } from '../../../extensions/Extensions';\nimport { GCManagedHash } from '../../../utils/data/GCManagedHash';\nimport { updateTextBounds } from '../utils/updateTextBounds';\nimport { BatchableText } from './BatchableText';\n\nimport type { InstructionSet } from '../../../rendering/renderers/shared/instructions/InstructionSet';\nimport type { RenderPipe } from '../../../rendering/renderers/shared/instructions/RenderPipe';\nimport type { Renderer } from '../../../rendering/renderers/types';\nimport type { Text } from '../Text';\n\n/** @internal */\nexport class CanvasTextPipe implements RenderPipe<Text>\n{\n    /** @ignore */\n    public static extension = {\n        type: [\n            ExtensionType.WebGLPipes,\n            ExtensionType.WebGPUPipes,\n            ExtensionType.CanvasPipes,\n        ],\n        name: 'text',\n    } as const;\n\n    private _renderer: Renderer;\n    private readonly _managedTexts: GCManagedHash<Text>;\n\n    constructor(renderer: Renderer)\n    {\n        this._renderer = renderer;\n        renderer.runners.resolutionChange.add(this);\n        this._managedTexts = new GCManagedHash({\n            renderer,\n            type: 'renderable',\n            onUnload: this.onTextUnload.bind(this),\n            name: 'canvasText'\n        });\n    }\n\n    protected resolutionChange()\n    {\n        for (const key in this._managedTexts.items)\n        {\n            const text = this._managedTexts.items[key];\n\n            if (text?._autoResolution) text.onViewUpdate();\n        }\n    }\n\n    public validateRenderable(text: Text): boolean\n    {\n        const gpuText = this._getGpuText(text);\n\n        const newKey = text.styleKey;\n\n        if (gpuText.currentKey !== newKey) return true;\n\n        return text._didTextUpdate;\n    }\n\n    public addRenderable(text: Text, instructionSet: InstructionSet)\n    {\n        const batchableText = this._getGpuText(text);\n\n        if (text._didTextUpdate)\n        {\n            const resolution = text._autoResolution ? this._renderer.resolution : text.resolution;\n\n            if (batchableText.currentKey !== text.styleKey || text._resolution !== resolution)\n            {\n                // If the text has changed, we need to update the GPU text\n                this._updateGpuText(text);\n            }\n\n            text._didTextUpdate = false;\n\n            updateTextBounds(batchableText, text);\n        }\n\n        this._renderer.renderPipes.batch.addToBatch(batchableText, instructionSet);\n    }\n\n    public updateRenderable(text: Text)\n    {\n        const batchableText = this._getGpuText(text);\n\n        batchableText._batcher.updateElement(batchableText);\n    }\n\n    private _updateGpuText(text: Text)\n    {\n        const batchableText = this._getGpuText(text);\n\n        if (batchableText.texture)\n        {\n            this._renderer.canvasText.decreaseReferenceCount(batchableText.currentKey);\n        }\n\n        text._resolution = text._autoResolution ? this._renderer.resolution : text.resolution;\n\n        batchableText.texture = this._renderer.canvasText.getManagedTexture(text);\n        batchableText.currentKey = text.styleKey;\n    }\n\n    private _getGpuText(text: Text)\n    {\n        return text._gpuData[this._renderer.uid] || this.initGpuText(text);\n    }\n\n    public initGpuText(text: Text)\n    {\n        const batchableText = new BatchableText();\n\n        batchableText.currentKey = '--';\n        batchableText.renderable = text;\n        batchableText.transform = text.groupTransform;\n        batchableText.bounds = { minX: 0, maxX: 1, minY: 0, maxY: 0 };\n        batchableText.roundPixels = (this._renderer._roundPixels | text._roundPixels) as 0 | 1;\n\n        text._gpuData[this._renderer.uid] = batchableText;\n        this._managedTexts.add(text);\n\n        return batchableText;\n    }\n\n    protected onTextUnload(text: Text)\n    {\n        const gpuData = text._gpuData[this._renderer.uid];\n\n        if (!gpuData) return;\n\n        const { canvasText } = this._renderer;\n        const refCount = canvasText.getReferenceCount(gpuData.currentKey);\n\n        if (refCount > 0)\n        {\n            canvasText.decreaseReferenceCount(gpuData.currentKey);\n        }\n        else if (gpuData.texture)\n        {\n            canvasText.returnTexture(gpuData.texture);\n        }\n    }\n\n    public destroy()\n    {\n        this._managedTexts.destroy();\n        this._renderer = null;\n    }\n}\n", "import { type ImageLike } from '../../../environment/ImageLike';\nimport { TexturePool } from '../../../rendering/renderers/shared/texture/TexturePool';\nimport { Bounds } from '../../container/bounds/Bounds';\n\nimport type { ICanvas } from '../../../environment/canvas/ICanvas';\nimport type { Texture } from '../../../rendering/renderers/shared/texture/Texture';\n\nconst tempBounds = new Bounds();\n\n/**\n * Takes an image and creates a texture from it, using a power of 2 texture from the texture pool.\n * Remember to return the texture when you don't need it any more!\n * @param image - The image to create a texture from\n * @param width - the frame width of the texture\n * @param height - the frame height of the texture\n * @param resolution - The resolution of the texture\n * @returns - The texture\n * @internal\n */\nexport function getPo2TextureFromSource(\n    image: ImageLike | HTMLCanvasElement | ICanvas,\n    width: number,\n    height: number,\n    resolution: number\n): Texture\n{\n    const bounds = tempBounds;\n\n    bounds.minX = 0;\n    bounds.minY = 0;\n\n    bounds.maxX = (image.width / resolution) | 0;\n    bounds.maxY = (image.height / resolution) | 0;\n\n    const texture = TexturePool.getOptimalTexture(\n        bounds.width,\n        bounds.height,\n        resolution,\n        false\n    );\n\n    texture.source.uploadMethodId = 'image';\n    texture.source.resource = image;\n    texture.source.alphaMode = 'premultiply-alpha-on-upload';\n\n    texture.frame.width = width / resolution;\n    texture.frame.height = height / resolution;\n\n    // We want to update the resource on the GPU,\n    // but we do not want to resize the texture.\n    // calling `texture.source.update` will fit the resource to the texture\n    // causing a resize of the texture on the GPU.\n    // which is not what we want!\n    texture.source.emit('update', texture.source);\n\n    texture.updateUvs();\n\n    return texture;\n}\n", "import { type ICanvas } from '../../../environment/canvas/ICanvas';\nimport { type Filter } from '../../../filters/Filter';\nimport { TexturePool } from '../../../rendering/renderers/shared/texture/TexturePool';\nimport { TextureStyle } from '../../../rendering/renderers/shared/texture/TextureStyle';\nimport { deprecation } from '../../../utils/logging/deprecation';\nimport { CanvasTextGenerator } from '../canvas/CanvasTextGenerator';\nimport { type CanvasTextOptions, type Text } from '../Text';\nimport { TextStyle } from '../TextStyle';\nimport { getPo2TextureFromSource } from '../utils/getPo2TextureFromSource';\n\nimport type { System } from '../../../rendering/renderers/shared/system/System';\nimport type { Texture } from '../../../rendering/renderers/shared/texture/Texture';\nimport type { Renderer } from '../../../rendering/renderers/types';\n\n/**\n * Base system plugin to the renderer to manage canvas text.\n * @category rendering\n * @advanced\n */\nexport abstract class AbstractTextSystem implements System\n{\n    protected readonly _renderer: Renderer;\n    private readonly _retainCanvasContext: boolean;\n\n    private readonly _activeTextures: Record<string, {\n        texture: Texture,\n        usageCount: number,\n    }> = {};\n\n    constructor(renderer: Renderer, retainCanvasContext: boolean)\n    {\n        this._renderer = renderer;\n        this._retainCanvasContext = retainCanvasContext;\n    }\n\n    /** @deprecated since 8.0.0 */\n    public getTexture(text: string, resolution: number, style: TextStyle, textKey: string): Texture;\n    /**\n     * This is a function that will create a texture from a text string, style and resolution.\n     * Useful if you want to make a texture of your text and use if for various pixi things!\n     * @param options - The options of the text that will be used to generate the texture.\n     * @param options.text - the text to render\n     * @param options.style - the style of the text\n     * @param options.resolution - the resolution of the texture\n     * @returns the newly created texture\n     */\n    public getTexture(options: CanvasTextOptions): Texture;\n    public getTexture(\n        options: CanvasTextOptions | string,\n        _resolution?: number,\n        _style?: TextStyle,\n        _textKey?: string\n    ): Texture\n    {\n        if (typeof options === 'string')\n        {\n            // #if _DEBUG\n            deprecation('8.0.0', 'CanvasTextSystem.getTexture: Use object TextOptions instead of separate arguments');\n            // #endif\n\n            options = {\n                text: options,\n                style: _style,\n                resolution: _resolution,\n            };\n        }\n\n        if (!(options.style instanceof TextStyle))\n        {\n            options.style = new TextStyle(options.style);\n        }\n\n        if (!(options.textureStyle instanceof TextureStyle))\n        {\n            options.textureStyle = new TextureStyle(options.textureStyle);\n        }\n\n        if (typeof options.text !== 'string')\n        {\n            options.text = options.text.toString();\n        }\n\n        const { text, style, textureStyle } = options;\n\n        const resolution = options.resolution ?? this._renderer.resolution;\n\n        const { frame, canvasAndContext } = CanvasTextGenerator.getCanvasAndContext({\n            text: text as string,\n            style: style as TextStyle,\n            resolution,\n        });\n\n        const texture = getPo2TextureFromSource(canvasAndContext.canvas, frame.width, frame.height, resolution);\n\n        if (textureStyle) texture.source.style = textureStyle as TextureStyle;\n\n        if (style.trim)\n        {\n            // reapply the padding to the frame\n            frame.pad(style.padding);\n            texture.frame.copyFrom(frame);\n\n            // We initially increased the frame size by a resolution factor to achieve a crisper display.\n            // Now we need to scale down the already trimmed frame to render the texture in the expected size.\n            texture.frame.scale(1 / resolution);\n            texture.updateUvs();\n        }\n\n        if (style.filters)\n        {\n            // apply the filters to the texture if required..\n            // this returns a new texture with the filters applied\n            const filteredTexture = this._applyFilters(texture, style.filters as Filter[]);\n\n            // return the original texture to the pool so we can reuse the next frame\n            this.returnTexture(texture);\n\n            CanvasTextGenerator.returnCanvasAndContext(canvasAndContext);\n\n            // return the new texture with the filters applied\n            return filteredTexture;\n        }\n\n        this._renderer.texture.initSource(texture._source);\n\n        if (!this._retainCanvasContext)\n        {\n            CanvasTextGenerator.returnCanvasAndContext(canvasAndContext);\n        }\n\n        return texture;\n    }\n\n    /**\n     * Returns a texture that was created wit the above `getTexture` function.\n     * Handy if you are done with a texture and want to return it to the pool.\n     * @param texture - The texture to be returned.\n     */\n    public returnTexture(texture: Texture)\n    {\n        const source = texture.source;\n        const resource = source.resource as ICanvas | null;\n\n        if (this._retainCanvasContext && resource?.getContext)\n        {\n            const context = resource.getContext('2d');\n\n            if (context)\n            {\n                CanvasTextGenerator.returnCanvasAndContext({ canvas: resource, context });\n            }\n        }\n\n        source.resource = null;\n        source.uploadMethodId = 'unknown';\n        source.alphaMode = 'no-premultiply-alpha';\n\n        TexturePool.returnTexture(texture, true);\n    }\n\n    /**\n     * Renders text to its canvas, and updates its texture.\n     * @deprecated since 8.10.0\n     */\n    public renderTextToCanvas(): void\n    {\n        // #if _DEBUG\n        deprecation(\n            '8.10.0',\n            'CanvasTextSystem.renderTextToCanvas: no longer supported, use CanvasTextSystem.getTexture instead'\n        );\n        // #endif\n    }\n\n    /**\n     * Gets or creates a managed texture for a Text object. This method handles texture reuse and reference counting.\n     * @param text - The Text object that needs a texture\n     * @returns A Texture instance that represents the rendered text\n     * @remarks\n     * This method performs the following:\n     * 1. Sets the appropriate resolution based on auto-resolution settings\n     * 2. Checks if a texture already exists for the text's style\n     * 3. Creates a new texture if needed or returns an existing one\n     * 4. Manages reference counting for texture reuse\n     */\n    public getManagedTexture(text: Text)\n    {\n        text._resolution = text._autoResolution ? this._renderer.resolution : text.resolution;\n        const textKey = text.styleKey;\n\n        if (this._activeTextures[textKey])\n        {\n            this._increaseReferenceCount(textKey);\n\n            return this._activeTextures[textKey].texture;\n        }\n\n        const texture = this.getTexture({\n            text: text.text,\n            style: text.style,\n            resolution: text._resolution,\n            textureStyle: text.textureStyle,\n        });\n\n        this._activeTextures[textKey] = {\n            texture,\n            usageCount: 1,\n        };\n\n        return texture;\n    }\n\n    /**\n     * Decreases the reference count for a texture associated with a text key.\n     * When the reference count reaches zero, the texture is returned to the pool.\n     * @param textKey - The unique key identifying the text style configuration\n     * @remarks\n     * This method is crucial for memory management, ensuring textures are properly\n     * cleaned up when they are no longer needed by any Text instances.\n     */\n    public decreaseReferenceCount(textKey: string)\n    {\n        const activeTexture = this._activeTextures[textKey];\n\n        if (!activeTexture) return;\n\n        activeTexture.usageCount--;\n\n        if (activeTexture.usageCount === 0)\n        {\n            this.returnTexture(activeTexture.texture);\n            this._activeTextures[textKey] = null;\n        }\n    }\n\n    /**\n     * Gets the current reference count for a texture associated with a text key.\n     * @param textKey - The unique key identifying the text style configuration\n     * @returns The number of Text instances currently using this texture\n     */\n    public getReferenceCount(textKey: string)\n    {\n        return this._activeTextures[textKey]?.usageCount ?? 0;\n    }\n\n    private _increaseReferenceCount(textKey: string)\n    {\n        this._activeTextures[textKey].usageCount++;\n    }\n\n    /**\n     * Applies the specified filters to the given texture.\n     *\n     * This method takes a texture and a list of filters, applies the filters to the texture,\n     * and returns the resulting texture. It also ensures that the alpha mode of the resulting\n     * texture is set to 'premultiplied-alpha'.\n     * @param {Texture} texture - The texture to which the filters will be applied.\n     * @param {Filter[]} filters - The filters to apply to the texture.\n     * @returns {Texture} The resulting texture after all filters have been applied.\n     */\n    private _applyFilters(texture: Texture, filters: Filter[]): Texture\n    {\n        // Save the current render target so it can be restored later\n        const currentRenderTarget = this._renderer.renderTarget.renderTarget;\n\n        // Apply the filters to the texture and get the resulting texture\n        const resultTexture = this._renderer.filter.generateFilteredTexture({\n            texture,\n            filters,\n        });\n\n        // Restore the previous render target\n        this._renderer.renderTarget.bind(currentRenderTarget, false);\n\n        // Return the resulting texture with the filters applied\n        return resultTexture;\n    }\n\n    public destroy(): void\n    {\n        (this._renderer as null) = null;\n        // Clean up active textures\n        for (const key in this._activeTextures)\n        {\n            if (this._activeTextures[key]) this.returnTexture(this._activeTextures[key].texture);\n        }\n        (this._activeTextures as null) = null;\n    }\n}\n", "import { ExtensionType } from '../../../extensions/Extensions';\nimport { AbstractTextSystem } from '../shared/AbstractTextSystem';\n\nimport type { Renderer } from '../../../rendering/renderers/types';\n\n/**\n * System plugin to the renderer to manage canvas text for Canvas2D.\n * @category rendering\n * @advanced\n */\nexport class CanvasRendererTextSystem extends AbstractTextSystem\n{\n    /** @ignore */\n    public static extension = {\n        type: [\n            ExtensionType.CanvasSystem,\n        ],\n        name: 'canvasText',\n    } as const;\n\n    constructor(renderer: Renderer)\n    {\n        super(renderer, true);\n    }\n}\n", "import { ExtensionType } from '../../../extensions/Extensions';\nimport { AbstractTextSystem } from './AbstractTextSystem';\n\nimport type { Renderer } from '../../../rendering/renderers/types';\n\n/**\n * System plugin to the renderer to manage canvas text for GPU renderers.\n * @category rendering\n * @advanced\n */\nexport class CanvasTextSystem extends AbstractTextSystem\n{\n    /** @ignore */\n    public static extension = {\n        type: [\n            ExtensionType.WebGLSystem,\n            ExtensionType.WebGPUSystem,\n        ],\n        name: 'canvasText',\n    } as const;\n\n    constructor(renderer: Renderer)\n    {\n        super(renderer, false);\n    }\n}\n", "import { extensions } from '../../extensions/Extensions';\nimport { CanvasTextPipe } from './canvas/CanvasTextPipe';\nimport { CanvasRendererTextSystem } from './canvas/CanvasTextSystem';\nimport { CanvasTextSystem } from './shared/GpuTextSystem';\n\nextensions.add(CanvasRendererTextSystem);\nextensions.add(CanvasTextSystem);\nextensions.add(CanvasTextPipe);\n", "import { TextureStyle, type TextureStyleOptions } from '../../rendering/renderers/shared/texture/TextureStyle';\nimport { AbstractText, ensureTextOptions } from './AbstractText';\nimport { type BatchableText } from './canvas/BatchableText';\nimport { CanvasTextGenerator } from './canvas/CanvasTextGenerator';\nimport { CanvasTextMetrics } from './canvas/CanvasTextMetrics';\nimport { TextStyle } from './TextStyle';\nimport './init';\n\nimport type { View } from '../../rendering/renderers/shared/view/View';\nimport type { TextOptions, TextString } from './AbstractText';\nimport type { TextStyleOptions } from './TextStyle';\n\n// eslint-disable-next-line requireExport/require-export-jsdoc, requireMemberAPI/require-member-api-doc\nexport interface Text extends PixiMixins.Text, AbstractText<\n    TextStyle,\n    TextStyleOptions,\n    CanvasTextOptions,\n    BatchableText\n> {}\n\n/**\n * Constructor options used for `Text` instances. These options extend TextOptions with\n * canvas-specific features like texture styling.\n * @example\n * ```ts\n * // Create basic canvas text\n * const text = new Text({\n *     text: 'Hello Pixi!',\n *     style: {\n *         fontSize: 24,\n *         fill: 0xff1010,\n *     }\n * });\n *\n * // Create text with custom texture style\n * const customText = new Text({\n *     text: 'Custom Text',\n *     style: {\n *         fontSize: 32,\n *         fill: 0x4a4a4a\n *     },\n *     textureStyle: {\n *         scaleMode: 'nearest',\n *     }\n * });\n * ```\n * @extends TextOptions\n * @category text\n * @standard\n */\nexport interface CanvasTextOptions extends TextOptions\n{\n    /**\n     * Optional texture style to use for the text texture. This allows fine control over\n     * how the text is rendered to a texture before being displayed.\n     *\n     * The texture style can affect:\n     * - Scale mode (nearest/linear)\n     * - Resolution\n     * - Format (rgb/rgba)\n     * - Alpha handling\n     * @example\n     * ```ts\n     * const text = new Text({\n     *     text: 'Crisp Text',\n     *     textureStyle: {\n     *         scaleMode: 'nearest', // Pixel-perfect scaling\n     *     }\n     * });\n     * ```\n     * @advanced\n     */\n    textureStyle?: TextureStyle | TextureStyleOptions;\n}\n\n/**\n * A powerful text rendering class that creates one or multiple lines of text using the Canvas API.\n * Provides rich text styling capabilities with runtime modifications.\n *\n * Key features:\n * - Dynamic text content and styling\n * - Multi-line text support\n * - Word wrapping\n * - Custom texture styling\n * - High-quality text rendering\n * @example\n * ```ts\n * import { Text } from 'pixi.js';\n *\n * // Basic text creation\n * const basicText = new Text({\n *     text: 'Hello Pixi!',\n *     style: {\n *         fontFamily: 'Arial',\n *         fontSize: 24,\n *         fill: 0xff1010,\n *         align: 'center',\n *     }\n * });\n *\n * // Rich text with multiple styles\n * const richText = new Text({\n *     text: 'Styled\\nMultiline\\nText',\n *     style: {\n *         fontFamily: 'Arial',\n *         fontSize: 36,\n *         fill: 'red',\n *         stroke: { color: '#4a1850', width: 5 },\n *         align: 'center',\n *         lineHeight: 45,\n *         dropShadow: {\n *             color: '#000000',\n *             blur: 4,\n *             distance: 6,\n *         }\n *     },\n *     anchor: 0.5,\n * });\n *\n * // Text with custom texture settings\n * const crispText = new Text({\n *     text: 'High Quality Text',\n *     style: {\n *         fontSize: 24,\n *         fill: 0x4a4a4a,\n *     },\n *     textureStyle: {\n *         scaleMode: 'nearest',\n *     }\n * });\n *\n * // Word-wrapped text\n * const wrappedText = new Text({\n *     text: 'This is a long piece of text that will automatically wrap to multiple lines',\n *     style: {\n *         fontSize: 20,\n *         wordWrap: true,\n *         wordWrapWidth: 200,\n *         lineHeight: 30,\n *     }\n * });\n * ```\n *\n * Performance Considerations:\n * - Each text instance creates its own texture\n * - Texture is regenerated when text or style changes\n * - Use BitmapText for better performance with static text\n * - Consider texture style options for quality vs performance tradeoffs\n * @category text\n * @standard\n * @see {@link TextStyle} For detailed style options\n * @see {@link BitmapText} For better performance with static text\n * @see {@link HTMLText} For HTML/CSS-based text rendering\n */\nexport class Text\n    extends AbstractText<TextStyle, TextStyleOptions, CanvasTextOptions, BatchableText>\n    implements View\n{\n    /** @internal */\n    public override readonly renderPipeId: string = 'text';\n\n    /**\n     * Optional texture style to use for the text.\n     * > [!NOTE] Text is not updated when this property is updated,\n     * > you must update the text manually by calling `text.onViewUpdate()`\n     * @advanced\n     */\n    public textureStyle?: TextureStyle;\n\n    /**\n     * @param {CanvasTextOptions} options - The options of the text.\n     */\n    constructor(options?: CanvasTextOptions);\n    /** @deprecated since 8.0.0 */\n    constructor(text?: TextString, options?: Partial<TextStyle>);\n    constructor(...args: [CanvasTextOptions?] | [TextString, Partial<TextStyle>])\n    {\n        const options = ensureTextOptions<CanvasTextOptions>(args, 'Text');\n\n        super(options, TextStyle);\n\n        if (options.textureStyle)\n        {\n            this.textureStyle = options.textureStyle instanceof TextureStyle\n                ? options.textureStyle\n                : new TextureStyle(options.textureStyle);\n        }\n    }\n\n    /** @private */\n    protected updateBounds()\n    {\n        const bounds = this._bounds;\n        const anchor = this._anchor;\n\n        let width = 0;\n        let height = 0;\n\n        if (this._style.trim)\n        {\n            const { frame, canvasAndContext } = CanvasTextGenerator.getCanvasAndContext({\n                text: this.text,\n                style: this._style,\n                resolution: 1,\n            });\n\n            CanvasTextGenerator.returnCanvasAndContext(canvasAndContext);\n\n            width = frame.width;\n            height = frame.height;\n        }\n        else\n        {\n            const canvasMeasurement = CanvasTextMetrics.measureText(\n                this._text,\n                this._style\n            );\n\n            width = canvasMeasurement.width;\n            height = canvasMeasurement.height;\n        }\n\n        bounds.minX = (-anchor._x * width);\n        bounds.maxX = bounds.minX + width;\n        bounds.minY = (-anchor._y * height);\n        bounds.maxY = bounds.minY + height;\n    }\n}\n", "import { TextureSource } from '../rendering/renderers/shared/texture/sources/TextureSource';\nimport { Texture } from '../rendering/renderers/shared/texture/Texture';\nimport { Container } from '../scene/container/Container';\nimport { Graphics } from '../scene/graphics/shared/Graphics';\nimport { GraphicsContext } from '../scene/graphics/shared/GraphicsContext';\nimport { Mesh } from '../scene/mesh/shared/Mesh';\nimport { Sprite } from '../scene/sprite/Sprite';\nimport { AnimatedSprite } from '../scene/sprite-animated/AnimatedSprite';\nimport { TilingSprite } from '../scene/sprite-tiling/TilingSprite';\nimport { Text } from '../scene/text/Text';\nimport { PrepareBase } from './PrepareBase';\n\nimport type { FillInstruction, TextureInstruction } from '../scene/graphics/shared/GraphicsContext';\nimport type { FrameObject } from '../scene/sprite-animated/AnimatedSprite';\nimport type { PrepareQueueItem, PrepareSourceItem } from './PrepareBase';\n\n/**\n * Part of the prepare system. Responsible for uploading all the items to the GPU.\n * This class extends the base functionality and resolves given resource items ready for the queue.\n * @category rendering\n * @advanced\n */\nexport abstract class PrepareQueue extends PrepareBase\n{\n    /**\n     * Resolve the given resource type and return an item for the queue\n     * @param source\n     * @param queue\n     */\n    protected resolveQueueItem(source: PrepareSourceItem, queue: PrepareQueueItem[]): void\n    {\n        if (source instanceof Container)\n        {\n            this.resolveContainerQueueItem(source, queue);\n        }\n        else if (source instanceof TextureSource || source instanceof Texture)\n        {\n            queue.push(source.source);\n        }\n        else if (source instanceof GraphicsContext)\n        {\n            queue.push(source);\n        }\n\n        // could not resolve the resource type\n        return null;\n    }\n\n    /**\n     * Resolve the given container and return an item for the queue\n     * @param container\n     * @param queue\n     */\n    protected resolveContainerQueueItem(container: Container, queue: PrepareQueueItem[]): void\n    {\n        // Note: we are just concerned with the given view.\n        // Children are handled by the recursive call of the base class\n\n        if (container instanceof Sprite || container instanceof TilingSprite || container instanceof Mesh)\n        {\n            queue.push(container.texture.source);\n        }\n        else if (container instanceof Text)\n        {\n            queue.push(container);\n        }\n        else if (container instanceof Graphics)\n        {\n            queue.push(container.context);\n        }\n        else if (container instanceof AnimatedSprite)\n        {\n            container.textures.forEach((textureOrFrame) =>\n            {\n                if ((textureOrFrame as Texture).source)\n                {\n                    queue.push((textureOrFrame as Texture).source);\n                }\n                else\n                {\n                    queue.push((textureOrFrame as FrameObject).texture.source);\n                }\n            });\n        }\n    }\n\n    /**\n     * Resolve the given graphics context and return an item for the queue\n     * @param graphicsContext\n     */\n    protected resolveGraphicsContextQueueItem(graphicsContext: GraphicsContext): PrepareQueueItem | null\n    {\n        this.renderer.graphicsContext.getGpuContext(graphicsContext);\n\n        const { instructions } = graphicsContext;\n\n        for (const instruction of instructions)\n        {\n            if (instruction.action === 'texture')\n            {\n                const { image } = (instruction as TextureInstruction).data;\n\n                return image.source;\n            }\n            else if (instruction.action === 'fill')\n            {\n                const { texture } = (instruction as FillInstruction).data.style;\n\n                return texture.source;\n            }\n        }\n\n        return null;\n    }\n}\n", "import { Cache } from '../../assets/cache/Cache';\nimport { type Renderer } from '../../rendering/renderers/types';\nimport { GCManagedHash } from '../../utils/data/GCManagedHash';\nimport { Graphics } from '../graphics/shared/Graphics';\nimport { CanvasTextMetrics } from '../text/canvas/CanvasTextMetrics';\nimport { type SdfShader } from '../text/sdfShader/SdfShader';\nimport { type GPUData } from '../view/ViewContainer';\nimport { BitmapFontManager } from './BitmapFontManager';\nimport { getBitmapTextLayout } from './utils/getBitmapTextLayout';\n\nimport type { InstructionSet } from '../../rendering/renderers/shared/instructions/InstructionSet';\nimport type { RenderPipe } from '../../rendering/renderers/shared/instructions/RenderPipe';\nimport type { Renderable } from '../../rendering/renderers/shared/Renderable';\nimport type { BitmapText } from './BitmapText';\n\n/** @internal */\nexport class BitmapTextGraphics extends Graphics implements GPUData\n{\n    public destroy()\n    {\n        if (this.context.customShader)\n        {\n            this.context.customShader.destroy();\n        }\n\n        super.destroy();\n    }\n}\n\n/** @internal */\nexport abstract class AbstractBitmapTextPipe implements RenderPipe<BitmapText>\n{\n    protected _renderer: Renderer;\n    private readonly _managedBitmapTexts: GCManagedHash<BitmapText>;\n\n    constructor(renderer: Renderer)\n    {\n        this._renderer = renderer;\n        this._managedBitmapTexts = new GCManagedHash({ renderer, type: 'renderable', priority: -2, name: 'bitmapText' });\n    }\n\n    public validateRenderable(bitmapText: BitmapText): boolean\n    {\n        const graphicsRenderable = this._getGpuBitmapText(bitmapText);\n\n        return this._renderer.renderPipes.graphics.validateRenderable(graphicsRenderable);\n\n        // TODO - need to shift all the verts in the graphicsData to the new anchor\n\n        // update the anchor...\n    }\n\n    public addRenderable(bitmapText: BitmapText, instructionSet: InstructionSet)\n    {\n        const graphicsRenderable = this._getGpuBitmapText(bitmapText);\n\n        // sync..\n        syncWithProxy(bitmapText, graphicsRenderable);\n\n        if (bitmapText._didTextUpdate)\n        {\n            bitmapText._didTextUpdate = false;\n\n            this._updateContext(bitmapText, graphicsRenderable);\n        }\n\n        this._renderer.renderPipes.graphics.addRenderable(graphicsRenderable, instructionSet);\n\n        if (graphicsRenderable.context.customShader)\n        {\n            this._updateDistanceField(bitmapText);\n        }\n    }\n\n    public updateRenderable(bitmapText: BitmapText)\n    {\n        const graphicsRenderable = this._getGpuBitmapText(bitmapText);\n\n        // sync..\n        syncWithProxy(bitmapText, graphicsRenderable);\n\n        this._renderer.renderPipes.graphics.updateRenderable(graphicsRenderable);\n\n        if (graphicsRenderable.context.customShader)\n        {\n            this._updateDistanceField(bitmapText);\n        }\n    }\n\n    protected abstract getSdfShader(): SdfShader | null;\n\n    private _updateContext(bitmapText: BitmapText, proxyGraphics: Graphics)\n    {\n        const { context } = proxyGraphics;\n\n        const bitmapFont = BitmapFontManager.getFont(bitmapText.text, bitmapText._style);\n\n        context.clear();\n\n        if (bitmapFont.distanceField.type !== 'none')\n        {\n            // Only use custom shader for WebGL/WebGPU renderers\n            // Canvas renderer cannot properly handle MSDF distance field math\n            const sdfShader = this.getSdfShader();\n\n            if (sdfShader)\n            {\n                if (!context.customShader)\n                {\n                    context.customShader = sdfShader;\n                }\n            }\n        }\n\n        const chars = CanvasTextMetrics.graphemeSegmenter(bitmapText.text);\n        const style = bitmapText._style;\n\n        let currentY = bitmapFont.baseLineOffset;\n\n        // measure our text...\n        const bitmapTextLayout = getBitmapTextLayout(chars, style, bitmapFont, true);\n\n        const padding = style.padding;\n        const scale = bitmapTextLayout.scale;\n\n        let tx = bitmapTextLayout.width;\n        let ty = bitmapTextLayout.height + bitmapTextLayout.offsetY;\n\n        if (style._stroke)\n        {\n            tx += style._stroke.width / scale;\n            ty += style._stroke.width / scale;\n        }\n\n        context\n            .translate((-bitmapText._anchor._x * tx) - padding, (-bitmapText._anchor._y * ty) - padding)\n            .scale(scale, scale);\n\n        const tint = bitmapFont.applyFillAsTint ? style._fill.color : 0xFFFFFF;\n\n        let fontSize = bitmapFont.fontMetrics.fontSize;\n        let lineHeight = bitmapFont.lineHeight;\n\n        if (style.lineHeight)\n        {\n            fontSize = style.fontSize / scale;\n            lineHeight = style.lineHeight / scale;\n        }\n\n        let linePositionYShift = (lineHeight - fontSize) / 2;\n\n        // if `currentY` is no longer starts from `baseLineOffset`\n        // the `baseLineOffset` below may also need to be removed\n        if (linePositionYShift - bitmapFont.baseLineOffset < 0)\n        {\n            linePositionYShift = 0;\n        }\n\n        for (let i = 0; i < bitmapTextLayout.lines.length; i++)\n        {\n            const line = bitmapTextLayout.lines[i];\n\n            for (let j = 0; j < line.charPositions.length; j++)\n            {\n                const char = line.chars[j];\n                const charData = bitmapFont.chars[char];\n\n                if (charData?.texture)\n                {\n                    const texture = charData.texture;\n\n                    context.texture(\n                        texture,\n                        tint,\n                        Math.round(line.charPositions[j] + charData.xOffset),\n                        Math.round(currentY + charData.yOffset + linePositionYShift),\n                        texture.orig.width,\n                        texture.orig.height,\n                    );\n                }\n            }\n\n            currentY += lineHeight;\n        }\n    }\n\n    private _getGpuBitmapText(bitmapText: BitmapText)\n    {\n        return bitmapText._gpuData[this._renderer.uid] || this.initGpuText(bitmapText);\n    }\n\n    public initGpuText(bitmapText: BitmapText)\n    {\n        // TODO we could keep a bunch of contexts around and reuse one that has the same style!\n        const proxyRenderable = new BitmapTextGraphics();\n\n        bitmapText._gpuData[this._renderer.uid] = proxyRenderable;\n\n        this._updateContext(bitmapText, proxyRenderable);\n\n        this._managedBitmapTexts.add(bitmapText);\n\n        return proxyRenderable;\n    }\n\n    private _updateDistanceField(bitmapText: BitmapText)\n    {\n        const context = this._getGpuBitmapText(bitmapText).context;\n\n        const fontFamily = bitmapText._style.fontFamily as string;\n        const dynamicFont = Cache.get(`${fontFamily as string}-bitmap`);\n\n        // Inject the shader code with the correct value\n        const { a, b, c, d } = bitmapText.groupTransform;\n\n        const dx = Math.sqrt((a * a) + (b * b));\n        const dy = Math.sqrt((c * c) + (d * d));\n        const worldScale = (Math.abs(dx) + Math.abs(dy)) / 2;\n\n        const fontScale = dynamicFont.baseRenderedFontSize / bitmapText._style.fontSize;\n\n        const distance = worldScale * dynamicFont.distanceField.range * (1 / fontScale);\n\n        context.customShader.resources.localUniforms.uniforms.uDistance = distance;\n    }\n\n    public destroy()\n    {\n        this._managedBitmapTexts.destroy();\n        this._renderer = null;\n        (this._managedBitmapTexts as null) = null;\n    }\n}\n\nfunction syncWithProxy(container: Renderable, proxy: Renderable)\n{\n    proxy.groupTransform = container.groupTransform;\n    proxy.groupColorAlpha = container.groupColorAlpha;\n    proxy.groupColor = container.groupColor;\n    proxy.groupBlendMode = container.groupBlendMode;\n    proxy.globalDisplayStatus = container.globalDisplayStatus;\n    proxy.groupTransform = container.groupTransform;\n    proxy.localDisplayStatus = container.localDisplayStatus;\n    proxy.groupAlpha = container.groupAlpha;\n    proxy._roundPixels = container._roundPixels;\n}\n", "import { ExtensionType } from '../../extensions/Extensions';\nimport { type SdfShader } from '../text/sdfShader/SdfShader';\nimport { AbstractBitmapTextPipe } from './AbstractBitmapTextPipe';\n\n/** @internal */\nexport class CanvasBitmapTextPipe extends AbstractBitmapTextPipe\n{\n    /** @ignore */\n    public static extension: { type: ExtensionType[]; name: 'bitmapText' } = {\n        type: [\n            ExtensionType.CanvasPipes,\n        ],\n        name: 'bitmapText',\n    } as const;\n\n    protected getSdfShader(): SdfShader | null\n    {\n        return null;\n    }\n}\n", "// TODO eventually we should not use this bit, but instead use the localUniformBit\n// have the MSDF bit be merged in with the localUniformBit\n\n/** @internal */\nexport const localUniformMSDFBit = {\n    name: 'local-uniform-msdf-bit',\n    vertex: {\n        header: /* wgsl */`\n            struct LocalUniforms {\n                uColor:vec4<f32>,\n                uTransformMatrix:mat3x3<f32>,\n                uDistance: f32,\n                uRound:f32,\n            }\n\n            @group(2) @binding(0) var<uniform> localUniforms : LocalUniforms;\n        `,\n        main: /* wgsl */`\n            vColor *= localUniforms.uColor;\n            modelMatrix *= localUniforms.uTransformMatrix;\n        `,\n        end: /* wgsl */`\n            if(localUniforms.uRound == 1)\n            {\n                vPosition = vec4(roundPixels(vPosition.xy, globalUniforms.uResolution), vPosition.zw);\n            }\n        `\n    },\n    fragment: {\n        header: /* wgsl */`\n            struct LocalUniforms {\n                uColor:vec4<f32>,\n                uTransformMatrix:mat3x3<f32>,\n                uDistance: f32\n            }\n\n            @group(2) @binding(0) var<uniform> localUniforms : LocalUniforms;\n         `,\n        main: /* wgsl */`\n            outColor = vec4<f32>(calculateMSDFAlpha(outColor, vColor, localUniforms.uDistance));\n        `\n\n    }\n};\n\n/** @internal */\nexport const localUniformMSDFBitGl = {\n    name: 'local-uniform-msdf-bit',\n    vertex: {\n        header: /* glsl */`\n            uniform mat3 uTransformMatrix;\n            uniform vec4 uColor;\n            uniform float uRound;\n        `,\n        main: /* glsl */`\n            vColor *= uColor;\n            modelMatrix *= uTransformMatrix;\n        `,\n        end: /* glsl */`\n            if(uRound == 1.)\n            {\n                gl_Position.xy = roundPixels(gl_Position.xy, uResolution);\n            }\n        `\n    },\n    fragment: {\n        header: /* glsl */`\n            uniform float uDistance;\n         `,\n        main: /* glsl */`\n            outColor = vec4(calculateMSDFAlpha(outColor, vColor, uDistance));\n        `\n\n    }\n};\n", "/** @internal */\nexport const mSDFBit = {\n    name: 'msdf-bit',\n    fragment: {\n        header: /* wgsl */`\n            fn calculateMSDFAlpha(msdfColor:vec4<f32>, shapeColor:vec4<f32>, distance:f32) -> f32 {\n\n                // MSDF\n                var median = msdfColor.r + msdfColor.g + msdfColor.b -\n                    min(msdfColor.r, min(msdfColor.g, msdfColor.b)) -\n                    max(msdfColor.r, max(msdfColor.g, msdfColor.b));\n\n                // SDF\n                median = min(median, msdfColor.a);\n\n                var screenPxDistance = distance * (median - 0.5);\n                var alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);\n                if (median < 0.01) {\n                    alpha = 0.0;\n                } else if (median > 0.99) {\n                    alpha = 1.0;\n                }\n\n                // Gamma correction for coverage-like alpha\n                var luma: f32 = dot(shapeColor.rgb, vec3<f32>(0.299, 0.587, 0.114));\n                var gamma: f32 = mix(1.0, 1.0 / 2.2, luma);\n                var coverage: f32 = pow(shapeColor.a * alpha, gamma);\n\n                return coverage;\n\n            }\n        `,\n    }\n\n};\n\n/** @internal */\nexport const mSDFBitGl = {\n    name: 'msdf-bit',\n    fragment: {\n        header: /* glsl */`\n            float calculateMSDFAlpha(vec4 msdfColor, vec4 shapeColor, float distance) {\n\n                // MSDF\n                float median = msdfColor.r + msdfColor.g + msdfColor.b -\n                                min(msdfColor.r, min(msdfColor.g, msdfColor.b)) -\n                                max(msdfColor.r, max(msdfColor.g, msdfColor.b));\n\n                // SDF\n                median = min(median, msdfColor.a);\n\n                float screenPxDistance = distance * (median - 0.5);\n                float alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);\n\n                if (median < 0.01) {\n                    alpha = 0.0;\n                } else if (median > 0.99) {\n                    alpha = 1.0;\n                }\n\n                // Gamma correction for coverage-like alpha\n                float luma = dot(shapeColor.rgb, vec3(0.299, 0.587, 0.114));\n                float gamma = mix(1.0, 1.0 / 2.2, luma);\n                float coverage = pow(shapeColor.a * alpha, gamma);\n\n                return coverage;\n            }\n        `,\n    }\n\n};\n", "import { Matrix } from '../../../maths/matrix/Matrix';\nimport {\n    compileHighShaderGlProgram,\n    compileHighShaderGpuProgram\n} from '../../../rendering/high-shader/compileHighShaderToProgram';\nimport { colorBit, colorBitGl } from '../../../rendering/high-shader/shader-bits/colorBit';\nimport {\n    generateTextureBatchBit,\n    generateTextureBatchBitGl\n} from '../../../rendering/high-shader/shader-bits/generateTextureBatchBit';\nimport { roundPixelsBit, roundPixelsBitGl } from '../../../rendering/high-shader/shader-bits/roundPixelsBit';\nimport { getBatchSamplersUniformGroup } from '../../../rendering/renderers/gl/shader/getBatchSamplersUniformGroup';\nimport { Shader } from '../../../rendering/renderers/shared/shader/Shader';\nimport { UniformGroup } from '../../../rendering/renderers/shared/shader/UniformGroup';\nimport { localUniformMSDFBit, localUniformMSDFBitGl } from './shader-bits/localUniformMSDFBit';\nimport { mSDFBit, mSDFBitGl } from './shader-bits/mSDFBit';\n\nimport type { GlProgram } from '../../../rendering/renderers/gl/shader/GlProgram';\nimport type { GpuProgram } from '../../../rendering/renderers/gpu/shader/GpuProgram';\n\nlet gpuProgram: GpuProgram;\nlet glProgram: GlProgram;\n\n/** @internal */\nexport class SdfShader extends Shader\n{\n    constructor(maxTextures: number)\n    {\n        const uniforms = new UniformGroup({\n            uColor: { value: new Float32Array([1, 1, 1, 1]), type: 'vec4<f32>' },\n            uTransformMatrix: { value: new Matrix(), type: 'mat3x3<f32>' },\n            uDistance: { value: 4, type: 'f32' },\n            uRound: { value: 0, type: 'f32' },\n        });\n\n        gpuProgram ??= compileHighShaderGpuProgram({\n            name: 'sdf-shader',\n            bits: [\n                colorBit,\n                generateTextureBatchBit(maxTextures),\n                localUniformMSDFBit,\n                mSDFBit,\n                roundPixelsBit\n            ]\n        });\n\n        glProgram ??= compileHighShaderGlProgram({\n            name: 'sdf-shader',\n            bits: [\n                colorBitGl,\n                generateTextureBatchBitGl(maxTextures),\n                localUniformMSDFBitGl,\n                mSDFBitGl,\n                roundPixelsBitGl,\n            ]\n        });\n\n        super({\n            glProgram,\n            gpuProgram,\n            resources: {\n                localUniforms: uniforms,\n                batchSamplers: getBatchSamplersUniformGroup(maxTextures),\n            }\n        });\n    }\n}\n", "import { ExtensionType } from '../../extensions/Extensions';\nimport { SdfShader } from '../text/sdfShader/SdfShader';\nimport { AbstractBitmapTextPipe } from './AbstractBitmapTextPipe';\n\n/** @internal */\nexport class BitmapTextPipe extends AbstractBitmapTextPipe\n{\n    /** @ignore */\n    public static extension: { type: ExtensionType[]; name: 'bitmapText' } = {\n        type: [\n            ExtensionType.WebGLPipes,\n            ExtensionType.WebGPUPipes,\n        ],\n        name: 'bitmapText',\n    } as const;\n\n    protected getSdfShader(): SdfShader | null\n    {\n        return new SdfShader(this._renderer.limits.maxBatchableTextures);\n    }\n}\n", "import { extensions } from '../../extensions/Extensions';\nimport { CanvasBitmapTextPipe } from './CanvasBitmapTextPipe';\nimport { BitmapTextPipe } from './GpuBitmapTextPipe';\n\nextensions.add(CanvasBitmapTextPipe);\nextensions.add(BitmapTextPipe);\n", "import { warn } from '../../utils/logging/warn';\nimport { AbstractText, ensureTextOptions } from '../text/AbstractText';\nimport { TextStyle } from '../text/TextStyle';\nimport { type BitmapTextGraphics } from './AbstractBitmapTextPipe';\nimport { BitmapFontManager } from './BitmapFontManager';\nimport './init';\n\nimport type { View } from '../../rendering/renderers/shared/view/View';\nimport type { TextOptions, TextString } from '../text/AbstractText';\nimport type { TextStyleOptions } from '../text/TextStyle';\n\n// eslint-disable-next-line requireExport/require-export-jsdoc, requireMemberAPI/require-member-api-doc\nexport interface BitmapText extends PixiMixins.BitmapText, AbstractText<\n    TextStyle,\n    TextStyleOptions,\n    TextOptions,\n    BitmapTextGraphics\n> {}\n\n/**\n * A BitmapText object creates text using pre-rendered bitmap fonts.\n * It supports both loaded bitmap fonts (XML/FNT) and dynamically generated ones.\n *\n * To split a line you can use '\\n' in your text string, or use the `wordWrap` and\n * `wordWrapWidth` style properties.\n *\n * Key Features:\n * - High-performance text rendering using pre-generated textures\n * - Support for both pre-loaded and dynamic bitmap fonts\n * - Compatible with MSDF/SDF fonts for crisp scaling\n * - Automatic font reuse and optimization\n *\n * Performance Benefits:\n * - Faster rendering compared to Canvas/HTML text\n * - Lower memory usage for repeated characters\n * - More efficient text changes\n * - Better batching capabilities\n *\n * Limitations:\n * - Full character set support is impractical due to the number of chars (mainly affects CJK languages)\n * - Initial font generation/loading overhead\n * - Less flexible styling compared to Canvas/HTML text\n * @example\n * ```ts\n * import { BitmapText, BitmapFont } from 'pixi.js';\n *\n * // Dynamic font generation\n * const dynamicText = new BitmapText({\n *     text: 'Hello Pixi!',\n *     style: {\n *         fontFamily: 'Arial',\n *         fontSize: 24,\n *         fill: 0xff1010,\n *         align: 'center',\n *     }\n * });\n *\n * // Pre-installed font usage\n * BitmapFont.install({\n *    name: 'myFont',\n *    style: {\n *        fontFamily: 'Arial',\n *    }\n * });\n *\n * const preinstalledText = new BitmapText({\n *     text: 'Hello Pixi!',\n *     style: {\n *        fontFamily: 'myFont',\n *        fontSize: 24,\n *        fill: 0xff1010,\n *        align: 'center',\n *     }\n * });\n *\n * // Load and use external bitmap font, if the font supports MSDF/SDF then it will be used\n * const font = await Assets.load('fonts/myFont.fnt');\n *\n * const loadedFontText = new BitmapText({\n *     text: 'Hello Pixi!',\n *     style: {\n *        fontFamily: 'myLoadedFont', // Name from .fnt file\n *        fontSize: 24,\n *        fill: 0xff1010,\n *        align: 'center',\n *     }\n * });\n *\n * // Multiline text with word wrap\n * const wrappedText = new BitmapText({\n *     text: 'This is a long text that will wrap automatically',\n *     style: {\n *         fontFamily: 'Arial',\n *         fontSize: 24,\n *         wordWrap: true,\n *         wordWrapWidth: 200,\n *     }\n * });\n * ```\n *\n * Font Types:\n * 1. Pre-loaded Bitmap Fonts:\n *    - Load via Asset Manager (XML/FNT formats)\n *    - Support for MSDF/SDF fonts\n *    - Create using tools like https://msdf-bmfont.donmccurdy.com/\n *\n * 2. Dynamic Bitmap Fonts:\n *    - Generated at runtime from system fonts\n *    - Automatic font reuse and optimization\n *    - Smart scaling for similar font sizes\n *\n * Font Management:\n * - Automatic font generation when needed\n * - Manual pre-installation via `BitmapFont.install`\n * - Smart font reuse to optimize memory\n * - Scale existing fonts instead of generating new ones when possible\n * @category text\n * @standard\n * @see {@link BitmapFont} For font installation and management\n * @see {@link Text} For canvas-based text rendering\n * @see {@link HTMLText} For HTML/CSS-based text rendering\n */\nexport class BitmapText extends AbstractText<\n    TextStyle,\n    TextStyleOptions,\n    TextOptions,\n    BitmapTextGraphics\n> implements View\n{\n    /** @internal */\n    public override readonly renderPipeId: string = 'bitmapText';\n\n    /**\n     * **Note:** Our docs parser struggles to properly understand the constructor signature.\n     * This is the correct signature.\n     * ```ts\n     * new BitmapText(options?: TextOptions);\n     * ```\n     * @param { TextOptions } options - The options of the bitmap text.\n     */\n    constructor(options?: TextOptions);\n    /** @deprecated since 8.0.0 */\n    constructor(text?: TextString, options?: Partial<TextStyle>);\n    constructor(...args: [TextOptions?] | [TextString, Partial<TextStyle>])\n    {\n        const options = ensureTextOptions(args, 'BitmapText');\n\n        options.style ??= options.style || {};\n        options.style.fill ??= 0xffffff;\n\n        super(options, TextStyle);\n    }\n\n    /**\n     * @param now - The current time in milliseconds.\n     * @internal\n     */\n    public _onTouch(now: number): void\n    {\n        this._gcLastUsed = now;\n\n        // Make sure to touch the proxy renderable\n        for (const key in this._gpuData)\n        {\n            this._gpuData[key]?._onTouch(now);\n        }\n    }\n\n    /** @private */\n    protected updateBounds()\n    {\n        const bounds = this._bounds;\n        const anchor = this._anchor;\n\n        const bitmapMeasurement = BitmapFontManager.measureText(this.text, this._style);\n        const scale = bitmapMeasurement.scale;\n        const offset = bitmapMeasurement.offsetY * scale;\n\n        let width = bitmapMeasurement.width * scale;\n        let height = bitmapMeasurement.height * scale;\n\n        const stroke = this._style._stroke;\n\n        if (stroke)\n        {\n            width += stroke.width;\n            height += stroke.width;\n        }\n\n        bounds.minX = (-anchor._x * width);\n        bounds.maxX = bounds.minX + width;\n        bounds.minY = (-anchor._y * (height + offset));\n        bounds.maxY = bounds.minY + height;\n    }\n\n    /**\n     * The resolution / device pixel ratio for text rendering.\n     * Unlike other text types, BitmapText resolution is managed by the BitmapFont.\n     * Individual resolution changes are not supported.\n     * @example\n     * ```ts\n     * //  Incorrect: Setting resolution directly (will trigger warning)\n     * const text = new BitmapText({\n     *     text: 'Hello',\n     *     resolution: 2 // This will be ignored\n     * });\n     *\n     * //  Correct: Set resolution when installing the font\n     * BitmapFont.install({\n     *     name: 'MyFont',\n     *     style: {\n     *         fontFamily: 'Arial',\n     *     },\n     *     resolution: 2 // Resolution is set here\n     * });\n     *\n     * const text = new BitmapText({\n     *     text: 'Hello',\n     *     style: {\n     *         fontFamily: 'MyFont' // Uses font's resolution\n     *     }\n     * });\n     * ```\n     * @default 1\n     * @see {@link BitmapFont.install} For setting font resolution\n     * @throws {Warning} When attempting to change resolution directly\n     * @readonly\n     */\n    override set resolution(value: number)\n    {\n        // #if _DEBUG\n        if (value !== null)\n        {\n            warn(\n            // eslint-disable-next-line max-len\n                '[BitmapText] dynamically updating the resolution is not supported. Resolution should be managed by the BitmapFont.'\n            );\n        }\n        // #endif\n    }\n\n    override get resolution(): number\n    {\n        return this._resolution;\n    }\n}\n", "import { Color } from '../../../color/Color';\nimport { type TextDropShadow, TextStyle } from '../../text/TextStyle';\nimport { type HTMLTextStyle, type HTMLTextStyleOptions } from '../HTMLTextStyle';\n\nimport type { ConvertedStrokeStyle } from '../../graphics/shared/FillTypes';\n\n/**\n * Internally converts all of the style properties into CSS equivalents.\n * @param style\n * @returns The CSS style string, for setting `style` property of root HTMLElement.\n * @internal\n */\nexport function textStyleToCSS(style: HTMLTextStyle): string\n{\n    const stroke = style._stroke;\n    const fill = style._fill;\n\n    const color = Color.shared.setValue(fill.color).setAlpha(fill.alpha ?? 1).toHexa();\n    const cssStyleString = [\n        `color: ${color}`,\n        `font-size: ${(style.fontSize as number)}px`,\n        `font-family: ${style.fontFamily}`,\n        `font-weight: ${style.fontWeight}`,\n        `font-style: ${style.fontStyle}`,\n        `font-variant: ${style.fontVariant}`,\n        `letter-spacing: ${style.letterSpacing}px`,\n        `text-align: ${style.align}`,\n        `padding: ${style.padding}px`,\n        `white-space: ${(style.whiteSpace === 'pre' && style.wordWrap) ? 'pre-wrap' : style.whiteSpace}`,\n        ...style.lineHeight ? [`line-height: ${style.lineHeight}px`] : [],\n        ...style.wordWrap ? [\n            `word-break: ${style.breakWords ? 'break-all' : 'normal'}`,\n            `max-width: ${style.wordWrapWidth}px`\n        ] : [],\n        ...stroke ? [strokeToCSS(stroke)] : [],\n        ...style.dropShadow ? [dropShadowToCSS(style.dropShadow)] : [],\n        ...style.cssOverrides,\n    ].join(';');\n\n    const cssStyles = [`div { ${cssStyleString} }`];\n\n    tagStyleToCSS(style.tagStyles, cssStyles);\n\n    return cssStyles.join(' ');\n}\n\nfunction dropShadowToCSS(dropShadowStyle: TextStyle['dropShadow']): string\n{\n    const dropshadowStyle = { ...dropShadowStyle };\n    const color = Color.shared.setValue(dropshadowStyle.color).setAlpha(dropshadowStyle.alpha ?? 1).toHexa();\n    const x = Math.round(Math.cos(dropshadowStyle.angle) * dropshadowStyle.distance);\n    const y = Math.round(Math.sin(dropshadowStyle.angle) * dropshadowStyle.distance);\n\n    const position = `${x}px ${y}px`;\n\n    if (dropshadowStyle.blur > 0)\n    {\n        return `text-shadow: ${position} ${dropshadowStyle.blur}px ${color}`;\n    }\n\n    return `text-shadow: ${position} ${color}`;\n}\n\nfunction strokeToCSS(stroke: ConvertedStrokeStyle): string\n{\n    const color = Color.shared.setValue(stroke.color).setAlpha(stroke.alpha ?? 1).toHexa();\n\n    return [\n        `-webkit-text-stroke-width: ${stroke.width}px`,\n        `-webkit-text-stroke-color: ${color}`,\n        `text-stroke-width: ${stroke.width}px`,\n        `text-stroke-color: ${color}`,\n        'paint-order: stroke',\n    ].join(';');\n}\n\n/** Converts the tag styles into CSS. */\nconst templates = {\n    fontSize: `font-size: {{VALUE}}px`,\n    fontFamily: `font-family: {{VALUE}}`,\n    fontWeight: `font-weight: {{VALUE}}`,\n    fontStyle: `font-style: {{VALUE}}`,\n    fontVariant: `font-variant: {{VALUE}}`,\n    letterSpacing: `letter-spacing: {{VALUE}}px`,\n    align: `text-align: {{VALUE}}`,\n    padding: `padding: {{VALUE}}px`,\n    whiteSpace: `white-space: {{VALUE}}`,\n    lineHeight: `line-height: {{VALUE}}px`,\n    wordWrapWidth: `max-width: {{VALUE}}px`,\n};\n\n/** Converts the tag styles into CSS if modifications are required */\nconst transform = {\n    fill: (value: string) => `color: ${Color.shared.setValue(value).toHexa()}`,\n    breakWords: (value: string) => `word-break: ${value ? 'break-all' : 'normal'}`,\n    stroke: strokeToCSS,\n    dropShadow: (value: boolean | Partial<TextDropShadow>) =>\n    {\n        if (value === true)\n        {\n            return dropShadowToCSS(TextStyle.defaultDropShadow);\n        }\n\n        if (value && typeof value === 'object')\n        {\n            return dropShadowToCSS({ ...TextStyle.defaultDropShadow, ...value });\n        }\n\n        return '';\n    }\n};\n\nfunction tagStyleToCSS(tagStyles: Record<string, HTMLTextStyleOptions>, out: string[])\n{\n    for (const i in tagStyles)\n    {\n        const tagStyle = tagStyles[i];\n        const cssTagStyle = [];\n\n        for (const j in tagStyle)\n        {\n            if (transform[j as keyof typeof transform])\n            {\n                cssTagStyle.push(transform[j as keyof typeof transform](tagStyle[j as keyof HTMLTextStyleOptions] as any));\n            }\n            else if (templates[j as keyof typeof templates])\n            {\n                // eslint-disable-next-line max-len\n                cssTagStyle.push(templates[j as keyof typeof templates].replace('{{VALUE}}', tagStyle[j as keyof HTMLTextStyleOptions] as any));\n            }\n        }\n\n        out.push(`${i} { ${cssTagStyle.join(';')} }`);\n    }\n}\n", "/* eslint-disable accessor-pairs */\nimport { warn } from '../../utils/logging/warn';\nimport { TextStyle } from '../text/TextStyle';\nimport { textStyleToCSS } from './utils/textStyleToCSS';\n\nimport type { FillInput, StrokeInput } from '../graphics/shared/FillTypes';\nimport type { TextStyleOptions } from '../text/TextStyle';\n\n/**\n * Options for HTML text style, extends standard text styling with HTML-specific capabilities.\n * Omits certain base text properties that don't apply to HTML rendering.\n * @example\n * ```ts\n * // Basic HTML text style\n * const text = new HTMLText({\n *     text: '<p>Hello World</p>',\n *     style: {\n *         fontSize: 24,\n *         fill: '#ff0000',\n *         fontFamily: 'Arial',\n *         align: 'center'\n *     }\n * });\n *\n * // Custom tag styling\n * const taggedText = new HTMLText({\n *     text: '<custom>Custom Tag</custom>',\n *     style: {\n *         fontSize: 16,\n *         tagStyles: {\n *             custom: {\n *                 fontSize: 32,\n *                 fill: '#00ff00',\n *                 fontStyle: 'italic'\n *             }\n *         }\n *     }\n * });\n * ```\n * @category text\n * @standard\n */\nexport interface HTMLTextStyleOptions extends Omit<TextStyleOptions, 'leading' | 'textBaseline' | 'trim' | 'filters'>\n{\n    /**\n     * List of CSS style overrides to apply to the HTML text.\n     * These styles are added after the built-in styles and can override any default styling.\n     * @advanced\n     */\n    cssOverrides?: string[];\n\n    /**\n     * Custom styles to apply to specific HTML tags.\n     * Allows for consistent styling of custom elements without CSS overrides.\n     * @example\n     * ```ts\n     * const text = new HTMLText({\n     *     text: `\n     *         <red>Main Title</red>\n     *         <grey>The subtitle</grey>\n     *         <blue>Regular content text</blue>\n     *     `,\n     *     style: {\n     *         tagStyles: {\n     *             red: {\n     *                 fill: '#ff0000',\n     *             },\n     *             grey: {\n     *                 fill: '#666666',\n     *             },\n     *             blue: {\n     *                 fill: 'blue',\n     *             }\n     *         }\n     *     }\n     * });\n     * ```\n     * @standard\n     */\n    tagStyles?: Record<string, HTMLTextStyleOptions>;\n}\n\n/**\n * A TextStyle object rendered by the HTMLTextSystem.\n * @category text\n */\nexport class HTMLTextStyle extends TextStyle\n{\n    private _cssOverrides: string[] = [];\n    private _cssStyle: string;\n    /**\n     * Custom styles to apply to specific HTML tags.\n     * Allows for consistent styling of custom elements without CSS overrides.\n     * @example\n     * new HTMLText({\n     *   text:'<red>Red</red>,<blue>Blue</blue>,<green>Green</green>',\n     *   style:{\n     *       fontFamily: 'DM Sans',\n     *       fill: 'white',\n     *       fontSize:100,\n     *       tagStyles:{\n     *           red:{\n     *               fill:'red',\n     *           },\n     *           blue:{\n     *               fill:'blue',\n     *           },\n     *           green:{\n     *               fill:'green',\n     *           }\n     *       }\n     *   }\n     * );\n     * @standard\n     */\n    public override _tagStyles: Record<string, HTMLTextStyleOptions>;\n\n    constructor(options: HTMLTextStyleOptions = {})\n    {\n        super(options);\n\n        this.cssOverrides = options.cssOverrides ?? [];\n        this.tagStyles = options.tagStyles ?? {};\n    }\n\n    /**\n     * Custom styles to apply to specific HTML tags.\n     * Allows for consistent styling of custom elements without CSS overrides.\n     * @example\n     * ```ts\n     * const text = new HTMLText({\n     *     text: '<red>Red</red>, <blue>Blue</blue>, <green>Green</green>',\n     *     style: {\n     *         tagStyles: {\n     *             red: { fill: 'red' },\n     *             blue: { fill: 'blue' },\n     *             green: { fill: 'green' },\n     *         }\n     *     }\n     * });\n     * ```\n     * @standard\n     */\n    public override get tagStyles(): Record<string, HTMLTextStyleOptions> | undefined\n    {\n        return this._tagStyles;\n    }\n    /** @standard */\n    public override set tagStyles(value: Record<string, HTMLTextStyleOptions> | undefined)\n    {\n        if (this._tagStyles === value) return;\n\n        this._tagStyles = value ?? {};\n        this.update();\n    }\n\n    /**\n     * List of CSS style overrides to apply to the HTML text.\n     * These styles are added after the built-in styles and can override any default styling.\n     * @advanced\n     */\n    set cssOverrides(value: string | string[])\n    {\n        this._cssOverrides = value instanceof Array ? value : [value];\n        this.update();\n    }\n\n    /** @advanced */\n    get cssOverrides(): string[]\n    {\n        return this._cssOverrides;\n    }\n\n    /**\n     * Updates the text style and triggers a refresh of the CSS style cache.\n     * This method is called automatically when style properties are changed.\n     * @example\n     * ```ts\n     * // Update after multiple changes\n     * const text = new HTMLText({\n     *     text: 'Hello World',\n     *     style\n     * });\n     *\n     * style.fontSize = 32;\n     * style.fill = '#00ff00';\n     * style.fontFamily = 'Arial';\n     * style.update(); // Apply all changes at once\n     * ```\n     * @advanced\n     * @see {@link HTMLTextStyle#cssStyle} For accessing the generated CSS\n     * @see {@link HTMLTextStyle#cssOverrides} For managing CSS overrides\n     */\n    public update()\n    {\n        this._cssStyle = null;\n        super.update();\n    }\n\n    /**\n     * Creates a new HTMLTextStyle object with the same values as this one.\n     * This creates a deep copy of all style properties, including dropShadow and tag styles.\n     * @example\n     * ```ts\n     * // Create original style\n     * const originalStyle = new HTMLTextStyle({\n     *     fontSize: 24,\n     *     fill: '#ff0000',\n     *     tagStyles: {\n     *         header: { fontSize: 32, fill: '#00ff00' }\n     *     }\n     * });\n     *\n     * // Clone the style\n     * const clonedStyle = originalStyle.clone();\n     *\n     * // Modify cloned style independently\n     * clonedStyle.fontSize = 36;\n     * clonedStyle.fill = '#0000ff';\n     *\n     * // Original style remains unchanged\n     * console.log(originalStyle.fontSize); // Still 24\n     * console.log(originalStyle.fill); // Still '#ff0000'\n     * ```\n     *\n     * Properties that are cloned:\n     * - Basic text properties (fontSize, fontFamily, etc.)\n     * - Fill and stroke styles\n     * - Drop shadow configuration\n     * - CSS overrides\n     * - Tag styles (deep copied)\n     * - Word wrap settings\n     * - Alignment and spacing\n     * @returns {HTMLTextStyle} A new HTMLTextStyle instance with the same properties\n     * @see {@link HTMLTextStyle} For available style properties\n     * @see {@link HTMLTextStyle#cssOverrides} For CSS override handling\n     * @see {@link HTMLTextStyle#tagStyles} For tag style configuration\n     * @standard\n     */\n    public clone(): HTMLTextStyle\n    {\n        return new HTMLTextStyle({\n            align: this.align,\n            breakWords: this.breakWords,\n            dropShadow: this.dropShadow ? { ...this.dropShadow } : null,\n            fill: this._fill,\n            fontFamily: this.fontFamily,\n            fontSize: this.fontSize,\n            fontStyle: this.fontStyle,\n            fontVariant: this.fontVariant,\n            fontWeight: this.fontWeight,\n            letterSpacing: this.letterSpacing,\n            lineHeight: this.lineHeight,\n            padding: this.padding,\n            stroke: this._stroke,\n            whiteSpace: this.whiteSpace,\n            wordWrap: this.wordWrap,\n            wordWrapWidth: this.wordWrapWidth,\n            cssOverrides: this.cssOverrides,\n            tagStyles: { ...this.tagStyles },\n        });\n    }\n\n    /**\n     * The CSS style string that will be applied to the HTML text.\n     * @advanced\n     */\n    get cssStyle(): string\n    {\n        if (!this._cssStyle)\n        {\n            this._cssStyle = textStyleToCSS(this);\n        }\n\n        return this._cssStyle;\n    }\n\n    /**\n     * Add a style override, this can be any CSS property\n     * it will override any built-in style. This is the\n     * property and the value as a string (e.g., `color: red`).\n     * This will override any other internal style.\n     * @param {string} value - CSS style(s) to add.\n     * @example\n     * style.addOverride('background-color: red');\n     * @advanced\n     */\n    public addOverride(...value: string[]): void\n    {\n        const toAdd = value.filter((v) => !this.cssOverrides.includes(v));\n\n        if (toAdd.length > 0)\n        {\n            this.cssOverrides.push(...toAdd);\n            this.update();\n        }\n    }\n\n    /**\n     * Remove any overrides that match the value.\n     * @param {string} value - CSS style to remove.\n     * @example\n     * style.removeOverride('background-color: red');\n     * @advanced\n     */\n    public removeOverride(...value: string[]): void\n    {\n        const toRemove = value.filter((v) => this.cssOverrides.includes(v));\n\n        if (toRemove.length > 0)\n        {\n            this.cssOverrides = this.cssOverrides.filter((v) => !toRemove.includes(v));\n            this.update();\n        }\n    }\n\n    /**\n     * Sets the fill style for the text. HTML text only supports color fills (string or number values).\n     * Texture fills are not supported and will trigger a warning in debug mode.\n     * @example\n     * ```ts\n     * // Using hex colors\n     * const text = new HTMLText({\n     *     text: 'Colored Text',\n     *     style: {\n     *         fill: 0xff0000 // Red color\n     *     }\n     * });\n     *\n     * // Using CSS color strings\n     * text.style.fill = '#00ff00';     // Hex string (Green)\n     * text.style.fill = 'blue';        // Named color\n     * text.style.fill = 'rgb(255,0,0)' // RGB\n     * text.style.fill = '#f0f';        // Short hex\n     *\n     * // Invalid usage (will trigger warning in debug)\n     * text.style.fill = {\n     *     type: 'pattern',\n     *     texture: Texture.from('pattern.png')\n     * }; // Not supported, falls back to default\n     * ```\n     * @param value - The fill color to use. Must be a string or number.\n     * @throws {Warning} In debug mode when attempting to use unsupported fill types\n     * @see {@link TextStyle#fill} For full fill options in canvas text\n     * @standard\n     */\n    override set fill(value: FillInput)\n    {\n        // if its not a string or a number, then its a texture!\n        if (typeof value !== 'string' && typeof value !== 'number')\n        {\n            // #if _DEBUG\n            warn('[HTMLTextStyle] only color fill is not supported by HTMLText');\n            // #endif\n        }\n\n        super.fill = value;\n    }\n\n    /**\n     * Sets the stroke style for the text. HTML text only supports color strokes (string or number values).\n     * Texture strokes are not supported and will trigger a warning in debug mode.\n     * @example\n     * ```ts\n     * // Using hex colors\n     * const text = new HTMLText({\n     *     text: 'Outlined Text',\n     *     style: {\n     *         stroke: 0xff0000 // Red outline\n     *     }\n     * });\n     *\n     * // Using CSS color strings\n     * text.style.stroke = '#00ff00';     // Hex string (Green)\n     * text.style.stroke = 'blue';        // Named color\n     * text.style.stroke = 'rgb(255,0,0)' // RGB\n     * text.style.stroke = '#f0f';        // Short hex\n     *\n     * // Using stroke width\n     * text.style = {\n     *     stroke: {\n     *         color: '#ff0000',\n     *         width: 2\n     *     }\n     * };\n     *\n     * // Remove stroke\n     * text.style.stroke = null;\n     *\n     * // Invalid usage (will trigger warning in debug)\n     * text.style.stroke = {\n     *     type: 'pattern',\n     *     texture: Texture.from('pattern.png')\n     * }; // Not supported, falls back to default\n     * ```\n     * @param value - The stroke style to use. Must be a string, number, or stroke configuration object\n     * @throws {Warning} In debug mode when attempting to use unsupported stroke types\n     * @see {@link TextStyle#stroke} For full stroke options in canvas text\n     * @standard\n     */\n    override set stroke(value: StrokeInput)\n    {\n        // if its not a string or a number, then its a texture!\n        if (value && typeof value !== 'string' && typeof value !== 'number')\n        {\n            // #if _DEBUG\n            warn('[HTMLTextStyle] only color stroke is not supported by HTMLText');\n            // #endif\n        }\n\n        super.stroke = value;\n    }\n}\n", "/* eslint-disable no-restricted-globals */\nimport { DOMAdapter } from '../../environment/adapter';\nimport { type ImageLike } from '../../environment/ImageLike';\n\nimport type { CanvasAndContext } from '../../rendering/renderers/shared/texture/CanvasPool';\n\n/** @internal */\nconst nssvg = 'http://www.w3.org/2000/svg';\n/** @internal */\nconst nsxhtml = 'http://www.w3.org/1999/xhtml';\n\n/** @internal */\nexport class HTMLTextRenderData\n{\n    public svgRoot = document.createElementNS(nssvg, 'svg');\n    public foreignObject = document.createElementNS(nssvg, 'foreignObject');\n    public domElement = document.createElementNS(nsxhtml, 'div');\n    public styleElement = document.createElementNS(nsxhtml, 'style');\n    public image: ImageLike;\n    public canvasAndContext?: CanvasAndContext;\n\n    constructor()\n    {\n        const { foreignObject, svgRoot, styleElement, domElement } = this;\n        // Arbitrary max size\n\n        foreignObject.setAttribute('width', '10000');\n        foreignObject.setAttribute('height', '10000');\n        foreignObject.style.overflow = 'hidden';\n\n        svgRoot.appendChild(foreignObject);\n\n        foreignObject.appendChild(styleElement);\n        foreignObject.appendChild(domElement);\n\n        this.image = DOMAdapter.get().createImage();\n    }\n\n    public destroy(): void\n    {\n        this.svgRoot.remove();\n        this.foreignObject.remove();\n        this.styleElement.remove();\n        this.domElement.remove();\n        this.image.src = '';\n        this.image.remove();\n\n        this.svgRoot = null;\n        this.foreignObject = null;\n        this.styleElement = null;\n        this.domElement = null;\n        this.image = null;\n        this.canvasAndContext = null;\n    }\n}\n", "/* eslint-disable no-restricted-globals */\nimport { HTMLTextRenderData } from '../HTMLTextRenderData';\n\nimport type { Size } from '../../../maths/misc/Size';\nimport type { HTMLTextStyle } from '../HTMLTextStyle';\n\nlet tempHTMLTextRenderData: HTMLTextRenderData;\n\n/**\n * Measures the HTML text without actually generating an image.\n * This is used to calculate the size of the text.\n * @param text - The text to measure\n * @param style - The style to use\n * @param fontStyleCSS - The font css to use\n * @param htmlTextRenderData - The HTMLTextRenderData to write the SVG to\n * @returns - The size of the text\n * @internal\n */\nexport function measureHtmlText(\n    text: string,\n    style: HTMLTextStyle,\n    fontStyleCSS?: string,\n    htmlTextRenderData?: HTMLTextRenderData\n): Size\n{\n    htmlTextRenderData ||= tempHTMLTextRenderData || (tempHTMLTextRenderData = new HTMLTextRenderData());\n\n    const { domElement, styleElement, svgRoot } = htmlTextRenderData;\n\n    domElement.innerHTML = `<style>${style.cssStyle};</style><div style='padding:0'>${text}</div>`;\n\n    domElement.setAttribute('style', 'transform-origin: top left; display: inline-block');\n\n    if (fontStyleCSS)\n    {\n        styleElement.textContent = fontStyleCSS;\n    }\n\n    // Measure the contents using the shadow DOM\n    document.body.appendChild(svgRoot);\n\n    // Use scrollWidth/scrollHeight instead of getBoundingClientRect\n    // This captures the full content size including any overflow\n    // (e.g., when wordWrap is true but long words can't break)\n    let contentWidth = domElement.scrollWidth;\n    let contentHeight = domElement.scrollHeight;\n\n    svgRoot.remove();\n\n    // Account for drop shadow which extends beyond the layout bounds\n    // text-shadow is a visual effect not captured by scrollWidth/scrollHeight\n    if (style.dropShadow)\n    {\n        const { distance, angle, blur } = style.dropShadow;\n        const shadowOffsetX = Math.abs(Math.round(Math.cos(angle) * distance));\n        const shadowOffsetY = Math.abs(Math.round(Math.sin(angle) * distance));\n\n        contentWidth += shadowOffsetX + blur;\n        contentHeight += shadowOffsetY + blur;\n    }\n\n    // padding is included in the scroll dimensions, so we need to remove it here\n    const doublePadding = style.padding * 2;\n\n    return {\n        width: contentWidth - doublePadding,\n        height: contentHeight - doublePadding,\n    };\n}\n", "import { type Texture } from '../../rendering/renderers/shared/texture/Texture';\nimport { BatchableSprite } from '../sprite/BatchableSprite';\n\n/**\n * The BatchableHTMLText class extends the BatchableSprite class and is used to handle HTML text rendering.\n * It includes a promise for the texture as generating the HTML texture takes some time.\n * @internal\n */\nexport class BatchableHTMLText extends BatchableSprite\n{\n    public texturePromise: Promise<Texture>;\n    public generatingTexture = false;\n    public currentKey: string = '--';\n\n    /** Destroys the BatchableHTMLText instance. Returns the texture promise to the renderer and cleans up references. */\n    public destroy()\n    {\n        this.texturePromise = null;\n        this.generatingTexture = false;\n        this.currentKey = '--';\n        super.destroy();\n    }\n}\n", "import { ExtensionType } from '../../extensions/Extensions';\nimport { Texture } from '../../rendering/renderers/shared/texture/Texture';\nimport { GCManagedHash } from '../../utils/data/GCManagedHash';\nimport { updateTextBounds } from '../text/utils/updateTextBounds';\nimport { BatchableHTMLText } from './BatchableHTMLText';\n\nimport type { InstructionSet } from '../../rendering/renderers/shared/instructions/InstructionSet';\nimport type { RenderPipe } from '../../rendering/renderers/shared/instructions/RenderPipe';\nimport type { Renderer } from '../../rendering/renderers/types';\nimport type { HTMLText } from './HTMLText';\n\n/**\n * The HTMLTextPipe class is responsible for rendering HTML text.\n * @internal\n */\nexport class HTMLTextPipe implements RenderPipe<HTMLText>\n{\n    /** @ignore */\n    public static extension = {\n        type: [\n            ExtensionType.WebGLPipes,\n            ExtensionType.WebGPUPipes,\n            ExtensionType.CanvasPipes,\n        ],\n        name: 'htmlText',\n    } as const;\n\n    private _renderer: Renderer;\n    private readonly _managedTexts: GCManagedHash<HTMLText>;\n\n    constructor(renderer: Renderer)\n    {\n        this._renderer = renderer;\n        renderer.runners.resolutionChange.add(this);\n        this._managedTexts = new GCManagedHash({\n            renderer,\n            type: 'renderable',\n            onUnload: this.onTextUnload.bind(this),\n            name: 'htmlText'\n        });\n    }\n\n    protected resolutionChange()\n    {\n        for (const key in this._managedTexts.items)\n        {\n            const text = this._managedTexts.items[key];\n\n            if (text?._autoResolution)\n            {\n                text.onViewUpdate();\n            }\n        }\n    }\n\n    public validateRenderable(htmlText: HTMLText): boolean\n    {\n        const gpuText = this._getGpuText(htmlText);\n\n        const newKey = htmlText.styleKey;\n\n        if (gpuText.currentKey !== newKey)\n        {\n            return true;\n        }\n\n        return false;\n    }\n\n    public addRenderable(htmlText: HTMLText, instructionSet: InstructionSet)\n    {\n        const batchableHTMLText = this._getGpuText(htmlText);\n\n        if (htmlText._didTextUpdate)\n        {\n            const resolution = htmlText._autoResolution ? this._renderer.resolution : htmlText.resolution;\n\n            if (batchableHTMLText.currentKey !== htmlText.styleKey || htmlText.resolution !== resolution)\n            {\n                // If the text has changed, we need to update the GPU text\n                this._updateGpuText(htmlText).catch((e) =>\n                {\n                    console.error(e);\n                });\n            }\n\n            htmlText._didTextUpdate = false;\n\n            updateTextBounds(batchableHTMLText, htmlText);\n        }\n\n        this._renderer.renderPipes.batch.addToBatch(batchableHTMLText, instructionSet);\n    }\n\n    public updateRenderable(htmlText: HTMLText)\n    {\n        const batchableHTMLText = this._getGpuText(htmlText);\n\n        batchableHTMLText._batcher.updateElement(batchableHTMLText);\n    }\n\n    private async _updateGpuText(htmlText: HTMLText)\n    {\n        htmlText._didTextUpdate = false;\n        const batchableHTMLText = this._getGpuText(htmlText);\n\n        if (batchableHTMLText.generatingTexture) return;\n\n        // We need to preserve the current texture and don't release it until the new texture is generated.\n        // It's necessary to ensure that the texture won't be captured by another field and overwritten with their\n        // content, while our texture is still in progress.\n        const oldTexturePromise = batchableHTMLText.texturePromise;\n\n        batchableHTMLText.texturePromise = null;\n\n        batchableHTMLText.generatingTexture = true;\n\n        htmlText._resolution = htmlText._autoResolution ? this._renderer.resolution : htmlText.resolution;\n\n        let texturePromise = this._renderer.htmlText.getTexturePromise(htmlText);\n\n        if (oldTexturePromise)\n        {\n            // Release old texture after new one is generated.\n            texturePromise = texturePromise.finally(() =>\n            {\n                this._renderer.htmlText.decreaseReferenceCount(batchableHTMLText.currentKey);\n                this._renderer.htmlText.returnTexturePromise(oldTexturePromise);\n            });\n        }\n\n        batchableHTMLText.texturePromise = texturePromise;\n        batchableHTMLText.currentKey = htmlText.styleKey;\n\n        batchableHTMLText.texture = await texturePromise;\n\n        // need a rerender...\n        const renderGroup = htmlText.renderGroup || htmlText.parentRenderGroup;\n\n        if (renderGroup)\n        {\n            // need a rebuild of the render group\n            renderGroup.structureDidChange = true;\n        }\n\n        batchableHTMLText.generatingTexture = false;\n\n        updateTextBounds(batchableHTMLText, htmlText);\n    }\n\n    private _getGpuText(htmlText: HTMLText)\n    {\n        return htmlText._gpuData[this._renderer.uid] || this.initGpuText(htmlText);\n    }\n\n    public initGpuText(htmlText: HTMLText)\n    {\n        const batchableHTMLText = new BatchableHTMLText();\n\n        batchableHTMLText.renderable = htmlText;\n        batchableHTMLText.transform = htmlText.groupTransform;\n        batchableHTMLText.texture = Texture.EMPTY;\n        batchableHTMLText.bounds = { minX: 0, maxX: 1, minY: 0, maxY: 0 };\n        batchableHTMLText.roundPixels = (this._renderer._roundPixels | htmlText._roundPixels) as 0 | 1;\n\n        htmlText._resolution = htmlText._autoResolution ? this._renderer.resolution : htmlText.resolution;\n        htmlText._gpuData[this._renderer.uid] = batchableHTMLText;\n\n        this._managedTexts.add(htmlText);\n\n        return batchableHTMLText;\n    }\n\n    protected onTextUnload(text: HTMLText)\n    {\n        const gpuData = text._gpuData[this._renderer.uid];\n\n        if (!gpuData) return;\n\n        const { htmlText } = this._renderer;\n\n        htmlText.getReferenceCount(gpuData.currentKey) === null\n            ? htmlText.returnTexturePromise(gpuData.texturePromise)\n            : htmlText.decreaseReferenceCount(gpuData.currentKey);\n    }\n\n    public destroy()\n    {\n        this._managedTexts.destroy();\n        this._renderer = null;\n    }\n}\n\n", "import type { HTMLTextStyle } from '../HTMLTextStyle';\n\n/**\n * Extracts font families from text. It will extract font families from the style, tagStyles and any font families\n * embedded in the text. It should also strip out duplicates as it goes.\n * @param  text - The text to extract font families from\n * @param style - The style to extract font families from\n * @returns {string[]} - The font families as an array of strings\n * @internal\n */\nexport function extractFontFamilies(text: string, style: HTMLTextStyle): string[]\n{\n    const fontFamily = style.fontFamily;\n    const fontFamilies: string[] = [];\n    const dedupe: Record<string, boolean> = {};\n\n    // first ensure fonts are loaded inline..\n    // find any font..\n    const regex = /font-family:([^;\"\\s]+)/g;\n\n    const matches = text.match(regex);\n\n    function addFontFamily(fontFamily: string)\n    {\n        if (!dedupe[fontFamily])\n        {\n            fontFamilies.push(fontFamily);\n\n            dedupe[fontFamily] = true;\n        }\n    }\n\n    if (Array.isArray(fontFamily))\n    {\n        for (let i = 0; i < fontFamily.length; i++)\n        {\n            addFontFamily(fontFamily[i]);\n        }\n    }\n    else\n    {\n        addFontFamily(fontFamily);\n    }\n\n    if (matches)\n    {\n        matches.forEach((match) =>\n        {\n            const fontFamily = match.split(':')[1].trim();\n\n            addFontFamily(fontFamily);\n        });\n    }\n\n    for (const i in style.tagStyles)\n    {\n        const fontFamily = style.tagStyles[i].fontFamily;\n\n        addFontFamily(fontFamily as string);\n    }\n\n    return fontFamilies;\n}\n", "import { DOMAdapter } from '../../../environment/adapter';\n\n/**\n * Resolves a font url to a base64 string\n * @param url - The url to load the font from\n * @returns - The font as a base64 string\n * @internal\n */\nexport async function loadFontAsBase64(url: string): Promise<string>\n{\n    const response = await DOMAdapter.get().fetch(url);\n\n    const blob = await response.blob();\n\n    const reader = new FileReader();\n\n    const dataSrc: string = await new Promise((resolve, reject) =>\n    {\n        reader.onloadend = () => resolve(reader.result as string);\n        reader.onerror = reject;\n        reader.readAsDataURL(blob);\n    });\n\n    return dataSrc;\n}\n", "import { loadFontAsBase64 } from './loadFontAsBase64';\n\n/**\n * Options for the font CSS style\n * @category text\n * @internal\n */\nexport interface FontCSSStyleOptions\n{\n    /**\n     * The font family to use in the CSS\n     * @example\n     * 'Arial' or ['Arial', 'Helvetica']\n     */\n    fontFamily: string | string[]\n    /**\n     * The font weight to use in the CSS\n     * @example\n     * 'normal', 'bold', '100', '200', etc.\n     */\n    fontWeight: string\n    /**\n     * The font style to use in the CSS\n     * @example\n     * 'normal', 'italic', 'oblique'\n     */\n    fontStyle: string\n}\n\n/**\n * This will take a font url and a style and return a css string that can be injected into a style tag\n * This will contain inlined base64 font and the font family information\n * @param style - the style to generate the css for\n * @param url - The url to load the font from\n * @returns - The css string\n * @internal\n */\nexport async function loadFontCSS(style: FontCSSStyleOptions, url: string): Promise<string>\n{\n    const dataSrc = await loadFontAsBase64(url);\n\n    return `@font-face {\n        font-family: \"${style.fontFamily}\";\n        font-weight: ${style.fontWeight};\n        font-style: ${style.fontStyle};\n        src: url('${dataSrc}');\n    }`;\n}\n", "import { Cache } from '../../../assets/cache/Cache';\nimport { type FontFaceCache } from '../../../assets/loader/parsers/loadWebFont';\nimport { loadFontCSS } from './loadFontCSS';\n\n/** @internal */\nexport const FontStylePromiseCache = new Map<string, Promise<string>>();\n\n/**\n * takes the font families and returns a css string that can be injected into a style tag\n * It will contain the font families and the font urls encoded as base64\n * @param fontFamilies - The font families to load\n * @returns - The css string\n * @internal\n */\nexport async function getFontCss(\n    fontFamilies: string[],\n)\n{\n    const fontPromises = fontFamilies\n        .filter((fontFamily) => Cache.has(`${fontFamily}-and-url`))\n        .map((fontFamily) =>\n        {\n            if (!FontStylePromiseCache.has(fontFamily))\n            {\n                const { entries } = Cache.get<FontFaceCache>(`${fontFamily}-and-url`);\n                const promises: Promise<string>[] = [];\n\n                entries.forEach((entry) =>\n                {\n                    const url = entry.url;\n                    const faces = entry.faces;\n\n                    const out = faces.map((face) => ({ weight: face.weight, style: face.style }));\n\n                    // load each out font with the correct style\n                    promises.push(\n                        ...out.map((style) =>\n                            loadFontCSS(\n                                {\n                                    fontWeight: style.weight,\n                                    fontStyle: style.style,\n                                    fontFamily,\n                                },\n                                url,\n                            ),\n                        ),\n                    );\n                });\n                FontStylePromiseCache.set(\n                    fontFamily,\n                    Promise.all(promises).then((css) => css.join('\\n')),\n                );\n            }\n\n            return FontStylePromiseCache.get(fontFamily);\n        });\n\n    return (await Promise.all(fontPromises)).join('\\n');\n}\n", "import type { HTMLTextRenderData } from '../HTMLTextRenderData';\nimport type { HTMLTextStyle } from '../HTMLTextStyle';\n\n/**\n * takes all the data and returns a svg url string can be loaded by an image element\n * @param text - The text to measure\n * @param style - The style to use\n * @param resolution - The resolution to use\n * @param fontCSS - The font css to use\n * @param htmlTextData - The HTMLTextRenderData to write the SVG to\n * @returns - The SVG as a url string\n * @internal\n */\nexport function getSVGUrl(\n    text: string,\n    style: HTMLTextStyle,\n    resolution: number,\n    fontCSS: string,\n    htmlTextData: HTMLTextRenderData\n)\n{\n    const { domElement, styleElement, svgRoot } = htmlTextData;\n\n    domElement.innerHTML = `<style>${style.cssStyle}</style><div style='padding:0;'>${text}</div>`;\n    domElement.setAttribute('style', `transform: scale(${resolution});transform-origin: top left; display: inline-block`);\n    styleElement.textContent = fontCSS;\n\n    const { width, height } = htmlTextData.image;\n\n    svgRoot.setAttribute('width', width.toString());\n    svgRoot.setAttribute('height', height.toString());\n\n    return new XMLSerializer().serializeToString(svgRoot);\n}\n", "import { type ImageLike } from '../../../environment/ImageLike';\nimport { CanvasPool } from '../../../rendering/renderers/shared/texture/CanvasPool';\n\nimport type { CanvasAndContext } from '../../../rendering/renderers/shared/texture/CanvasPool';\n\n/**\n * This function converts an image to a canvas, and returns the canvas.\n * It is used to convert images to canvases to work around a CORS issue where WebGPU cannot\n * upload an SVGImage to a texture.\n *\n * It uses the CanvasPool to get an optimal canvas and context, and then draws the image onto it.\n * Remember to return this canvas is immediately to the CanvasPool for reuse when you are done with it.\n * (eg upload it to the GPU!)\n * @param image - The image to convert to a canvas.\n * @param resolution - The resolution of the canvas.\n * @internal\n */\nexport function getTemporaryCanvasFromImage(image: ImageLike, resolution: number): CanvasAndContext\n{\n    // Get an optimal canvas and context from the CanvasPool, based on the\n    // dimensions of the image and the desired resolution.\n    const canvasAndContext = CanvasPool.getOptimalCanvasAndContext(\n        image.width,\n        image.height,\n        resolution\n    );\n\n    // Clear the context of the canvas, and draw the image onto it.\n    const { context } = canvasAndContext;\n\n    context.clearRect(0, 0, image.width, image.height);\n    context.drawImage(image, 0, 0);\n\n    // Return the canvas.\n    return canvasAndContext;\n}\n\n", "import { type ImageLike } from '../../../environment/ImageLike';\n\n/**\n * This function loads an SVG image into an IImage element.\n * The image can then be uploaded as texture to the GPU.\n * iOS has a bug where embedded fonts are not available immediately after the image loads,\n * so we wait an arbitrary amount of time before resolving the promise.\n * @param image - The image to load the SVG into\n * @param url - The url to load the SVG from\n * @param delay - Whether to delay the load\n * @returns - A promise that resolves when the image has loaded\n * @internal\n */\nexport function loadSVGImage(image: ImageLike, url: string, delay: boolean)\n{\n    return new Promise<void>(async (resolve) =>\n    {\n        // Safari has a known bug where embedded fonts are not available\n        // immediately after the image loads, to compensate we wait an\n        // arbitrary amount of time\n        // @see https://bugs.webkit.org/show_bug.cgi?id=219770\n        if (delay)\n        {\n            await new Promise<void>((resolve) => setTimeout(resolve, 100));\n        }\n\n        image.onload = () =>\n        {\n            resolve();\n        };\n\n        image.src = `data:image/svg+xml;charset=utf8,${encodeURIComponent(url)}`;\n        image.crossOrigin = 'anonymous';\n    });\n}\n", "import { type ImageLike } from '../../environment/ImageLike';\nimport { ExtensionType } from '../../extensions/Extensions';\nimport { type CanvasAndContext, CanvasPool } from '../../rendering/renderers/shared/texture/CanvasPool';\nimport { TexturePool } from '../../rendering/renderers/shared/texture/TexturePool';\nimport { type TextureStyle } from '../../rendering/renderers/shared/texture/TextureStyle';\nimport { type Renderer, RendererType } from '../../rendering/renderers/types';\nimport { isSafari } from '../../utils/browser/isSafari';\nimport { warn } from '../../utils/logging/warn';\nimport { BigPool } from '../../utils/pool/PoolGroup';\nimport { getPo2TextureFromSource } from '../text/utils/getPo2TextureFromSource';\nimport { HTMLTextRenderData } from './HTMLTextRenderData';\nimport { type HTMLTextStyle } from './HTMLTextStyle';\nimport { extractFontFamilies } from './utils/extractFontFamilies';\nimport { getFontCss } from './utils/getFontCss';\nimport { getSVGUrl } from './utils/getSVGUrl';\nimport { getTemporaryCanvasFromImage } from './utils/getTemporaryCanvasFromImage';\nimport { loadSVGImage } from './utils/loadSVGImage';\nimport { measureHtmlText } from './utils/measureHtmlText';\n\nimport type { System } from '../../rendering/renderers/shared/system/System';\nimport type { Texture } from '../../rendering/renderers/shared/texture/Texture';\nimport type { PoolItem } from '../../utils/pool/Pool';\nimport type { HTMLText, HTMLTextOptions } from './HTMLText';\n\n/**\n * System plugin to the renderer to manage HTMLText\n * @category rendering\n * @advanced\n */\nexport class HTMLTextSystem implements System\n{\n    /** @ignore */\n    public static extension = {\n        type: [\n            ExtensionType.WebGLSystem,\n            ExtensionType.WebGPUSystem,\n            ExtensionType.CanvasSystem,\n        ],\n        name: 'htmlText',\n    } as const;\n\n    /**\n     * WebGPU has a cors issue when uploading an image that is an SVGImage\n     * To get around this we need to create a canvas draw the image to it and upload that instead.\n     * Bit of a shame.. but no other work around just yet!\n     */\n    private readonly _createCanvas: boolean;\n    private readonly _renderer: Renderer;\n\n    private readonly _activeTextures: Record<string, {\n        texture: Texture,\n        usageCount: number,\n        promise: Promise<Texture>,\n    }> = {};\n\n    constructor(renderer: Renderer)\n    {\n        this._renderer = renderer;\n        this._createCanvas = renderer.type === RendererType.WEBGPU;\n    }\n\n    /**\n     * @param options\n     * @deprecated Use getTexturePromise instead\n     */\n    public getTexture(options: HTMLTextOptions): Promise<Texture>\n    {\n        return this.getTexturePromise(options);\n    }\n\n    /**\n     * Increases the reference count for a texture.\n     * @param text - The HTMLText instance associated with the texture.\n     */\n    public getManagedTexture(text: HTMLText): Promise<Texture>\n    {\n        const textKey = text.styleKey;\n\n        if (this._activeTextures[textKey])\n        {\n            this._increaseReferenceCount(textKey);\n\n            return this._activeTextures[textKey].promise;\n        }\n\n        const promise = this._buildTexturePromise(text)\n            .then((texture) =>\n            {\n                this._activeTextures[textKey].texture = texture;\n\n                return texture;\n            });\n\n        this._activeTextures[textKey] = {\n            texture: null,\n            promise,\n            usageCount: 1,\n        };\n\n        return promise;\n    }\n\n    /**\n     * Gets the current reference count for a texture associated with a text key.\n     * @param textKey - The unique key identifying the text style configuration\n     * @returns The number of Text instances currently using this texture\n     */\n    public getReferenceCount(textKey: string)\n    {\n        return this._activeTextures[textKey]?.usageCount ?? null;\n    }\n\n    private _increaseReferenceCount(textKey: string)\n    {\n        this._activeTextures[textKey].usageCount++;\n    }\n\n    /**\n     * Decreases the reference count for a texture.\n     * If the count reaches zero, the texture is cleaned up.\n     * @param textKey - The key associated with the HTMLText instance.\n     */\n    public decreaseReferenceCount(textKey: string)\n    {\n        const activeTexture = this._activeTextures[textKey];\n\n        if (!activeTexture) return;\n\n        activeTexture.usageCount--;\n\n        if (activeTexture.usageCount === 0)\n        {\n            if (activeTexture.texture)\n            {\n                this._cleanUp(activeTexture.texture);\n            }\n            else\n            {\n                // we did not resolve...\n                activeTexture.promise.then((texture) =>\n                {\n                    activeTexture.texture = texture;\n\n                    this._cleanUp(activeTexture.texture);\n                }).catch(() =>\n                {\n                    // #if _DEBUG\n                    warn('HTMLTextSystem: Failed to clean texture');\n                    // #endif\n                });\n            }\n\n            this._activeTextures[textKey] = null;\n        }\n    }\n\n    /**\n     * Returns a promise that resolves to a texture for the given HTMLText options.\n     * @param options - The options for the HTMLText.\n     * @returns A promise that resolves to a Texture.\n     */\n    public getTexturePromise(options: HTMLTextOptions): Promise<Texture>\n    {\n        return this._buildTexturePromise(options);\n    }\n\n    private async _buildTexturePromise(options: HTMLTextOptions)\n    {\n        const { text, style, resolution, textureStyle } = options as {\n            text: string,\n            style: HTMLTextStyle,\n            resolution: number,\n            textureStyle?: TextureStyle,\n        };\n\n        const htmlTextData = BigPool.get(HTMLTextRenderData);\n        const fontFamilies = extractFontFamilies(text, style);\n        const fontCSS = await getFontCss(fontFamilies);\n        const measured = measureHtmlText(text, style, fontCSS, htmlTextData);\n\n        const width = Math.ceil(Math.ceil((Math.max(1, measured.width) + (style.padding * 2))) * resolution);\n        const height = Math.ceil(Math.ceil((Math.max(1, measured.height) + (style.padding * 2))) * resolution);\n\n        const image = htmlTextData.image;\n\n        // this off set will ensure we don't get any UV bleeding!\n        const uvSafeOffset = 2;\n\n        image.width = (width | 0) + uvSafeOffset;\n        image.height = (height | 0) + uvSafeOffset;\n\n        const svgURL = getSVGUrl(text, style, resolution, fontCSS, htmlTextData);\n\n        await loadSVGImage(image, svgURL, isSafari() && fontFamilies.length > 0);\n\n        const resource: ImageLike | HTMLCanvasElement = image;\n        let canvasAndContext: CanvasAndContext;\n\n        if (this._createCanvas)\n        {\n            // silly webGPU workaround..\n            canvasAndContext = getTemporaryCanvasFromImage(image, resolution);\n        }\n\n        const texture = getPo2TextureFromSource(canvasAndContext ? canvasAndContext.canvas : resource,\n            image.width - uvSafeOffset,\n            image.height - uvSafeOffset,\n            resolution\n        );\n\n        if (textureStyle) texture.source.style = textureStyle;\n\n        if (this._createCanvas)\n        {\n            this._renderer.texture.initSource(texture.source);\n            CanvasPool.returnCanvasAndContext(canvasAndContext);\n        }\n\n        BigPool.return(htmlTextData as PoolItem);\n\n        return texture;\n    }\n\n    public returnTexturePromise(texturePromise: Promise<Texture>)\n    {\n        texturePromise.then((texture) =>\n        {\n            this._cleanUp(texture);\n        }).catch(() =>\n        {\n            // #if _DEBUG\n            warn('HTMLTextSystem: Failed to clean texture');\n            // #endif\n        });\n    }\n\n    private _cleanUp(texture: Texture)\n    {\n        TexturePool.returnTexture(texture, true);\n        texture.source.resource = null;\n        texture.source.uploadMethodId = 'unknown';\n    }\n\n    public destroy()\n    {\n        // BOOM!\n        (this._renderer as null) = null;\n        for (const key in this._activeTextures)\n        {\n            if (this._activeTextures[key]) this.returnTexturePromise(this._activeTextures[key].promise);\n        }\n        (this._activeTextures as null) = null;\n    }\n}\n", "import { extensions } from '../../extensions/Extensions';\nimport { HTMLTextPipe } from './HTMLTextPipe';\nimport { HTMLTextSystem } from './HTMLTextSystem';\n\nextensions.add(HTMLTextSystem);\nextensions.add(HTMLTextPipe);\n", "import { TextureStyle, type TextureStyleOptions } from '../../rendering/renderers/shared/texture/TextureStyle';\nimport { AbstractText, ensureTextOptions } from '../text/AbstractText';\nimport { type BatchableHTMLText } from './BatchableHTMLText';\nimport { HTMLTextStyle } from './HTMLTextStyle';\nimport { measureHtmlText } from './utils/measureHtmlText';\nimport './init';\n\nimport type { View } from '../../rendering/renderers/shared/view/View';\nimport type { TextOptions, TextString } from '../text/AbstractText';\nimport type { HTMLTextStyleOptions } from './HTMLTextStyle';\n\n/**\n * Constructor options used for `HTMLText` instances. Extends the base text options\n * with HTML-specific features and texture styling capabilities.\n * @example\n * ```ts\n * // Basic HTML text\n * const basicText = new HTMLText({\n *     text: '<b>Bold</b> and <i>Italic</i> text',\n *     style: {\n *         fontSize: 24,\n *         fill: 0xff1010\n *     }\n * });\n *\n * // Rich HTML text with styling\n * const richText = new HTMLText({\n *     text: '<custom>Custom Tag</custom>',\n *     style: {\n *         fontFamily: 'Arial',\n *         fontSize: 32,\n *         fill: 0x4a4a4a,\n *         align: 'center',\n *         tagStyles: {\n *             custom: {\n *                 fontSize: 32,\n *                 fill: '#00ff00',\n *                 fontStyle: 'italic'\n *             }\n *         }\n *     }\n *     textureStyle: {\n *         scaleMode: 'linear',\n *     }\n * });\n * ```\n * @category text\n * @standard\n */\nexport interface HTMLTextOptions extends TextOptions<HTMLTextStyle, HTMLTextStyleOptions>, PixiMixins.HTMLTextOptions\n{\n    /**\n     * Optional texture style to use for the text texture. This allows fine control over\n     * how the text is rendered to a texture before being displayed.\n     *\n     * The texture style can affect:\n     * - Scale mode (nearest/linear)\n     * - Resolution\n     * - Format (rgb/rgba)\n     * - Alpha handling\n     * @example\n     * ```ts\n     * const text = new HTMLText({\n     *     text: 'Crisp Text',\n     *     textureStyle: {\n     *         scaleMode: 'nearest', // Pixel-perfect scaling\n     *     }\n     * });\n     * ```\n     * @advanced\n     */\n    textureStyle?: TextureStyle | TextureStyleOptions;\n}\n\n// eslint-disable-next-line requireExport/require-export-jsdoc, requireMemberAPI/require-member-api-doc\nexport interface HTMLText extends PixiMixins.HTMLText, AbstractText<\n    HTMLTextStyle,\n    HTMLTextStyleOptions,\n    HTMLTextOptions,\n    BatchableHTMLText\n> {}\n\n/**\n * A HTMLText object creates text using HTML/CSS rendering with SVG foreignObject.\n * This allows for rich text formatting using standard HTML tags and CSS styling.\n *\n * Key features:\n * - HTML tag support (&lt;strong&gt;, &lt;em&gt;, etc.)\n * - CSS styling and custom style overrides\n * - Emoji and special character support\n * - Line breaking and word wrapping\n * - SVG-based rendering\n * @example\n * ```ts\n * import { HTMLText } from 'pixi.js';\n *\n * // Basic HTML text with tags\n * const text = new HTMLText({\n *     text: '<h1>Title</h1><p>This is a <strong>bold</strong> and <em>italic</em> text.</p>',\n *     style: {\n *         fontFamily: 'Arial',\n *         fontSize: 24,\n *         fill: 0xff1010,\n *         align: 'center',\n *     }\n * });\n *\n * // Rich HTML text with custom styling\n * const richText = new HTMLText({\n *     text: `\n *         <div class=\"title\">Welcome</div>\n *         <div class=\"content\">\n *             This text supports:\n *             <ul>\n *                 <li> Emojis</li>\n *                 <li> Custom CSS</li>\n *                 <li> Auto-sizing</li>\n *             </ul>\n *         </div>\n *     `,\n *     style: {\n *         fontSize: 24,\n *         fill: '#334455',\n *         cssOverrides: [\n *             '.title { font-size: 32px; color: red; }',\n *             '.content { line-height: 1.5; }'\n *         ],\n *         wordWrap: true,\n *         wordWrapWidth: 300,\n *     }\n * });\n *\n * // Text with custom texture settings\n * const crispText = new HTMLText({\n *     text: '<div style=\"padding: 10px\">High Quality Text</div>',\n *     style: {\n *         fontSize: 24,\n *         fill: '#4a4a4a',\n *     },\n *     textureStyle: {\n *         scaleMode: 'nearest',\n *     }\n * });\n * ```\n *\n * Platform Considerations:\n * - Rendering may vary slightly between browsers\n * - Requires browser support for foreignObject\n * - Performance similar to Canvas text\n * - Memory usage comparable to Canvas text\n * @category text\n * @standard\n * @see {@link HTMLTextStyle} For detailed style options\n * @see {@link Text} For canvas-based text rendering\n * @see {@link BitmapText} For high-performance static text\n */\nexport class HTMLText extends AbstractText<\n    HTMLTextStyle,\n    HTMLTextStyleOptions,\n    HTMLTextOptions,\n    BatchableHTMLText\n> implements View\n{\n    /** @internal */\n    public override readonly renderPipeId: string = 'htmlText';\n\n    /**\n     * Optional texture style to use for the text.\n     * > [!NOTE] HTMLText is not updated when this property is updated,\n     * > you must update the text manually by calling `text.onViewUpdate()`\n     * @advanced\n     */\n    public textureStyle?: TextureStyle;\n\n    /**\n     * @param {HTMLTextOptions} options - The options of the html text.\n     */\n    constructor(options?: HTMLTextOptions);\n    /** @deprecated since 8.0.0 */\n    constructor(text?: TextString, options?: Partial<HTMLTextStyle>);\n    constructor(...args: [HTMLTextOptions?] | [TextString, Partial<HTMLTextStyle>])\n    {\n        const options = ensureTextOptions<HTMLTextOptions>(args, 'HtmlText');\n\n        super(options, HTMLTextStyle);\n\n        if (options.textureStyle)\n        {\n            this.textureStyle = options.textureStyle instanceof TextureStyle\n                ? options.textureStyle\n                : new TextureStyle(options.textureStyle);\n        }\n    }\n\n    /** @private */\n    protected updateBounds()\n    {\n        const bounds = this._bounds;\n        const anchor = this._anchor;\n\n        const htmlMeasurement = measureHtmlText(this.text, this._style as HTMLTextStyle);\n\n        const { width, height } = htmlMeasurement;\n\n        bounds.minX = (-anchor._x * width);\n        bounds.maxX = bounds.minX + width;\n        bounds.minY = (-anchor._y * height);\n        bounds.maxY = bounds.minY + height;\n    }\n\n    override get text(): string\n    {\n        return this._text;\n    }\n    /**\n     * The text content to display. Use '\\n' for line breaks.\n     * Accepts strings, numbers, or objects with toString() method.\n     * @example\n     * ```ts\n     * const text = new HTMLText({\n     *     text: 'Hello Pixi!',\n     * });\n     * const multilineText = new HTMLText({\n     *     text: 'Line 1\\nLine 2\\nLine 3',\n     * });\n     * const numberText = new HTMLText({\n     *     text: 12345, // Will be converted to '12345'\n     * });\n     * const objectText = new HTMLText({\n     *     text: { toString: () => 'Object Text' }, // Custom toString\n     * });\n     *\n     * // Update text dynamically\n     * text.text = 'Updated Text'; // Re-renders with new text\n     * text.text = 67890; // Updates to '67890'\n     * text.text = { toString: () => 'Dynamic Text' }; // Uses custom toString method\n     * // Clear text\n     * text.text = ''; // Clears the text\n     * ```\n     * @default ''\n     */\n    override set text(text: TextString)\n    {\n        // Sanitise the text to ensure it is valid HTML\n        const sanitisedText = this._sanitiseText(text.toString());\n\n        // Call the parent class's text setter with the sanitised text\n        super.text = sanitisedText;\n    }\n\n    /**\n     * Sanitise text - replace `<br>` with `<br/>`, `&nbsp;` with `&#160;`\n     * @param text\n     * @see https://www.sitepoint.com/community/t/xhtml-1-0-transitional-xml-parsing-error-entity-nbsp-not-defined/3392/3\n     */\n    private _sanitiseText(text: string): string\n    {\n        return this._removeInvalidHtmlTags(text\n            .replace(/<br>/gi, '<br/>')\n            .replace(/<hr>/gi, '<hr/>')\n            .replace(/&nbsp;/gi, '&#160;'));\n    }\n\n    private _removeInvalidHtmlTags(input: string): string\n    {\n        // This regex finds \"<\" followed by anything except \">\" until the next \"<\" or end-of-string\n        // i.e., it finds broken tags like \"<br\" or \"<div id='x'\" that never close\n        const brokenTagPattern = /<[^>]*?(?=<|$)/g;\n\n        return input.replace(brokenTagPattern, '');\n    }\n}\n", "import { TextureSource } from '../rendering/renderers/shared/texture/sources/TextureSource';\nimport { GraphicsContext } from '../scene/graphics/shared/GraphicsContext';\nimport { Text } from '../scene/text/Text';\nimport { BitmapText } from '../scene/text-bitmap/BitmapText';\nimport { HTMLText } from '../scene/text-html/HTMLText';\nimport { PrepareQueue } from './PrepareQueue';\n\nimport type { FillInstruction, TextureInstruction } from '../scene/graphics/shared/GraphicsContext';\nimport type { PrepareQueueItem } from './PrepareBase';\n\n/**\n * @advanced\n * Part of the prepare system. Responsible for uploading all the items to the GPU.\n * This class extends the resolver functionality and uploads the given queue items.\n * @category rendering\n */\nexport abstract class PrepareUpload extends PrepareQueue\n{\n    /**\n     * Upload the given queue item\n     * @param item\n     */\n    protected uploadQueueItem(item: PrepareQueueItem): void\n    {\n        if (item instanceof TextureSource)\n        {\n            this.uploadTextureSource(item);\n        }\n        else if (item instanceof Text)\n        {\n            this.uploadText(item);\n        }\n        else if (item instanceof HTMLText)\n        {\n            this.uploadHTMLText(item);\n        }\n        else if (item instanceof BitmapText)\n        {\n            this.uploadBitmapText(item);\n        }\n        else if (item instanceof GraphicsContext)\n        {\n            this.uploadGraphicsContext(item);\n        }\n    }\n\n    protected uploadTextureSource(textureSource: TextureSource): void\n    {\n        this.renderer.texture.initSource(textureSource);\n    }\n\n    protected uploadText(_text: Text): void\n    {\n        this.renderer.renderPipes.text.initGpuText(_text);\n    }\n\n    protected uploadBitmapText(_text: BitmapText): void\n    {\n        this.renderer.renderPipes.bitmapText.initGpuText(_text);\n    }\n\n    protected uploadHTMLText(_text: HTMLText): void\n    {\n        this.renderer.renderPipes.htmlText.initGpuText(_text);\n    }\n\n    /**\n     * Resolve the given graphics context and return an item for the queue\n     * @param graphicsContext\n     */\n    protected uploadGraphicsContext(graphicsContext: GraphicsContext): void\n    {\n        this.renderer.graphicsContext.getGpuContext(graphicsContext);\n\n        const { instructions } = graphicsContext;\n\n        for (const instruction of instructions)\n        {\n            if (instruction.action === 'texture')\n            {\n                const { image } = (instruction as TextureInstruction).data;\n\n                this.uploadTextureSource(image.source);\n            }\n            else if (instruction.action === 'fill')\n            {\n                const { texture } = (instruction as FillInstruction).data.style;\n\n                this.uploadTextureSource(texture.source);\n            }\n        }\n\n        return null;\n    }\n}\n", "import { ExtensionType } from '../extensions/Extensions';\nimport { PrepareUpload } from './PrepareUpload';\n\nimport type { System } from '../rendering/renderers/shared/system/System';\n\n/**\n * The prepare system provides renderer-specific plugins for pre-rendering DisplayObjects. This is useful for\n * asynchronously preparing and uploading to the GPU assets, textures, graphics waiting to be displayed.\n *\n * Do not instantiate this plugin directly. It is available from the `renderer.prepare` property.\n * @example\n * import 'pixi.js/prepare';\n * import { Application, Graphics } from 'pixi.js';\n *\n * // Create a new application (prepare will be auto-added to renderer)\n * const app = new Application();\n * await app.init();\n * document.body.appendChild(app.view);\n *\n * // Don't start rendering right away\n * app.stop();\n *\n * // Create a display object\n * const rect = new Graphics()\n *     .beginFill(0x00ff00)\n *     .drawRect(40, 40, 200, 200);\n *\n * // Add to the stage\n * app.stage.addChild(rect);\n *\n * // Don't start rendering until the graphic is uploaded to the GPU\n * app.renderer.prepare.upload(app.stage, () => {\n *     app.start();\n * });\n * @category rendering\n * @advanced\n */\nexport class PrepareSystem extends PrepareUpload implements System\n{\n    /** @ignore */\n    public static extension = {\n        type: [\n            ExtensionType.WebGLSystem,\n            ExtensionType.WebGPUSystem,\n        ],\n        name: 'prepare',\n    } as const;\n\n    /** Destroys the plugin, don't use after this. */\n    public destroy(): void\n    {\n        super.destroy();\n\n        clearTimeout(this.timeout);\n        this.renderer = null;\n        this.queue = null;\n        this.resolves = null;\n    }\n}\n", "/**\n * @param maxTextures\n * @internal\n */\nexport function generateGPULayout(maxTextures: number): GPUBindGroupLayoutEntry[]\n{\n    const gpuLayout: GPUBindGroupLayoutEntry[] = [];\n\n    let bindIndex = 0;\n\n    for (let i = 0; i < maxTextures; i++)\n    {\n        gpuLayout[bindIndex] = {\n            texture: {\n                sampleType: 'float',\n                viewDimension: '2d',\n                multisampled: false,\n            },\n            binding: bindIndex,\n            visibility: GPUShaderStage.FRAGMENT,\n        };\n        bindIndex++;\n\n        gpuLayout[bindIndex] = {\n            sampler: {\n                type: 'filtering',\n            },\n            binding: bindIndex,\n            visibility: GPUShaderStage.FRAGMENT,\n        };\n\n        bindIndex++;\n    }\n\n    return gpuLayout;\n}\n", "/**\n * @param maxTextures\n * @internal\n */\nexport function generateLayout(maxTextures: number): Record<string, number>\n{\n    const layout: Record<string, number> = {};\n\n    let bindIndex = 0;\n\n    for (let i = 0; i < maxTextures; i++)\n    {\n        layout[`textureSource${i + 1}`] = bindIndex++;\n        layout[`textureSampler${i + 1}`] = bindIndex++;\n    }\n\n    return layout;\n}\n", "/**\n * formats a shader so its more pleasant to read\n * @param shader - a glsl shader program source\n * @category utils\n * @advanced\n */\nexport function formatShader(shader: string): string\n{\n    const spl = shader.split(/([\\n{}])/g)\n        .map((a) => a.trim())\n        .filter((a) => a.length);\n\n    let indent = '';\n\n    const formatted = spl.map((a) =>\n    {\n        let indentedLine = indent + a;\n\n        if (a === '{')\n        {\n            indent += '    ';\n        }\n        else if (a === '}')\n        {\n            indent = indent.substr(0, indent.length - 4);\n\n            indentedLine = indent + a;\n        }\n\n        return indentedLine;\n    }).join('\\n');\n\n    return formatted;\n}\n\n", "import { addMaskBounds } from '../utils/addMaskBounds';\nimport { addMaskLocalBounds } from '../utils/addMaskLocalBounds';\n\nimport type { Point } from '../../../maths/point/Point';\nimport type { Bounds } from '../../../scene/container/bounds/Bounds';\nimport type { Container } from '../../../scene/container/Container';\nimport type { Effect } from '../../../scene/container/Effect';\n\n/**\n * ScissorMask is an effect that applies a scissor mask to a container.\n * It restricts rendering to the area defined by the mask.\n * The mask is a Container that defines the area to be rendered.\n * The mask must be a Container that is not renderable or measurable.\n * This effect is used to create clipping regions in the rendering process.\n * @category rendering\n * @advanced\n */\nexport class ScissorMask implements Effect\n{\n    public priority = 0;\n    public mask: Container;\n    public pipe = 'scissorMask';\n\n    constructor(mask: Container)\n    {\n        this.mask = mask;\n\n        this.mask.renderable = false;\n        this.mask.measurable = false;\n    }\n\n    public addBounds(bounds: Bounds, skipUpdateTransform?: boolean): void\n    {\n        addMaskBounds(this.mask, bounds, skipUpdateTransform);\n    }\n\n    public addLocalBounds(bounds: Bounds, localRoot: Container): void\n    {\n        addMaskLocalBounds(this.mask, bounds, localRoot);\n    }\n\n    public containsPoint(point: Point, hitTestFn: (container: Container, point: Point) => boolean): boolean\n    {\n        const mask = this.mask as any;\n\n        // if the point is in the mask, yay!\n        return hitTestFn(mask, point);\n    }\n\n    public reset()\n    {\n        if (this.mask === null) return;\n        this.mask.measurable = true;\n        this.mask = null;\n    }\n\n    public destroy(): void\n    {\n        this.reset();\n    }\n}\n", "import { extensions, ExtensionType } from '../../../extensions/Extensions';\nimport { Bounds } from '../../../scene/container/bounds/Bounds';\nimport { getGlobalRenderableBounds } from '../../../scene/container/bounds/getRenderableBounds';\nimport { getPo2TextureFromSource } from '../../../scene/text/utils/getPo2TextureFromSource';\nimport { CanvasPool } from '../shared/texture/CanvasPool';\nimport { canvasUtils } from './utils/canvasUtils';\n\nimport type { ICanvasRenderingContext2D } from '../../../environment/canvas/ICanvasRenderingContext2D';\nimport type { Filter } from '../../../filters/Filter';\nimport type { FilterInstruction } from '../../../filters/FilterSystem';\nimport type { Container } from '../../../scene/container/Container';\nimport type { System } from '../shared/system/System';\nimport type { Texture } from '../shared/texture/Texture';\n\n/**\n * Interface for filters that can supply a CSS filter string for Canvas2D.\n * @category filters\n * @advanced\n */\nexport interface CanvasFilterCapable\n{\n    /** Returns CSS filter string (e.g., 'blur(5px)') or null if not supported */\n    getCanvasFilterString(): string | null;\n}\n\n/**\n * Check if a filter supports Canvas2D rendering.\n * @param filter - The filter to check\n * @returns True if the filter implements getCanvasFilterString()\n * @internal\n */\nexport function isCanvasFilterCapable(filter: Filter): filter is Filter & CanvasFilterCapable\n{\n    return typeof (filter as unknown as CanvasFilterCapable).getCanvasFilterString === 'function';\n}\n\n/**\n * Internal data stored per filter stack entry.\n * @internal\n */\nclass CanvasFilterFrame\n{\n    public skip = false;\n    public useClip = false;\n    public filters: Filter[] = null;\n    public container: Container = null;\n    public bounds = new Bounds();\n    public cssFilterString = '';\n}\n\n/**\n * Canvas2D filter system that applies compatible filters using CSS filter strings.\n * Unsupported filters are skipped with a warn-once message.\n * @category rendering\n * @advanced\n */\nexport class CanvasFilterSystem implements System\n{\n    /** @ignore */\n    public static extension = {\n        type: [ExtensionType.CanvasSystem],\n        name: 'filter',\n    } as const;\n\n    /** The renderer this system is attached to */\n    public readonly renderer: {\n        canvasContext: {\n            activeContext: ICanvasRenderingContext2D;\n            activeResolution: number;\n        };\n    };\n\n    private _filterStack: CanvasFilterFrame[] = [];\n    private _filterStackIndex = 0;\n    private _savedStates: { filter: string; alphaMultiplier: number }[] = [];\n    private _alphaMultiplier = 1;\n    private _warnedFilterTypes = new Set<string>();\n\n    /**\n     * @param renderer - The Canvas renderer\n     * @param renderer.canvasContext\n     * @param renderer.canvasContext.activeContext\n     * @param renderer.canvasContext.activeResolution\n     */\n    constructor(renderer: {\n        canvasContext: {\n            activeContext: ICanvasRenderingContext2D;\n            activeResolution: number;\n        };\n    })\n    {\n        this.renderer = renderer;\n    }\n\n    /**\n     * Push a filter instruction onto the stack.\n     * Called when entering a filtered container.\n     * @param instruction - The filter instruction from FilterPipe\n     */\n    public push(instruction: FilterInstruction): void\n    {\n        const filterFrame = this._pushFilterFrame();\n        const filters = instruction.filterEffect.filters as Filter[];\n\n        filterFrame.skip = false;\n        filterFrame.useClip = false;\n        filterFrame.filters = filters;\n        filterFrame.container = instruction.container;\n        filterFrame.cssFilterString = '';\n\n        if (filters.every((filter) => !filter.enabled))\n        {\n            filterFrame.skip = true;\n\n            return;\n        }\n\n        const cssFilters: string[] = [];\n        const alphaMultiplier = 1;\n\n        for (const filter of filters)\n        {\n            if (!filter.enabled) continue;\n\n            if (!isCanvasFilterCapable(filter))\n            {\n                this._warnUnsupportedFilter(filter);\n\n                continue;\n            }\n\n            const cssString = filter.getCanvasFilterString();\n\n            if (cssString === null)\n            {\n                this._warnUnsupportedFilter(filter);\n\n                continue;\n            }\n\n            if (cssString)\n            {\n                cssFilters.push(cssString);\n            }\n        }\n\n        if (cssFilters.length === 0 && alphaMultiplier === 1)\n        {\n            filterFrame.skip = true;\n\n            return;\n        }\n\n        filterFrame.cssFilterString = cssFilters.join(' ');\n\n        this._calculateFilterArea(instruction, filterFrame.bounds);\n        filterFrame.useClip = !!instruction.filterEffect.filterArea;\n\n        const context = this.renderer.canvasContext.activeContext;\n        const previousFilter = context.filter || 'none';\n\n        this._savedStates.push({ filter: previousFilter, alphaMultiplier: this._alphaMultiplier });\n\n        if (filterFrame.useClip\n            && Number.isFinite(filterFrame.bounds.width)\n            && Number.isFinite(filterFrame.bounds.height)\n            && filterFrame.bounds.width > 0\n            && filterFrame.bounds.height > 0)\n        {\n            const resolution = this.renderer.canvasContext.activeResolution || 1;\n\n            context.save();\n            context.setTransform(1, 0, 0, 1, 0, 0);\n            context.beginPath();\n            context.rect(\n                filterFrame.bounds.x * resolution,\n                filterFrame.bounds.y * resolution,\n                filterFrame.bounds.width * resolution,\n                filterFrame.bounds.height * resolution\n            );\n            context.clip();\n        }\n        else\n        {\n            filterFrame.useClip = false;\n        }\n\n        if (alphaMultiplier !== 1)\n        {\n            this._alphaMultiplier *= alphaMultiplier;\n        }\n\n        if (filterFrame.cssFilterString)\n        {\n            context.filter = previousFilter !== 'none'\n                ? `${previousFilter} ${filterFrame.cssFilterString}`\n                : filterFrame.cssFilterString;\n        }\n    }\n\n    /** Pop a filter from the stack. Called when exiting a filtered container. */\n    public pop(): void\n    {\n        const filterFrame = this._popFilterFrame();\n\n        if (filterFrame.skip)\n        {\n            return;\n        }\n\n        const savedState = this._savedStates.pop();\n\n        if (!savedState)\n        {\n            return;\n        }\n\n        const context = this.renderer.canvasContext.activeContext;\n\n        if (filterFrame.useClip)\n        {\n            context.restore();\n        }\n        else\n        {\n            context.filter = savedState.filter;\n        }\n\n        this._alphaMultiplier = savedState.alphaMultiplier;\n    }\n\n    /**\n     * Applies supported filters to a texture and returns a new texture.\n     * Unsupported filters are skipped with a warn-once message.\n     * @param params - The parameters for applying filters.\n     * @param params.texture\n     * @param params.filters\n     * @returns The resulting texture after filters are applied.\n     */\n    public generateFilteredTexture({ texture, filters }: { texture: Texture; filters: Filter[] }): Texture\n    {\n        if (!filters?.length || filters.every((filter) => !filter.enabled))\n        {\n            return texture;\n        }\n\n        const cssFilters: string[] = [];\n        const alphaMultiplier = 1;\n\n        for (const filter of filters)\n        {\n            if (!filter.enabled) continue;\n\n            if (!isCanvasFilterCapable(filter))\n            {\n                this._warnUnsupportedFilter(filter);\n\n                continue;\n            }\n\n            const cssString = filter.getCanvasFilterString();\n\n            if (cssString === null)\n            {\n                this._warnUnsupportedFilter(filter);\n\n                continue;\n            }\n\n            if (cssString)\n            {\n                cssFilters.push(cssString);\n            }\n        }\n\n        if (cssFilters.length === 0 && alphaMultiplier === 1)\n        {\n            return texture;\n        }\n\n        const source = canvasUtils.getCanvasSource(texture);\n\n        if (!source)\n        {\n            return texture;\n        }\n\n        const frame = texture.frame;\n        const resolution = texture.source._resolution ?? texture.source.resolution ?? 1;\n        const width = frame.width;\n        const height = frame.height;\n\n        const canvasAndContext = CanvasPool.getOptimalCanvasAndContext(width, height, resolution);\n        const { canvas, context } = canvasAndContext;\n\n        context.setTransform(1, 0, 0, 1, 0, 0);\n        context.clearRect(0, 0, canvas.width, canvas.height);\n\n        if (cssFilters.length)\n        {\n            context.filter = cssFilters.join(' ');\n        }\n\n        if (alphaMultiplier !== 1)\n        {\n            context.globalAlpha = alphaMultiplier;\n        }\n\n        const sx = frame.x * resolution;\n        const sy = frame.y * resolution;\n        const sw = width * resolution;\n        const sh = height * resolution;\n\n        context.drawImage(\n            source,\n            sx,\n            sy,\n            sw,\n            sh,\n            0,\n            0,\n            sw,\n            sh\n        );\n\n        context.filter = 'none';\n        context.globalAlpha = 1;\n\n        return getPo2TextureFromSource(canvas, width, height, resolution);\n    }\n\n    /**\n     * Calculate the filter area bounds.\n     * @param instruction - Filter instruction\n     * @param bounds - Bounds object to populate\n     */\n    private _calculateFilterArea(instruction: FilterInstruction, bounds: Bounds): void\n    {\n        if (instruction.renderables)\n        {\n            getGlobalRenderableBounds(instruction.renderables, bounds);\n        }\n        else if (instruction.filterEffect.filterArea)\n        {\n            bounds.clear();\n            bounds.addRect(instruction.filterEffect.filterArea);\n            bounds.applyMatrix(instruction.container.worldTransform);\n        }\n        else\n        {\n            instruction.container.getFastGlobalBounds(true, bounds);\n        }\n\n        if (instruction.container)\n        {\n            const renderGroup = instruction.container.renderGroup || instruction.container.parentRenderGroup;\n            const filterFrameTransform = renderGroup?.cacheToLocalTransform;\n\n            if (filterFrameTransform)\n            {\n                bounds.applyMatrix(filterFrameTransform);\n            }\n        }\n    }\n\n    private _warnUnsupportedFilter(filter: Filter): void\n    {\n        const filterName = filter?.constructor?.name || 'Filter';\n\n        if (this._warnedFilterTypes.has(filterName))\n        {\n            return;\n        }\n\n        this._warnedFilterTypes.add(filterName);\n        console.warn(\n            `CanvasRenderer: filter \"${filterName}\" is not supported in Canvas2D and will be skipped.`\n        );\n    }\n\n    public get alphaMultiplier(): number\n    {\n        return this._alphaMultiplier;\n    }\n\n    private _pushFilterFrame(): CanvasFilterFrame\n    {\n        let filterFrame = this._filterStack[this._filterStackIndex];\n\n        if (!filterFrame)\n        {\n            filterFrame = this._filterStack[this._filterStackIndex] = new CanvasFilterFrame();\n        }\n\n        this._filterStackIndex++;\n\n        return filterFrame;\n    }\n\n    private _popFilterFrame(): CanvasFilterFrame\n    {\n        if (this._filterStackIndex <= 0)\n        {\n            return this._filterStack[0];\n        }\n\n        this._filterStackIndex--;\n\n        return this._filterStack[this._filterStackIndex];\n    }\n\n    /** Destroys the system */\n    public destroy(): void\n    {\n        this._filterStack = null;\n        this._savedStates = null;\n        this._warnedFilterTypes = null;\n        this._alphaMultiplier = 1;\n    }\n}\n\nextensions.add(CanvasFilterSystem);\n", "/**\n * @param fragmentShader\n * @internal\n */\nexport function migrateFragmentFromV7toV8(fragmentShader: string): string\n{\n    fragmentShader = fragmentShader\n        .replaceAll('texture2D', 'texture')\n        .replaceAll('gl_FragColor', 'finalColor')\n        .replaceAll('varying', 'in');\n\n    fragmentShader = `\n        out vec4 finalColor;\n    ${fragmentShader}\n    `;\n\n    return fragmentShader;\n}\n", "import type { Dict } from '../../../../../utils/types';\n\nconst GLSL_TO_SIZE: Dict<number> = {\n    float:    1,\n    vec2:     2,\n    vec3:     3,\n    vec4:     4,\n\n    int:      1,\n    ivec2:    2,\n    ivec3:    3,\n    ivec4:    4,\n\n    uint:     1,\n    uvec2:    2,\n    uvec3:    3,\n    uvec4:    4,\n\n    bool:     1,\n    bvec2:    2,\n    bvec3:    3,\n    bvec4:    4,\n\n    mat2:     4,\n    mat3:     9,\n    mat4:     16,\n\n    sampler2D:  1,\n};\n\n/**\n * @private\n * @param {string} type\n */\nexport function mapSize(type: string): number\n{\n    return GLSL_TO_SIZE[type];\n}\n", "import { deprecation, v8_0_0 } from '../../../../utils/logging/deprecation';\n\n/**\n * The different topology types supported by the renderer used to describe how the geometry should be renderer\n * @category rendering\n * @advanced\n */\nexport type Topology =\n    'point-list'\n    | 'line-list'\n    | 'line-strip'\n    | 'triangle-list'\n    | 'triangle-strip';\n\nconst DEPRECATED_DRAW_MODES = {\n    POINTS: 'point-list',\n    LINES: 'line-list',\n    LINE_STRIP: 'line-strip',\n    TRIANGLES: 'triangle-list',\n    TRIANGLE_STRIP: 'triangle-strip',\n};\n\n/**\n * @deprecated since 8.0.0\n * @category rendering\n * @advanced\n */\nexport const DRAW_MODES = new Proxy(DEPRECATED_DRAW_MODES, {\n    get(target, prop: keyof typeof DEPRECATED_DRAW_MODES)\n    {\n        // #if _DEBUG\n        deprecation(v8_0_0, `DRAW_MODES.${prop} is deprecated, use '${DEPRECATED_DRAW_MODES[prop]}' instead`);\n        // #endif\n\n        return target[prop];\n    },\n});\n\n/**\n * The different types of vertex formats supported by the renderer\n * @category rendering\n * @advanced\n */\nexport type VertexFormat =\n    | 'uint8x2'\n    | 'uint8x4'\n    | 'sint8x2'\n    | 'sint8x4'\n    | 'unorm8x2'\n    | 'unorm8x4'\n    | 'snorm8x2'\n    | 'snorm8x4'\n    | 'uint16x2'\n    | 'uint16x4'\n    | 'sint16x2'\n    | 'sint16x4'\n    | 'unorm16x2'\n    | 'unorm16x4'\n    | 'snorm16x2'\n    | 'snorm16x4'\n    | 'float16x2'\n    | 'float16x4'\n    | 'float32'\n    | 'float32x2'\n    | 'float32x3'\n    | 'float32x4'\n    | 'uint32'\n    | 'uint32x2'\n    | 'uint32x3'\n    | 'uint32x4'\n    | 'sint32'\n    | 'sint32x2'\n    | 'sint32x3'\n    | 'sint32x4';\n\n", "import { deprecation, v8_0_0 } from '../../../../utils/logging/deprecation';\n\n/**\n * Specifies the alpha composition mode for textures.\n *\n * - `no-premultiply-alpha`: Does not premultiply alpha.\n * - `premultiply-alpha-on-upload`: Premultiplies alpha on texture upload.\n * - `premultiplied-alpha`: Assumes the texture is already in premultiplied alpha format.\n * @category rendering\n * @advanced\n */\nexport type ALPHA_MODES =\n    'no-premultiply-alpha' |\n    'premultiply-alpha-on-upload' |\n    'premultiplied-alpha';\n\n/**\n * The texture formats that are supported by pixi.\n *\n * These formats are used to specify the format of textures in WebGPU and WebGL.\n * They include various uncompressed, compressed, and depth/stencil formats.\n * @category rendering\n * @advanced\n */\nexport type TEXTURE_FORMATS =\n    // 8-bit formats\n    'r8unorm' |\n    'r8snorm' |\n    'r8uint' |\n    'r8sint' |\n\n    // 16-bit formats\n    'r16uint' |\n    'r16sint' |\n    'r16float' |\n    'rg8unorm' |\n    'rg8snorm' |\n    'rg8uint' |\n    'rg8sint' |\n\n    // 32-bit formats\n    'r32uint' |\n    'r32sint' |\n    'r32float' |\n    'rg16uint' |\n    'rg16sint' |\n    'rg16float' |\n    'rgba8unorm' |\n    'rgba8unorm-srgb' |\n    'rgba8snorm' |\n    'rgba8uint' |\n    'rgba8sint' |\n    'bgra8unorm' |\n    'bgra8unorm-srgb' |\n    // Packed 32-bit formats\n    'rgb9e5ufloat' |\n    'rgb10a2unorm' |\n    'rg11b10ufloat' |\n\n    // 64-bit formats\n    'rg32uint' |\n    'rg32sint' |\n    'rg32float' |\n    'rgba16uint' |\n    'rgba16sint' |\n    'rgba16float' |\n\n    // 128-bit formats\n    'rgba32uint' |\n    'rgba32sint' |\n    'rgba32float' |\n\n    // Depth/stencil formats\n    'stencil8' |\n    'depth16unorm' |\n    'depth24plus' |\n    'depth24plus-stencil8' |\n    'depth32float' |\n\n    // \"depth32float-stencil8\" feature\n    'depth32float-stencil8' |\n\n    // BC compressed formats usable if \"texture-compression-bc\" is both\n    // supported by the device/user agent and enabled in requestDevice.\n    'bc1-rgba-unorm' |\n    'bc1-rgba-unorm-srgb' |\n    'bc2-rgba-unorm' |\n    'bc2-rgba-unorm-srgb' |\n    'bc3-rgba-unorm' |\n    'bc3-rgba-unorm-srgb' |\n    'bc4-r-unorm' |\n    'bc4-r-snorm' |\n    'bc5-rg-unorm' |\n    'bc5-rg-snorm' |\n    'bc6h-rgb-ufloat' |\n    'bc6h-rgb-float' |\n    'bc7-rgba-unorm' |\n    'bc7-rgba-unorm-srgb' |\n\n    // ETC2 compressed formats usable if \"texture-compression-etc2\" is both\n    // supported by the device/user agent and enabled in requestDevice.\n    'etc2-rgb8unorm' |\n    'etc2-rgb8unorm-srgb' |\n    'etc2-rgb8a1unorm' |\n    'etc2-rgb8a1unorm-srgb' |\n    'etc2-rgba8unorm' |\n    'etc2-rgba8unorm-srgb' |\n    'eac-r11unorm' |\n    'eac-r11snorm' |\n    'eac-rg11unorm' |\n    'eac-rg11snorm' |\n\n    // ASTC compressed formats usable if \"texture-compression-astc\" is both\n    // supported by the device/user agent and enabled in requestDevice.\n    'astc-4x4-unorm' |\n    'astc-4x4-unorm-srgb' |\n    'astc-5x4-unorm' |\n    'astc-5x4-unorm-srgb' |\n    'astc-5x5-unorm' |\n    'astc-5x5-unorm-srgb' |\n    'astc-6x5-unorm' |\n    'astc-6x5-unorm-srgb' |\n    'astc-6x6-unorm' |\n    'astc-6x6-unorm-srgb' |\n    'astc-8x5-unorm' |\n    'astc-8x5-unorm-srgb' |\n    'astc-8x6-unorm' |\n    'astc-8x6-unorm-srgb' |\n    'astc-8x8-unorm' |\n    'astc-8x8-unorm-srgb' |\n    'astc-10x5-unorm' |\n    'astc-10x5-unorm-srgb' |\n    'astc-10x6-unorm' |\n    'astc-10x6-unorm-srgb' |\n    'astc-10x8-unorm' |\n    'astc-10x8-unorm-srgb' |\n    'astc-10x10-unorm' |\n    'astc-10x10-unorm-srgb' |\n    'astc-12x10-unorm' |\n    'astc-12x10-unorm-srgb' |\n    'astc-12x12-unorm' |\n    'astc-12x12-unorm-srgb';\n\n/**\n * The texture dimensions that are supported by pixi.\n *\n * - `1d` is a one-dimensional texture, which is typically used for linear data.\n * - `2d` is a two-dimensional texture, which is commonly used for images and textures.\n * - `3d` is a three-dimensional texture, which is used for volumetric data or 3D textures.\n * @category rendering\n * @advanced\n */\nexport type TEXTURE_DIMENSIONS =\n    | '1d'\n    | '2d'\n    | '3d';\n\n/**\n * The texture view dimensions that are supported by pixi.\n *\n * This aligns with WebGPU's `GPUTextureViewDescriptor.dimension` and controls how a texture is viewed/sampled\n * (e.g. `cube` for cube maps).\n * @category rendering\n * @advanced\n */\nexport type TEXTURE_VIEW_DIMENSIONS = TEXTURE_DIMENSIONS | '2d-array' | 'cube' | 'cube-array';\n\n/**\n * The wrap modes that are supported by pixi.\n *\n * The wrap mode affects the default wrapping mode of future operations.\n * - `clamp-to-edge` is the default mode, which clamps the texture coordinates to the edge of the texture.\n * - `repeat` allows the texture to repeat in both u and v directions.\n * - `mirror-repeat` allows the texture to repeat in both u and v directions, but mirrors the texture on every other repeat.\n * @category rendering\n * @standard\n */\nexport type WRAP_MODE =\n    | 'clamp-to-edge'\n    | 'repeat'\n    | 'mirror-repeat';\n\n/** @internal */\nexport enum DEPRECATED_WRAP_MODES\n{\n    CLAMP = 'clamp-to-edge',\n\n    REPEAT = 'repeat',\n\n    MIRRORED_REPEAT = 'mirror-repeat',\n}\n\n/**\n * The wrap modes that are supported by pixi.\n * @deprecated since 8.0.0\n * @category rendering\n * @see WRAP_MODE\n * @advanced\n */\nexport const WRAP_MODES = new Proxy(DEPRECATED_WRAP_MODES, {\n    get(target, prop: keyof typeof DEPRECATED_WRAP_MODES)\n    {\n        // #if _DEBUG\n        deprecation(v8_0_0, `DRAW_MODES.${prop} is deprecated, use '${DEPRECATED_WRAP_MODES[prop]}' instead`);\n        // #endif\n\n        return target[prop];\n    },\n});\n\n/**\n * The scale modes that are supported by pixi.\n *\n * The scale mode affects the default scaling mode of future operations.\n * It can be re-assigned to either LINEAR or NEAREST, depending upon suitability.\n *\n * - `nearest` is a pixelating scaling mode, which does not interpolate pixels.\n * - `linear` is a smooth scaling mode, which interpolates pixels for smoother results.\n * @category rendering\n * @standard\n */\nexport type SCALE_MODE = | 'nearest' | 'linear';\n\n/** @internal */\nexport enum DEPRECATED_SCALE_MODES\n{\n    NEAREST = 'nearest',\n    LINEAR = 'linear',\n}\n\n/**\n * The scale modes that are supported by pixi.\n * @deprecated since 8.0.0\n * @category rendering\n * @see SCALE_MODE\n * @advanced\n */\nexport const SCALE_MODES = new Proxy(DEPRECATED_SCALE_MODES, {\n    get(target, prop: keyof typeof DEPRECATED_SCALE_MODES)\n    {\n        // #if _DEBUG\n        deprecation(v8_0_0, `DRAW_MODES.${prop} is deprecated, use '${DEPRECATED_SCALE_MODES[prop]}' instead`);\n        // #endif\n\n        return target[prop];\n    },\n});\n\n/**\n * The compare function types used for comparing values in various operations.\n * @category rendering\n * @advanced\n */\nexport type COMPARE_FUNCTION =\n    | 'never'\n    | 'less'\n    | 'equal'\n    | 'less-equal'\n    | 'greater'\n    | 'not-equal'\n    | 'greater-equal'\n    | 'always';\n", "import { warn } from '../../../../../utils/logging/warn';\nimport { TextureSource } from './TextureSource';\n\nimport type { TextureSourceOptions } from './TextureSource';\n\n/**\n * The 6 faces of a cube map.\n *\n * Naming matches common engine conventions:\n * - left/right: -X/+X\n * - bottom/top: -Y/+Y\n * - back/front: -Z/+Z\n * @category rendering\n * @advanced\n */\nexport interface CubeTextureFaces<T>\n{\n    left: T;\n    right: T;\n    top: T;\n    bottom: T;\n    front: T;\n    back: T;\n}\n\n/**\n * Options for creating a {@link CubeTextureSource}.\n * @category rendering\n * @advanced\n */\nexport interface CubeTextureSourceOptions extends Omit<\n    TextureSourceOptions<any>,\n    'resource' | 'width' | 'height' | 'dimensions' | 'viewDimension' | 'resolution' | 'format' | 'alphaMode'\n>\n{\n    /**\n     * The 6 face sources that make up the cube texture.\n     *\n     * All faces must match in:\n     * - size (pixelWidth / pixelHeight)\n     * - resolution\n     * - format\n     * - alphaMode\n     */\n    faces: CubeTextureFaces<TextureSource>;\n}\n\n/**\n * A {@link TextureSource} that represents a cube texture (6 faces).\n *\n * Internally, WebGPU uses a 2D texture with 6 array layers and a `cube` view.\n * WebGL uses `TEXTURE_CUBE_MAP`.\n * @example\n * Create a cube source from 6 already-created {@link TextureSource} instances:\n *\n * ```ts\n * const cubeSource = new CubeTextureSource({\n *   faces: { right, left, top, bottom, front, back },\n *   label: 'env-map',\n * });\n * ```\n * @category rendering\n * @advanced\n */\nexport class CubeTextureSource extends TextureSource<CubeTextureFaces<TextureSource>>\n{\n    /** @internal */\n    public override readonly uploadMethodId = 'cube';\n\n    /** The 6 face sources that make up this cube texture. */\n    public readonly faces: CubeTextureFaces<TextureSource>;\n\n    constructor(options: CubeTextureSourceOptions)\n    {\n        const { faces, ...rest } = options;\n\n        // Validate faces are compatible (size/format/alpha/resolution).\n        CubeTextureSource._validateFaces(faces);\n\n        const first = faces.right;\n\n        // Derived settings from the face sources.\n        const derivedResolution = first.resolution;\n        const derivedFormat = first.format;\n        const derivedAlphaMode = first.alphaMode;\n\n        // #if _DEBUG\n        // CubeTextureSourceOptions omits these keys, but warn if someone still passes them at runtime.\n        const ignoredKeys = ([\n            'resolution',\n            'format',\n            'alphaMode',\n            'dimensions',\n            'viewDimension',\n        ] as const).filter((key) => (rest as any)[key] !== undefined);\n\n        if (ignoredKeys.length)\n        {\n            warn(\n                `[CubeTextureSource] Ignoring option(s) [${ignoredKeys.join(', ')}]; these are derived from face sources.`\n            );\n        }\n        // #endif\n\n        super({\n            ...rest,\n            resource: faces,\n            // Keep these aligned with the face sources so any code that reads width/height works.\n            width: first.width,\n            height: first.height,\n            dimensions: '2d',\n            viewDimension: 'cube',\n            arrayLayerCount: 6,\n            resolution: derivedResolution,\n            format: derivedFormat,\n            alphaMode: derivedAlphaMode,\n        });\n\n        this.faces = faces;\n\n        // Forward face updates so the cube gets re-uploaded when any face changes.\n        for (const key of Object.keys(faces) as (keyof CubeTextureFaces<TextureSource>)[])\n        {\n            const face = faces[key];\n\n            face.on('update', this._onFaceUpdate, this);\n            face.on('resize', this._onFaceResize, this);\n            face.on('unload', this._onFaceUpdate, this);\n        }\n    }\n\n    public override destroy(): void\n    {\n        const faces = this.faces;\n\n        if (faces)\n        {\n            for (const key of Object.keys(faces) as (keyof CubeTextureFaces<TextureSource>)[])\n            {\n                const face = faces[key];\n\n                face.off('update', this._onFaceUpdate, this);\n                face.off('resize', this._onFaceResize, this);\n                face.off('unload', this._onFaceUpdate, this);\n            }\n        }\n\n        super.destroy();\n    }\n\n    private _onFaceUpdate()\n    {\n        this.emit('update', this);\n    }\n\n    private _onFaceResize(face: TextureSource)\n    {\n        // Re-validate and resize the cube source to match the face.\n        CubeTextureSource._validateFaces(this.faces);\n\n        this.resize(face.width, face.height, face.resolution);\n    }\n\n    private static _validateFaces(faces: CubeTextureFaces<TextureSource>): void\n    {\n        if (!faces.right || !faces.left || !faces.top || !faces.bottom || !faces.front || !faces.back)\n        {\n            throw new Error('[CubeTextureSource] Requires { left, right, top, bottom, front, back } faces.');\n        }\n\n        const first = faces.right;\n        const expectedPixelWidth = first.pixelWidth;\n        const expectedPixelHeight = first.pixelHeight;\n        const expectedFormat = first.format;\n        const expectedAlphaMode = first.alphaMode;\n        const expectedResolution = first.resolution;\n\n        for (const key of Object.keys(faces) as (keyof CubeTextureFaces<TextureSource>)[])\n        {\n            const face = faces[key];\n\n            if (face.pixelWidth !== expectedPixelWidth || face.pixelHeight !== expectedPixelHeight)\n            {\n                throw new Error(`[CubeTextureSource] Face '${String(key)}' has a different size. All faces must match.`);\n            }\n\n            if (face.format !== expectedFormat)\n            {\n                throw new Error(`[CubeTextureSource] Face '${String(key)}' has a different format. All faces must match.`);\n            }\n\n            if (face.alphaMode !== expectedAlphaMode)\n            {\n                throw new Error(\n                    `[CubeTextureSource] Face '${String(key)}' has a different alphaMode. All faces must match.`\n                );\n            }\n\n            if (face.resolution !== expectedResolution)\n            {\n                throw new Error(\n                    `[CubeTextureSource] Face '${String(key)}' has a different resolution. All faces must match.`\n                );\n            }\n        }\n    }\n}\n\n", "import EventEmitter from 'eventemitter3';\nimport { Cache } from '../../../../assets/cache/Cache';\nimport { uid } from '../../../../utils/data/uid';\nimport { CubeTextureSource } from './sources/CubeTextureSource';\nimport { type TextureSource } from './sources/TextureSource';\nimport { Texture } from './Texture';\n\nimport type { CubeTextureFaces, CubeTextureSourceOptions } from './sources/CubeTextureSource';\nimport type { BindableTexture, TextureSourceLike } from './Texture';\n\ntype CubeTextureFaceInputs = {\n    left: TextureSourceLike | BindableTexture;\n    right: TextureSourceLike | BindableTexture;\n    top: TextureSourceLike | BindableTexture;\n    bottom: TextureSourceLike | BindableTexture;\n    front: TextureSourceLike | BindableTexture;\n    back: TextureSourceLike | BindableTexture;\n};\n\ntype CubeTextureFromOptions = Omit<CubeTextureSourceOptions, 'faces'> & { faces: CubeTextureFaceInputs };\n\nconst faceKeys = ['left', 'right', 'top', 'bottom', 'front', 'back'] as const;\n\nfunction getCubeCacheKey(faceIds: CubeTextureFaces<string>, options: Omit<CubeTextureSourceOptions, 'faces'>): string\n{\n    const opts = options ? { ...(options as any) } : {};\n\n    // Don't include label in the cache key.\n    delete opts.label;\n\n    const optKeys = Object.keys(opts).sort();\n    const optPart = optKeys.length\n        ? `|${optKeys.map((k) => `${k}=${String(opts[k])}`).join('&')}`\n        : '';\n\n    // Note: Order is explicit and stable.\n    const facesPart = faceKeys.map((k) => faceIds[k]).join(',');\n\n    return `cube:${facesPart}${optPart}`;\n}\n\n/**\n * The options that can be passed to a new {@link CubeTexture}.\n * @category rendering\n * @advanced\n */\nexport interface CubeTextureOptions\n{\n    /** The underlying cube texture source. */\n    source: CubeTextureSource;\n    /** Optional label, for debugging. */\n    label?: string;\n}\n\n/**\n * A cube texture that can be bound to shaders (samplerCube / texture_cube).\n *\n * This is a lightweight wrapper around a {@link CubeTextureSource}.\n * @example\n * Load 6 images and create a cube texture (paths are just examples):\n *\n * ```ts\n * import { Assets, CubeTexture } from 'pixi.js';\n *\n * await Assets.load([\n *   'px.png', 'nx.png',\n *   'py.png', 'ny.png',\n *   'pz.png', 'nz.png',\n * ]);\n *\n * // IMPORTANT: string ids must already be in the cache (e.g. after Assets.load)\n * const cube = CubeTexture.from({\n *   faces: {\n *     right: 'px.png',  // +X\n *     left: 'nx.png',   // -X\n *     top: 'py.png',    // +Y\n *     bottom: 'ny.png', // -Y\n *     front: 'pz.png',  // +Z\n *     back: 'nz.png',   // -Z\n *   },\n *   label: 'skybox',\n * });\n * ```\n * @example\n * Bind to a shader (resources differ between WebGL and WebGPU, but the cube texture binding stays the same):\n *\n * ```ts\n * const shader = Shader.from({\n *   gl: { fragment: `uniform samplerCube uCube;` },\n *   gpu: { fragment: { source: `@group(0) @binding(0) var uCube : texture_cube<f32>;` } },\n *   resources: {\n *     uCube: cube.source,\n *     uSampler: cube.source.style,\n *   },\n * });\n * ```\n * @category rendering\n * @advanced\n */\nexport class CubeTexture extends EventEmitter<{ destroy: CubeTexture }> implements BindableTexture\n{\n    /** unique id for this cube texture */\n    public readonly uid: number = uid('cubeTexture');\n\n    /** Has the texture been destroyed? */\n    public destroyed = false;\n\n    /** The underlying cube texture source. */\n    public readonly source: CubeTextureSource;\n\n    /** Optional label for debugging. */\n    public label?: string;\n\n    constructor(options: CubeTextureOptions)\n    {\n        super();\n\n        const { label, source } = options;\n\n        this.label = label;\n\n        this.source = source;\n\n        this.source.label = this.label ?? this.source.label;\n    }\n\n    /**\n     * Convenience factory for creating a cube texture from a {@link CubeTextureSource}.\n     * @param options - A cube texture source.\n     * @param skipCache - Unused for this overload.\n     */\n    public static from(options: CubeTextureSource, skipCache?: boolean): CubeTexture;\n    /**\n     * Convenience factory for creating a cube texture from 6 face inputs.\n     *\n     * Face inputs are converted to {@link Texture} via {@link Texture.from}. This does **not** load resources;\n     * string ids must already be present in the cache (e.g. after `Assets.load`).\n     * @example\n     * ```ts\n     * const cube = CubeTexture.from({\n     *   faces: {\n     *     right: 'px.png',\n     *     left: 'nx.png',\n     *     top: 'py.png',\n     *     bottom: 'ny.png',\n     *     front: 'pz.png',\n     *     back: 'nz.png',\n     *   },\n     * });\n     * ```\n     * @param options - Options including the 6 face inputs.\n     * @param skipCache - Skip caching the resulting {@link CubeTexture} when all faces are string ids.\n     */\n    public static from(options: CubeTextureFromOptions, skipCache?: boolean): CubeTexture;\n    public static from(options: CubeTextureSource | CubeTextureFromOptions, skipCache = false): CubeTexture\n    {\n        if (options instanceof CubeTextureSource)\n        {\n            return new CubeTexture({ source: options });\n        }\n\n        const { faces, ...sourceOptions } = options;\n\n        // Cache only when faces are string ids (matches Texture.from string semantics).\n        let cacheKey: string = null;\n\n        const isFaceIds = faceKeys.every((key) => typeof faces[key] === 'string');\n\n        if (!skipCache && isFaceIds)\n        {\n            cacheKey = getCubeCacheKey(faces as unknown as CubeTextureFaces<string>, sourceOptions);\n\n            if (Cache.has(cacheKey))\n            {\n                return Cache.get(cacheKey);\n            }\n        }\n\n        const toTexture = (input: TextureSourceLike | BindableTexture): Texture =>\n        {\n            if ((input as any).isTexture) return input as Texture;\n\n            return Texture.from(input as TextureSourceLike);\n        };\n\n        const faceSources = {} as CubeTextureFaces<TextureSource>;\n\n        for (const key of faceKeys)\n        {\n            faceSources[key] = toTexture(faces[key]).source;\n        }\n\n        const cubeTexture = new CubeTexture({\n            source: new CubeTextureSource({\n                ...(sourceOptions as Omit<CubeTextureSourceOptions, 'faces'>),\n                faces: faceSources,\n            }),\n            label: sourceOptions.label,\n        });\n\n        if (cacheKey)\n        {\n            Cache.set(cacheKey, cubeTexture);\n\n            cubeTexture.once('destroy', () =>\n            {\n                if (Cache.has(cacheKey))\n                {\n                    Cache.remove(cacheKey);\n                }\n            });\n        }\n\n        return cubeTexture;\n    }\n\n    /**\n     * Destroy this CubeTexture.\n     * @param destroySource - If true, destroys the underlying {@link CubeTextureSource}.\n     */\n    public destroy(destroySource = false): void\n    {\n        if (this.destroyed) return;\n\n        this.destroyed = true;\n\n        if (destroySource)\n        {\n            this.source.destroy();\n        }\n\n        this.emit('destroy', this);\n        this.removeAllListeners();\n    }\n}\n\n", "import { GlTexture } from '../../../gl/texture/GlTexture';\nimport { GPUTextureGpuData } from '../../../gpu/texture/GpuTextureSystem';\nimport { type Renderer, RendererType } from '../../../types';\nimport { TextureSource } from './TextureSource';\n\n// Shared placeholders - created lazily, reused by all ExternalSource instances\nconst placeholderGl: Record<number, WebGLTexture> = Object.create(null);\nconst placeholderGpu: Record<number, GPUTexture> = Object.create(null);\n\nfunction getPlaceholder(renderer: Renderer): GPUTexture | WebGLTexture\n{\n    if (renderer.type === RendererType.WEBGPU)\n    {\n        placeholderGpu[renderer.uid] ||= (renderer as any).gpu.device.createTexture({\n            label: 'ExternalSource placeholder',\n            size: { width: 1, height: 1 },\n            format: 'rgba8unorm',\n            usage: GPUTextureUsage.TEXTURE_BINDING | GPUTextureUsage.COPY_DST,\n        });\n\n        return placeholderGpu[renderer.uid];\n    }\n\n    if (!placeholderGl[renderer.uid])\n    {\n        const gl = (renderer as any).gl as WebGLRenderingContext;\n        const texture = gl.createTexture();\n\n        gl.bindTexture(gl.TEXTURE_2D, texture);\n        gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, 1, 1, 0, gl.RGBA, gl.UNSIGNED_BYTE, null);\n\n        placeholderGl[renderer.uid] = texture;\n    }\n\n    return placeholderGl[renderer.uid];\n}\n\n/**\n * Options for creating an ExternalSource.\n * @category rendering\n * @advanced\n */\nexport interface ExternalSourceOptions\n{\n    /**\n     * The external GPU texture (GPUTexture for WebGPU, WebGLTexture for WebGL).\n     * If not provided, a shared 1x1 placeholder texture will be used until\n     * `updateGPUTexture()` is called.\n     * @advanced\n     */\n    resource?: GPUTexture | WebGLTexture;\n    /**\n     * The renderer this texture will be used with\n     * @advanced\n     */\n    renderer: Renderer;\n    /**\n     * Width of the texture. Auto-detected for GPUTexture, required for WebGLTexture.\n     * @advanced\n     */\n    width?: number;\n    /**\n     * Height of the texture. Auto-detected for GPUTexture, required for WebGLTexture.\n     * @advanced\n     */\n    height?: number;\n    /**\n     * Optional label for debugging\n     * @advanced\n     */\n    label?: string;\n}\n\n/**\n * A texture source that uses a GPU texture from an external library (e.g., Three.js).\n *\n * This allows sharing textures between PixiJS and other WebGL/WebGPU libraries without\n * re-uploading pixel data. The renderer is required so that ExternalSource can\n * pre-populate the GPU data and validate context ownership.\n * @example\n * ```typescript\n * // WebGPU - dimensions auto-detected\n * const texture = new Texture({\n *     source: new ExternalSource({\n *         resource: threeJsGpuTexture,\n *         renderer: renderer,\n *     })\n * });\n *\n * // WebGL - must provide dimensions (WebGLTexture is opaque)\n * const texture = new Texture({\n *     source: new ExternalSource({\n *         resource: threeJsGlTexture,\n *         renderer: renderer,\n *         width: 512,\n *         height: 512,\n *     })\n * });\n *\n * // Update to a new external texture\n * (texture.source as ExternalSource).updateGPUTexture(newExternalTexture);\n * ```\n * @category rendering\n * @advanced\n */\nexport class ExternalSource extends TextureSource<GPUTexture | WebGLTexture>\n{\n    private readonly _renderer: Renderer;\n\n    constructor({ resource, renderer, label, width, height }: ExternalSourceOptions)\n    {\n        resource ||= getPlaceholder(renderer);\n        width ||= width ?? (resource as GPUTexture)?.width ?? 1;\n        height ||= height ?? (resource as GPUTexture)?.height ?? 1;\n\n        // Only pass the minimal required options to TextureSource\n        super({\n            resource,\n            width,\n            height,\n            label,\n            // External textures shouldn't be garbage collected - the external library owns them\n            autoGarbageCollect: false,\n        });\n\n        this._renderer = renderer;\n\n        // Pre-populate _gpuData\n        this._initGpuData(resource);\n    }\n\n    /**\n     * Test if a resource is a valid external GPU texture.\n     * @param resource - The resource to test\n     * @returns True if the resource is a GPUTexture or WebGLTexture\n     */\n    public static test(resource: unknown): resource is GPUTexture | WebGLTexture\n    {\n        return (\n            (globalThis.GPUTexture && resource instanceof GPUTexture)\n            || (globalThis.WebGLTexture && resource instanceof WebGLTexture)\n        );\n    }\n\n    private _validateTexture(resource: GPUTexture | WebGLTexture): void\n    {\n        const renderer = this._renderer;\n        const isWebGPU = !!(renderer as any).gpu;\n        const isGPUTexture = globalThis.GPUTexture && resource instanceof GPUTexture;\n        const isWebGLTexture = globalThis.WebGLTexture && resource instanceof WebGLTexture;\n\n        if (isWebGPU && isWebGLTexture)\n        {\n            throw new Error('Cannot use WebGLTexture with a WebGPU renderer');\n        }\n\n        if (!isWebGPU && isGPUTexture)\n        {\n            throw new Error('Cannot use GPUTexture with a WebGL renderer');\n        }\n\n        // WebGL context ownership check\n        if (!isWebGPU)\n        {\n            const gl = (renderer as any).gl;\n\n            if (gl && !gl.isTexture(resource as WebGLTexture))\n            {\n                throw new Error('WebGLTexture does not belong to this renderer\\'s WebGL context');\n            }\n        }\n    }\n\n    private _initGpuData(resource: GPUTexture | WebGLTexture): void\n    {\n        const renderer = this._renderer;\n\n        this._validateTexture(resource);\n\n        if ((renderer as any).gpu)\n        {\n            // WebGPU\n            this._gpuData[renderer.uid] = new GPUTextureGpuData(resource as GPUTexture);\n        }\n        else\n        {\n            // WebGL\n            this._gpuData[renderer.uid] = new GlTexture(resource as WebGLTexture);\n        }\n    }\n\n    /**\n     * Update the external GPU texture reference.\n     * Call this when the external library provides a new texture.\n     * @param gpuTexture - The new GPU texture\n     * @param width - New width (required for WebGLTexture, auto-detected for GPUTexture)\n     * @param height - New height (required for WebGLTexture, auto-detected for GPUTexture)\n     */\n    public updateGPUTexture(gpuTexture: GPUTexture | WebGLTexture, width?: number, height?: number): void\n    {\n        const renderer = this._renderer;\n        const gpuData = this._gpuData[renderer.uid];\n\n        // Update the resource property to reflect the new texture\n        this.resource = gpuTexture;\n\n        if ((renderer as any).gpu)\n        {\n            // WebGPU - validate and update\n            this._validateTexture(gpuTexture);\n\n            const data = gpuData as GPUTextureGpuData;\n\n            if (data.gpuTexture !== gpuTexture)\n            {\n                data.gpuTexture = gpuTexture as GPUTexture;\n                data.textureView = null;\n\n                // Invalidate bind group hash\n                const textureSystem = (renderer as any).texture;\n\n                if (textureSystem?._bindGroupHash)\n                {\n                    textureSystem._bindGroupHash[this.uid] = null;\n                }\n            }\n\n            // Update dimensions from GPUTexture (or use provided values)\n            const newWidth = width ?? (gpuTexture as GPUTexture).width;\n            const newHeight = height ?? (gpuTexture as GPUTexture).height;\n\n            this.resize(newWidth, newHeight);\n        }\n        else\n        {\n            // WebGL - validate and update the texture reference\n            this._validateTexture(gpuTexture);\n\n            const data = gpuData as GlTexture;\n\n            data.texture = gpuTexture as WebGLTexture;\n\n            // WebGL: dimensions must be provided (WebGLTexture is opaque)\n            if (width !== undefined && height !== undefined)\n            {\n                this.resize(width, height);\n            }\n        }\n\n        this.emit('update', this);\n    }\n\n    public override destroy(): void\n    {\n        // Never destroy the GPU texture:\n        // - Placeholder is shared across all instances\n        // - External textures are owned by the external library\n        const renderer = this._renderer;\n\n        delete this._gpuData[renderer.uid];\n\n        super.destroy();\n    }\n}\n", "import { groupD8 } from '../../../../maths/matrix/groupD8';\n\nimport type { Size } from '../../../../maths/misc/Size';\nimport type { Rectangle } from '../../../../maths/shapes/Rectangle';\n\n/**\n * Stores a texture's frame in UV coordinates, in\n * which everything lies in the rectangle `[(0,0), (1,0),\n * (1,1), (0,1)]`.\n *\n * | Corner       | Coordinates |\n * |--------------|-------------|\n * | Top-Left     | `(x0,y0)`   |\n * | Top-Right    | `(x1,y1)`   |\n * | Bottom-Right | `(x2,y2)`   |\n * | Bottom-Left  | `(x3,y3)`   |\n * @protected\n * @category rendering\n * @advanced\n */\nexport class TextureUvs\n{\n    /** X-component of top-left corner `(x0,y0)`. */\n    public x0: number;\n\n    /** Y-component of top-left corner `(x0,y0)`. */\n    public y0: number;\n\n    /** X-component of top-right corner `(x1,y1)`. */\n    public x1: number;\n\n    /** Y-component of top-right corner `(x1,y1)`. */\n    public y1: number;\n\n    /** X-component of bottom-right corner `(x2,y2)`. */\n    public x2: number;\n\n    /** Y-component of bottom-right corner `(x2,y2)`. */\n    public y2: number;\n\n    /** X-component of bottom-left corner `(x3,y3)`. */\n    public x3: number;\n\n    /** Y-component of bottom-right corner `(x3,y3)`. */\n    public y3: number;\n    public uvsFloat32: Float32Array;\n\n    constructor()\n    {\n        this.x0 = 0;\n        this.y0 = 0;\n        this.x1 = 1;\n        this.y1 = 0;\n        this.x2 = 1;\n        this.y2 = 1;\n        this.x3 = 0;\n        this.y3 = 1;\n\n        this.uvsFloat32 = new Float32Array(8);\n    }\n\n    /**\n     * Sets the texture Uvs based on the given frame information.\n     * @protected\n     * @param frame - The frame of the texture\n     * @param baseFrame - The base frame of the texture\n     * @param rotate - Rotation of frame, see {@link groupD8}\n     */\n    public set(frame: Rectangle, baseFrame: Size, rotate: number): void\n    {\n        const tw = baseFrame.width;\n        const th = baseFrame.height;\n\n        if (rotate)\n        {\n            // width and height div 2 div baseFrame size\n            const w2 = frame.width / 2 / tw;\n            const h2 = frame.height / 2 / th;\n\n            // coordinates of center\n            const cX = (frame.x / tw) + w2;\n            const cY = (frame.y / th) + h2;\n\n            rotate = groupD8.add(rotate, groupD8.NW); // NW is top-left corner\n            this.x0 = cX + (w2 * groupD8.uX(rotate));\n            this.y0 = cY + (h2 * groupD8.uY(rotate));\n\n            rotate = groupD8.add(rotate, 2); // rotate 90 degrees clockwise\n            this.x1 = cX + (w2 * groupD8.uX(rotate));\n            this.y1 = cY + (h2 * groupD8.uY(rotate));\n\n            rotate = groupD8.add(rotate, 2);\n            this.x2 = cX + (w2 * groupD8.uX(rotate));\n            this.y2 = cY + (h2 * groupD8.uY(rotate));\n\n            rotate = groupD8.add(rotate, 2);\n            this.x3 = cX + (w2 * groupD8.uX(rotate));\n            this.y3 = cY + (h2 * groupD8.uY(rotate));\n        }\n        else\n        {\n            this.x0 = frame.x / tw;\n            this.y0 = frame.y / th;\n\n            this.x1 = (frame.x + frame.width) / tw;\n            this.y1 = frame.y / th;\n\n            this.x2 = (frame.x + frame.width) / tw;\n            this.y2 = (frame.y + frame.height) / th;\n\n            this.x3 = frame.x / tw;\n            this.y3 = (frame.y + frame.height) / th;\n        }\n\n        this.uvsFloat32[0] = this.x0;\n        this.uvsFloat32[1] = this.y0;\n        this.uvsFloat32[2] = this.x1;\n        this.uvsFloat32[3] = this.y1;\n        this.uvsFloat32[4] = this.x2;\n        this.uvsFloat32[5] = this.y2;\n        this.uvsFloat32[6] = this.x3;\n        this.uvsFloat32[7] = this.y3;\n    }\n\n    // #if _DEBUG\n    public toString(): string\n    {\n        return `[pixi.js/core:TextureUvs `\n            + `x0=${this.x0} y0=${this.y0} `\n            + `x1=${this.x1} y1=${this.y1} x2=${this.x2} `\n            + `y2=${this.y2} x3=${this.x3} y3=${this.y3}`\n            + `]`;\n    }\n    // #endif\n}\n", "/**\n * @param fn\n * @internal\n */\nexport function parseFunctionBody(fn: (...args: any[]) => any): string\n{\n    const fnStr = fn.toString();\n    const bodyStart = fnStr.indexOf('{');\n    const bodyEnd = fnStr.lastIndexOf('}');\n\n    if (bodyStart === -1 || bodyEnd === -1)\n    {\n        throw new Error('getFunctionBody: No body found in function definition');\n    }\n\n    return fnStr.slice(bodyStart + 1, bodyEnd).trim();\n}\n", "import { deprecation } from '../../../utils/logging/deprecation';\n\nimport type { Container } from '../Container';\nimport type { Bounds } from './Bounds';\n\n/**\n * Does exactly the same as getGlobalBounds, but does instead makes use of transforming AABBs\n * of the various children within the scene graph. This is much faster, but less accurate.\n *\n * Deprecated, use container.getFastGlobalBounds() instead.\n *\n * the result will never be smaller - only ever slightly larger (in most cases, it will be the same).\n * @param target - The target container to get the bounds from\n * @param bounds - The output bounds object.\n * @returns The bounds.\n * @deprecated since 8.7.0\n * @see container.getFastGlobalBounds\n * @internal\n */\nexport function getFastGlobalBounds(target: Container, bounds: Bounds): Bounds\n{\n    // #if _DEBUG\n    deprecation('8.7.0', 'Use container.getFastGlobalBounds() instead');\n    // #endif\n\n    return target.getFastGlobalBounds(true, bounds);\n}\n", "import { ViewContainer } from '../view/ViewContainer';\n\nimport type { Point } from '../../maths/point/Point';\nimport type { Instruction } from '../../rendering/renderers/shared/instructions/Instruction';\nimport type { Renderer } from '../../rendering/renderers/types';\nimport type { Bounds, BoundsData } from './bounds/Bounds';\nimport type { ContainerOptions } from './Container';\n\n/**\n * A function that takes a renderer and does the custom rendering logic.\n * This is the function that will be called each frame.\n * @param renderer - The current renderer\n * @example\n * ```js\n * import { RenderContainer } from 'pixi.js';\n *\n * // create a new render container\n * const renderContainer = new RenderContainer((renderer) => {\n *     // custom render logic here\n *     renderer.clear({\n *         clearColor: 'green', // clear the screen to green when rendering this item\n *     });\n * });\n * ```\n * @category scene\n * @advanced\n */\nexport type RenderFunction = (renderer: Renderer) => void;\n\n/**\n * Options for the {@link RenderContainer} constructor.\n * @category scene\n * @advanced\n * @noInheritDoc\n */\nexport interface RenderContainerOptions extends ContainerOptions\n{\n    /** the optional custom render function if you want to inject the function via the constructor */\n    render?: RenderFunction;\n    /** how to know if the custom render logic contains a point or not, used for interaction */\n    containsPoint?: (point: Point) => boolean;\n    /** how to add the bounds of this object when measuring */\n    addBounds?: (bounds: BoundsData) => void;\n}\n\n/**\n * A container that allows for custom rendering logic. Its essentially calls the render function each frame\n * and allows for custom rendering logic - the render could be a WebGL renderer or WebGPU render or even a canvas render.\n * Its up to you to define the logic.\n *\n * This can be used in two ways, either by extending the class and overriding the render method,\n * or by passing a custom render function\n * @example\n * ```js\n * import { RenderContainer } from 'pixi.js';\n *\n * // extend the class\n * class MyRenderContainer extends RenderContainer\n * {\n *    render(renderer)\n *    {\n *      renderer.clear({\n *         clearColor: 'green', // clear the screen to green when rendering this item\n *      });\n *   }\n * }\n *\n * // override the render method\n * const renderContainer = new RenderContainer(\n * (renderer) =>  {\n *     renderer.clear({\n *       clearColor: 'green', // clear the screen to green when rendering this item\n *     });\n * })\n * ```\n * @category scene\n * @advanced\n */\nexport class RenderContainer extends ViewContainer implements Instruction\n{\n    /** @internal */\n    public override readonly renderPipeId: string = 'customRender';\n    /** @internal */\n    public batched = false;\n\n    /**\n     * Adds the bounds of this text to the bounds object.\n     * @param bounds - The output bounds object.\n     */\n    public addBounds: (bounds: Bounds) => void;\n\n    /**\n     * @param options - The options for the container.\n     */\n    constructor(options: RenderContainerOptions | RenderFunction)\n    {\n        if (typeof options === 'function')\n        {\n            options = { render: options };\n        }\n\n        const { render, ...rest } = options;\n\n        super({\n            label: 'RenderContainer',\n            ...rest,\n        });\n\n        if (render) this.render = render;\n\n        this.containsPoint = options.containsPoint ?? (() => false);\n        this.addBounds = options.addBounds ?? (() => false);\n    }\n\n    /** @private */\n    protected updateBounds(): void\n    {\n        // NOTE: this is for backwards compatibility with the old bounds system\n        this._bounds.clear();\n        this.addBounds(this._bounds);\n    }\n\n    /**\n     * An overridable function that can be used to render the object using the current renderer.\n     * @param _renderer - The current renderer\n     */\n    public render(_renderer: Renderer): void\n    {\n        // override me!\n    }\n}\n", "import { type InstructionSet } from '../../../rendering/renderers/shared/instructions/InstructionSet';\nimport { type Renderer, type RenderPipes } from '../../../rendering/renderers/types';\nimport { deprecation } from '../../../utils/logging/deprecation';\nimport { type Container } from '../Container';\n\n/**\n * Deprecated, please use container.collectRenderables instead.\n * @param container - The container to collect renderables from.\n * @param instructionSet - The instruction set to add the renderables to.\n * @param rendererOrPipes - The renderer to collect the renderables from.\n * @deprecated since version 8.7.0\n * @see container.collectRenderables\n * @internal\n */\nexport function collectAllRenderables(\n    container: Container, instructionSet: InstructionSet, rendererOrPipes: Renderer | RenderPipes\n): void\n{\n    // #if _DEBUG\n    deprecation('8.7.0', 'Please use container.collectRenderables instead.');\n    // #endif\n\n    // deprecate the use of renderPipes by finding the renderer attached to the batch pipe as this is always there\n    const renderer = (rendererOrPipes as Renderer).renderPipes\n        ? (rendererOrPipes as Renderer)\n        : (rendererOrPipes as RenderPipes).batch.renderer;\n\n    return container.collectRenderables(instructionSet, renderer, null);\n}\n", "import type { Matrix } from '../../../maths/matrix/Matrix';\nimport type { Container } from '../Container';\n\n/**\n * Updates the local transform of a container based on its properties.\n * @param lt - The matrix to update with the local transform values.\n * @param container - The container whose local transform is being updated.\n * @deprecated\n * @internal\n */\nexport function updateLocalTransform(lt: Matrix, container: Container): void\n{\n    const scale = container._scale;\n    const pivot = container._pivot;\n    const position = container._position;\n\n    const sx = scale._x;\n    const sy = scale._y;\n\n    const px = pivot._x;\n    const py = pivot._y;\n\n    // get the matrix values of the container based on its this properties..\n    lt.a = container._cx * sx;\n    lt.b = container._sx * sx;\n    lt.c = container._cy * sy;\n    lt.d = container._sy * sy;\n\n    lt.tx = position._x - ((px * lt.a) + (py * lt.c));\n    lt.ty = position._y - ((px * lt.b) + (py * lt.d));\n}\n", "import type { Matrix } from '../../../maths/matrix/Matrix';\n\n/**\n * @param local\n * @param parent\n * @param world\n * @deprecated\n * @internal\n */\nexport function updateWorldTransform(local: Matrix, parent: Matrix, world: Matrix): void\n{\n    const lta = local.a;\n    const ltb = local.b;\n    const ltc = local.c;\n    const ltd = local.d;\n    const lttx = local.tx;\n    const ltty = local.ty;\n\n    const pta = parent.a;\n    const ptb = parent.b;\n    const ptc = parent.c;\n    const ptd = parent.d;\n\n    world.a = (lta * pta) + (ltb * ptc);\n    world.b = (lta * ptb) + (ltb * ptd);\n    world.c = (ltc * pta) + (ltd * ptc);\n    world.d = (ltc * ptb) + (ltd * ptd);\n    world.tx = (lttx * pta) + (ltty * ptc) + parent.tx;\n    world.ty = (lttx * ptb) + (ltty * ptd) + parent.ty;\n}\n", "import { buildSimpleUvs, buildUvs } from '../../../../rendering/renderers/shared/geometry/utils/buildUvs';\nimport { transformVertices } from '../../../../rendering/renderers/shared/geometry/utils/transformVertices';\nimport { MeshGeometry } from '../../../mesh/shared/MeshGeometry';\nimport { GraphicsPath } from '../path/GraphicsPath';\nimport { shapeBuilders } from './buildContextBatches';\n\nimport type { Matrix } from '../../../../maths/matrix/Matrix';\n\n/**\n * Options for building geometry from a graphics path.\n * Provides a possibility to specify a transformation Matrix for the texture's UVs and output mesh geometry.\n * @example\n * ```ts\n * const options: GeometryPathOptions = {\n *     path: new GraphicsPath().rect(0, 0, 64, 64),\n *     textureMatrix: new Matrix()\n *         .scale(2, 2)\n *         .rotate(Math.PI / 4),\n *     out: meshGeometry\n * };\n * const geometry:MeshGeometry = buildGeometryFromPath(options);\n * const mesh = new Mesh({\n *     geometry: meshGeometry,\n *     texture: bunnyTexture\n * });\n * ```\n * @category scene\n * @advanced\n */\nexport interface GeometryPathOptions\n{\n    /** the path to build the geometry from */\n    path: GraphicsPath\n    /** a `Matrix` that can be used to modify the texture UVs of the path being built */\n    textureMatrix?: Matrix\n    /** an optional `MeshGeometry` to write too instead of creating a new one*/\n    out?: MeshGeometry\n}\n\n/**\n * When building a mesh, it helps to leverage the simple API we have in `GraphicsPath` as it can often be easier to\n * define the geometry in a more human-readable way. This function takes a `GraphicsPath` and returns a `MeshGeometry`.\n * @example\n * ```ts\n *\n * const path = new GraphicsPath()\n *    .drawRect(0, 0, 100, 100)\n *\n * const geometry:MeshGeometry = buildGeometryFromPath(path);\n *\n * const mesh = new Mesh({geometry});\n *\n * ```\n * You can also pass in a Matrix to transform the uvs as by default you may want to control how they are set up.\n * @param options - either a `GraphicsPath` or `GeometryPathOptions`\n * @returns a new `MeshGeometry` instance build from the path\n * @category scene\n * @advanced\n */\nexport function buildGeometryFromPath(options: GraphicsPath | GeometryPathOptions): MeshGeometry\n{\n    if (options instanceof GraphicsPath)\n    {\n        options = {\n            path: options,\n            textureMatrix: null,\n            out: null,\n        };\n    }\n\n    const vertices: number[] = [];\n    const uvs: number[] = [];\n    const indices: number[] = [];\n\n    // build path collection of polygons and shapes points..\n    const shapePath = options.path.shapePath;\n    const textureMatrix = options.textureMatrix;\n\n    shapePath.shapePrimitives.forEach(({ shape, transform: matrix }) =>\n    {\n        const indexOffset = indices.length;\n        const vertOffset = vertices.length / 2;\n\n        const points: number[] = [];\n\n        const build = shapeBuilders[shape.type];\n\n        build.build(shape, points);\n\n        if (matrix)\n        {\n            transformVertices(points, matrix);\n        }\n\n        build.triangulate(points, vertices, 2, vertOffset, indices, indexOffset);\n\n        const uvsOffset = uvs.length / 2;\n\n        if (textureMatrix)\n        {\n            // todo can prolly do this before calculating uvs..\n            if (matrix)\n            {\n                textureMatrix.append(matrix.clone().invert());\n            }\n\n            buildUvs(vertices, 2, vertOffset, uvs, uvsOffset, 2, (vertices.length / 2) - vertOffset, textureMatrix);\n        }\n        else\n        {\n            buildSimpleUvs(uvs, uvsOffset, 2, (vertices.length / 2) - vertOffset);\n        }\n    });\n\n    const out = options.out;\n\n    if (out)\n    {\n        out.positions = new Float32Array(vertices);\n        out.uvs = new Float32Array(uvs);\n        out.indices = new Uint32Array(indices);\n\n        return out;\n    }\n\n    const geometry = new MeshGeometry({\n        positions: new Float32Array(vertices),\n        uvs: new Float32Array(uvs),\n        indices: new Uint32Array(indices),\n    });\n\n    return geometry;\n}\n", "import { type InstructionSet } from '../../rendering/renderers/shared/instructions/InstructionSet';\nimport { type Renderer } from '../../rendering/renderers/types';\nimport { warn } from '../../utils/logging/warn';\nimport { type Bounds } from '../container/bounds/Bounds';\nimport { Container } from '../container/Container';\n\n// TODO make it clear render layer cannot have 'filters'\n\n/**\n * Options for configuring a RenderLayer. A RenderLayer allows control over rendering order\n * independent of the scene graph hierarchy.\n * @example\n * ```ts\n * // Basic layer with automatic sorting\n * const layer = new RenderLayer({\n *     sortableChildren: true\n * });\n *\n * // Layer with custom sort function\n * const customLayer = new RenderLayer({\n *     sortableChildren: true,\n *     sortFunction: (a, b) => {\n *         // Sort by y position\n *         return a.position.y - b.position.y;\n *     }\n * });\n *\n * // Add objects to layer while maintaining scene graph parent\n * const sprite = new Sprite(texture);\n * container.addChild(sprite);      // Add to scene graph\n * layer.attach(sprite);            // Add to render layer\n *\n * // Manual sorting when needed\n * const manualLayer = new RenderLayer({\n *     sortableChildren: false\n * });\n * manualLayer.attach(sprite1, sprite2);\n * manualLayer.sortRenderLayerChildren(); // Sort manually\n * ```\n * @category scene\n * @standard\n */\nexport interface RenderLayerOptions\n{\n    /**\n     * If true, the layer's children will be sorted by zIndex before rendering.\n     * If false, you can manually sort the children using sortRenderLayerChildren when needed.\n     * @default false\n     * @example\n     * ```ts\n     * const layer = new RenderLayer({\n     *     sortableChildren: true // Automatically sorts children by zIndex\n     * });\n     * ```\n     * @see {@link RenderLayer#sortRenderLayerChildren} For manual sorting\n     * @see {@link RenderLayer#sortFunction} For customizing the sort logic\n     * @see {@link Container#zIndex} For the default sort property\n     */\n    sortableChildren?: boolean;\n\n    /**\n     * Custom sort function to sort layer children. Default sorts by zIndex.\n     * @param a - First container to compare\n     * @param b - Second container to compare\n     * @returns Negative if a should render before b, positive if b should render before a\n     * @example\n     * ```ts\n     * const layer = new RenderLayer({\n     *     sortFunction: (a, b) => {\n     *         // Sort by y position\n     *         return a.position.y - b.position.y;\n     *     }\n     * });\n     * ```\n     * @see {@link RenderLayer#sortableChildren} For enabling automatic sorting\n     * @see {@link RenderLayer#sortRenderLayerChildren} For manual sorting\n     * @see {@link Container#zIndex} For the default sort property\n     * @default (a, b) => a.zIndex - b.zIndex\n     */\n    sortFunction?: (a: Container, b: Container) => number;\n}\n\n/**\n * The RenderLayer API provides a way to control the rendering order of objects independently\n * of their logical parent-child relationships in the scene graph.\n * This allows developers to decouple how objects are transformed\n * (via their logical parent) from how they are rendered on the screen.\n *\n * ### Key Concepts\n *\n * #### RenderLayers Control Rendering Order:\n * - RenderLayers define where in the render stack objects are drawn,\n * but they do not affect an object's transformations (e.g., position, scale, rotation) or logical hierarchy.\n * - RenderLayers can be added anywhere in the scene graph.\n *\n * #### Logical Parenting Remains Unchanged:\n * - Objects still have a logical parent for transformations via addChild.\n * - Assigning an object to a layer does not reparent it.\n *\n * #### Explicit Control:\n * - Developers assign objects to layers using renderLayer.add and remove them using renderLayer.remove.\n * ---\n * ### API Details\n *\n * #### 1. Creating a RenderLayer\n * A RenderLayer is a lightweight object responsible for controlling render order.\n * It has no children or transformations of its own\n * but can be inserted anywhere in the scene graph to define its render position.\n * ```js\n * const layer = new RenderLayer();\n * app.stage.addChild(layer); // Insert the layer into the scene graph\n * ```\n *\n * #### 2. Adding Objects to a Layer\n * Use renderLayer.add to assign an object to a layer.\n * This overrides the object's default render order defined by its logical parent.\n * ```js\n * const rect = new Graphics();\n * container.addChild(rect);    // Add to logical parent\n * layer.attach(rect);      // Control render order via the layer\n * ```\n *\n * #### 3. Removing Objects from a Layer\n * To stop an object from being rendered in the layer, use remove.\n * ```js\n * layer.remove(rect); // Stop rendering rect via the layer\n * ```\n * When an object is removed from its logical parent (removeChild), it is automatically removed from the layer.\n *\n * #### 4. Re-Adding Objects to Layers\n * If an object is re-added to a logical parent, it does not automatically reassign itself to the layer.\n * Developers must explicitly reassign it.\n * ```js\n * container.addChild(rect);    // Logical parent\n * layer.attach(rect);      // Explicitly reassign to the layer\n * ```\n *\n * #### 5. Layer Position in Scene Graph\n * A layer's position in the scene graph determines its render priority relative to other layers and objects.\n * Layers can be inserted anywhere in the scene graph.\n * ```js\n * const backgroundLayer = new RenderLayer();\n * const uiLayer = new RenderLayer();\n *\n * app.stage.addChild(backgroundLayer);\n * app.stage.addChild(world);\n * app.stage.addChild(uiLayer);\n * ```\n * This is a new API and therefore considered experimental at this stage.\n * While the core is pretty robust, there are still a few tricky issues we need to tackle.\n * However, even with the known issues below, we believe this API is incredibly useful!\n *\n * Known issues:\n *  - Interaction may not work as expected since hit testing does not account for the visual render order created by layers.\n *    For example, if an object is visually moved to the front via a layer, hit testing will still use its original position.\n *  - RenderLayers and their children must all belong to the same renderGroup to work correctly\n * @category scene\n * @class\n * @extends null\n * @standard\n */\nexport class RenderLayer extends Container\n{\n    /**\n     * Default options for RenderLayer instances. These options control the sorting behavior\n     * of objects within the render layer.\n     * @example\n     * ```ts\n     * // Create a custom render layer with modified default options\n     * RenderLayer.defaultOptions = {\n     *     sortableChildren: true,\n     *     sortFunction: (a, b) => a.y - b.y // Sort by vertical position\n     * };\n     *\n     * // All new render layers will use these defaults\n     * const layer1 = new RenderLayer();\n     * // layer1 will have sortableChildren = true\n     * ```\n     * @property {boolean} sortableChildren -\n     * @property {Function} sortFunction -\n     * @see {@link RenderLayer} For the main render layer class\n     * @see {@link Container#zIndex} For the default sort property\n     * @see {@link RenderLayer#sortRenderLayerChildren} For manual sorting\n     */\n    public static defaultOptions: RenderLayerOptions = {\n        /** If true, layer children will be automatically sorted each render. Default is false. */\n        sortableChildren: false,\n        /**\n         * Function used to sort layer children.\n         * Default sorts by zIndex. Accepts two Container objects and returns\n         * a number indicating their relative order.\n         * @param a - First container to compare\n         * @param b - Second container to compare\n         * @returns Negative if a should render before b, positive if b should render before a\n         */\n        sortFunction: (a, b) => a.zIndex - b.zIndex,\n    };\n\n    /** Function used to sort layer children if sortableChildren is true */\n    public sortFunction: (a: Container, b: Container) => number;\n\n    /**\n     * The list of objects that this layer is responsible for rendering. Objects in this list maintain\n     * their original parent in the scene graph but are rendered as part of this layer.\n     * @example\n     * ```ts\n     * const layer = new RenderLayer();\n     * const sprite = new Sprite(texture);\n     *\n     * // Add sprite to scene graph for transforms\n     * container.addChild(sprite);\n     *\n     * // Add to layer for render order control\n     * layer.attach(sprite);\n     * console.log(layer.renderLayerChildren.length); // 1\n     *\n     * // Access objects in the layer\n     * layer.renderLayerChildren.forEach(child => {\n     *     console.log('Layer child:', child);\n     * });\n     *\n     * // Check if object is in layer\n     * const isInLayer = layer.renderLayerChildren.includes(sprite);\n     *\n     * // Clear all objects from layer\n     * layer.detachAll();\n     * console.log(layer.renderLayerChildren.length); // 0\n     * ```\n     * @readonly\n     * @see {@link RenderLayer#attach} For adding objects to the layer\n     * @see {@link RenderLayer#detach} For removing objects from the layer\n     * @see {@link RenderLayer#detachAll} For removing all objects from the layer\n     */\n    public renderLayerChildren: Container[] = [];\n\n    /** @internal */\n    public parent: Container | null;\n    /** @internal */\n    public didChange: boolean;\n    /** @internal */\n    public _updateFlags: number;\n    /** @internal */\n    public parentRenderLayer: null;\n    /** @internal */\n    public destroyed: boolean;\n    /** @internal */\n    public layerParentId: string;\n    /**\n     * If true, the layer's children will be sorted by zIndex before rendering.\n     * If false, you can manually sort the children using sortRenderLayerChildren when needed.\n     * @default false\n     * @example\n     * ```ts\n     * const layer = new RenderLayer({\n     *     sortableChildren: true // Automatically sorts children by zIndex\n     * });\n     * ```\n     * @see {@link RenderLayer#sortRenderLayerChildren} For manual sorting\n     * @see {@link RenderLayer#sortFunction} For customizing the sort logic\n     * @see {@link Container#zIndex} For the default sort property\n     */\n    public sortableChildren;\n\n    /**\n     * Creates a new RenderLayer instance\n     * @param options - Configuration options for the RenderLayer\n     * @param {boolean} [options.sortableChildren=false] - If true, layer children will be automatically sorted each render\n     * @param {Function} [options.sortFunction] - Custom function to sort layer children. Default sorts by zIndex\n     */\n    constructor(options: RenderLayerOptions = {})\n    {\n        options = { ...RenderLayer.defaultOptions, ...options };\n\n        super();\n\n        this.sortableChildren = options.sortableChildren;\n        this.sortFunction = options.sortFunction;\n    }\n\n    /**\n     * Adds one or more Containers to this render layer. The Containers will be rendered as part of this layer\n     * while maintaining their original parent in the scene graph.\n     *\n     * If the Container already belongs to a layer, it will be removed from the old layer before being added to this one.\n     * @example\n     * ```ts\n     * const layer = new RenderLayer();\n     * const container = new Container();\n     * const sprite1 = new Sprite(texture1);\n     * const sprite2 = new Sprite(texture2);\n     *\n     * // Add sprites to scene graph for transforms\n     * container.addChild(sprite1, sprite2);\n     *\n     * // Add sprites to layer for render order control\n     * layer.attach(sprite1, sprite2);\n     *\n     * // Add single sprite with type checking\n     * const typedSprite = layer.attach<Sprite>(new Sprite(texture3));\n     * typedSprite.tint = 'red';\n     *\n     * // Automatically removes from previous layer if needed\n     * const otherLayer = new RenderLayer();\n     * otherLayer.attach(sprite1); // Removes from previous layer\n     * ```\n     * @param children - The Container(s) to add to this layer. Can be any Container or array of Containers.\n     * @returns The first child that was added, for method chaining\n     * @see {@link RenderLayer#detach} For removing objects from the layer\n     * @see {@link RenderLayer#detachAll} For removing all objects from the layer\n     * @see {@link Container#addChild} For adding to scene graph hierarchy\n     */\n    public attach<U extends Container[]>(...children: U): U[0]\n    {\n        for (let i = 0; i < children.length; i++)\n        {\n            const child = children[i];\n\n            if (child.parentRenderLayer)\n            {\n                if (child.parentRenderLayer === this) continue;\n\n                child.parentRenderLayer.detach(child);\n            }\n\n            this.renderLayerChildren.push(child);\n\n            child.parentRenderLayer = this;\n\n            const renderGroup = this.renderGroup || this.parentRenderGroup;\n\n            if (renderGroup)\n            {\n                renderGroup.structureDidChange = true;\n            }\n        }\n\n        return children[0];\n    }\n\n    /**\n     * Removes one or more Containers from this render layer. The Containers will maintain their\n     * original parent in the scene graph but will no longer be rendered as part of this layer.\n     * @example\n     * ```ts\n     * const layer = new RenderLayer();\n     * const container = new Container();\n     * const sprite1 = new Sprite(texture1);\n     * const sprite2 = new Sprite(texture2);\n     *\n     * // Add sprites to scene graph and layer\n     * container.addChild(sprite1, sprite2);\n     * layer.attach(sprite1, sprite2);\n     *\n     * // Remove single sprite from layer\n     * layer.detach(sprite1);\n     * // sprite1 is still child of container but not rendered in layer\n     *\n     * // Remove multiple sprites at once\n     * const otherLayer = new RenderLayer();\n     * otherLayer.attach(sprite3, sprite4);\n     * otherLayer.detach(sprite3, sprite4);\n     *\n     * // Type-safe detachment\n     * const typedSprite = layer.detach<Sprite>(spriteInLayer);\n     * typedSprite.texture = newTexture; // TypeScript knows this is a Sprite\n     * ```\n     * @param children - The Container(s) to remove from this layer\n     * @returns The first child that was removed, for method chaining\n     * @see {@link RenderLayer#attach} For adding objects to the layer\n     * @see {@link RenderLayer#detachAll} For removing all objects from the layer\n     * @see {@link Container#removeChild} For removing from scene graph hierarchy\n     */\n    public detach<U extends Container[]>(...children: U): U[0]\n    {\n        for (let i = 0; i < children.length; i++)\n        {\n            const child = children[i];\n\n            const index = this.renderLayerChildren.indexOf(child);\n\n            if (index !== -1)\n            {\n                this.renderLayerChildren.splice(index, 1);\n            }\n\n            child.parentRenderLayer = null;\n\n            const renderGroup = this.renderGroup || this.parentRenderGroup;\n\n            if (renderGroup)\n            {\n                renderGroup.structureDidChange = true;\n            }\n        }\n\n        return children[0];\n    }\n\n    /**\n     * Removes all objects from this render layer. Objects will maintain their\n     * original parent in the scene graph but will no longer be rendered as part of this layer.\n     * @example\n     * ```ts\n     * const layer = new RenderLayer();\n     * const container = new Container();\n     *\n     * // Add multiple sprites to scene graph and layer\n     * const sprites = [\n     *     new Sprite(texture1),\n     *     new Sprite(texture2),\n     *     new Sprite(texture3)\n     * ];\n     *\n     * container.addChild(...sprites);  // Add to scene graph\n     * layer.attach(...sprites);       // Add to render layer\n     *\n     * // Later, remove all sprites from layer at once\n     * layer.detachAll();\n     * console.log(layer.renderLayerChildren.length); // 0\n     * console.log(container.children.length);        // 3 (still in scene graph)\n     * ```\n     * @returns The RenderLayer instance for method chaining\n     * @see {@link RenderLayer#attach} For adding objects to the layer\n     * @see {@link RenderLayer#detach} For removing individual objects\n     * @see {@link Container#removeChildren} For removing from scene graph\n     */\n    public detachAll()\n    {\n        const layerChildren = this.renderLayerChildren;\n\n        for (let i = 0; i < layerChildren.length; i++)\n        {\n            layerChildren[i].parentRenderLayer = null;\n        }\n\n        this.renderLayerChildren.length = 0;\n    }\n\n    /**\n     * Collects renderables for this layer and its children.\n     * This method is called by the renderer to gather all objects that should be rendered in this layer.\n     * @param instructionSet - The set of instructions to collect renderables into.\n     * @param renderer - The renderer that is collecting renderables.\n     * @param _currentLayer - The current render layer being processed.\n     * @internal\n     */\n    public override collectRenderables(instructionSet: InstructionSet, renderer: Renderer, _currentLayer: RenderLayer): void\n    {\n        const layerChildren = this.renderLayerChildren;\n        const length = layerChildren.length;\n\n        if (this.sortableChildren)\n        {\n            this.sortRenderLayerChildren();\n        }\n\n        for (let i = 0; i < length; i++)\n        {\n            if (!layerChildren[i].parent)\n            {\n                // eslint-disable-next-line max-len\n                warn('Container must be added to both layer and scene graph. Layers only handle render order - the scene graph is required for transforms (addChild)',\n                    layerChildren[i]);\n            }\n\n            layerChildren[i].collectRenderables(instructionSet, renderer, this);\n        }\n    }\n\n    /**\n     * Sort the layer's children using the defined sort function. This method allows manual sorting\n     * of layer children and is automatically called during rendering if sortableChildren is true.\n     * @example\n     * ```ts\n     * const layer = new RenderLayer();\n     *\n     * // Add multiple sprites at different depths\n     * const sprite1 = new Sprite(texture);\n     * const sprite2 = new Sprite(texture);\n     * const sprite3 = new Sprite(texture);\n     *\n     * sprite1.zIndex = 3;\n     * sprite2.zIndex = 1;\n     * sprite3.zIndex = 2;\n     *\n     * layer.attach(sprite1, sprite2, sprite3);\n     *\n     * // Manual sorting with default zIndex sort\n     * layer.sortRenderLayerChildren();\n     * // Order is now: sprite2 (1), sprite3 (2), sprite1 (3)\n     *\n     * // Custom sort by y position\n     * layer.sortFunction = (a, b) => a.y - b.y;\n     * layer.sortRenderLayerChildren();\n     *\n     * // Automatic sorting\n     * layer.sortableChildren = true; // Will sort each render\n     * ```\n     * @returns The RenderLayer instance for method chaining\n     * @see {@link RenderLayer#sortableChildren} For enabling automatic sorting\n     * @see {@link RenderLayer#sortFunction} For customizing the sort logic\n     */\n    public sortRenderLayerChildren()\n    {\n        this.renderLayerChildren.sort(this.sortFunction);\n    }\n\n    /**\n     * Recursively calculates the global bounds of this RenderLayer and its children.\n     * @param factorRenderLayers\n     * @param bounds\n     * @param _currentLayer\n     * @internal\n     */\n    public override _getGlobalBoundsRecursive(\n        factorRenderLayers: boolean,\n        bounds: Bounds,\n        _currentLayer: RenderLayer,\n    ): void\n    {\n        if (!factorRenderLayers) return;\n\n        const children = this.renderLayerChildren;\n\n        for (let i = 0; i < children.length; i++)\n        {\n            children[i]._getGlobalBoundsRecursive(true, bounds, this);\n        }\n    }\n\n    /**\n     * @inheritdoc\n     * @internal\n     */\n    public getFastGlobalBounds(factorRenderLayers?: boolean, bounds?: Bounds): Bounds\n    {\n        return super.getFastGlobalBounds(factorRenderLayers, bounds);\n    }\n    /**\n     * This method is not available in RenderLayer.\n     *\n     * Calling this method will throw an error. Please use `RenderLayer.attach()` instead.\n     * @param {...any} _children\n     * @throws {Error} Always throws an error as this method is not available.\n     * @ignore\n     */\n    public override addChild<U extends Container[]>(..._children: U): never\n    {\n        throw new Error(\n            'RenderLayer.addChild() is not available. Please use RenderLayer.attach()',\n        );\n    }\n    /**\n     * This method is not available in RenderLayer.\n     * Calling this method will throw an error. Please use `RenderLayer.detach()` instead.\n     * @param {...any} _children\n     * @throws {Error} Always throws an error as this method is not available.\n     * @ignore\n     */\n    public override removeChild<U extends Container[]>(..._children: U): never\n    {\n        throw new Error(\n            'RenderLayer.removeChild() is not available. Please use RenderLayer.detach()',\n        );\n    }\n    /**\n     * This method is not available in RenderLayer.\n     *\n     * Calling this method will throw an error. Please use `RenderLayer.detach()` instead.\n     * @param {number} [_beginIndex]\n     * @param {number} [_endIndex]\n     * @throws {Error} Always throws an error as this method is not available.\n     * @ignore\n     */\n    public override removeChildren(_beginIndex?: number, _endIndex?: number): never\n    {\n        throw new Error(\n            'RenderLayer.removeChildren() is not available. Please use RenderLayer.detach()',\n        );\n    }\n    /**\n     * This method is not available in RenderLayer.\n     *\n     * Calling this method will throw an error.\n     * @param {number} _index\n     * @throws {Error} Always throws an error as this method is not available.\n     * @ignore\n     */\n    public override removeChildAt(_index: number): never\n    {\n        throw new Error(\n            'RenderLayer.removeChildAt() is not available',\n        );\n    }\n    /**\n     * This method is not available in RenderLayer.\n     *\n     * Calling this method will throw an error.\n     * @param {number} _index\n     * @throws {Error} Always throws an error as this method is not available.\n     * @ignore\n     */\n    public override getChildAt(_index: number): never\n    {\n        throw new Error(\n            'RenderLayer.getChildAt() is not available',\n        );\n    }\n    /**\n     * This method is not available in RenderLayer.\n     *\n     * Calling this method will throw an error.\n     * @param {Container} _child\n     * @param {number} _index\n     * @throws {Error} Always throws an error as this method is not available.\n     * @ignore\n     */\n    public override setChildIndex(_child: Container, _index: number): never\n    {\n        throw new Error(\n            'RenderLayer.setChildIndex() is not available',\n        );\n    }\n    /**\n     * This method is not available in RenderLayer.\n     *\n     * Calling this method will throw an error.\n     * @param {Container} _child\n     * @throws {Error} Always throws an error as this method is not available.\n     * @ignore\n     */\n    public override getChildIndex(_child: Container): never\n    {\n        throw new Error(\n            'RenderLayer.getChildIndex() is not available',\n        );\n    }\n    /**\n     * This method is not available in RenderLayer.\n     *\n     * Calling this method will throw an error.\n     * @param {Container} _child\n     * @param {number} _index\n     * @throws {Error} Always throws an error as this method is not available.\n     * @ignore\n     */\n    public override addChildAt<U extends Container>(_child: U, _index: number): never\n    {\n        throw new Error(\n            'RenderLayer.addChildAt() is not available',\n        );\n    }\n    /**\n     * This method is not available in RenderLayer.\n     *\n     * Calling this method will throw an error.\n     * @param {Container} _child\n     * @param {Container} _child2\n     * @ignore\n     */\n    public override swapChildren<U extends Container>(_child: U, _child2: U): never\n    {\n        throw new Error(\n            'RenderLayer.swapChildren() is not available',\n        );\n    }\n\n    /**\n     * This method is not available in RenderLayer.\n     *\n     * Calling this method will throw an error.\n     * @param _child - The child to reparent\n     * @throws {Error} Always throws an error as this method is not available.\n     * @ignore\n     */\n    public override reparentChild(..._child: Container[]): never\n    {\n        throw new Error('RenderLayer.reparentChild() is not available with the render layer');\n    }\n\n    /**\n     * This method is not available in RenderLayer.\n     *\n     * Calling this method will throw an error.\n     * @param _child - The child to reparent\n     * @param _index - The index to reparent the child to\n     * @throws {Error} Always throws an error as this method is not available.\n     * @ignore\n     */\n    public override reparentChildAt(_child: Container, _index: number): never\n    {\n        throw new Error('RenderLayer.reparentChildAt() is not available with the render layer');\n    }\n}\n", "import { deprecation, v8_0_0 } from '../../utils/logging/deprecation';\nimport { MeshGeometry } from '../mesh/shared/MeshGeometry';\n\nimport type { MeshGeometryOptions } from '../mesh/shared/MeshGeometry';\n\n/**\n * Constructor options used for `PlaneGeometry` instances.\n * ```js\n * const planeGeometry = new PlaneGeometry({\n *    width: 100,\n *    height: 100,\n *    verticesX: 10,\n *    verticesY: 10,\n * });\n * ```\n * @see {@link PlaneGeometry}\n * @category scene\n * @advanced\n */\nexport interface PlaneGeometryOptions\n{\n    /** Width of plane */\n    width?: number;\n    /** Height of plane */\n    height?: number;\n    /** Number of vertices on x-axis */\n    verticesX?: number;\n    /** Number of vertices on y-axis */\n    verticesY?: number;\n}\n\n/**\n * The PlaneGeometry allows you to draw a 2d plane\n * @category scene\n * @advanced\n */\nexport class PlaneGeometry extends MeshGeometry\n{\n    public static defaultOptions: PlaneGeometryOptions & MeshGeometryOptions = {\n        width: 100,\n        height: 100,\n        verticesX: 10,\n        verticesY: 10,\n    };\n\n    /** The number of vertices on x-axis */\n    public verticesX: number;\n    /** The number of vertices on y-axis */\n    public verticesY: number;\n    /** The width of plane */\n    public width: number;\n    /** The height of plane */\n    public height: number;\n\n    /**\n     * @param {PlaneGeometryOptions} options - Options to be applied to plane geometry\n     */\n    constructor(options: PlaneGeometryOptions);\n    /** @deprecated since 8.0.0 */\n    constructor(width?: number, height?: number, verticesX?: number, verticesY?: number);\n    constructor(...args: [PlaneGeometryOptions?] | [number?, number?, number?, number?])\n    {\n        super({});\n\n        let options = args[0] ?? {};\n\n        if (typeof options === 'number')\n        {\n            // #if _DEBUG\n            // eslint-disable-next-line max-len\n            deprecation(v8_0_0, 'PlaneGeometry constructor changed please use { width, height, verticesX, verticesY } instead');\n            // #endif\n\n            options = {\n                width: options,\n                height: args[1],\n                verticesX: args[2],\n                verticesY: args[3],\n            };\n        }\n\n        this.build(options);\n    }\n\n    /**\n     * Refreshes plane coordinates\n     * @param options - Options to be applied to plane geometry\n     */\n    public build(options: PlaneGeometryOptions): void\n    {\n        options = { ...PlaneGeometry.defaultOptions, ...options };\n\n        this.verticesX = this.verticesX ?? options.verticesX;\n        this.verticesY = this.verticesY ?? options.verticesY;\n\n        this.width = this.width ?? options.width;\n        this.height = this.height ?? options.height;\n\n        const total = this.verticesX * this.verticesY;\n        const verts = [];\n        const uvs = [];\n        const indices = [];\n\n        const verticesX = this.verticesX - 1;\n        const verticesY = this.verticesY - 1;\n\n        const sizeX = (this.width) / verticesX;\n        const sizeY = (this.height) / verticesY;\n\n        for (let i = 0; i < total; i++)\n        {\n            const x = (i % this.verticesX);\n            const y = ((i / this.verticesX) | 0);\n\n            verts.push(x * sizeX, y * sizeY);\n            uvs.push(x / verticesX, y / verticesY);\n        }\n\n        const totalSub = verticesX * verticesY;\n\n        for (let i = 0; i < totalSub; i++)\n        {\n            const xpos = i % verticesX;\n            const ypos = (i / verticesX) | 0;\n\n            const value = (ypos * this.verticesX) + xpos;\n            const value2 = (ypos * this.verticesX) + xpos + 1;\n            const value3 = ((ypos + 1) * this.verticesX) + xpos;\n            const value4 = ((ypos + 1) * this.verticesX) + xpos + 1;\n\n            indices.push(value, value2, value3,\n                value2, value4, value3);\n        }\n\n        this.buffers[0].data = new Float32Array(verts);\n        this.buffers[1].data = new Float32Array(uvs);\n        this.indexBuffer.data = new Uint32Array(indices);\n\n        // ensure that the changes are uploaded\n        this.buffers[0].update();\n        this.buffers[1].update();\n        this.indexBuffer.update();\n    }\n}\n", "import type { ArrayFixed } from '../../../utils/types';\nimport type { PlaneGeometry } from '../../mesh-plane/PlaneGeometry';\n\n/**\n * Apply a projective transformation to a plane geometry\n * @param width - The width of the plane\n * @param height - The height of the plane\n * @param geometry - The plane geometry to apply the transformation to\n * @param transformationMatrix - The transformation matrix to apply\n * @internal\n */\nexport function applyProjectiveTransformationToPlane(\n    width: number,\n    height: number,\n    geometry: PlaneGeometry,\n    transformationMatrix: ArrayFixed<number, 9>\n)\n{\n    const buffer = geometry.buffers[0];\n\n    // Access the vertices of the mesh\n    const vertices = buffer.data;\n\n    const { verticesX, verticesY } = geometry;\n\n    const sizeX = (width) / (verticesX - 1);\n    const sizeY = (height) / (verticesY - 1);\n\n    let index = 0;\n\n    const a00 = transformationMatrix[0];\n    const a01 = transformationMatrix[1];\n    const a02 = transformationMatrix[2];\n    const a10 = transformationMatrix[3];\n    const a11 = transformationMatrix[4];\n    const a12 = transformationMatrix[5];\n    const a20 = transformationMatrix[6];\n    const a21 = transformationMatrix[7];\n    const a22 = transformationMatrix[8];\n\n    // Apply the transformation to each vertex\n    for (let i = 0; i < vertices.length; i += 2)\n    {\n        const x = (index % verticesX) * sizeX;\n        const y = ((index / verticesX) | 0) * sizeY;\n\n        const newX = (a00 * x) + (a01 * y) + a02;\n        const newY = (a10 * x) + (a11 * y) + a12;\n        const w = (a20 * x) + (a21 * y) + a22;\n\n        vertices[i] = newX / w;\n        vertices[i + 1] = newY / w;\n\n        index++;\n    }\n\n    // Update the mesh geometry to reflect the changes\n    buffer.update();\n}\n", "import type { ArrayFixed } from '../../../utils/types';\n\ntype Matrix3x3 = ArrayFixed<number, 9>;\ntype Vector3 = ArrayFixed<number, 3>;\n\nfunction computeAdjugate(out: Matrix3x3, matrix: Matrix3x3): Matrix3x3\n{\n    const a00 = matrix[0];\n    const a01 = matrix[1];\n    const a02 = matrix[2];\n    const a10 = matrix[3];\n    const a11 = matrix[4];\n    const a12 = matrix[5];\n    const a20 = matrix[6];\n    const a21 = matrix[7];\n    const a22 = matrix[8];\n\n    out[0] = (a11 * a22) - (a12 * a21);\n    out[1] = (a02 * a21) - (a01 * a22);\n    out[2] = (a01 * a12) - (a02 * a11);\n    out[3] = (a12 * a20) - (a10 * a22);\n    out[4] = (a00 * a22) - (a02 * a20);\n    out[5] = (a02 * a10) - (a00 * a12);\n    out[6] = (a10 * a21) - (a11 * a20);\n    out[7] = (a01 * a20) - (a00 * a21);\n    out[8] = (a00 * a11) - (a01 * a10);\n\n    return out;\n}\n\nfunction multiplyMatrix3x3(out: Matrix3x3, a: Matrix3x3, b: Matrix3x3)\n{\n    const a00 = a[0];\n    const a01 = a[1];\n    const a02 = a[2];\n    const a10 = a[3];\n    const a11 = a[4];\n    const a12 = a[5];\n    const a20 = a[6];\n    const a21 = a[7];\n    const a22 = a[8];\n\n    const b00 = b[0];\n    const b01 = b[1];\n    const b02 = b[2];\n    const b10 = b[3];\n    const b11 = b[4];\n    const b12 = b[5];\n    const b20 = b[6];\n    const b21 = b[7];\n    const b22 = b[8];\n\n    out[0] = (b00 * a00) + (b01 * a10) + (b02 * a20);\n    out[1] = (b00 * a01) + (b01 * a11) + (b02 * a21);\n    out[2] = (b00 * a02) + (b01 * a12) + (b02 * a22);\n\n    out[3] = (b10 * a00) + (b11 * a10) + (b12 * a20);\n    out[4] = (b10 * a01) + (b11 * a11) + (b12 * a21);\n    out[5] = (b10 * a02) + (b11 * a12) + (b12 * a22);\n\n    out[6] = (b20 * a00) + (b21 * a10) + (b22 * a20);\n    out[7] = (b20 * a01) + (b21 * a11) + (b22 * a21);\n    out[8] = (b20 * a02) + (b21 * a12) + (b22 * a22);\n\n    return out;\n}\n\nfunction multiplyMatrixAndVector(out: Vector3, m: Matrix3x3, v: Vector3): Vector3\n{\n    const x = v[0];\n    const y = v[1];\n    const z = v[2];\n\n    out[0] = (m[0] * x) + (m[1] * y) + (m[2] * z);\n    out[1] = (m[3] * x) + (m[4] * y) + (m[5] * z);\n    out[2] = (m[6] * x) + (m[7] * y) + (m[8] * z);\n\n    return out;\n}\n\n//\nconst tempMatrix: Matrix3x3 = [0, 0, 0, 0, 0, 0, 0, 0, 0];\nconst tempVec: Vector3 = [0, 0, 0];\nconst tempVec2: Vector3 = [0, 0, 0];\n\nfunction generateBasisToPointsMatrix(\n    out: Matrix3x3,\n    x1: number, y1: number,\n    x2: number, y2: number,\n    x3: number, y3: number,\n    x4: number, y4: number\n): Matrix3x3\n{\n    const m: Matrix3x3 = tempMatrix;\n\n    m[0] = x1;\n    m[1] = x2;\n    m[2] = x3;\n    m[3] = y1;\n    m[4] = y2;\n    m[5] = y3;\n    m[6] = 1;\n    m[7] = 1;\n    m[8] = 1;\n\n    const adjugateM: Matrix3x3 = computeAdjugate(\n        out, // reusing out as adjugateM is only used once\n        m\n    );\n\n    tempVec2[0] = x4;\n    tempVec2[1] = y4;\n    tempVec2[2] = 1;\n\n    const v: Vector3 = multiplyMatrixAndVector(\n        tempVec,\n        adjugateM,\n        tempVec2,\n    );\n\n    const diagonalMatrix = out; // we can reuse the out matrix as the diagonal matrix is only used once\n\n    out[0] = v[0];\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[4] = v[1];\n    out[5] = 0;\n    out[6] = 0;\n    out[7] = 0;\n    out[8] = v[2];\n\n    return multiplyMatrix3x3(out, diagonalMatrix, m);\n}\n\nconst tempSourceMatrix: Matrix3x3 = [0, 0, 0, 0, 0, 0, 0, 0, 0];\nconst tempDestinationMatrix: Matrix3x3 = [0, 0, 0, 0, 0, 0, 0, 0, 0];\n\n/**\n * Compute a 2D projection matrix\n * @param out - The matrix to store the result in\n * @param x1s - The x coordinate of the first source point\n * @param y1s - The y coordinate of the first source point\n * @param x1d - The x coordinate of the first destination point\n * @param y1d - The y coordinate of the first destination point\n * @param x2s - The x coordinate of the second source point\n * @param y2s - The y coordinate of the second source point\n * @param x2d - The x coordinate of the second destination point\n * @param y2d - The y coordinate of the second destination point\n * @param x3s - The x coordinate of the third source point\n * @param y3s - The y coordinate of the third source point\n * @param x3d - The x coordinate of the third destination point\n * @param y3d - The y coordinate of the third destination point\n * @param x4s - The x coordinate of the fourth source point\n * @param y4s - The y coordinate of the fourth source point\n * @param x4d - The x coordinate of the fourth destination point\n * @param y4d - The y coordinate of the fourth destination point\n * @returns - The computed 2D projection matrix\n * @private\n */\n// eslint-disable-next-line max-params\nexport function compute2DProjection(\n    out: Matrix3x3,\n    x1s: number, y1s: number, x1d: number, y1d: number,\n    x2s: number, y2s: number, x2d: number, y2d: number,\n    x3s: number, y3s: number, x3d: number, y3d: number,\n    x4s: number, y4s: number, x4d: number, y4d: number\n): Matrix3x3\n{\n    const sourceMatrix = generateBasisToPointsMatrix(\n        tempSourceMatrix,\n        x1s, y1s, x2s, y2s, x3s, y3s, x4s, y4s\n    );\n\n    const destinationMatrix = generateBasisToPointsMatrix(\n        tempDestinationMatrix,\n        x1d, y1d, x2d, y2d, x3d, y3d, x4d, y4d\n    );\n\n    return multiplyMatrix3x3(\n        out,\n        computeAdjugate(sourceMatrix, sourceMatrix),\n        destinationMatrix\n    );\n}\n", "import { PlaneGeometry } from '../mesh-plane/PlaneGeometry';\nimport { applyProjectiveTransformationToPlane } from './utils/applyProjectiveTransformationToPlane';\nimport { compute2DProjection } from './utils/compute2DProjections';\n\nimport type { ArrayFixed } from '../../utils/types';\nimport type { PlaneGeometryOptions } from '../mesh-plane/PlaneGeometry';\n\n/**\n * Constructor options used for `PerspectivePlaneGeometry` instances.\n * @category scene\n * @advanced\n */\nexport interface PerspectivePlaneGeometryOptions extends PlaneGeometryOptions\n{\n    /** The width of the plane */\n    width: number;\n    /** The height of the plane */\n    height: number;\n}\n\n/**\n * A PerspectivePlaneGeometry allows you to draw a 2d plane with perspective. Where ever you move the corners\n * the texture will be projected to look like it is in 3d space. Great for mapping a 2D mesh into a 3D scene.\n *\n * IMPORTANT: This is not a full 3D mesh, it is a 2D mesh with a perspective projection applied to it :)\n *\n * ```js\n * const perspectivePlaneGeometry = new PerspectivePlaneGeometry({\n *  width: 100,\n *  height: 100,\n *  verticesX: 10,\n *  verticesY: 10,\n * });\n * ```\n * @see {@link PerspectivePlaneGeometry}\n * @category scene\n * @advanced\n */\nexport class PerspectivePlaneGeometry extends PlaneGeometry\n{\n    /** The corner points of the quad you can modify these directly, if you do make sure to call `updateProjection` */\n    public corners: [number, number, number, number, number, number, number, number];\n    private readonly _projectionMatrix: ArrayFixed<number, 9> = [0, 0, 0, 0, 0, 0, 0, 0, 0];\n\n    /**\n     * @param options - Options to be applied to MeshPlane\n     * @param options.width - The width of the plane\n     * @param options.height - The height of the plane\n     * @param options.verticesX - The amount of vertices on the x axis\n     * @param options.verticesY - The amount of vertices on the y axis\n     */\n    constructor(options: PerspectivePlaneGeometryOptions)\n    {\n        super(options);\n\n        const { width, height } = options;\n\n        this.corners = [0, 0, width, 0, width, height, 0, height];\n    }\n\n    /**\n     * Will set the corners of the quad to the given coordinates\n     * Calculating the perspective so it looks correct!\n     * @param x0 - x coordinate of the first corner\n     * @param y0 - y coordinate of the first corner\n     * @param x1 - x coordinate of the second corner\n     * @param y1 - y coordinate of the second corner\n     * @param x2 - x coordinate of the third corner\n     * @param y2 - y coordinate of the third corner\n     * @param x3 - x coordinate of the fourth corner\n     * @param y3 - y coordinate of the fourth corner\n     */\n    public setCorners(x0: number, y0: number, x1: number, y1: number, x2: number, y2: number, x3: number, y3: number)\n    {\n        const corners = this.corners;\n\n        corners[0] = x0;\n        corners[1] = y0;\n        corners[2] = x1;\n        corners[3] = y1;\n        corners[4] = x2;\n        corners[5] = y2;\n        corners[6] = x3;\n        corners[7] = y3;\n\n        this.updateProjection();\n    }\n\n    /** Update the projection matrix based on the corners */\n    public updateProjection()\n    {\n        const { width, height } = this;\n        const corners = this.corners;\n\n        const projectionMatrix = compute2DProjection(\n            this._projectionMatrix,\n            0, 0, // top-left source\n            corners[0], corners[1], // top-left dest\n            width, 0, // top-right source\n            corners[2], corners[3], // top-right dest\n            width, height, // bottom-right source\n            corners[4], corners[5], // bottom-right dest\n            0, height, // bottom-left source\n            corners[6], corners[7] // bottom-left dest\n        );\n\n        applyProjectiveTransformationToPlane(\n            width,\n            height,\n            this,\n            projectionMatrix\n        );\n    }\n}\n\n", "import { Texture } from '../../rendering/renderers/shared/texture/Texture';\nimport { definedProps } from '../container/utils/definedProps';\nimport { Mesh } from '../mesh/shared/Mesh';\nimport { PerspectivePlaneGeometry } from './PerspectivePlaneGeometry';\n\nimport type { MeshPlaneOptions } from '../mesh-plane/MeshPlane';\n\n/**\n * Constructor options used for `PerspectiveMesh` instances. Defines the geometry and appearance\n * of a 2D mesh with perspective projection.\n * @example\n * ```ts\n * // Create a perspective mesh with a texture\n * const mesh = new PerspectiveMesh({\n *     texture: Texture.from('myImage.png'),\n *     verticesX: 20,\n *     verticesY: 20,\n *     // Define corners clockwise from top-left\n *     x0: 0,   y0: 0,    // Top-left\n *     x1: 100, y1: 20,   // Top-right (raised)\n *     x2: 100, y2: 100,  // Bottom-right\n *     x3: 0,   y3: 80    // Bottom-left (raised)\n * });\n *\n * // Create a skewed perspective\n * const skewedMesh = new PerspectiveMesh({\n *     texture: Texture.from('background.jpg'),\n *     verticesX: 15,     // More vertices for smoother perspective\n *     verticesY: 15,\n *     x0: 0,   y0: 30,   // Shifted top-left\n *     x1: 128, y1: 0,    // Raised top-right\n *     x2: 128, y2: 128,  // Normal bottom-right\n *     x3: 0,   y3: 98    // Shifted bottom-left\n * });\n * ```\n * @extends MeshPlaneOptions\n * @see {@link PerspectiveMesh} For the mesh implementation\n * @see {@link PerspectivePlaneGeometry} For the underlying geometry\n * @category scene\n * @standard\n * @noInheritDoc\n */\nexport interface PerspectivePlaneOptions extends MeshPlaneOptions\n{\n    /** The x-coordinate of the top-left corner */\n    x0?: number,\n    /** The y-coordinate of the top-left corner */\n    y0?: number,\n    /** The x-coordinate of the top-right corner */\n    x1?: number,\n    /** The y-coordinate of the top-right corner */\n    y1?: number,\n    /** The x-coordinate of the bottom-right corner */\n    x2?: number,\n    /** The y-coordinate of the bottom-right corner */\n    y2?: number,\n    /** The x-coordinate of the bottom-left corner */\n    x3?: number,\n    /** The y-coordinate of the bottom-left corner */\n    y3?: number\n}\n\n/**\n * A perspective mesh that allows you to draw a 2d plane with perspective. Where ever you move the corners\n * the texture will be projected to look like it is in 3d space. Great for mapping a 2D mesh into a 3D scene.\n *\n * The calculations is done at the uv level. This means that the more vertices you have the more smooth\n * the perspective will be. If you have a low amount of vertices you may see the texture stretch. Too many vertices\n * could be slower. It is a balance between performance and quality! We leave that to you to decide.\n *\n * > [!IMPORTANT] This is not a full 3D mesh, it is a 2D mesh with a perspective projection applied to it.\n * @category scene\n * @standard\n * @see {@link PerspectiveMesh}\n * @example\n * ```ts\n * // Create a perspective mesh with a texture\n * const mesh = new PerspectiveMesh({\n *     texture: Texture.from('myImage.png'),\n *     verticesX: 20,\n *     verticesY: 20,\n *     // Define corners clockwise from top-left\n *     x0: 0,   y0: 0,    // Top-left\n *     x1: 100, y1: 20,   // Top-right (raised)\n *     x2: 100, y2: 100,  // Bottom-right\n *     x3: 0,   y3: 80    // Bottom-left (raised)\n * });\n * ```\n */\nexport class PerspectiveMesh extends Mesh<PerspectivePlaneGeometry>\n{\n    /**\n     * Default options for creating a PerspectiveMesh instance.\n     *\n     * Creates a 100x100 pixel square mesh\n     * with a white texture and 10x10 vertex grid for the perspective calculations.\n     * @example\n     * ```ts\n     * // Change defaults globally\n     * PerspectiveMesh.defaultOptions = {\n     *     ...PerspectiveMesh.defaultOptions,\n     *     verticesX: 15,\n     *     verticesY: 15,\n     *     // Move top edge up for default skew\n     *     y0: -20,\n     *     y1: -20\n     * };\n     * ```\n     * @see {@link PerspectivePlaneOptions} For all available options\n     * @see {@link PerspectivePlaneGeometry} For how vertices affect perspective quality\n     */\n    public static defaultOptions: PerspectivePlaneOptions = {\n        texture: Texture.WHITE,\n        verticesX: 10,\n        verticesY: 10,\n        x0: 0,\n        y0: 0,\n        x1: 100,\n        y1: 0,\n        x2: 100,\n        y2: 100,\n        x3: 0,\n        y3: 100\n    };\n\n    /**\n     * @param options - Options to be applied to PerspectiveMesh\n     */\n    constructor(options: PerspectivePlaneOptions)\n    {\n        options = { ...PerspectiveMesh.defaultOptions, ...options };\n\n        const { texture, verticesX, verticesY, ...rest } = options;\n        const planeGeometry = new PerspectivePlaneGeometry(definedProps({\n            width: texture.width,\n            height: texture.height,\n            verticesX,\n            verticesY,\n        }));\n\n        super(definedProps({ ...rest, geometry: planeGeometry }));\n\n        this._texture = texture;\n\n        this.geometry.setCorners(\n            options.x0, options.y0,\n            options.x1, options.y1,\n            options.x2, options.y2,\n            options.x3, options.y3\n        );\n    }\n\n    /** Update the geometry when the texture is updated */\n    protected textureUpdated(): void\n    {\n        const geometry: PerspectivePlaneGeometry = this.geometry as any;\n\n        if (!geometry) return;\n\n        const { width, height } = this.texture;\n\n        if (geometry.width !== width || geometry.height !== height)\n        {\n            geometry.width = width;\n            geometry.height = height;\n            geometry.updateProjection();\n        }\n    }\n\n    set texture(value: Texture)\n    {\n        if (this._texture === value) return;\n\n        super.texture = value;\n\n        this.textureUpdated();\n    }\n\n    /**\n     * The texture that the mesh uses for rendering. When changed, automatically updates\n     * the geometry to match the new texture dimensions.\n     * @example\n     * ```ts\n     * const mesh = new PerspectiveMesh({\n     *     texture: Texture.from('initial.png'),\n     * });\n     *\n     * // Update texture and maintain perspective\n     * mesh.texture = Texture.from('newImage.png');\n     * ```\n     * @see {@link Texture} For texture creation and management\n     * @see {@link PerspectiveMesh#setCorners} For adjusting the mesh perspective\n     */\n    get texture(): Texture\n    {\n        return this._texture;\n    }\n\n    /**\n     * Sets the corners of the mesh to create a perspective transformation. The corners should be\n     * specified in clockwise order starting from the top-left.\n     *\n     * The mesh automatically recalculates the UV coordinates to create the perspective effect.\n     * @example\n     * ```ts\n     * const mesh = new PerspectiveMesh({\n     *     texture: Texture.from('myImage.png'),\n     * });\n     *\n     * // Create a basic perspective tilt\n     * mesh.setCorners(\n     *     0, 0,      // Top-left\n     *     100, 20,   // Top-right (raised)\n     *     100, 100,  // Bottom-right\n     *     0, 80      // Bottom-left\n     * );\n     *\n     * // Create a skewed billboard effect\n     * mesh.setCorners(\n     *     0, 30,     // Top-left (shifted down)\n     *     128, 0,    // Top-right (raised)\n     *     128, 128,  // Bottom-right\n     *     0, 98      // Bottom-left (shifted up)\n     * );\n     *\n     * // Animate perspective\n     * app.ticker.add((delta) => {\n     *     const time = performance.now() / 1000;\n     *     const wave = Math.sin(time) * 20;\n     *\n     *     mesh.setCorners(\n     *         0, wave,      // Top-left\n     *         100, -wave,   // Top-right\n     *         100, 100,     // Bottom-right\n     *         0, 100        // Bottom-left\n     *     );\n     * });\n     * ```\n     * @param x0 - x-coordinate of the top-left corner\n     * @param y0 - y-coordinate of the top-left corner\n     * @param x1 - x-coordinate of the top-right corner\n     * @param y1 - y-coordinate of the top-right corner\n     * @param x2 - x-coordinate of the bottom-right corner\n     * @param y2 - y-coordinate of the bottom-right corner\n     * @param x3 - x-coordinate of the bottom-left corner\n     * @param y3 - y-coordinate of the bottom-left corner\n     * @returns The PerspectiveMesh instance for method chaining\n     * @see {@link PerspectivePlaneGeometry} For the underlying geometry calculations\n     */\n    public setCorners(x0: number, y0: number, x1: number, y1: number, x2: number, y2: number, x3: number, y3: number)\n    {\n        this.geometry.setCorners(x0, y0, x1, y1, x2, y2, x3, y3);\n    }\n}\n", "import { definedProps } from '../container/utils/definedProps';\nimport { Mesh } from '../mesh/shared/Mesh';\nimport { PlaneGeometry } from './PlaneGeometry';\n\nimport type { Texture } from '../../rendering/renderers/shared/texture/Texture';\nimport type { DestroyOptions } from '../container/destroyTypes';\nimport type { MeshOptions } from '../mesh/shared/Mesh';\n\n/**\n * Constructor options used for `MeshPlane` instances. Defines how a texture is mapped\n * onto a plane with configurable vertex density.\n * @example\n * ```ts\n * // Basic plane with default vertex density\n * const plane = new MeshPlane({\n *     texture: Assets.get('background.png')\n * });\n *\n * // High-detail plane for complex deformations\n * const detailedPlane = new MeshPlane({\n *     texture: Assets.get('landscape.jpg'),\n *     verticesX: 20,\n *     verticesY: 20\n * });\n * ```\n * @see {@link MeshPlane} For the mesh implementation\n * @see {@link PlaneGeometry} For the underlying geometry\n * @category scene\n * @standard\n * @noInheritDoc\n */\nexport interface MeshPlaneOptions extends Omit<MeshOptions, 'geometry'>\n{\n    /** The texture to use on the plane. */\n    texture: Texture;\n    /**\n     * Number of vertices along the X axis. More vertices allow for more detailed deformations.\n     * @default 10\n     */\n    verticesX?: number;\n    /**\n     * Number of vertices along the Y axis. More vertices allow for more detailed deformations.\n     * @default 10\n     */\n    verticesY?: number;\n}\n\n/**\n * A mesh that renders a texture mapped to a plane with configurable vertex density.\n * Useful for creating distortion effects, bent surfaces, and animated deformations.\n * @example\n * ```ts\n * // Create a basic plane\n * const plane = new MeshPlane({\n *     texture: Assets.get('background.png'),\n *     verticesX: 10,\n *     verticesY: 10\n * });\n *\n * // Get the buffer for vertex positions.\n * const { buffer } = plane.geometry.getAttribute('aPosition');\n *\n * // Listen for animate update\n * let timer = 0;\n *\n * app.ticker.add(() =>\n * {\n *     // Randomize the vertices positions a bit to create movement.\n *     for (let i = 0; i < buffer.data.length; i++)\n *     {\n *         buffer.data[i] += Math.sin(timer / 10 + i) * 0.5;\n *     }\n *     buffer.update();\n *     timer++;\n * });\n *\n * // Change texture dynamically\n * plane.texture = Assets.get('newTexture.png');\n * ```\n * @category scene\n * @standard\n */\nexport class MeshPlane extends Mesh\n{\n    /**\n     * Controls whether the mesh geometry automatically updates when the texture dimensions change.\n     * When true, the mesh will resize to match any texture updates. When false, the mesh maintains\n     * its original dimensions regardless of texture changes.\n     * @example\n     * ```ts\n     * // Create a plane that auto-resizes with texture changes\n     * const plane = new MeshPlane({\n     *     texture: Assets.get('small.png'),\n     *     verticesX: 10,\n     *     verticesY: 10\n     * });\n     *\n     * // Plane will automatically resize to match new texture\n     * plane.texture = Assets.get('large.png');\n     *\n     * // Disable auto-resizing to maintain original dimensions\n     * plane.autoResize = false;\n     *\n     * // Plane keeps its size even with new texture\n     * plane.texture = Assets.get('different.png');\n     *\n     * // Manually update geometry if needed\n     * const geometry = plane.geometry as PlaneGeometry;\n     * geometry.width = plane.texture.width;\n     * geometry.height = plane.texture.height;\n     * geometry.build();\n     * ```\n     * @default true\n     * @see {@link MeshPlane#texture} For changing the texture\n     * @see {@link PlaneGeometry} For manual geometry updates\n     */\n    public autoResize: boolean;\n    protected _textureID: number;\n\n    /**\n     * @param options - Options to be applied to MeshPlane\n     */\n    constructor(options: MeshPlaneOptions)\n    {\n        const { texture, verticesX, verticesY, ...rest } = options;\n        const planeGeometry = new PlaneGeometry(definedProps({\n            width: texture.width,\n            height: texture.height,\n            verticesX,\n            verticesY,\n        }));\n\n        super(definedProps({ ...rest, geometry: planeGeometry, texture }));\n\n        // lets call the setter to ensure all necessary updates are performed\n        this.texture = texture;\n        this.autoResize = true;\n    }\n\n    /**\n     * Method used for overrides, to do something in case texture frame was changed.\n     * Meshes based on plane can override it and change more details based on texture.\n     * @internal\n     */\n    public textureUpdated(): void\n    {\n        const geometry: PlaneGeometry = this.geometry as any;\n        const { width, height } = this.texture;\n\n        if (this.autoResize && (geometry.width !== width || geometry.height !== height))\n        {\n            geometry.width = width;\n            geometry.height = height;\n            geometry.build({});\n        }\n    }\n\n    set texture(value: Texture)\n    {\n        this._texture?.off('update', this.textureUpdated, this);\n\n        super.texture = value;\n\n        value.on('update', this.textureUpdated, this);\n\n        this.textureUpdated();\n    }\n\n    /**\n     * The texture that the mesh plane uses for rendering. When changed, automatically updates\n     * geometry dimensions if autoResize is true and manages texture update event listeners.\n     * @example\n     * ```ts\n     * const plane = new MeshPlane({\n     *     texture: Assets.get('initial.png'),\n     *     verticesX: 10,\n     *     verticesY: 10\n     * });\n     *\n     * // Update texture and auto-resize geometry\n     * plane.texture = Assets.get('larger.png');\n     * ```\n     * @see {@link MeshPlane#autoResize} For controlling automatic geometry updates\n     * @see {@link PlaneGeometry} For manual geometry updates\n     * @see {@link Texture} For texture creation and management\n     */\n    get texture(): Texture\n    {\n        return this._texture;\n    }\n\n    /**\n     * Destroys this sprite renderable and optionally its texture.\n     * @param options - Options parameter. A boolean will act as if all options\n     *  have been set to that value\n     * @example\n     * meshPlane.destroy();\n     * meshPlane.destroy(true);\n     * meshPlane.destroy({ texture: true, textureSource: true });\n     */\n    public destroy(options?: DestroyOptions): void\n    {\n        this.texture.off('update', this.textureUpdated, this);\n        super.destroy(options);\n    }\n}\n", "import { MeshGeometry } from '../mesh/shared/MeshGeometry';\n\nimport type { PointData } from '../../maths/point/PointData';\nimport type { MeshGeometryOptions } from '../mesh/shared/MeshGeometry';\n\n/**\n * Constructor options used for `RopeGeometry` instances.\n * ```js\n * const ropeGeometry = new RopeGeometry({\n *    points: [new Point(0, 0), new Point(100, 0)],\n *    width: 10,\n *    textureScale: 0,\n * });\n * ```\n * @see {@link RopeGeometry}\n * @category scene\n * @advanced\n */\nexport interface RopeGeometryOptions\n{\n    /** The width (i.e., thickness) of the rope. */\n    width?: number;\n    /** An array of points that determine the rope. */\n    points?: PointData[];\n    /**\n     * Rope texture scale, if zero then the rope texture is stretched.\n     * By default the rope texture will be stretched to match\n     * rope length. If textureScale is positive this value will be treated as a scaling\n     * factor and the texture will preserve its aspect ratio instead. To create a tiling rope\n     * set baseTexture.wrapMode to 'repeat' and use a power of two texture,\n     * then set textureScale=1 to keep the original texture pixel size.\n     * In order to reduce alpha channel artifacts provide a larger texture and downsample -\n     * i.e. set textureScale=0.5 to scale it down twice.\n     */\n    textureScale?: number;\n}\n\n/**\n * RopeGeometry allows you to draw a geometry across several points and then manipulate these points.\n * @example\n * import { Point, RopeGeometry } from 'pixi.js';\n *\n * for (let i = 0; i < 20; i++) {\n *     points.push(new Point(i * 50, 0));\n * };\n * const rope = new RopeGeometry(100, points);\n * @category scene\n * @advanced\n */\nexport class RopeGeometry extends MeshGeometry\n{\n    /** Default options for RopeGeometry constructor. */\n    public static defaultOptions: RopeGeometryOptions & MeshGeometryOptions = {\n        /** The width (i.e., thickness) of the rope. */\n        width: 200,\n        /** An array of points that determine the rope. */\n        points: [],\n        /** Rope texture scale, if zero then the rope texture is stretched. */\n        textureScale: 0,\n    };\n\n    /** An array of points that determine the rope. */\n    public points: PointData[];\n\n    /** Rope texture scale, if zero then the rope texture is stretched. */\n    public readonly textureScale: number;\n\n    /**\n     * The width (i.e., thickness) of the rope.\n     * @readonly\n     * @internal\n     */\n    public _width: number;\n\n    /**\n     * @param options - Options to be applied to rope geometry\n     */\n    constructor(options: RopeGeometryOptions)\n    {\n        const { width, points, textureScale } = { ...RopeGeometry.defaultOptions, ...options };\n\n        super({\n            positions: new Float32Array(points.length * 4),\n            uvs: new Float32Array(points.length * 4),\n            indices: new Uint32Array((points.length - 1) * 6),\n        });\n\n        this.points = points;\n        this._width = width;\n        this.textureScale = textureScale;\n\n        this._build();\n    }\n\n    /**\n     * The width (i.e., thickness) of the rope.\n     * @readonly\n     */\n    get width(): number\n    {\n        return this._width;\n    }\n\n    /** Refreshes Rope indices and uvs */\n    private _build(): void\n    {\n        const points = this.points;\n\n        if (!points) return;\n\n        const vertexBuffer = this.getBuffer('aPosition');\n        const uvBuffer = this.getBuffer('aUV');\n        const indexBuffer = this.getIndex();\n\n        // if too little points, or texture hasn't got UVs set yet just move on.\n        if (points.length < 1)\n        {\n            return;\n        }\n\n        // if the number of points has changed we will need to recreate the arraybuffers\n        if (vertexBuffer.data.length / 4 !== points.length)\n        {\n            vertexBuffer.data = new Float32Array(points.length * 4);\n            uvBuffer.data = new Float32Array(points.length * 4);\n            indexBuffer.data = new Uint16Array((points.length - 1) * 6);\n        }\n\n        const uvs = uvBuffer.data;\n        const indices = indexBuffer.data;\n\n        uvs[0] = 0;\n        uvs[1] = 0;\n        uvs[2] = 0;\n        uvs[3] = 1;\n\n        let amount = 0;\n        let prev = points[0];\n        const textureWidth = this._width * this.textureScale;\n        const total = points.length; // - 1;\n\n        for (let i = 0; i < total; i++)\n        {\n            // time to do some smart drawing!\n            const index = i * 4;\n\n            if (this.textureScale > 0)\n            {\n                // calculate pixel distance from previous point\n                const dx = prev.x - points[i].x;\n                const dy = prev.y - points[i].y;\n                const distance = Math.sqrt((dx * dx) + (dy * dy));\n\n                prev = points[i];\n                amount += distance / textureWidth;\n            }\n            else\n            {\n                // stretch texture\n                amount = i / (total - 1);\n            }\n\n            uvs[index] = amount;\n            uvs[index + 1] = 0;\n\n            uvs[index + 2] = amount;\n            uvs[index + 3] = 1;\n        }\n\n        let indexCount = 0;\n\n        for (let i = 0; i < total - 1; i++)\n        {\n            const index = i * 2;\n\n            indices[indexCount++] = index;\n            indices[indexCount++] = index + 1;\n            indices[indexCount++] = index + 2;\n\n            indices[indexCount++] = index + 2;\n            indices[indexCount++] = index + 1;\n            indices[indexCount++] = index + 3;\n        }\n\n        // ensure that the changes are uploaded\n        uvBuffer.update();\n        indexBuffer.update();\n\n        this.updateVertices();\n    }\n\n    /** refreshes vertices of Rope mesh */\n    public updateVertices(): void\n    {\n        const points = this.points;\n\n        if (points.length < 1)\n        {\n            return;\n        }\n\n        let lastPoint = points[0];\n        let nextPoint;\n        let perpX = 0;\n        let perpY = 0;\n\n        const vertices = this.buffers[0].data;\n        const total = points.length;\n        const halfWidth = this.textureScale > 0 ? this.textureScale * this._width / 2 : this._width / 2;\n\n        for (let i = 0; i < total; i++)\n        {\n            const point = points[i];\n            const index = i * 4;\n\n            if (i < points.length - 1)\n            {\n                nextPoint = points[i + 1];\n            }\n            else\n            {\n                nextPoint = point;\n            }\n\n            perpY = -(nextPoint.x - lastPoint.x);\n            perpX = nextPoint.y - lastPoint.y;\n\n            let ratio = (1 - (i / (total - 1))) * 10;\n\n            if (ratio > 1)\n            {\n                ratio = 1;\n            }\n\n            const perpLength = Math.sqrt((perpX * perpX) + (perpY * perpY));\n\n            if (perpLength < 1e-6)\n            {\n                perpX = 0;\n                perpY = 0;\n            }\n            else\n            {\n                perpX /= perpLength;\n                perpY /= perpLength;\n\n                perpX *= halfWidth;\n                perpY *= halfWidth;\n            }\n\n            vertices[index] = point.x + perpX;\n            vertices[index + 1] = point.y + perpY;\n            vertices[index + 2] = point.x - perpX;\n            vertices[index + 3] = point.y - perpY;\n\n            lastPoint = point;\n        }\n\n        this.buffers[0].update();\n    }\n\n    /** Refreshes Rope indices and uvs */\n    public update(): void\n    {\n        if (this.textureScale > 0)\n        {\n            this._build(); // we need to update UVs\n        }\n        else\n        {\n            this.updateVertices();\n        }\n    }\n}\n", "import { definedProps } from '../container/utils/definedProps';\nimport { Mesh } from '../mesh/shared/Mesh';\nimport { RopeGeometry } from './RopeGeometry';\n\nimport type { PointData } from '../../maths/point/PointData';\nimport type { Texture } from '../../rendering/renderers/shared/texture/Texture';\nimport type { MeshOptions } from '../mesh/shared/Mesh';\n\n/**\n * Constructor options used for `MeshRope` instances. Allows configuration of a rope-like mesh\n * that follows a series of points with a texture applied.\n * @example\n * ```ts\n * // Create a basic rope with two points\n * const rope = new MeshRope({\n *     texture: Texture.from('snake.png'),\n *     points: [\n *         new Point(0, 0),\n *         new Point(100, 0)\n *     ]\n * });\n *\n * // Create a rope with high-quality texture scaling\n * const highQualityRope = new MeshRope({\n *     texture: Texture.from('rope-hd.png'),\n *     points: [\n *         new Point(0, 0),\n *         new Point(50, 25),\n *         new Point(100, 0)\n *     ],\n *     textureScale: 0.5  // Downscale HD texture for better quality\n * });\n * ```\n * @see {@link MeshRope} For the rope implementation\n * @see {@link RopeGeometry} For the underlying geometry\n * @category scene\n * @standard\n * @noInheritDoc\n */\nexport interface MeshRopeOptions extends Omit<MeshOptions, 'geometry'>\n{\n    /** The texture to use on the rope */\n    texture: Texture;\n\n    /** An array of points that determine the rope's shape and path */\n    points: PointData[];\n\n    /**\n     * Controls how the texture is scaled along the rope.\n     * - If 0 (default), the texture stretches to fit between points\n     * - If > 0, texture repeats with preserved aspect ratio\n     * - Larger textures with textureScale < 1 can reduce artifacts\n     * @default 0\n     */\n    textureScale?: number;\n}\n\n/**\n * A specialized mesh that renders a texture along a path defined by points. Perfect for\n * creating snake-like animations, chains, ropes, and other flowing objects.\n * @example\n * ```ts\n * // Create a snake with multiple segments\n * const points = [];\n * for (let i = 0; i < 20; i++) {\n *     points.push(new Point(i * 50, 0));\n * }\n *\n * const snake = new MeshRope({\n *     texture: Texture.from('snake.png'),\n *     points,\n *     textureScale: 0.5\n * });\n *\n * // Animate the snake\n * app.ticker.add((delta) => {\n *     const time = performance.now() / 1000;\n *\n *     // Update points to create wave motion\n *     for (let i = 0; i < points.length; i++) {\n *         points[i].y = Math.sin(i * 0.5 + time) * 30;\n *         points[i].x = (i * 50) + Math.cos(i * 0.3 + time) * 20;\n *     }\n * });\n *\n * // Disable auto updates if manually updating\n * snake.autoUpdate = false;\n * ```\n * @category scene\n * @standard\n */\nexport class MeshRope extends Mesh\n{\n    /**\n     * Default options for creating a MeshRope instance. These values are used when specific\n     * options aren't provided in the constructor.\n     * @example\n     * ```ts\n     * // Use default options globally\n     * MeshRope.defaultOptions = {\n     *     textureScale: 0.5  // Set higher quality texture scaling\n     * };\n     *\n     * // Create rope with modified defaults\n     * const rope = new MeshRope({\n     *     texture: Texture.from('rope.png'),\n     *     points: [\n     *         new Point(0, 0),\n     *         new Point(100, 0)\n     *     ]\n     * }); // Will use textureScale: 0.5\n     * ```\n     * @property {number} textureScale - Controls texture scaling along the rope (0 = stretch)\n     * @see {@link MeshRopeOptions} For all available options\n     */\n    public static defaultOptions: Partial<MeshRopeOptions> = {\n        textureScale: 0,\n    };\n\n    /**\n     * Controls whether the rope's vertices are automatically recalculated each frame based on\n     * its points. When true, the rope will update to follow point movements. When false,\n     * manual updates are required.\n     * @example\n     * ```ts\n     * const points = [];\n     * for (let i = 0; i < 20; i++) {\n     *     points.push(new Point(i * 50, 0));\n     * }\n     *\n     * const rope = new MeshRope({\n     *     texture: Texture.from('rope.png'),\n     *     points\n     * });\n     *\n     * // Auto-update (default)\n     * app.ticker.add(() => {\n     *     // Points will automatically update the rope\n     *     for (let i = 0; i < points.length; i++) {\n     *         points[i].y = Math.sin(i * 0.5 + performance.now() / 1000) * 30;\n     *     }\n     * });\n     *\n     * // Manual update\n     * rope.autoUpdate = false;\n     * app.ticker.add(() => {\n     *     // Update points\n     *     for (let i = 0; i < points.length; i++) {\n     *         points[i].y = Math.sin(i * 0.5 + performance.now() / 1000) * 30;\n     *     }\n     *     // Manually trigger update\n     *     (rope.geometry as RopeGeometry).update();\n     * });\n     * ```\n     * @default true\n     * @see {@link RopeGeometry#update} For manual geometry updates\n     */\n    public autoUpdate: boolean;\n\n    /**\n     * Note: The wrap mode of the texture is set to REPEAT if `textureScale` is positive.\n     * @param options\n     * @param options.texture - The texture to use on the rope.\n     * @param options.points - An array of {@link math.Point} objects to construct this rope.\n     * @param {number} options.textureScale - Optional. Positive values scale rope texture\n     * keeping its aspect ratio. You can reduce alpha channel artifacts by providing a larger texture\n     * and downsampling here. If set to zero, texture will be stretched instead.\n     */\n    constructor(options: MeshRopeOptions)\n    {\n        const { texture, points, textureScale, ...rest } = { ...MeshRope.defaultOptions, ...options };\n        const ropeGeometry = new RopeGeometry(definedProps({ width: texture.height, points, textureScale }));\n\n        if (textureScale > 0)\n        {\n            // attempt to set UV wrapping, will fail on non-power of two textures\n            texture.source.style.addressMode = 'repeat';\n        }\n        super(definedProps({\n            ...rest,\n            texture,\n            geometry: ropeGeometry,\n        }));\n\n        this.autoUpdate = true;\n\n        this.onRender = this._render;\n    }\n\n    private _render(): void\n    {\n        const geometry: RopeGeometry = this.geometry as any;\n\n        if (this.autoUpdate || geometry._width !== this.texture.height)\n        {\n            geometry._width = this.texture.height;\n            geometry.update();\n        }\n    }\n}\n", "import { definedProps } from '../container/utils/definedProps';\nimport { Mesh } from '../mesh/shared/Mesh';\nimport { MeshGeometry } from '../mesh/shared/MeshGeometry';\n\nimport type { TypedArray } from '../../rendering/renderers/shared/buffer/Buffer';\nimport type { Topology } from '../../rendering/renderers/shared/geometry/const';\nimport type { Texture } from '../../rendering/renderers/shared/texture/Texture';\nimport type { MeshOptions } from '../mesh/shared/Mesh';\n\n/**\n * Options for creating a SimpleMesh instance. Defines the texture, geometry data, and rendering topology\n * for a basic mesh with direct vertex manipulation capabilities.\n * @example\n * ```ts\n * // Create a basic textured triangle\n * const mesh = new MeshSimple({\n *     texture: Texture.from('sprite.png'),\n *     vertices: new Float32Array([\n *         0, 0,      // Vertex 1\n *         100, 0,    // Vertex 2\n *         50, 100    // Vertex 3\n *     ]),\n *     uvs: new Float32Array([\n *         0, 0,    // UV 1\n *         1, 0,    // UV 2\n *         0.5, 1   // UV 3\n *     ])\n * });\n *\n * // Create an indexed quad with custom topology\n * const quadMesh = new MeshSimple({\n *     texture: Texture.from('square.png'),\n *     vertices: new Float32Array([\n *         0, 0,     // Top-left\n *         100, 0,   // Top-right\n *         100, 100, // Bottom-right\n *         0, 100    // Bottom-left\n *     ]),\n *     uvs: new Float32Array([\n *         0, 0,  // Top-left\n *         1, 0,  // Top-right\n *         1, 1,  // Bottom-right\n *         0, 1   // Bottom-left\n *     ]),\n *     indices: new Uint32Array([\n *         0, 1, 2,  // Triangle 1\n *         0, 2, 3   // Triangle 2\n *     ]),\n *     topology: 'triangle-list'\n * });\n * ```\n * @category scene\n * @advanced\n * @noInheritDoc\n */\nexport interface SimpleMeshOptions extends Omit<MeshOptions, 'geometry'>\n{\n    /** The texture to use */\n    texture: Texture,\n    /** Array of vertex positions as x,y pairs. Each vertex is 2 floats - x, y */\n    vertices?: Float32Array,\n    /** Array of UV coordinates for texture mapping. Each UV is 2 floats - u, v */\n    uvs?: Float32Array,\n    /** Array of indices defining triangles. Each triangle is 3 indices into the vertices array. */\n    indices?: Uint32Array,\n    /**\n     * How vertices are connected to form triangles.\n     * - 'triangle-list': Individual triangles (default)\n     * - 'triangle-strip': Connected triangle strip\n     * - 'line-list': Lines between vertices\n     * - 'line-strip': Connected line strip\n     * - 'point-list': Points rendered individually\n     * @default 'triangle-list'\n     */\n    topology?: Topology;\n}\n\n/**\n * A simplified mesh class that provides an easy way to create and manipulate textured meshes\n * with direct vertex control. Perfect for creating custom shapes, deformable sprites, and\n * simple 2D effects.\n * @example\n * ```ts\n * // Create a basic triangle mesh\n * const triangleMesh = new MeshSimple({\n *     texture: Texture.from('sprite.png'),\n *     vertices: new Float32Array([\n *         0, 0,      // Top-left\n *         100, 0,    // Top-right\n *         50, 100    // Bottom-center\n *     ]),\n *     uvs: new Float32Array([\n *         0, 0,    // Map top-left of texture\n *         1, 0,    // Map top-right of texture\n *         0.5, 1   // Map bottom-center of texture\n *     ])\n * });\n *\n * // Animate vertices\n * app.ticker.add(() => {\n *     const time = performance.now() / 1000;\n *     const vertices = triangleMesh.vertices;\n *\n *     // Move the top vertex up and down\n *     vertices[1] = Math.sin(time) * 20;\n *     triangleMesh.vertices = vertices; // Update vertices\n *\n *     // Auto-updates by default\n * });\n *\n * // Create a line strip\n * const lineMesh = new MeshSimple({\n *     texture: Texture.from('line.png'),\n *     vertices: new Float32Array([\n *         0, 0,\n *         50, 50,\n *         100, 0,\n *         150, 50\n *     ]),\n *     topology: 'line-strip'\n * });\n *\n * // Manual vertex updates\n * lineMesh.autoUpdate = false;\n * const vertices = lineMesh.vertices;\n * vertices[0] += 10;\n * lineMesh.vertices = vertices; // Update vertices manually\n * // Update the vertices buffer manually\n * lineMesh.geometry.getBuffer('aPosition').update();\n * ```\n * @category scene\n * @advanced\n * @see {@link Mesh} For more advanced mesh customization\n * @see {@link MeshGeometry} For direct geometry manipulation\n */\nexport class MeshSimple extends Mesh\n{\n    /**\n     * Controls whether the mesh's vertex buffer is automatically updated each frame.\n     * When true, vertex changes will be reflected immediately. When false, manual updates are required.\n     * @example\n     * ```ts\n     * // Auto-update mode (default)\n     * mesh.autoUpdate = true;\n     * app.ticker.add(() => {\n     *     // Vertices update automatically each frame\n     *     const vertices = mesh.vertices;\n     *     vertices[1] = Math.sin(performance.now() / 1000) * 20;\n     *     mesh.vertices = vertices;\n     * });\n     *\n     * // Manual update mode\n     * mesh.autoUpdate = false;\n     * app.ticker.add(() => {\n     *     // Update vertices\n     *     const vertices = mesh.vertices;\n     *     vertices[1] = Math.sin(performance.now() / 1000) * 20;\n     *     mesh.vertices = vertices;\n     *\n     *     // Manually trigger buffer update\n     *     mesh.geometry.getBuffer('aPosition').update();\n     * });\n     * ```\n     * @default true\n     * @see {@link MeshGeometry#getBuffer} For manual buffer updates\n     * @see {@link MeshSimple#vertices} For accessing vertex data\n     */\n    public autoUpdate: boolean;\n\n    /**\n     * @param options - Options to be used for construction\n     */\n    constructor(options: SimpleMeshOptions)\n    {\n        const { texture, vertices, uvs, indices, topology, ...rest } = options;\n        const geometry = new MeshGeometry(definedProps({\n            positions: vertices,\n            uvs,\n            indices,\n            topology\n        }));\n\n        // geometry.getBuffer('aPosition').static = false;\n\n        super(definedProps({\n            ...rest,\n            texture,\n            geometry,\n        }));\n\n        this.autoUpdate = true;\n        this.onRender = this._render;\n    }\n\n    /**\n     * The vertex positions of the mesh as a TypedArray. Each vertex is represented by two\n     * consecutive values (x, y) in the array. Changes to these values will update the mesh's shape.\n     * @example\n     * ```ts\n     * // Read vertex positions\n     * const vertices = mesh.vertices;\n     * console.log('First vertex:', vertices[0], vertices[1]);\n     *\n     * // Modify vertices directly\n     * vertices[0] += 10;  // Move first vertex right\n     * vertices[1] -= 20;  // Move first vertex up\n     *\n     * // Animate vertices\n     * app.ticker.add(() => {\n     *     const time = performance.now() / 1000;\n     *     const vertices = mesh.vertices;\n     *\n     *     // Wave motion\n     *     for (let i = 0; i < vertices.length; i += 2) {\n     *         vertices[i + 1] = Math.sin(time + i * 0.5) * 20;\n     *     }\n     * });\n     * ```\n     * @see {@link MeshSimple#autoUpdate} For controlling vertex buffer updates\n     * @see {@link MeshGeometry#getBuffer} For direct buffer access\n     */\n    get vertices(): TypedArray\n    {\n        return this.geometry.getBuffer('aPosition').data;\n    }\n    set vertices(value: TypedArray)\n    {\n        this.geometry.getBuffer('aPosition').data = value;\n    }\n\n    private _render(): void\n    {\n        if (this.autoUpdate)\n        {\n            this.geometry.getBuffer('aPosition').update();\n        }\n    }\n}\n", "import type { Matrix } from '../../../maths/matrix/Matrix';\nimport type { Texture } from '../../../rendering/renderers/shared/texture/Texture';\n\n/**\n * @param texture\n * @param out\n * @internal\n */\nexport function getTextureDefaultMatrix(texture: Texture, out: Matrix): Matrix\n{\n    const { width, height } = texture.frame;\n\n    out.scale(1 / width, 1 / height);\n\n    return out;\n}\n", "import { canvasUtils } from '../../../rendering/renderers/canvas/utils/canvasUtils';\n\nimport type { CanvasRenderer } from '../../../rendering/renderers/canvas/CanvasRenderer';\nimport type { ParticleContainer } from '../shared/ParticleContainer';\nimport type { ParticleContainerAdaptor, ParticleContainerPipe } from '../shared/ParticleContainerPipe';\n\n/**\n * A Canvas adaptor for the ParticleContainer that renders particles using Canvas2D.\n * @internal\n */\nexport class CanvasParticleContainerAdaptor implements ParticleContainerAdaptor\n{\n    public execute(particleContainerPipe: ParticleContainerPipe, container: ParticleContainer)\n    {\n        const renderer = particleContainerPipe.renderer as CanvasRenderer;\n        const context = renderer.canvasContext.activeContext;\n        const children = container.particleChildren;\n        const texture = container.texture;\n\n        context.save();\n        renderer.canvasContext.setContextTransform(container.worldTransform, container.roundPixels);\n        renderer.canvasContext.setBlendMode(container.groupBlendMode);\n\n        const groupColorAlpha = container.groupColorAlpha;\n        const filterAlpha = (renderer.filter as { alphaMultiplier?: number } | null)?.alphaMultiplier ?? 1;\n        const groupAlpha = (((groupColorAlpha >>> 24) & 0xFF) / 255) * filterAlpha;\n\n        for (let i = 0; i < children.length; i++)\n        {\n            const particle = children[i];\n            const pTexture = particle.texture || texture;\n\n            if (!pTexture?.source?.resource) continue;\n\n            const color = particle.color;\n            const alpha = (((color >>> 24) & 0xFF) / 255) * groupAlpha;\n\n            if (alpha <= 0) continue;\n\n            const bgr = color & 0xFFFFFF;\n            const tint = ((bgr & 0xFF) << 16) + (bgr & 0xFF00) + ((bgr >> 16) & 0xFF);\n\n            let drawSource: CanvasImageSource = pTexture.source.resource as CanvasImageSource;\n\n            if (tint !== 0xFFFFFF)\n            {\n                drawSource = canvasUtils.getTintedCanvas({ texture: pTexture }, tint) as CanvasImageSource;\n            }\n\n            const frame = pTexture.frame;\n            const resolution = pTexture.source.resolution;\n\n            const sx = frame.x * resolution;\n            const sy = frame.y * resolution;\n            const sw = frame.width * resolution;\n            const sh = frame.height * resolution;\n\n            context.globalAlpha = alpha;\n\n            const dx = -particle.anchorX * frame.width;\n            const dy = -particle.anchorY * frame.height;\n\n            if (particle.rotation !== 0 || particle.scaleX !== 1 || particle.scaleY !== 1)\n            {\n                context.save();\n                context.translate(particle.x, particle.y);\n                context.rotate(particle.rotation);\n                context.scale(particle.scaleX, particle.scaleY);\n                context.drawImage(drawSource, sx, sy, sw, sh, dx, dy, frame.width, frame.height);\n                context.restore();\n            }\n            else\n            {\n                context.drawImage(drawSource, sx, sy, sw, sh, particle.x + dx, particle.y + dy, frame.width, frame.height);\n            }\n        }\n\n        context.restore();\n    }\n}\n", "/**\n * Generic Mask Stack data structure\n * @function createIndicesForQuads\n * @param {number} size - Number of quads\n * @param {Uint16Array|Uint32Array} [outBuffer] - Buffer for output, length has to be `6 * size`\n * @returns {Uint16Array|Uint32Array} - Resulting index buffer\n * @internal\n */\nexport function createIndicesForQuads(\n    size: number,\n    outBuffer: Uint16Array | Uint32Array | null = null\n): Uint16Array | Uint32Array\n{\n    // the total number of indices in our array, there are 6 points per quad.\n    const totalIndices = size * 6;\n\n    // Check if we need to use Uint32Array\n    if (totalIndices > 65535)\n    {\n        outBuffer ||= new Uint32Array(totalIndices); // Use Uint32Array if needed\n    }\n    else\n    {\n        outBuffer ||= new Uint16Array(totalIndices);\n    }\n\n    if (outBuffer.length !== totalIndices)\n    {\n        throw new Error(`Out buffer length is incorrect, got ${outBuffer.length} and expected ${totalIndices}`);\n    }\n\n    // fill the indices with the quads to draw\n    for (let i = 0, j = 0; i < totalIndices; i += 6, j += 4)\n    {\n        outBuffer[i + 0] = j + 0;\n        outBuffer[i + 1] = j + 1;\n        outBuffer[i + 2] = j + 2;\n        outBuffer[i + 3] = j + 0;\n        outBuffer[i + 4] = j + 2;\n        outBuffer[i + 5] = j + 3;\n    }\n\n    return outBuffer;\n}\n", "import {\n    getAttributeInfoFromFormat\n} from '../../../../rendering/renderers/shared/geometry/utils/getAttributeInfoFromFormat';\n\nimport type { IParticle } from '../Particle';\nimport type { ParticleRendererProperty } from '../particleData';\n\n// TODO rename to update function\n/** @internal */\nexport type ParticleUpdateFunction = (ps: IParticle[], f32v: Float32Array, u32v: Uint32Array) => void;\n\n/**\n * @param properties\n * @internal\n */\nexport function generateParticleUpdateFunction(properties: Record<string, ParticleRendererProperty>)\n{\n    return {\n        dynamicUpdate: generateUpdateFunction(properties, true),\n        staticUpdate: generateUpdateFunction(properties, false),\n    };\n}\n\nfunction generateUpdateFunction(\n    properties: Record<string, ParticleRendererProperty>,\n    dynamic: boolean\n): ParticleUpdateFunction\n{\n    const funcFragments: string[] = [];\n\n    funcFragments.push(`\n\n        var index = 0;\n\n        for (let i = 0; i < ps.length; ++i)\n        {\n            const p = ps[i];\n\n            `);\n\n    let offset = 0;\n\n    for (const i in properties)\n    {\n        const property = properties[i];\n\n        if (dynamic !== property.dynamic) continue;\n\n        funcFragments.push(`offset = index + ${offset}`);\n\n        funcFragments.push(property.code);\n\n        const attributeInfo = getAttributeInfoFromFormat(property.format);\n\n        offset += attributeInfo.stride / 4;\n    }\n\n    funcFragments.push(`\n            index += stride * 4;\n        }\n    `);\n\n    // add to the front..\n    funcFragments.unshift(`\n        var stride = ${offset};\n    `);\n\n    const functionSource = funcFragments.join('\\n');\n\n    // eslint-disable-next-line no-new-func\n    return new Function('ps', 'f32v', 'u32v', functionSource) as ParticleUpdateFunction;\n}\n", "import { Buffer } from '../../../rendering/renderers/shared/buffer/Buffer';\nimport { BufferUsage } from '../../../rendering/renderers/shared/buffer/const';\nimport { Geometry } from '../../../rendering/renderers/shared/geometry/Geometry';\nimport { getAttributeInfoFromFormat } from '../../../rendering/renderers/shared/geometry/utils/getAttributeInfoFromFormat';\nimport { ViewableBuffer } from '../../../utils/data/ViewableBuffer';\nimport { type GPUData } from '../../view/ViewContainer';\nimport { createIndicesForQuads } from './utils/createIndicesForQuads';\nimport { generateParticleUpdateFunction } from './utils/generateParticleUpdateFunction';\n\nimport type { IndexBufferArray } from '../../../rendering/renderers/shared/geometry/Geometry';\nimport type { IParticle } from './Particle';\nimport type { ParticleRendererProperty } from './particleData';\nimport type { ParticleUpdateFunction } from './utils/generateParticleUpdateFunction';\n\n/**\n * Options for creating a ParticleBuffer.\n * @internal\n */\nexport interface ParticleBufferOptions\n{\n    /** The size of the particle buffer, defaults to 1000. */\n    size: number;\n    /** A record of attributes that the particle container uses. */\n    properties: Record<string, ParticleRendererProperty>;\n}\n\n/**\n * The ParticleBuffer holds the buffers and geometry for a particle container.\n * It also contains the upload functions for the static and dynamic properties.\n * @internal\n */\nexport class ParticleBuffer implements GPUData\n{\n    /** The buffer containing static attribute data for all elements in the batch. */\n    public staticAttributeBuffer: ViewableBuffer;\n    /** The buffer containing dynamic attribute data for all elements in the batch. */\n    public dynamicAttributeBuffer: ViewableBuffer;\n\n    private readonly _staticBuffer: Buffer;\n    private readonly _dynamicBuffer: Buffer;\n\n    /** The buffer containing index data for all elements in the batch. */\n    public indexBuffer: IndexBufferArray;\n\n    private readonly _dynamicStride: number;\n    private readonly _staticStride: number;\n\n    /** The geometry of the particle buffer. */\n    public readonly geometry: Geometry;\n\n    private _size = 0;\n    private readonly _dynamicUpload: ParticleUpdateFunction;\n    private readonly _staticUpload: ParticleUpdateFunction;\n    private readonly _generateParticleUpdateCache: Record<string, {\n        dynamicUpdate: ParticleUpdateFunction;\n        staticUpdate: ParticleUpdateFunction;\n    }> = {};\n\n    constructor(options: ParticleBufferOptions)\n    {\n        // size in sprites!\n        const size = this._size = options.size ?? 1000;\n\n        // TODO add the option to specify what is dynamic!\n        const properties = options.properties;\n\n        // in bytes!\n        let staticVertexSize = 0;\n        let dynamicVertexSize = 0;\n\n        for (const i in properties)\n        {\n            const property = properties[i];\n            const attributeInfo = getAttributeInfoFromFormat(property.format);\n\n            if (property.dynamic)\n            {\n                // dynamic.\n                dynamicVertexSize += attributeInfo.stride;\n            }\n            else\n            {\n                // static.\n                staticVertexSize += attributeInfo.stride;\n            }\n        }\n\n        this._dynamicStride = dynamicVertexSize / 4;\n        this._staticStride = staticVertexSize / 4;\n\n        this.staticAttributeBuffer = new ViewableBuffer(size * 4 * staticVertexSize);\n        this.dynamicAttributeBuffer = new ViewableBuffer(size * 4 * dynamicVertexSize);\n\n        this.indexBuffer = createIndicesForQuads(size);\n\n        // build geometry..\n\n        const geometry = new Geometry();\n\n        let dynamicOffset = 0;\n        let staticOffset = 0;\n\n        this._staticBuffer = new Buffer({\n            data: new Float32Array(1),\n            label: 'static-particle-buffer',\n            shrinkToFit: false,\n            usage: BufferUsage.VERTEX | BufferUsage.COPY_DST\n        });\n\n        this._dynamicBuffer = new Buffer({\n            data: new Float32Array(1),\n            label: 'dynamic-particle-buffer',\n            shrinkToFit: false,\n            usage: BufferUsage.VERTEX | BufferUsage.COPY_DST\n        });\n\n        for (const i in properties)\n        {\n            const property = properties[i];\n            const attributeInfo = getAttributeInfoFromFormat(property.format);\n\n            if (property.dynamic)\n            {\n                geometry.addAttribute(property.attributeName, {\n                    buffer: this._dynamicBuffer,\n                    stride: this._dynamicStride * 4,\n                    offset: dynamicOffset * 4,\n                    format: property.format,\n                });\n                dynamicOffset += attributeInfo.size;\n            }\n            else\n            {\n                geometry.addAttribute(property.attributeName, {\n                    buffer: this._staticBuffer,\n                    stride: this._staticStride * 4,\n                    offset: staticOffset * 4,\n                    format: property.format,\n                });\n                staticOffset += attributeInfo.size;\n            }\n        }\n\n        geometry.addIndex(this.indexBuffer);\n\n        const uploadFunction = this.getParticleUpdate(properties);\n\n        this._dynamicUpload = uploadFunction.dynamicUpdate;\n        this._staticUpload = uploadFunction.staticUpdate;\n\n        this.geometry = geometry;\n    }\n\n    public getParticleUpdate(properties: Record<string, ParticleRendererProperty>)\n    {\n        const key = getParticleSyncKey(properties);\n\n        if (this._generateParticleUpdateCache[key])\n        {\n            return this._generateParticleUpdateCache[key];\n        }\n\n        this._generateParticleUpdateCache[key] = this.generateParticleUpdate(properties);\n\n        return this._generateParticleUpdateCache[key];\n    }\n\n    public generateParticleUpdate(properties: Record<string, ParticleRendererProperty>)\n    {\n        return generateParticleUpdateFunction(properties);\n    }\n\n    public update(particles: IParticle[], uploadStatic: boolean)\n    {\n        // first resize the buffers if needed!\n        // TODO resize!\n        if (particles.length > this._size)\n        {\n            uploadStatic = true;\n\n            this._size = Math.max(particles.length, (this._size * 1.5) | 0);\n\n            this.staticAttributeBuffer = new ViewableBuffer(this._size * this._staticStride * 4 * 4);\n            this.dynamicAttributeBuffer = new ViewableBuffer(this._size * this._dynamicStride * 4 * 4);\n            this.indexBuffer = createIndicesForQuads(this._size);\n\n            this.geometry.indexBuffer.setDataWithSize(\n                this.indexBuffer, this.indexBuffer.byteLength, true);\n        }\n\n        const dynamicAttributeBuffer = this.dynamicAttributeBuffer;\n\n        this._dynamicUpload(particles, dynamicAttributeBuffer.float32View, dynamicAttributeBuffer.uint32View);\n\n        this._dynamicBuffer.setDataWithSize(\n            this.dynamicAttributeBuffer.float32View, particles.length * this._dynamicStride * 4, true);\n\n        if (uploadStatic)\n        {\n            const staticAttributeBuffer = this.staticAttributeBuffer;\n\n            this._staticUpload(particles, staticAttributeBuffer.float32View, staticAttributeBuffer.uint32View);\n\n            this._staticBuffer.setDataWithSize(\n                staticAttributeBuffer.float32View, particles.length * this._staticStride * 4, true);\n        }\n    }\n\n    public destroy()\n    {\n        this._staticBuffer.destroy();\n        this._dynamicBuffer.destroy();\n        this.geometry.destroy();\n    }\n}\n\nfunction getParticleSyncKey(properties: Record<string, ParticleRendererProperty>)\n{\n    const keyGen: string[] = [];\n\n    for (const key in properties)\n    {\n        const property = properties[key];\n\n        keyGen.push(key, property.code, property.dynamic ? 'd' : 's');\n    }\n\n    return keyGen.join('_');\n}\n\n", "var fragment = \"varying vec2 vUV;\\nvarying vec4 vColor;\\n\\nuniform sampler2D uTexture;\\n\\nvoid main(void){\\n    vec4 color = texture2D(uTexture, vUV) * vColor;\\n    gl_FragColor = color;\\n}\";\n\nexport { fragment as default };\n//# sourceMappingURL=particles.frag.mjs.map\n", "var vertex = \"attribute vec2 aVertex;\\nattribute vec2 aUV;\\nattribute vec4 aColor;\\n\\nattribute vec2 aPosition;\\nattribute float aRotation;\\n\\nuniform mat3 uTranslationMatrix;\\nuniform float uRound;\\nuniform vec2 uResolution;\\nuniform vec4 uColor;\\n\\nvarying vec2 vUV;\\nvarying vec4 vColor;\\n\\nvec2 roundPixels(vec2 position, vec2 targetSize)\\n{       \\n    return (floor(((position * 0.5 + 0.5) * targetSize) + 0.5) / targetSize) * 2.0 - 1.0;\\n}\\n\\nvoid main(void){\\n    float cosRotation = cos(aRotation);\\n    float sinRotation = sin(aRotation);\\n    float x = aVertex.x * cosRotation - aVertex.y * sinRotation;\\n    float y = aVertex.x * sinRotation + aVertex.y * cosRotation;\\n\\n    vec2 v = vec2(x, y);\\n    v = v + aPosition;\\n\\n    gl_Position = vec4((uTranslationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);\\n\\n    if(uRound == 1.0)\\n    {\\n        gl_Position.xy = roundPixels(gl_Position.xy, uResolution);\\n    }\\n\\n    vUV = aUV;\\n    vColor = vec4(aColor.rgb * aColor.a, aColor.a) * uColor;\\n}\\n\";\n\nexport { vertex as default };\n//# sourceMappingURL=particles.vert.mjs.map\n", "var wgsl = \"\\nstruct ParticleUniforms {\\n  uTranslationMatrix:mat3x3<f32>,\\n  uColor:vec4<f32>,\\n  uRound:f32,\\n  uResolution:vec2<f32>,\\n};\\n\\nfn roundPixels(position: vec2<f32>, targetSize: vec2<f32>) -> vec2<f32>\\n{\\n  return (floor(((position * 0.5 + 0.5) * targetSize) + 0.5) / targetSize) * 2.0 - 1.0;\\n}\\n\\n@group(0) @binding(0) var<uniform> uniforms: ParticleUniforms;\\n\\n@group(1) @binding(0) var uTexture: texture_2d<f32>;\\n@group(1) @binding(1) var uSampler : sampler;\\n\\nstruct VSOutput {\\n    @builtin(position) position: vec4<f32>,\\n    @location(0) uv : vec2<f32>,\\n    @location(1) color : vec4<f32>,\\n  };\\n@vertex\\nfn mainVertex(\\n  @location(0) aVertex: vec2<f32>,\\n  @location(1) aPosition: vec2<f32>,\\n  @location(2) aUV: vec2<f32>,\\n  @location(3) aColor: vec4<f32>,\\n  @location(4) aRotation: f32,\\n) -> VSOutput {\\n  \\n   let v = vec2(\\n       aVertex.x * cos(aRotation) - aVertex.y * sin(aRotation),\\n       aVertex.x * sin(aRotation) + aVertex.y * cos(aRotation)\\n   ) + aPosition;\\n\\n   var position = vec4((uniforms.uTranslationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);\\n\\n   if(uniforms.uRound == 1.0) {\\n       position = vec4(roundPixels(position.xy, uniforms.uResolution), position.zw);\\n   }\\n\\n    let vColor = vec4(aColor.rgb * aColor.a, aColor.a) * uniforms.uColor;\\n\\n  return VSOutput(\\n   position,\\n   aUV,\\n   vColor,\\n  );\\n}\\n\\n@fragment\\nfn mainFragment(\\n  @location(0) uv: vec2<f32>,\\n  @location(1) color: vec4<f32>,\\n  @builtin(position) position: vec4<f32>,\\n) -> @location(0) vec4<f32> {\\n\\n    var sample = textureSample(uTexture, uSampler, uv) * color;\\n   \\n    return sample;\\n}\";\n\nexport { wgsl as default };\n//# sourceMappingURL=particles.wgsl.mjs.map\n", "import { Color } from '../../../../color/Color';\nimport { Matrix } from '../../../../maths/matrix/Matrix';\nimport { GlProgram } from '../../../../rendering/renderers/gl/shader/GlProgram';\nimport { GpuProgram } from '../../../../rendering/renderers/gpu/shader/GpuProgram';\nimport { Shader } from '../../../../rendering/renderers/shared/shader/Shader';\nimport { Texture } from '../../../../rendering/renderers/shared/texture/Texture';\nimport { TextureStyle } from '../../../../rendering/renderers/shared/texture/TextureStyle';\nimport fragment from './particles.frag';\nimport vertex from './particles.vert';\nimport wgsl from './particles.wgsl';\n\n/** @internal */\nexport class ParticleShader extends Shader\n{\n    constructor()\n    {\n        const glProgram = GlProgram.from({\n            vertex,\n            fragment\n        });\n\n        const gpuProgram = GpuProgram.from({\n            fragment: {\n                source: wgsl,\n                entryPoint: 'mainFragment'\n            },\n            vertex: {\n                source: wgsl,\n                entryPoint: 'mainVertex'\n            }\n        });\n\n        super({\n            glProgram,\n            gpuProgram,\n            resources: {\n                // this will be replaced with the texture from the particle container\n                uTexture: Texture.WHITE.source,\n                // this will be replaced with the texture style from the particle container\n                uSampler: new TextureStyle({}),\n                // this will be replaced with the local uniforms from the particle container\n                uniforms: {\n                    uTranslationMatrix: { value: new Matrix(), type: 'mat3x3<f32>' },\n                    uColor: { value: new Color(0xFFFFFF), type: 'vec4<f32>' },\n                    uRound: { value: 1, type: 'f32' },\n                    uResolution: { value: [0, 0], type: 'vec2<f32>' },\n                }\n            }\n        });\n    }\n}\n", "import { ExtensionType } from '../../../extensions/Extensions';\nimport { Matrix } from '../../../maths/matrix/Matrix';\nimport { UniformGroup } from '../../../rendering/renderers/shared/shader/UniformGroup';\nimport { getAdjustedBlendModeBlend } from '../../../rendering/renderers/shared/state/getAdjustedBlendModeBlend';\nimport { State } from '../../../rendering/renderers/shared/state/State';\nimport { GCManagedHash } from '../../../utils/data/GCManagedHash';\nimport { color32BitToUniform } from '../../graphics/gpu/colorToUniform';\nimport { ParticleBuffer } from './ParticleBuffer';\nimport { ParticleShader } from './shader/ParticleShader';\n\nimport type { InstructionSet } from '../../../rendering/renderers/shared/instructions/InstructionSet';\nimport type { RenderPipe } from '../../../rendering/renderers/shared/instructions/RenderPipe';\nimport type { Shader } from '../../../rendering/renderers/shared/shader/Shader';\nimport type { Renderer } from '../../../rendering/renderers/types';\nimport type { ParticleContainer } from './ParticleContainer';\n\n/** @internal */\nexport interface ParticleContainerAdaptor\n{\n    execute(particleContainerPop: ParticleContainerPipe, container: ParticleContainer): void;\n}\n\n/**\n * Renderer for Particles that is designer for speed over feature set.\n * @category scene\n * @internal\n */\nexport class ParticleContainerPipe implements RenderPipe<ParticleContainer>\n{\n    /** @ignore */\n    public static extension: { type: ExtensionType[]; name: 'particle' } = {\n        type: [\n            ExtensionType.CanvasPipes,\n        ],\n        name: 'particle',\n    } as const;\n\n    /** The default shader that is used if a sprite doesn't have a more specific one. */\n    public defaultShader: Shader;\n\n    /** @internal */\n    public adaptor: ParticleContainerAdaptor;\n    /** @internal */\n    public readonly state = State.for2d();\n    /** @internal */\n    public readonly renderer: Renderer;\n    private readonly _managedContainers: GCManagedHash<ParticleContainer>;\n\n    /** Local uniforms that are used for rendering particles. */\n    public readonly localUniforms = new UniformGroup({\n        uTranslationMatrix: { value: new Matrix(), type: 'mat3x3<f32>' },\n        uColor: { value: new Float32Array(4), type: 'vec4<f32>' },\n        uRound: { value: 1, type: 'f32' },\n        uResolution: { value: [0, 0], type: 'vec2<f32>' },\n    });\n\n    /**\n     * @param renderer - The renderer this sprite batch works for.\n     * @param adaptor\n     */\n    constructor(renderer: Renderer, adaptor: ParticleContainerAdaptor)\n    {\n        this.renderer = renderer;\n\n        this.adaptor = adaptor;\n\n        this.defaultShader = new ParticleShader();\n\n        this.state = State.for2d();\n\n        this._managedContainers = new GCManagedHash({ renderer, type: 'renderable', name: 'particleContainer' });\n    }\n\n    public validateRenderable(_renderable: ParticleContainer): boolean\n    {\n        // always fine :D\n        return false;\n    }\n\n    public addRenderable(renderable: ParticleContainer, instructionSet: InstructionSet)\n    {\n        this.renderer.renderPipes.batch.break(instructionSet);\n        instructionSet.add(renderable);\n    }\n\n    public getBuffers(renderable: ParticleContainer): ParticleBuffer\n    {\n        return renderable._gpuData[this.renderer.uid] || this._initBuffer(renderable);\n    }\n\n    private _initBuffer(renderable: ParticleContainer): ParticleBuffer\n    {\n        renderable._gpuData[this.renderer.uid] = new ParticleBuffer({\n            size: renderable.particleChildren.length,\n            properties: renderable._properties,\n        });\n\n        this._managedContainers.add(renderable);\n\n        return renderable._gpuData[this.renderer.uid];\n    }\n\n    public updateRenderable(_renderable: ParticleContainer)\n    {\n        // nothing to be done here!\n    }\n\n    public execute(container: ParticleContainer): void\n    {\n        const children = container.particleChildren;\n\n        if (children.length === 0)\n        {\n            return;\n        }\n\n        const renderer = this.renderer;\n        const buffer = this.getBuffers(container);\n\n        container.texture ||= children[0].texture;\n\n        const state = this.state;\n\n        buffer.update(children, container._childrenDirty);\n        container._childrenDirty = false;\n\n        state.blendMode = getAdjustedBlendModeBlend(container.blendMode, container.texture._source);\n\n        const uniforms = this.localUniforms.uniforms;\n\n        const transformationMatrix = uniforms.uTranslationMatrix;\n\n        container.worldTransform.copyTo(transformationMatrix);\n\n        transformationMatrix.prepend(renderer.globalUniforms.globalUniformData.projectionMatrix);\n\n        uniforms.uResolution = renderer.globalUniforms.globalUniformData.resolution;\n        uniforms.uRound = renderer._roundPixels | container._roundPixels;\n\n        color32BitToUniform(\n            container.groupColorAlpha,\n            uniforms.uColor,\n            0\n        );\n\n        this.adaptor.execute(this, container);\n    }\n\n    /** Destroys the ParticleRenderer. */\n    public destroy(): void\n    {\n        this._managedContainers.destroy();\n        (this.renderer as null) = null;\n        if (this.defaultShader)\n        {\n            this.defaultShader.destroy();\n            this.defaultShader = null;\n        }\n    }\n}\n", "import { ExtensionType } from '../../../extensions/Extensions';\nimport { type CanvasRenderer } from '../../../rendering/renderers/canvas/CanvasRenderer';\nimport { ParticleContainerPipe } from '../shared/ParticleContainerPipe';\nimport { CanvasParticleContainerAdaptor } from './CanvasParticleContainerAdaptor';\n\n/**\n * Canvas renderer for Particles that is designed for speed over feature set.\n * @category scene\n * @internal\n */\nexport class CanvasParticleContainerPipe extends ParticleContainerPipe\n{\n    /** @ignore */\n    public static extension: { type: ExtensionType[]; name: 'particle' } = {\n        type: [\n            ExtensionType.CanvasPipes,\n        ],\n        name: 'particle',\n    } as const;\n\n    constructor(renderer: CanvasRenderer)\n    {\n        super(renderer, new CanvasParticleContainerAdaptor());\n    }\n}\n", "import type { WebGLRenderer } from '../../../rendering/renderers/gl/WebGLRenderer';\nimport type { ParticleContainer } from '../shared/ParticleContainer';\nimport type { ParticleContainerAdaptor, ParticleContainerPipe } from '../shared/ParticleContainerPipe';\n\n/** @internal */\nexport class GlParticleContainerAdaptor implements ParticleContainerAdaptor\n{\n    public execute(particleContainerPipe: ParticleContainerPipe, container: ParticleContainer)\n    {\n        const state = particleContainerPipe.state;\n        const renderer = particleContainerPipe.renderer as WebGLRenderer;\n        const shader = container.shader || particleContainerPipe.defaultShader;\n\n        shader.resources.uTexture = container.texture._source;\n        shader.resources.uniforms = particleContainerPipe.localUniforms;\n\n        const gl = renderer.gl;\n\n        const buffer = particleContainerPipe.getBuffers(container);\n\n        // now lets upload and render the buffers..\n        renderer.shader.bind(shader);\n        renderer.state.set(state);\n        renderer.geometry.bind(buffer.geometry, shader.glProgram);\n\n        const byteSize = buffer.geometry.indexBuffer.data.BYTES_PER_ELEMENT;\n        const glType = byteSize === 2 ? gl.UNSIGNED_SHORT : gl.UNSIGNED_INT;\n\n        gl.drawElements(gl.TRIANGLES, container.particleChildren.length * 6, glType, 0);\n    }\n}\n", "import { ExtensionType } from '../../../extensions/Extensions';\nimport { GlParticleContainerAdaptor } from '../gl/GlParticleContainerAdaptor';\nimport { ParticleContainerPipe } from '../shared/ParticleContainerPipe';\n\nimport type { WebGLRenderer } from '../../../rendering/renderers/gl/WebGLRenderer';\n\n/**\n * WebGL renderer for Particles that is designed for speed over feature set.\n * @category scene\n * @internal\n */\nexport class GlParticleContainerPipe extends ParticleContainerPipe\n{\n    /** @ignore */\n    public static extension: { type: ExtensionType[]; name: 'particle' } = {\n        type: [\n            ExtensionType.WebGLPipes,\n        ],\n        name: 'particle',\n    } as const;\n\n    constructor(renderer: WebGLRenderer)\n    {\n        super(renderer, new GlParticleContainerAdaptor());\n    }\n}\n", "import type { WebGPURenderer } from '../../../rendering/renderers/gpu/WebGPURenderer';\nimport type { ParticleContainer } from '../shared/ParticleContainer';\nimport type { ParticleContainerAdaptor, ParticleContainerPipe } from '../shared/ParticleContainerPipe';\n\n/** @internal */\nexport class GpuParticleContainerAdaptor implements ParticleContainerAdaptor\n{\n    public execute(particleContainerPipe: ParticleContainerPipe, container: ParticleContainer)\n    {\n        const renderer = particleContainerPipe.renderer as WebGPURenderer;\n\n        const shader = container.shader || particleContainerPipe.defaultShader;\n\n        shader.groups[0] = renderer.renderPipes.uniformBatch.getUniformBindGroup(particleContainerPipe.localUniforms, true);\n\n        shader.groups[1] = renderer.texture.getTextureBindGroup(container.texture);\n\n        const state = particleContainerPipe.state;\n\n        const buffer = particleContainerPipe.getBuffers(container);\n\n        renderer.encoder.draw({\n            geometry: buffer.geometry,\n            shader: container.shader || particleContainerPipe.defaultShader,\n            state,\n            size: container.particleChildren.length * 6,\n        });\n    }\n}\n", "import { ExtensionType } from '../../../extensions/Extensions';\nimport { GpuParticleContainerAdaptor } from '../gpu/GpuParticleContainerAdaptor';\nimport { ParticleContainerPipe } from '../shared/ParticleContainerPipe';\n\nimport type { WebGPURenderer } from '../../../rendering/renderers/gpu/WebGPURenderer';\n\n/**\n * WebGPU renderer for Particles that is designed for speed over feature set.\n * @category scene\n * @internal\n */\nexport class GpuParticleContainerPipe extends ParticleContainerPipe\n{\n    /** @ignore */\n    public static extension: { type: ExtensionType[]; name: 'particle' } = {\n        type: [\n            ExtensionType.WebGPUPipes,\n        ],\n        name: 'particle',\n    } as const;\n\n    constructor(renderer: WebGPURenderer)\n    {\n        super(renderer, new GpuParticleContainerAdaptor());\n    }\n}\n", "import { Color } from '../../../color/Color';\nimport { Texture } from '../../../rendering/renderers/shared/texture/Texture';\nimport { bgr2rgb } from '../../container/container-mixins/getGlobalMixin';\nimport { assignWithIgnore } from '../../container/utils/assignWithIgnore';\n\nimport type { ColorSource } from '../../../color/Color';\n\n/**\n * Represents a particle with properties for position, scale, rotation, color, and texture.\n * Particles are lightweight alternatives to sprites, optimized for use in particle systems.\n * @example\n * ```ts\n * // Create a basic particle\n * const particle = new Particle({\n *     texture: Texture.from('particle.png'),\n *     x: 100,\n *     y: 100,\n *     scaleX: 0.5,\n *     scaleY: 0.5,\n *     rotation: Math.PI / 4,  // 45 degrees\n *     tint: 0xff0000,        // Red tint\n *     alpha: 0.8             // Slightly transparent\n * });\n *\n * // Modify particle properties\n * particle.x += 10;          // Move right\n * particle.rotation += 0.1;   // Rotate slightly\n * particle.alpha = 0.5;      // Change transparency\n *\n * // Use anchor points (0-1 range)\n * particle.anchorX = 0.5;    // Center horizontally\n * particle.anchorY = 0.5;    // Center vertically\n * ```\n * @category scene\n * @standard\n */\nexport interface IParticle\n{\n    /** The x-coordinate of the particle position */\n    x: number;\n\n    /** The y-coordinate of the particle position */\n    y: number;\n\n    /**\n     * The horizontal scale factor of the particle\n     * @default 1\n     */\n    scaleX: number;\n\n    /**\n     * The vertical scale factor of the particle\n     * @default 1\n     */\n    scaleY: number;\n\n    /**\n     * The x-coordinate of the particle's anchor point (0-1 range)\n     * @default 0\n     */\n    anchorX: number;\n\n    /**\n     * The y-coordinate of the particle's anchor point (0-1 range)\n     * @default 0\n     */\n    anchorY: number;\n\n    /**\n     * The rotation of the particle in radians\n     * @default 0\n     */\n    rotation: number;\n\n    /**\n     * The color of the particle as a 32-bit RGBA value\n     * @default 0xffffffff\n     */\n    color: number;\n\n    /** The texture used to render this particle */\n    texture: Texture;\n}\n\n/**\n * Configuration options for creating a new particle. All properties except texture are optional\n * and will use default values if not specified.\n * @example\n * ```ts\n * // Create a basic red particle\n * const particle = new Particle({\n *     texture: Texture.from('particle.png'),\n *     tint: 0xff0000,\n *     alpha: 0.8\n * });\n *\n * // Create a scaled and rotated particle\n * const rotatedParticle = new Particle({\n *     texture: Texture.from('star.png'),\n *     x: 100,\n *     y: 100,\n *     scaleX: 2,\n *     scaleY: 2,\n *     rotation: Math.PI / 4,\n *     anchorX: 0.5,\n *     anchorY: 0.5\n * });\n *\n * // Use color strings for tint\n * const coloredParticle = new Particle({\n *     texture: Texture.from('circle.png'),\n *     tint: '#ff00ff',     // Magenta\n *     alpha: 0.5,          // Half transparent\n *     x: 200,\n *     y: 200\n * });\n * ```\n * @see {@link Particle} For the particle implementation\n * @see {@link IParticle} For the full particle interface\n * @category scene\n * @standard\n * @category scene\n * @standard\n */\nexport type ParticleOptions = Omit<Partial<IParticle>, 'color'> & {\n    /** The texture used to render this particle */\n    texture: Texture;\n    /** The tint color as a hex number or CSS color string */\n    tint?: ColorSource;\n    /** The alpha transparency (0-1) */\n    alpha?: number;\n};\n\n/**\n * Represents a single particle within a particle container. This class implements the IParticle interface,\n * providing properties and methods to manage the particle's position, scale, rotation, color, and texture.\n *\n * The reason we use a particle over a sprite is that these are much lighter weight and we can create a lot of them\n * without taking on the overhead of a full sprite.\n * @example\n * ```javascript\n * const particle = new Particle({\n *   texture,\n *   x: 100,\n *   y: 100,\n *   scaleX: 0.5,\n *   scaleY: 0.5,\n *   rotation: Math.PI / 2,\n *   color: 0xff0000,\n * });\n * ```\n * @category scene\n * @standard\n */\nexport class Particle implements IParticle\n{\n    /**\n     * Default options used when creating new particles. These values are applied when specific\n     * options aren't provided in the constructor.\n     * @example\n     * ```ts\n     * // Override defaults globally\n     * Particle.defaultOptions = {\n     *     ...Particle.defaultOptions,\n     *     anchorX: 0.5,\n     *     anchorY: 0.5,\n     *     alpha: 0.8\n     * };\n     *\n     * // New particles use modified defaults\n     * const centeredParticle = new Particle(texture);\n     * console.log(centeredParticle.anchorX); // 0.5\n     * console.log(centeredParticle.alpha); // 0.8\n     * ```\n     * @see {@link ParticleOptions} For all available options\n     * @see {@link Particle} For the particle implementation\n     */\n    public static defaultOptions: Partial<ParticleOptions> = {\n        anchorX: 0,\n        anchorY: 0,\n        x: 0,\n        y: 0,\n        scaleX: 1,\n        scaleY: 1,\n        rotation: 0,\n        tint: 0xffffff,\n        alpha: 1,\n    };\n    /**\n     * The x-coordinate of the anchor point (0-1).\n     * Controls the origin point for rotation and scaling.\n     * @example\n     * ```ts\n     * particle.anchorX = 0.5; // Center horizontally\n     * ```\n     * @default 0\n     */\n    public anchorX: number;\n\n    /**\n     * The y-coordinate of the anchor point (0-1).\n     * Controls the origin point for rotation and scaling.\n     * @example\n     * ```ts\n     * particle.anchorY = 0.5; // Center vertically\n     * ```\n     * @default 0\n     */\n    public anchorY: number;\n\n    /**\n     * The x-coordinate of the particle in world space.\n     * @example\n     * ```ts\n     * particle.x = 100; // Move right\n     * particle.x += Math.sin(time) * 10; // Oscillate horizontally\n     * ```\n     * @default 0\n     */\n    public x: number;\n\n    /**\n     * The y-coordinate of the particle in world space.\n     * @example\n     * ```ts\n     * particle.y = 100; // Move down\n     * particle.y += Math.cos(time) * 10; // Oscillate vertically\n     * ```\n     * @default 0\n     */\n    public y: number;\n\n    /**\n     * The horizontal scale factor of the particle.\n     * Values greater than 1 increase size, less than 1 decrease size.\n     * @example\n     * ```ts\n     * particle.scaleX = 2; // Double width\n     * particle.scaleX *= 0.9; // Shrink over time\n     * ```\n     * @default 1\n     */\n    public scaleX: number;\n\n    /**\n     * The vertical scale factor of the particle.\n     * Values greater than 1 increase size, less than 1 decrease size.\n     * @example\n     * ```ts\n     * particle.scaleY = 2; // Double height\n     * particle.scaleY *= 0.9; // Shrink over time\n     * ```\n     * @default 1\n     */\n    public scaleY: number;\n\n    /**\n     * The rotation of the particle in radians.\n     * Positive values rotate clockwise.\n     * @example\n     * ```ts\n     * particle.rotation = Math.PI; // 180 degrees\n     * particle.rotation += 0.1; // Rotate slowly clockwise\n     * ```\n     * @default 0\n     */\n    public rotation: number;\n\n    /**\n     * The color of the particle as a 32-bit RGBA value.\n     * Combines tint and alpha into a single value.\n     * @example\n     * ```ts\n     * // Usually set via tint and alpha properties\n     * particle.tint = 0xff0000; // Red\n     * particle.alpha = 0.5; // Half transparent\n     * console.log(particle.color); // Combined RGBA value\n     * ```\n     * @default 0xffffffff\n     */\n    public color: number;\n\n    /**\n     * The texture used to render this particle.\n     * All particles in a container should share the same base texture.\n     * @example\n     * ```ts\n     * particle.texture = Texture.from('particle.png');\n     * ```\n     */\n    public texture: Texture;\n\n    private _alpha: number;\n    private _tint: number;\n\n    constructor(options: Texture | ParticleOptions)\n    {\n        if (options instanceof Texture)\n        {\n            this.texture = options;\n            assignWithIgnore(this, Particle.defaultOptions, {});\n        }\n        else\n        {\n            const combined = { ...Particle.defaultOptions, ...options };\n\n            assignWithIgnore(this, combined, {});\n        }\n    }\n\n    /**\n     * The transparency of the particle. Values range from 0 (fully transparent)\n     * to 1 (fully opaque). Values outside this range are clamped.\n     * @example\n     * ```ts\n     * // Create a semi-transparent particle\n     * const particle = new Particle({\n     *     texture: Texture.from('particle.png'),\n     *     alpha: 0.5\n     * });\n     *\n     * // Fade out\n     * particle.alpha *= 0.9;\n     *\n     * // Fade in\n     * particle.alpha = Math.min(particle.alpha + 0.1, 1);\n     *\n     * // Values are clamped to valid range\n     * particle.alpha = 1.5; // Becomes 1.0\n     * particle.alpha = -0.5; // Becomes 0.0\n     *\n     * // Animate transparency\n     * app.ticker.add((delta) => {\n     *     const time = performance.now() / 1000;\n     *     particle.alpha = 0.5 + Math.sin(time) * 0.5; // Pulse between 0-1\n     * });\n     * ```\n     * @default 1\n     * @see {@link Particle#tint} For controlling particle color\n     * @see {@link Particle#color} For the combined color and alpha value\n     */\n    get alpha(): number\n    {\n        return this._alpha;\n    }\n\n    set alpha(value: number)\n    {\n        this._alpha = Math.min(Math.max(value, 0), 1);\n\n        this._updateColor();\n    }\n\n    /**\n     * The tint color of the particle. Can be set using hex numbers or CSS color strings.\n     * The tint is multiplied with the texture color to create the final particle color.\n     * @example\n     * ```ts\n     * // Create a red particle\n     * const particle = new Particle({\n     *     texture: Texture.from('particle.png'),\n     *     tint: 0xff0000\n     * });\n     *\n     * // Use CSS color strings\n     * particle.tint = '#00ff00';  // Green\n     * particle.tint = 'blue';     // Blue\n     *\n     * // Animate tint color\n     * app.ticker.add(() => {\n     *     const time = performance.now() / 1000;\n     *\n     *     // Cycle through hues\n     *     const hue = (time * 50) % 360;\n     *     particle.tint = `hsl(${hue}, 100%, 50%)`;\n     * });\n     *\n     * // Reset to white (no tint)\n     * particle.tint = 0xffffff;\n     * ```\n     * @type {ColorSource} Hex number or CSS color string\n     * @default 0xffffff\n     * @see {@link Particle#alpha} For controlling transparency\n     * @see {@link Particle#color} For the combined color and alpha value\n     * @see {@link Color} For supported color formats\n     */\n    get tint(): number\n    {\n        return bgr2rgb(this._tint);\n    }\n\n    set tint(value: ColorSource)\n    {\n        this._tint = Color.shared.setValue(value ?? 0xFFFFFF).toBgrNumber();\n\n        this._updateColor();\n    }\n\n    private _updateColor()\n    {\n        // combine alpha and tint\n        this.color = this._tint + (((this._alpha * 255) | 0) << 24);\n    }\n}\n", "import type { VertexFormat } from '../../../rendering/renderers/shared/geometry/const';\nimport type { IParticle } from './Particle';\n\n/** @internal */\nexport interface ParticleRendererProperty\n{\n    attributeName: string;\n    format: VertexFormat;\n    code: string;\n    dynamic: boolean;\n    // optional update function if you have customized this stuff and need it to work with unsafe-eval\n    updateFunction?: (ps: IParticle[], f32v: Float32Array, u32v: Uint32Array, offset: number, stride: number) => void;\n}\n\n/** @internal */\nexport const particleData = {\n    vertex: {\n        attributeName: 'aVertex',\n        format: 'float32x2',\n        code: `\n            const texture = p.texture;\n            const sx = p.scaleX;\n            const sy = p.scaleY;\n            const ax = p.anchorX;\n            const ay = p.anchorY;\n            const trim = texture.trim;\n            const orig = texture.orig;\n\n            if (trim)\n            {\n                w1 = trim.x - (ax * orig.width);\n                w0 = w1 + trim.width;\n\n                h1 = trim.y - (ay * orig.height);\n                h0 = h1 + trim.height;\n            }\n            else\n            {\n                w1 = -ax * (orig.width);\n                w0 = w1 + orig.width;\n\n                h1 = -ay * (orig.height);\n                h0 = h1 + orig.height;\n            }\n\n            f32v[offset] = w1 * sx;\n            f32v[offset + 1] = h1 * sy;\n\n            f32v[offset + stride] = w0 * sx;\n            f32v[offset + stride + 1] = h1 * sy;\n\n            f32v[offset + (stride * 2)] = w0 * sx;\n            f32v[offset + (stride * 2) + 1] = h0 * sy;\n\n            f32v[offset + (stride * 3)] = w1 * sx;\n            f32v[offset + (stride * 3) + 1] = h0 * sy;\n        `,\n        dynamic: false,\n    },\n    // positionData\n    position: {\n        attributeName: 'aPosition',\n        format: 'float32x2',\n        code: `\n            var x = p.x;\n            var y = p.y;\n\n            f32v[offset] = x;\n            f32v[offset + 1] = y;\n\n            f32v[offset + stride] = x;\n            f32v[offset + stride + 1] = y;\n\n            f32v[offset + (stride * 2)] = x;\n            f32v[offset + (stride * 2) + 1] = y;\n\n            f32v[offset + (stride * 3)] = x;\n            f32v[offset + (stride * 3) + 1] = y;\n        `,\n        dynamic: true,\n    },\n    // rotationData\n    rotation: {\n        attributeName: 'aRotation',\n        format: 'float32',\n        code: `\n            var rotation = p.rotation;\n\n            f32v[offset] = rotation;\n            f32v[offset + stride] = rotation;\n            f32v[offset + (stride * 2)] = rotation;\n            f32v[offset + (stride * 3)] = rotation;\n        `,\n        dynamic: false,\n    },\n    // uvsData\n    uvs: {\n        attributeName: 'aUV',\n        format: 'float32x2',\n        code: `\n            var uvs = p.texture.uvs;\n\n            f32v[offset] = uvs.x0;\n            f32v[offset + 1] = uvs.y0;\n\n            f32v[offset + stride] = uvs.x1;\n            f32v[offset + stride + 1] = uvs.y1;\n\n            f32v[offset + (stride * 2)] = uvs.x2;\n            f32v[offset + (stride * 2) + 1] = uvs.y2;\n\n            f32v[offset + (stride * 3)] = uvs.x3;\n            f32v[offset + (stride * 3) + 1] = uvs.y3;\n        `,\n        dynamic: false,\n    },\n    // tintData\n    color: {\n        attributeName: 'aColor',\n        format: 'unorm8x4',\n        code: `\n            const c = p.color;\n\n            u32v[offset] = c;\n            u32v[offset + stride] = c;\n            u32v[offset + (stride * 2)] = c;\n            u32v[offset + (stride * 3)] = c;\n        `,\n        dynamic: false,\n    },\n} as Record<string, ParticleRendererProperty>;\n", "import { extensions } from '../../extensions/Extensions';\nimport { CanvasParticleContainerPipe } from './canvas/CanvasParticleContainerPipe';\nimport { GlParticleContainerPipe } from './gl/GlParticleContainerPipe';\nimport { GpuParticleContainerPipe } from './gpu/GpuParticleContainerPipe';\n\n// NOTE: this is the first occurrence of needing both gl and gpu pipes in the same file\n// This could cause some issues with tree shaking in the future.\n// Right now these two files do not import anything specific for a renderer, so is not an issue for now.\nextensions.add(GlParticleContainerPipe);\nextensions.add(GpuParticleContainerPipe);\nextensions.add(CanvasParticleContainerPipe);\n", "import { Bounds } from '../../container/bounds/Bounds';\nimport { ViewContainer, type ViewContainerOptions } from '../../view/ViewContainer';\nimport { type ParticleBuffer } from './ParticleBuffer';\nimport { particleData } from './particleData';\nimport '../init';\n\nimport type { Instruction } from '../../../rendering/renderers/shared/instructions/Instruction';\nimport type { Shader } from '../../../rendering/renderers/shared/shader/Shader';\nimport type { Texture } from '../../../rendering/renderers/shared/texture/Texture';\nimport type { ContainerChild } from '../../container/Container';\nimport type { DestroyOptions } from '../../container/destroyTypes';\nimport type { IParticle } from './Particle';\nimport type { ParticleRendererProperty } from './particleData';\n\nconst emptyBounds = new Bounds(0, 0, 0, 0);\n\n/**\n * Represents the properties of a particle that can be dynamically updated each frame.\n * These properties control which aspects of particles are recalculated during rendering.\n * Setting a property to true enables per-frame updates, while false only updates when manually triggered.\n * @example\n * ```ts\n * // Create a particle container with dynamic position and rotation\n * const container = new ParticleContainer({\n *     dynamicProperties: {\n *         position: true,  // Update positions each frame\n *         rotation: true,  // Update rotations each frame\n *         vertex: false,   // Static vertices\n *         uvs: false,     // Static texture coordinates\n *         color: false     // Static colors\n *     }\n * });\n *\n * // Create a fully dynamic particle container\n * const dynamicContainer = new ParticleContainer({\n *     dynamicProperties: {\n *         vertex: true,    // Dynamic mesh deformation\n *         position: true,  // Dynamic movement\n *         rotation: true,  // Dynamic spinning\n *         uvs: true,      // Dynamic texture animation\n *         color: true     // Dynamic coloring\n *     }\n * });\n * ```\n * @see {@link ParticleContainer} For the main particle container class\n * @see {@link ParticleContainerOptions} For all container configuration options\n * @category scene\n * @standard\n */\nexport interface ParticleProperties\n{\n    /**\n     * When true, vertex positions are updated each frame.\n     * Useful for mesh deformation effects.\n     * @default false\n     */\n    vertex?: boolean;\n\n    /**\n     * When true, particle positions are updated each frame.\n     * Essential for moving particles.\n     * @default true\n     */\n    position?: boolean;\n\n    /**\n     * When true, rotation values are updated each frame.\n     * Needed for spinning particles.\n     * @default false\n     */\n    rotation?: boolean;\n\n    /**\n     * When true, texture coordinates are updated each frame.\n     * Required for texture animation.\n     * @default false\n     */\n    uvs?: boolean;\n\n    /**\n     * When true, color values are updated each frame.\n     * Enables color transitions and alpha changes.\n     * @default false\n     */\n    color?: boolean;\n}\n\n/**\n * Options for configuring a ParticleContainer. Controls how particles are rendered, updated, and managed.\n * @example\n * ```ts\n * // Create a basic particle container\n * const container = new ParticleContainer({\n *     texture: Texture.from('particle.png'),\n *     particles: [\n *         new Particle(texture),\n *         new Particle(texture)\n *     ],\n *     dynamicProperties: {\n *         position: true,  // Update positions each frame\n *         rotation: true   // Update rotations each frame\n *     }\n * });\n * ```\n * @see {@link ParticleContainer} For the main particle container class\n * @see {@link ParticleProperties} For dynamic property configuration\n * @template T The type of particles in the container. Must implement {@link IParticle}. * @category scene\n * @standard\n * @noInheritDoc\n */\nexport interface ParticleContainerOptions\n<T extends IParticle = IParticle> extends PixiMixins.ParticleContainerOptions, Omit<ViewContainerOptions, 'children'>\n{\n    /**\n     * Specifies which particle properties should update each frame.\n     * Set properties to true for per-frame updates, false for static values.\n     * @default { position: true, rotation: false, vertex: false, uvs: false, color: false }\n     */\n    dynamicProperties?: ParticleProperties & Record<string, boolean>;\n\n    /**\n     * Custom shader for rendering particles. Allows for custom visual effects.\n     * @advanced\n     */\n    shader?: Shader;\n\n    /**\n     * When true, particle positions are rounded to the nearest pixel.\n     * Helps achieve crisp rendering at the cost of smooth motion.\n     * @default false\n     */\n    roundPixels?: boolean;\n\n    /**\n     * The texture used for all particles in this container.\n     * If not provided, uses the texture of the first particle added.\n     */\n    texture?: Texture;\n\n    /** Initial array of particles to add to the container. All particles must share the same base texture. */\n    particles?: T[];\n}\n// eslint-disable-next-line requireExport/require-export-jsdoc, requireMemberAPI/require-member-api-doc\nexport interface ParticleContainer extends PixiMixins.ParticleContainer, ViewContainer<ParticleBuffer> {}\n\n/**\n * The ParticleContainer class is a highly optimized container that can render 1000s or particles at great speed.\n *\n * A ParticleContainer is specialized in that it can only contain and render particles. Particles are\n * lightweight objects that use minimal memory, which helps boost performance.\n *\n * It can render particles EXTREMELY fast!\n *\n * The tradeoff of using a ParticleContainer is that most advanced functionality is unavailable. Particles are simple\n * and cannot have children, filters, masks, etc. They possess only the basic properties: position, scale, rotation,\n * and color.\n *\n * All particles must share the same texture source (using something like a sprite sheet works well here).\n *\n * When creating a ParticleContainer, a developer can specify which of these properties are static and which are dynamic.\n * - Static properties are only updated when you add or remove a child, or when the `update` function is called.\n * - Dynamic properties are updated every frame.\n *\n * It is up to the developer to specify which properties are static and which are dynamic. Generally, the more static\n * properties you have (i.e., those that do not change per frame), the faster the rendering.\n *\n * If the developer modifies the children order or any static properties of the particle, they must call the `update` method.\n *\n * By default, only the `position` property is set to dynamic, which makes rendering very fast!\n *\n * Developers can also provide a custom shader to the particle container, allowing them to render particles in a custom way.\n *\n * To help with performance, the particle containers bounds are not calculated.\n * It's up to the developer to set the boundsArea property.\n *\n * It's extremely easy to use. Below is an example of rendering thousands of sprites at lightning speed.\n *\n * --------- EXPERIMENTAL ---------\n *\n * This is a new API, things may change and it may not work as expected.\n * We want to hear your feedback as we go!\n *\n * --------------------------------\n * @example\n * ```ts\n * import { ParticleContainer, Particle } from 'pixi.js';\n *\n * const container = new ParticleContainer();\n *\n * for (let i = 0; i < 100; ++i)\n * {\n *     let particle = new Particle(texture);\n *     container.addParticle(particle);\n * }\n * ```\n * @template T The type of particles in the container. Must implement {@link IParticle}.\n * @category scene\n * @standard\n */\nexport class ParticleContainer\n<T extends IParticle = IParticle> extends ViewContainer<ParticleBuffer> implements Instruction\n{\n    /**\n     * Defines the default options for creating a ParticleContainer.\n     * @example\n     * ```ts\n     * // Change defaults globally\n     * ParticleContainer.defaultOptions = {\n     *     dynamicProperties: {\n     *         position: true,  // Update positions each frame\n     *         rotation: true,  // Update rotations each frame\n     *         vertex: false,   // Static vertices\n     *         uvs: false,      // Static texture coordinates\n     *         color: false     // Static colors\n     *     },\n     *     roundPixels: true // Enable pixel rounding for crisp rendering\n     * };\n     * ```\n     * @property {Record<string, boolean>} dynamicProperties - Specifies which properties are dynamic.\n     * @property {boolean} roundPixels - Indicates if pixels should be rounded.\n     */\n    public static defaultOptions: Pick<ParticleContainerOptions, 'dynamicProperties' | 'roundPixels'> = {\n    /** Specifies which properties are dynamic. */\n        dynamicProperties: {\n            /** Indicates if vertex positions are dynamic. */\n            vertex: false,\n            /** Indicates if particle positions are dynamic. */\n            position: true,\n            /** Indicates if particle rotations are dynamic. */\n            rotation: false,\n            /** Indicates if UV coordinates are dynamic. */\n            uvs: false,\n            /** Indicates if particle colors are dynamic. */\n            color: false,\n        },\n        /** Indicates if pixels should be rounded for rendering. */\n        roundPixels: false\n    };\n\n    /**\n     * The unique identifier for the render pipe of this ParticleContainer.\n     * @internal\n     */\n    public override readonly renderPipeId: string = 'particle';\n\n    /** @internal */\n    public batched = false;\n\n    /**\n     * A record of properties and their corresponding ParticleRendererProperty.\n     * @internal\n     */\n    public _properties: Record<string, ParticleRendererProperty>;\n\n    /**\n     * Indicates if the children of this ParticleContainer have changed and need to be updated.\n     * @internal\n     */\n    public _childrenDirty = false;\n\n    /**\n     * An array of particles that are children of this ParticleContainer.\n     * This array can be modified directly for performance, but the 'update' method\n     * must be called afterwards to ensure the container is rendered correctly.\n     * @example\n     * ```ts\n     * const container = new ParticleContainer();\n     *\n     * // Add particles directly to the array\n     * container.particleChildren.push(\n     *     new Particle(texture),\n     *     new Particle(texture)\n     * );\n     * container.update(); // Required after direct modification\n     *\n     * // Modify existing particles\n     * container.particleChildren.forEach(particle => {\n     *     particle.position.x += 10;\n     * });\n     *\n     * // Remove particles\n     * container.particleChildren.length = 0; // Clear all\n     * container.update();\n     * ```\n     * @see {@link ParticleContainer#update} For updating after modifications\n     * @see {@link ParticleContainer#addParticle} For a safer way to add particles\n     * @see {@link ParticleContainer#removeParticle} For a safer way to remove particles\n     */\n    public particleChildren: T[];\n\n    /**\n     * The shader used for rendering particles in this ParticleContainer.\n     * @advanced\n     */\n    public shader: Shader;\n\n    /**\n     * The texture used for rendering particles in this ParticleContainer. All particles\n     * must share the same base texture for optimal performance.\n     *\n     * > [!NOTE]\n     * > If not set, the texture of the first particle added to this container will be used.\n     * @example\n     * ```ts\n     * const container = new ParticleContainer();\n     * // Set texture for all particles\n     * container.texture = Texture.from('particle.png');\n     *\n     * // Create particles using container's texture\n     * for (let i = 0; i < 100; i++) {\n     *     const particle = new Particle(container.texture);\n     *     container.addParticle(particle); // Will use the particles texture if not set\n     * }\n     * ```\n     * @default null\n     * @see {@link ParticleContainerOptions#texture} For setting texture via constructor\n     * @see {@link Particle} For creating particles with textures\n     */\n    public texture: Texture;\n\n    /**\n     * @param options - The options for creating the sprite.\n     */\n    constructor(options: ParticleContainerOptions<T> = {})\n    {\n        options = {\n            ...ParticleContainer.defaultOptions,\n            ...options,\n            dynamicProperties: {\n                ...ParticleContainer.defaultOptions.dynamicProperties,\n                ...options?.dynamicProperties,\n            },\n        };\n\n        // split out\n        const { dynamicProperties, shader, roundPixels, texture, particles, ...rest } = options;\n\n        super({\n            label: 'ParticleContainer',\n            ...rest,\n        });\n\n        this.texture = texture || null;\n        this.shader = shader;\n\n        this._properties = {};\n\n        for (const key in particleData)\n        {\n            const property = particleData[key];\n            const dynamic = dynamicProperties[key];\n\n            this._properties[key] = {\n                ...property,\n                dynamic,\n            };\n        }\n\n        this.allowChildren = true;\n        this.roundPixels = roundPixels ?? false;\n\n        this.particleChildren = particles ?? [];\n    }\n\n    /**\n     * Adds one or more particles to the container. The particles will be rendered using the container's shared texture\n     * and properties. When adding multiple particles, they must all share the same base texture.\n     * @example\n     * ```ts\n     * const container = new ParticleContainer();\n     *\n     * // Add a single particle\n     * const particle = new Particle(Assets.get('particleTexture'));\n     * container.addParticle(particle);\n     *\n     * // Add multiple particles at once\n     * const particles = [\n     *     new Particle(Assets.get('particleTexture')),\n     *     new Particle(Assets.get('particleTexture')),\n     *     new Particle(Assets.get('particleTexture'))\n     * ];\n     *\n     * container.addParticle(...particles);\n     * ```\n     * @param children - The Particle(s) to add to the container\n     * @returns The first particle that was added, for method chaining\n     * @see {@link ParticleContainer#texture} For setting the shared texture\n     * @see {@link ParticleContainer#update} For updating after modifications\n     */\n    public addParticle(...children: T[]): T\n    {\n        for (let i = 0; i < children.length; i++)\n        {\n            this.particleChildren.push(children[i]);\n        }\n\n        this.onViewUpdate();\n\n        return children[0];\n    }\n\n    /**\n     * Removes one or more particles from the container. The particles must already be children\n     * of this container to be removed.\n     * @example\n     * ```ts\n     * // Remove a single particle\n     * container.removeParticle(particle1);\n     *\n     * // Remove multiple particles at once\n     * container.removeParticle(particle2, particle3);\n     * ```\n     * @param children - The Particle(s) to remove from the container\n     * @returns The first particle that was removed, for method chaining\n     * @see {@link ParticleContainer#particleChildren} For accessing all particles\n     * @see {@link ParticleContainer#removeParticles} For removing particles by index\n     * @see {@link ParticleContainer#removeParticleAt} For removing a particle at a specific index\n     */\n    public removeParticle(...children: T[]): T\n    {\n        let didRemove = false;\n\n        for (let i = 0; i < children.length; i++)\n        {\n            const index = this.particleChildren.indexOf(children[i] as T);\n\n            if (index > -1)\n            {\n                this.particleChildren.splice(index, 1);\n                didRemove = true;\n            }\n        }\n\n        if (didRemove) this.onViewUpdate();\n\n        return children[0];\n    }\n\n    /**\n     * Updates the particle container's internal state. Call this method after manually modifying\n     * the particleChildren array or when changing static properties of particles.\n     * @example\n     * ```ts\n     * // Batch modify particles\n     * container.particleChildren.push(...particles);\n     * container.update(); // Required after direct array modification\n     *\n     * // Update static properties\n     * container.particleChildren.forEach(particle => {\n     *     particle.position.set(\n     *         Math.random() * 800,\n     *         Math.random() * 600\n     *     );\n     * });\n     * container.update(); // Required after changing static positions\n     * ```\n     * @see {@link ParticleProperties} For configuring dynamic vs static properties\n     * @see {@link ParticleContainer#particleChildren} For direct array access\n     */\n    public update()\n    {\n        this._childrenDirty = true;\n    }\n\n    protected override onViewUpdate()\n    {\n        this._childrenDirty = true;\n        super.onViewUpdate();\n    }\n\n    /**\n     * Returns a static empty bounds object since ParticleContainer does not calculate bounds automatically\n     * for performance reasons. Use the `boundsArea` property to manually set container bounds.\n     * @example\n     * ```ts\n     * const container = new ParticleContainer({\n     *     texture: Texture.from('particle.png')\n     * });\n     *\n     * // Default bounds are empty\n     * console.log(container.bounds); // Bounds(0, 0, 0, 0)\n     *\n     * // Set manual bounds for the particle area\n     * container.boundsArea = {\n     *     minX: 0,\n     *     minY: 0,\n     *     maxX: 800,\n     *     maxY: 600\n     * };\n     * ```\n     * @readonly\n     * @returns {Bounds} An empty bounds object (0,0,0,0)\n     * @see {@link Container#boundsArea} For manually setting container bounds\n     * @see {@link Bounds} For bounds object structure\n     */\n    public get bounds()\n    {\n        return emptyBounds;\n    }\n\n    /** @private */\n    protected override updateBounds(): void { /* empty */ }\n\n    /**\n     * Destroys this sprite renderable and optionally its texture.\n     * @param options - Options parameter. A boolean will act as if all options\n     *  have been set to that value\n     * @example\n     * particleContainer.destroy();\n     * particleContainer.destroy(true);\n     * particleContainer.destroy({ texture: true, textureSource: true, children: true });\n     */\n    public override destroy(options: DestroyOptions = false)\n    {\n        super.destroy(options);\n\n        const destroyTexture = typeof options === 'boolean' ? options : options?.texture;\n\n        if (destroyTexture)\n        {\n            const destroyTextureSource = typeof options === 'boolean' ? options : options?.textureSource;\n\n            const texture = this.texture ?? this.particleChildren[0]?.texture;\n\n            if (texture)\n            {\n                texture.destroy(destroyTextureSource);\n            }\n        }\n\n        this.texture = null;\n        this.shader?.destroy();\n    }\n\n    /**\n     * Removes all particles from this container that are within the begin and end indexes.\n     * @param beginIndex - The beginning position.\n     * @param endIndex - The ending position. Default value is size of the container.\n     * @returns - List of removed particles\n     */\n    public removeParticles(beginIndex?: number, endIndex?: number)\n    {\n        beginIndex ??= 0;\n        endIndex ??= this.particleChildren.length;\n\n        // Remove the correct range\n        const children = this.particleChildren.splice(\n            beginIndex,\n            endIndex - beginIndex\n        );\n\n        this.onViewUpdate();\n\n        return children as T[];\n    }\n\n    /**\n     * Removes a particle from the specified index position.\n     * @param index - The index to get the particle from\n     * @returns The particle that was removed.\n     */\n    public removeParticleAt<U extends T = T>(index: number): U\n    {\n        const child = this.particleChildren.splice(index, 1);\n\n        this.onViewUpdate();\n\n        return child[0] as U;\n    }\n\n    /**\n     * Adds a particle to the container at a specified index. If the index is out of bounds an error will be thrown.\n     * If the particle is already in this container, it will be moved to the specified index.\n     * @param {Container} child - The particle to add.\n     * @param {number} index - The absolute index where the particle will be positioned at the end of the operation.\n     * @returns {Container} The particle that was added.\n     */\n    public addParticleAt<U extends T = T>(child: U, index: number): U\n    {\n        this.particleChildren.splice(index, 0, child);\n\n        this.onViewUpdate();\n\n        return child;\n    }\n\n    /**\n     * This method is not available in ParticleContainer.\n     *\n     * Calling this method will throw an error. Please use `ParticleContainer.addParticle()` instead.\n     * @param {...any} _children\n     * @throws {Error} Always throws an error as this method is not available.\n     * @ignore\n     */\n    public override addChild<U extends ContainerChild[]>(..._children: U): U[0]\n    {\n        throw new Error(\n            'ParticleContainer.addChild() is not available. Please use ParticleContainer.addParticle()',\n        );\n    }\n    /**\n     * This method is not available in ParticleContainer.\n     * Calling this method will throw an error. Please use `ParticleContainer.removeParticle()` instead.\n     * @param {...any} _children\n     * @throws {Error} Always throws an error as this method is not available.\n     * @ignore\n     */\n    public override removeChild<U extends ContainerChild[]>(..._children: U): U[0]\n    {\n        throw new Error(\n            'ParticleContainer.removeChild() is not available. Please use ParticleContainer.removeParticle()',\n        );\n    }\n    /**\n     * This method is not available in ParticleContainer.\n     *\n     * Calling this method will throw an error. Please use `ParticleContainer.removeParticles()` instead.\n     * @param {number} [_beginIndex]\n     * @param {number} [_endIndex]\n     * @throws {Error} Always throws an error as this method is not available.\n     * @ignore\n     */\n    public override removeChildren(_beginIndex?: number, _endIndex?: number): ContainerChild[]\n    {\n        throw new Error(\n            'ParticleContainer.removeChildren() is not available. Please use ParticleContainer.removeParticles()',\n        );\n    }\n    /**\n     * This method is not available in ParticleContainer.\n     *\n     * Calling this method will throw an error. Please use `ParticleContainer.removeParticleAt()` instead.\n     * @param {number} _index\n     * @throws {Error} Always throws an error as this method is not available.\n     * @ignore\n     */\n    public override removeChildAt<U extends ContainerChild>(_index: number): U\n    {\n        throw new Error(\n            'ParticleContainer.removeChildAt() is not available. Please use ParticleContainer.removeParticleAt()',\n        );\n    }\n    /**\n     * This method is not available in ParticleContainer.\n     *\n     * Calling this method will throw an error. Please use `ParticleContainer.getParticleAt()` instead.\n     * @param {number} _index\n     * @throws {Error} Always throws an error as this method is not available.\n     * @ignore\n     */\n    public override getChildAt<U extends ContainerChild>(_index: number): U\n    {\n        throw new Error(\n            'ParticleContainer.getChildAt() is not available. Please use ParticleContainer.getParticleAt()',\n        );\n    }\n    /**\n     * This method is not available in ParticleContainer.\n     *\n     * Calling this method will throw an error. Please use `ParticleContainer.setParticleIndex()` instead.\n     * @param {ContainerChild} _child\n     * @param {number} _index\n     * @throws {Error} Always throws an error as this method is not available.\n     * @ignore\n     */\n    public override setChildIndex(_child: ContainerChild, _index: number): void\n    {\n        throw new Error(\n            'ParticleContainer.setChildIndex() is not available. Please use ParticleContainer.setParticleIndex()',\n        );\n    }\n    /**\n     * This method is not available in ParticleContainer.\n     *\n     * Calling this method will throw an error. Please use `ParticleContainer.getParticleIndex()` instead.\n     * @param {ContainerChild} _child\n     * @throws {Error} Always throws an error as this method is not available.\n     * @ignore\n     */\n    public override getChildIndex(_child: ContainerChild): number\n    {\n        throw new Error(\n            'ParticleContainer.getChildIndex() is not available. Please use ParticleContainer.getParticleIndex()',\n        );\n    }\n    /**\n     * This method is not available in ParticleContainer.\n     *\n     * Calling this method will throw an error. Please use `ParticleContainer.addParticleAt()` instead.\n     * @param {ContainerChild} _child\n     * @param {number} _index\n     * @throws {Error} Always throws an error as this method is not available.\n     * @ignore\n     */\n    public override addChildAt<U extends ContainerChild>(_child: U, _index: number): U\n    {\n        throw new Error(\n            'ParticleContainer.addChildAt() is not available. Please use ParticleContainer.addParticleAt()',\n        );\n    }\n    /**\n     * This method is not available in ParticleContainer.\n     *\n     * Calling this method will throw an error. Please use `ParticleContainer.swapParticles()` instead.\n     * @param {ContainerChild} _child\n     * @param {ContainerChild} _child2\n     * @ignore\n     */\n    public override swapChildren<U extends ContainerChild>(_child: U, _child2: U): void\n    {\n        throw new Error(\n            'ParticleContainer.swapChildren() is not available. Please use ParticleContainer.swapParticles()',\n        );\n    }\n\n    /**\n     * This method is not available in ParticleContainer.\n     *\n     * Calling this method will throw an error.\n     * @param _child - The child to reparent\n     * @throws {Error} Always throws an error as this method is not available.\n     * @ignore\n     */\n    public override reparentChild(..._child: ContainerChild[]): any\n    {\n        throw new Error('ParticleContainer.reparentChild() is not available with the particle container');\n    }\n\n    /**\n     * This method is not available in ParticleContainer.\n     *\n     * Calling this method will throw an error.\n     * @param _child - The child to reparent\n     * @param _index - The index to reparent the child to\n     * @throws {Error} Always throws an error as this method is not available.\n     * @ignore\n     */\n    public override reparentChildAt(_child: ContainerChild, _index: number): any\n    {\n        throw new Error('ParticleContainer.reparentChildAt() is not available with the particle container');\n    }\n}\n", "import { ExtensionType } from '../../../extensions/Extensions';\nimport { canvasUtils } from '../../../rendering/renderers/canvas/utils/canvasUtils';\nimport { bgr2rgb } from '../../../scene/container/container-mixins/getGlobalMixin';\nimport { multiplyHexColors } from '../../../scene/container/utils/multiplyHexColors';\n\nimport type { CanvasRenderer } from '../../../rendering/renderers/canvas/CanvasRenderer';\nimport type { InstructionSet } from '../../../rendering/renderers/shared/instructions/InstructionSet';\nimport type { RenderPipe } from '../../../rendering/renderers/shared/instructions/RenderPipe';\nimport type { Renderer } from '../../../rendering/renderers/types';\nimport type { NineSliceSprite } from '../NineSliceSprite';\n\n/**\n * The NineSliceSpritePipe is a render pipe for rendering NineSliceSprites with Canvas2D.\n * @internal\n */\nexport class CanvasNineSliceSpritePipe implements RenderPipe<NineSliceSprite>\n{\n    /** @ignore */\n    public static extension = {\n        type: [\n            ExtensionType.CanvasPipes,\n        ],\n        name: 'nineSliceSprite',\n    } as const;\n\n    private _renderer: CanvasRenderer;\n\n    constructor(renderer: Renderer)\n    {\n        this._renderer = renderer as CanvasRenderer;\n    }\n\n    public validateRenderable(_sprite: NineSliceSprite): boolean\n    {\n        return false;\n    }\n\n    public addRenderable(sprite: NineSliceSprite, instructionSet: InstructionSet)\n    {\n        this._renderer.renderPipes.batch.break(instructionSet);\n        instructionSet.add(sprite);\n    }\n\n    public updateRenderable(_sprite: NineSliceSprite)\n    {\n        // no-op for canvas\n    }\n\n    public execute(sprite: NineSliceSprite)\n    {\n        const renderer = this._renderer;\n        const contextSystem = renderer.canvasContext;\n        const context = contextSystem.activeContext;\n\n        context.save();\n\n        const transform = sprite.groupTransform;\n        const roundPixels = (renderer._roundPixels | sprite._roundPixels) as 0 | 1;\n\n        contextSystem.setContextTransform(transform, roundPixels === 1);\n        contextSystem.setBlendMode(sprite.groupBlendMode);\n\n        const globalColor = renderer.globalUniforms.globalUniformData?.worldColor ?? 0xFFFFFFFF;\n        const groupColorAlpha = sprite.groupColorAlpha;\n\n        const globalAlpha = ((globalColor >>> 24) & 0xFF) / 255;\n        const groupAlphaValue = ((groupColorAlpha >>> 24) & 0xFF) / 255;\n\n        const filterAlpha = (renderer.filter as { alphaMultiplier?: number } | null)?.alphaMultiplier ?? 1;\n        const alpha = globalAlpha * groupAlphaValue * filterAlpha;\n\n        if (alpha <= 0)\n        {\n            context.restore();\n\n            return;\n        }\n\n        context.globalAlpha = alpha;\n\n        const globalTint = globalColor & 0xFFFFFF;\n        const groupTintBGR = groupColorAlpha & 0xFFFFFF;\n\n        const tint = bgr2rgb(multiplyHexColors(groupTintBGR, globalTint));\n\n        const texture = sprite.texture;\n\n        const drawSource = canvasUtils.getCanvasSource(texture);\n\n        if (!drawSource)\n        {\n            context.restore();\n\n            return;\n        }\n\n        const smoothProperty = contextSystem.smoothProperty;\n        const shouldSmooth = texture.source.style.scaleMode !== 'nearest';\n\n        if (context[smoothProperty] !== shouldSmooth)\n        {\n            context[smoothProperty] = shouldSmooth;\n        }\n\n        // Use getTintedCanvas when tinted OR when texture is rotated (handles rotation compensation)\n        const needsProcessing = tint !== 0xFFFFFF || texture.rotate !== 0;\n        const finalSource = needsProcessing\n            ? canvasUtils.getTintedCanvas({ texture }, tint) as CanvasImageSource\n            : drawSource;\n\n        const {\n            leftWidth,\n            topHeight,\n            rightWidth,\n            bottomHeight,\n            width,\n            height,\n        } = sprite;\n\n        const totalBorderWidth = leftWidth + rightWidth;\n        const totalBorderHeight = topHeight + bottomHeight;\n        const scale = Math.min(\n            totalBorderWidth > width ? width / totalBorderWidth : 1,\n            totalBorderHeight > height ? height / totalBorderHeight : 1,\n            1,\n        );\n\n        const destLeftWidth = leftWidth * scale;\n        const destRightWidth = rightWidth * scale;\n        const destTopHeight = topHeight * scale;\n        const destBottomHeight = bottomHeight * scale;\n        const destCenterWidth = Math.max(0, width - destLeftWidth - destRightWidth);\n        const destCenterHeight = Math.max(0, height - destTopHeight - destBottomHeight);\n\n        const anchor = sprite.anchor;\n\n        const resolution = texture.source._resolution ?? texture.source.resolution ?? 1;\n        let sx = (texture.frame.x) * resolution;\n        let sy = (texture.frame.y) * resolution;\n\n        const dx = -anchor.x * width;\n        const dy = -anchor.y * height;\n\n        const lw = leftWidth * resolution;\n        const tw = topHeight * resolution;\n        const rw = rightWidth * resolution;\n        const bw = bottomHeight * resolution;\n\n        let sw = (texture.frame.width) * resolution;\n        let sh = (texture.frame.height) * resolution;\n\n        if (needsProcessing)\n        {\n            sx = 0;\n            sy = 0;\n            sw = (finalSource as any).width;\n            sh = (finalSource as any).height;\n        }\n\n        // Top-left\n        context.drawImage(finalSource, sx, sy, lw, tw, dx, dy, destLeftWidth, destTopHeight);\n        // Top-center\n        context.drawImage(\n            finalSource,\n            sx + lw, sy,\n            sw - lw - rw, tw,\n            dx + destLeftWidth, dy,\n            destCenterWidth, destTopHeight\n        );\n        // Top-right\n        context.drawImage(\n            finalSource,\n            sx + sw - rw, sy,\n            rw, tw,\n            dx + width - destRightWidth, dy,\n            destRightWidth, destTopHeight\n        );\n\n        // Middle-left\n        context.drawImage(\n            finalSource,\n            sx, sy + tw,\n            lw, sh - tw - bw,\n            dx, dy + destTopHeight,\n            destLeftWidth, destCenterHeight\n        );\n        // Middle-center\n        context.drawImage(\n            finalSource,\n            sx + lw, sy + tw,\n            sw - lw - rw, sh - tw - bw,\n            dx + destLeftWidth, dy + destTopHeight,\n            destCenterWidth, destCenterHeight\n        );\n        // Middle-right\n        context.drawImage(\n            finalSource,\n            sx + sw - rw, sy + tw,\n            rw, sh - tw - bw,\n            dx + width - destRightWidth, dy + destTopHeight,\n            destRightWidth, destCenterHeight\n        );\n\n        // Bottom-left\n        context.drawImage(\n            finalSource,\n            sx, sy + sh - bw,\n            lw, bw,\n            dx, dy + height - destBottomHeight,\n            destLeftWidth, destBottomHeight\n        );\n        // Bottom-center\n        context.drawImage(\n            finalSource,\n            sx + lw, sy + sh - bw,\n            sw - lw - rw, bw,\n            dx + destLeftWidth, dy + height - destBottomHeight,\n            destCenterWidth, destBottomHeight\n        );\n        // Bottom-right\n        context.drawImage(\n            finalSource,\n            sx + sw - rw, sy + sh - bw,\n            rw, bw,\n            dx + width - destRightWidth, dy + height - destBottomHeight,\n            destRightWidth, destBottomHeight\n        );\n\n        context.restore();\n    }\n\n    public destroy()\n    {\n        this._renderer = null;\n    }\n}\n", "import { type PointData } from '../../maths/point/PointData';\nimport { PlaneGeometry } from '../mesh-plane/PlaneGeometry';\n\n/**\n * Options for the NineSliceGeometry.\n * @category scene\n * @advanced\n */\nexport interface NineSliceGeometryOptions\n{\n\n    /** The width of the NineSlicePlane, setting this will actually modify the vertices and UV's of this plane. */\n    width?: number\n    /** The height of the NineSlicePlane, setting this will actually modify the vertices and UV's of this plane. */\n    height?: number\n    /** The original width of the texture */\n    originalWidth?: number\n    /** The original height of the texture */\n    originalHeight?: number\n    /** The width of the left column. */\n    leftWidth?: number\n    /** The height of the top row. */\n    topHeight?: number\n    /** The width of the right column. */\n    rightWidth?: number\n    /** The height of the bottom row. */\n    bottomHeight?: number\n\n    /** The anchor point of the NineSliceSprite. */\n    anchor?: PointData\n}\n\n/**\n * The NineSliceGeometry class allows you to create a NineSlicePlane object.\n * @category scene\n * @advanced\n */\nexport class NineSliceGeometry extends PlaneGeometry\n{\n    /** The default options for the NineSliceGeometry. */\n    public static defaultOptions: NineSliceGeometryOptions = {\n        /** The width of the NineSlicePlane, setting this will actually modify the vertices and UV's of this plane. */\n        width: 100,\n        /** The height of the NineSlicePlane, setting this will actually modify the vertices and UV's of this plane. */\n        height: 100,\n        /** The width of the left column. */\n        leftWidth: 10,\n        /** The height of the top row. */\n        topHeight: 10,\n        /** The width of the right column. */\n        rightWidth: 10,\n        /** The height of the bottom row. */\n        bottomHeight: 10,\n\n        /** The original width of the texture */\n        originalWidth: 100,\n        /** The original height of the texture */\n        originalHeight: 100,\n    };\n\n    /** @internal */\n    public _leftWidth: number;\n    /** @internal */\n    public _rightWidth: number;\n    /** @internal */\n    public _topHeight: number;\n    /** @internal */\n    public _bottomHeight: number;\n\n    private _originalWidth: number;\n    private _originalHeight: number;\n    private _anchorX: any;\n    private _anchorY: number;\n\n    constructor(options: NineSliceGeometryOptions = {})\n    {\n        options = { ...NineSliceGeometry.defaultOptions, ...options };\n\n        super({\n            width: options.width,\n            height: options.height,\n            verticesX: 4,\n            verticesY: 4,\n        });\n\n        this.update(options);\n    }\n\n    /**\n     * Updates the NineSliceGeometry with the options.\n     * @param options - The options of the NineSliceGeometry.\n     */\n    public update(options: NineSliceGeometryOptions)\n    {\n        this.width = options.width ?? this.width;\n        this.height = options.height ?? this.height;\n        this._originalWidth = options.originalWidth ?? this._originalWidth;\n        this._originalHeight = options.originalHeight ?? this._originalHeight;\n        this._leftWidth = options.leftWidth ?? this._leftWidth;\n        this._rightWidth = options.rightWidth ?? this._rightWidth;\n        this._topHeight = options.topHeight ?? this._topHeight;\n        this._bottomHeight = options.bottomHeight ?? this._bottomHeight;\n\n        this._anchorX = options.anchor?.x;\n        this._anchorY = options.anchor?.y;\n\n        this.updateUvs();\n        this.updatePositions();\n    }\n\n    /** Updates the positions of the vertices. */\n    public updatePositions()\n    {\n        const p = this.positions;\n        const {\n            width,\n            height,\n            _leftWidth,\n            _rightWidth,\n            _topHeight,\n            _bottomHeight,\n            _anchorX,\n            _anchorY,\n        } = this;\n\n        const w = _leftWidth + _rightWidth;\n        const scaleW = width > w ? 1.0 : width / w;\n\n        const h = _topHeight + _bottomHeight;\n        const scaleH = height > h ? 1.0 : height / h;\n\n        const scale = Math.min(scaleW, scaleH);\n\n        const anchorOffsetX = _anchorX * width;\n        const anchorOffsetY = _anchorY * height;\n\n        p[0] = p[8] = p[16] = p[24] = -anchorOffsetX;\n        p[2] = p[10] = p[18] = p[26] = (_leftWidth * scale) - anchorOffsetX;\n        p[4] = p[12] = p[20] = p[28] = width - (_rightWidth * scale) - anchorOffsetX;\n        p[6] = p[14] = p[22] = p[30] = width - anchorOffsetX;\n\n        p[1] = p[3] = p[5] = p[7] = -anchorOffsetY;\n        p[9] = p[11] = p[13] = p[15] = (_topHeight * scale) - anchorOffsetY;\n        p[17] = p[19] = p[21] = p[23] = height - (_bottomHeight * scale) - anchorOffsetY;\n        p[25] = p[27] = p[29] = p[31] = height - anchorOffsetY;\n\n        this.getBuffer('aPosition').update();\n    }\n\n    /** Updates the UVs of the vertices. */\n    public updateUvs()\n    {\n        const uvs = this.uvs;\n\n        uvs[0] = uvs[8] = uvs[16] = uvs[24] = 0;\n        uvs[1] = uvs[3] = uvs[5] = uvs[7] = 0;\n\n        uvs[6] = uvs[14] = uvs[22] = uvs[30] = 1;\n        uvs[25] = uvs[27] = uvs[29] = uvs[31] = 1;\n\n        const _uvw = 1.0 / this._originalWidth;\n        const _uvh = 1.0 / this._originalHeight;\n\n        uvs[2] = uvs[10] = uvs[18] = uvs[26] = _uvw * this._leftWidth;\n        uvs[9] = uvs[11] = uvs[13] = uvs[15] = _uvh * this._topHeight;\n\n        uvs[4] = uvs[12] = uvs[20] = uvs[28] = 1 - (_uvw * this._rightWidth);\n        uvs[17] = uvs[19] = uvs[21] = uvs[23] = 1 - (_uvh * this._bottomHeight);\n\n        this.getBuffer('aUV').update();\n    }\n}\n\n", "import { ExtensionType } from '../../extensions/Extensions';\nimport { GCManagedHash } from '../../utils/data/GCManagedHash';\nimport { BatchableMesh } from '../mesh/shared/BatchableMesh';\nimport { type GPUData } from '../view/ViewContainer';\nimport { NineSliceGeometry } from './NineSliceGeometry';\n\nimport type { InstructionSet } from '../../rendering/renderers/shared/instructions/InstructionSet';\nimport type { RenderPipe } from '../../rendering/renderers/shared/instructions/RenderPipe';\nimport type { Renderer } from '../../rendering/renderers/types';\nimport type { NineSliceSprite } from './NineSliceSprite';\n\n/**\n * GPU data for NineSliceSprite.\n * @internal\n */\nexport class NineSliceSpriteGpuData extends BatchableMesh implements GPUData\n{\n    constructor()\n    {\n        super();\n        this.geometry = new NineSliceGeometry();\n    }\n\n    public destroy()\n    {\n        this.geometry.destroy();\n    }\n}\n\n/**\n * The NineSliceSpritePipe is a render pipe for rendering NineSliceSprites.\n * @internal\n */\nexport class NineSliceSpritePipe implements RenderPipe<NineSliceSprite>\n{\n    /** @ignore */\n    public static extension = {\n        type: [\n            ExtensionType.WebGLPipes,\n            ExtensionType.WebGPUPipes,\n        ],\n        name: 'nineSliceSprite',\n    } as const;\n\n    private readonly _renderer: Renderer;\n    private readonly _managedSprites: GCManagedHash<NineSliceSprite>;\n\n    constructor(renderer: Renderer)\n    {\n        this._renderer = renderer;\n        this._managedSprites = new GCManagedHash({ renderer, type: 'renderable', name: 'nineSliceSprite' });\n    }\n\n    public addRenderable(sprite: NineSliceSprite, instructionSet: InstructionSet)\n    {\n        const gpuSprite = this._getGpuSprite(sprite);\n\n        if (sprite.didViewUpdate) this._updateBatchableSprite(sprite, gpuSprite);\n\n        this._renderer.renderPipes.batch.addToBatch(gpuSprite, instructionSet);\n    }\n\n    public updateRenderable(sprite: NineSliceSprite)\n    {\n        const gpuSprite = this._getGpuSprite(sprite);\n\n        if (sprite.didViewUpdate) this._updateBatchableSprite(sprite, gpuSprite);\n\n        gpuSprite._batcher.updateElement(gpuSprite);\n    }\n\n    public validateRenderable(sprite: NineSliceSprite): boolean\n    {\n        const gpuSprite = this._getGpuSprite(sprite);\n\n        return !gpuSprite._batcher.checkAndUpdateTexture(\n            gpuSprite,\n            sprite._texture\n        );\n    }\n\n    private _updateBatchableSprite(sprite: NineSliceSprite, batchableSprite: BatchableMesh)\n    {\n        (batchableSprite.geometry as NineSliceGeometry)\n            .update(sprite);\n\n        // = sprite.bounds;\n        batchableSprite.setTexture(sprite._texture);\n    }\n\n    private _getGpuSprite(sprite: NineSliceSprite): NineSliceSpriteGpuData\n    {\n        return sprite._gpuData[this._renderer.uid] || this._initGPUSprite(sprite);\n    }\n\n    private _initGPUSprite(sprite: NineSliceSprite): NineSliceSpriteGpuData\n    {\n        const gpuData = sprite._gpuData[this._renderer.uid] = new NineSliceSpriteGpuData();\n\n        const batchableMesh = gpuData;\n\n        batchableMesh.renderable = sprite;\n        batchableMesh.transform = sprite.groupTransform;\n        batchableMesh.texture = sprite._texture;\n        batchableMesh.roundPixels = (this._renderer._roundPixels | sprite._roundPixels) as 0 | 1;\n\n        this._managedSprites.add(sprite);\n\n        // if the sprite has not been updated by the view, we need to update the batchable mesh now.\n        if (!sprite.didViewUpdate)\n        {\n            this._updateBatchableSprite(sprite, batchableMesh);\n        }\n\n        return gpuData;\n    }\n\n    public destroy()\n    {\n        this._managedSprites.destroy();\n        (this._renderer as null) = null;\n    }\n}\n", "import { extensions } from '../../extensions/Extensions';\nimport { CanvasNineSliceSpritePipe } from './canvas/CanvasNineSliceSpritePipe';\nimport { NineSliceSpritePipe } from './NineSliceSpritePipe';\n\nextensions.add(CanvasNineSliceSpritePipe);\nextensions.add(NineSliceSpritePipe);\n", "import { ObservablePoint } from '../../maths/point/ObservablePoint';\nimport { type PointData } from '../../maths/point/PointData';\nimport { Texture } from '../../rendering/renderers/shared/texture/Texture';\nimport { deprecation, v8_0_0 } from '../../utils/logging/deprecation';\nimport { ViewContainer, type ViewContainerOptions } from '../view/ViewContainer';\nimport { NineSliceGeometry } from './NineSliceGeometry';\nimport { type NineSliceSpriteGpuData } from './NineSliceSpritePipe';\nimport './init';\n\nimport type { Size } from '../../maths/misc/Size';\nimport type { View } from '../../rendering/renderers/shared/view/View';\nimport type { Optional } from '../container/container-mixins/measureMixin';\nimport type { DestroyOptions } from '../container/destroyTypes';\n\n/**\n * Constructor options used for `NineSliceSprite` instances.\n * Defines how the sprite's texture is divided and scaled in nine sections.\n * <pre>\n *      A                          B\n *    +---+----------------------+---+\n *  C | 1 |          2           | 3 |\n *    +---+----------------------+---+\n *    |   |                      |   |\n *    | 4 |          5           | 6 |\n *    |   |                      |   |\n *    +---+----------------------+---+\n *  D | 7 |          8           | 9 |\n *    +---+----------------------+---+\n *  When changing this objects width and/or height:\n *     areas 1 3 7 and 9 will remain unscaled.\n *     areas 2 and 8 will be stretched horizontally\n *     areas 4 and 6 will be stretched vertically\n *     area 5 will be stretched both horizontally and vertically\n * </pre>\n * @example\n * ```ts\n * // Create a basic nine-slice sprite\n * const button = new NineSliceSprite({\n *     texture: Texture.from('button.png'),\n *     leftWidth: 20, // Left border (A)\n *     rightWidth: 20, // Right border (B)\n *     topHeight: 20, // Top border (C)\n *     bottomHeight: 20, // Bottom border (D)\n *     width: 100, // Initial width\n *     height: 50, // Initial height\n *     anchor: 0.5, // Center anchor point\n * });\n * ```\n * @see {@link NineSliceSprite} For the main sprite class\n * @see {@link Texture#defaultBorders} For texture-level border settings\n * @category scene\n * @standard\n */\nexport interface NineSliceSpriteOptions extends PixiMixins.NineSliceSpriteOptions, ViewContainerOptions\n{\n    /**\n     * The texture to use on the NineSliceSprite.\n     * ```ts\n     * // Create a sprite with a texture\n     * const sprite = new NineSliceSprite({\n     *     texture: Texture.from('path/to/image.png')\n     * });\n     * // Update the texture later\n     * sprite.texture = Texture.from('path/to/another-image.png');\n     * ```\n     * @default Texture.EMPTY\n     */\n    texture: Texture;\n\n    /**\n     * Width of the left vertical bar (A).\n     * Controls the size of the left edge that remains unscaled\n     * @example\n     * ```ts\n     * const sprite = new NineSliceSprite({ ..., leftWidth: 20 });\n     * sprite.leftWidth = 20; // Set left border width\n     * ```\n     * @default 10\n     */\n    leftWidth?: number;\n\n    /**\n     * Height of the top horizontal bar (C).\n     * Controls the size of the top edge that remains unscaled\n     * @example\n     * ```ts\n     * const sprite = new NineSliceSprite({ ..., topHeight: 20 });\n     * sprite.topHeight = 20; // Set top border height\n     * ```\n     * @default 10\n     */\n    topHeight?: number;\n\n    /**\n     * Width of the right vertical bar (B).\n     * Controls the size of the right edge that remains unscaled\n     * @example\n     * ```ts\n     * const sprite = new NineSliceSprite({ ..., rightWidth: 20 });\n     * sprite.rightWidth = 20; // Set right border width\n     * ```\n     * @default 10\n     */\n    rightWidth?: number;\n\n    /**\n     * Height of the bottom horizontal bar (D).\n     * Controls the size of the bottom edge that remains unscaled\n     * @example\n     * ```ts\n     * const sprite = new NineSliceSprite({ ..., bottomHeight: 20 });\n     * sprite.bottomHeight = 20; // Set bottom border height\n     * ```\n     * @default 10\n     */\n    bottomHeight?: number;\n\n    /**\n     * Width of the NineSliceSprite.\n     * Modifies the vertices directly rather than UV coordinates\n     * @example\n     * ```ts\n     * const sprite = new NineSliceSprite({ ..., width: 200 });\n     * sprite.width = 200; // Set the width of the sprite\n     * ```\n     * @default 100\n     */\n    width?: number;\n\n    /**\n     * Height of the NineSliceSprite.\n     * Modifies the vertices directly rather than UV coordinates\n     * @example\n     * ```ts\n     * const sprite = new NineSliceSprite({ ..., height: 100 });\n     * sprite.height = 100; // Set the height of the sprite\n     * ```\n     * @default 100\n     */\n    height?: number;\n\n    /**\n     * Whether to round the x/y position to whole pixels\n     * @example\n     * ```ts\n     * const sprite = new NineSliceSprite({ ..., roundPixels: true });\n     * ```\n     * @default false\n     */\n    roundPixels?: boolean;\n\n    /**\n     * The anchor point of the NineSliceSprite (0-1 range)\n     *\n     * Controls the origin point for rotation, scaling, and positioning.\n     * Can be a number for uniform anchor or a PointData for separate x/y values.\n     * @default 0\n     * @example\n     * ```ts\n     * // Centered anchor\n     * const sprite = new NineSliceSprite({ ..., anchor: 0.5 });\n     * sprite.anchor = 0.5;\n     * // Separate x/y anchor\n     * sprite.anchor = { x: 0.5, y: 0.5 };\n     * // Right-aligned anchor\n     * sprite.anchor = { x: 1, y: 0 };\n     * // Update anchor directly\n     * sprite.anchor.set(0.5, 0.5);\n     * ```\n     */\n    anchor?: PointData | number;\n}\n// eslint-disable-next-line requireExport/require-export-jsdoc, requireMemberAPI/require-member-api-doc\nexport interface NineSliceSprite extends PixiMixins.NineSliceSprite, ViewContainer<NineSliceSpriteGpuData> {}\n\n/**\n * The NineSliceSprite allows you to stretch a texture using 9-slice scaling. The corners will remain unscaled (useful\n * for buttons with rounded corners for example) and the other areas will be scaled horizontally and or vertically\n *\n * <pre>\n *      A                          B\n *    +---+----------------------+---+\n *  C | 1 |          2           | 3 |\n *    +---+----------------------+---+\n *    |   |                      |   |\n *    | 4 |          5           | 6 |\n *    |   |                      |   |\n *    +---+----------------------+---+\n *  D | 7 |          8           | 9 |\n *    +---+----------------------+---+\n *  When changing this objects width and/or height:\n *     areas 1 3 7 and 9 will remain unscaled.\n *     areas 2 and 8 will be stretched horizontally\n *     areas 4 and 6 will be stretched vertically\n *     area 5 will be stretched both horizontally and vertically\n * </pre>\n * @example\n * ```ts\n * import { NineSliceSprite, Texture } from 'pixi.js';\n *\n * const plane9 = new NineSliceSprite({\n *   texture: Texture.from('BoxWithRoundedCorners.png'),\n *   leftWidth: 15,\n *   topHeight: 15,\n *   rightWidth: 15,\n *   bottomHeight: 15,\n *   width: 200,\n *   height: 100,\n * });\n * ```\n * @category scene\n * @standard\n */\nexport class NineSliceSprite extends ViewContainer<NineSliceSpriteGpuData> implements View\n{\n    /**\n     * The default options used to override initial values of any options passed in the constructor.\n     * These values are used as fallbacks when specific options are not provided.\n     * @example\n     * ```ts\n     * // Override default options globally\n     * NineSliceSprite.defaultOptions.texture = Texture.from('defaultButton.png');\n     * // Create sprite with default texture\n     * const sprite = new NineSliceSprite({...});\n     * // sprite will use 'defaultButton.png' as its texture\n     *\n     * // Reset to empty texture\n     * NineSliceSprite.defaultOptions.texture = Texture.EMPTY;\n     * ```\n     * @type {NineSliceSpriteOptions}\n     * @see {@link NineSliceSpriteOptions} For all available options\n     * @see {@link Texture#defaultBorders} For texture-level border settings\n     */\n    public static defaultOptions: NineSliceSpriteOptions = {\n        /** @default Texture.EMPTY */\n        texture: Texture.EMPTY,\n    };\n\n    /** @internal */\n    public override readonly renderPipeId: string = 'nineSliceSprite';\n    /** @internal */\n    public _texture: Texture;\n    /** @internal */\n    public _anchor: ObservablePoint;\n    /** @internal */\n    public batched = true;\n    private _leftWidth: number;\n    private _topHeight: number;\n    private _rightWidth: number;\n    private _bottomHeight: number;\n    private _width: number;\n    private _height: number;\n\n    constructor(options: NineSliceSpriteOptions | Texture)\n    {\n        if ((options instanceof Texture))\n        {\n            options = { texture: options };\n        }\n\n        const {\n            width,\n            height,\n            anchor,\n            leftWidth,\n            rightWidth,\n            topHeight,\n            bottomHeight,\n            texture,\n            roundPixels,\n            ...rest\n        } = options;\n\n        super({\n            label: 'NineSliceSprite',\n            ...rest\n        });\n\n        this._leftWidth = leftWidth ?? texture?.defaultBorders?.left ?? NineSliceGeometry.defaultOptions.leftWidth;\n        this._topHeight = topHeight ?? texture?.defaultBorders?.top ?? NineSliceGeometry.defaultOptions.topHeight;\n        this._rightWidth = rightWidth ?? texture?.defaultBorders?.right ?? NineSliceGeometry.defaultOptions.rightWidth;\n        this._bottomHeight = bottomHeight\n                            ?? texture?.defaultBorders?.bottom\n                            ?? NineSliceGeometry.defaultOptions.bottomHeight;\n\n        this._width = width ?? texture.width ?? NineSliceGeometry.defaultOptions.width;\n        this._height = height ?? texture.height ?? NineSliceGeometry.defaultOptions.height;\n\n        this.allowChildren = false;\n        this.texture = texture ?? NineSliceSprite.defaultOptions.texture;\n        this.roundPixels = roundPixels ?? false;\n\n        this._anchor = new ObservablePoint(\n            {\n                _onUpdate: () =>\n                {\n                    this.onViewUpdate();\n                }\n            },\n        );\n\n        if (anchor)\n        {\n            this.anchor = anchor;\n        }\n        else if (this.texture.defaultAnchor)\n        {\n            this.anchor = this.texture.defaultAnchor;\n        }\n    }\n\n    /**\n     * The anchor sets the origin point of the sprite. The default value is taken from the {@link Texture}\n     * and passed to the constructor.\n     *\n     * - The default is `(0,0)`, this means the sprite's origin is the top left.\n     * - Setting the anchor to `(0.5,0.5)` means the sprite's origin is centered.\n     * - Setting the anchor to `(1,1)` would mean the sprite's origin point will be the bottom right corner.\n     *\n     * If you pass only single parameter, it will set both x and y to the same value as shown in the example below.\n     * @example\n     * ```ts\n     * // Center the anchor point\n     * sprite.anchor = 0.5; // Sets both x and y to 0.5\n     * sprite.position.set(400, 300); // Sprite will be centered at this position\n     *\n     * // Set specific x/y anchor points\n     * sprite.anchor = {\n     *     x: 1, // Right edge\n     *     y: 0  // Top edge\n     * };\n     *\n     * // Using individual coordinates\n     * sprite.anchor.set(0.5, 1); // Center-bottom\n     *\n     * // For rotation around center\n     * sprite.anchor.set(0.5);\n     * sprite.rotation = Math.PI / 4; // 45 degrees around center\n     *\n     * // For scaling from center\n     * sprite.anchor.set(0.5);\n     * sprite.scale.set(2); // Scales from center point\n     * ```\n     */\n    get anchor(): ObservablePoint\n    {\n        return this._anchor;\n    }\n\n    set anchor(value: PointData | number)\n    {\n        typeof value === 'number' ? this._anchor.set(value) : this._anchor.copyFrom(value);\n    }\n\n    /**\n     * The width of the NineSliceSprite, setting this will actually modify the vertices and UV's of this plane.\n     * The width affects how the middle sections are scaled.\n     * @example\n     * ```ts\n     * // Create a nine-slice sprite with fixed width\n     * const panel = new NineSliceSprite({\n     *     texture: Texture.from('panel.png'),\n     *     width: 200  // Sets initial width\n     * });\n     *\n     * // Adjust width dynamically\n     * panel.width = 300;  // Stretches middle sections\n     * ```\n     * @see {@link NineSliceSprite#setSize} For setting both width and height efficiently\n     * @see {@link NineSliceSprite#height} For setting height\n     */\n    override get width(): number\n    {\n        return this._width;\n    }\n\n    override set width(value: number)\n    {\n        this._width = value;\n        this.onViewUpdate();\n    }\n\n    /**\n     * The height of the NineSliceSprite, setting this will actually modify the vertices and UV's of this plane.\n     * The height affects how the middle sections are scaled.\n     * @example\n     * ```ts\n     * // Create a nine-slice sprite with fixed height\n     * const panel = new NineSliceSprite({\n     *     texture: Texture.from('panel.png'),\n     *     height: 150  // Sets initial height\n     * });\n     *\n     * // Adjust height dynamically\n     * panel.height = 200;  // Stretches middle sections\n     *\n     * // Create responsive UI element\n     * const dialog = new NineSliceSprite({\n     *     texture: Texture.from('dialog.png'),\n     *     topHeight: 30,\n     *     bottomHeight: 30,\n     *     height: parent.height * 0.5  // 50% of parent height\n     * });\n     * ```\n     * @see {@link NineSliceSprite#setSize} For setting both width and height efficiently\n     * @see {@link NineSliceSprite#width} For setting width\n     */\n    override get height(): number\n    {\n        return this._height;\n    }\n\n    override set height(value: number)\n    {\n        this._height = value;\n        this.onViewUpdate();\n    }\n\n    /**\n     * Sets the size of the NineSliceSprite to the specified width and height.\n     * This method directly modifies the vertices and UV coordinates of the sprite.\n     *\n     * Using this is more efficient than setting width and height separately as it only triggers one update.\n     * @example\n     * ```ts\n     * // Set to specific dimensions\n     * panel.setSize(300, 200); // Width: 300, Height: 200\n     *\n     * // Set uniform size\n     * panel.setSize(200); // Makes a square 200x200\n     *\n     * // Set size using object\n     * panel.setSize({\n     *     width: 400,\n     *     height: 300\n     * });\n     * ```\n     * @param value - This can be either a number or a Size object with width/height properties\n     * @param height - The height to set. Defaults to the value of `width` if not provided\n     * @see {@link NineSliceSprite#width} For setting width only\n     * @see {@link NineSliceSprite#height} For setting height only\n     */\n    public override setSize(value: number | Optional<Size, 'height'>, height?: number): void\n    {\n        if (typeof value === 'object')\n        {\n            height = value.height ?? value.width;\n            value = value.width;\n        }\n\n        this._width = value;\n        this._height = height ?? value;\n\n        this.onViewUpdate();\n    }\n\n    /**\n     * Retrieves the size of the NineSliceSprite as a [Size]{@link Size} object.\n     * This method is more efficient than getting width and height separately.\n     * @example\n     * ```ts\n     * // Get basic size\n     * const size = panel.getSize();\n     * console.log(`Size: ${size.width}x${size.height}`);\n     *\n     * // Reuse existing size object\n     * const reuseSize = { width: 0, height: 0 };\n     * panel.getSize(reuseSize);\n     * ```\n     * @param out - Optional object to store the size in, to avoid allocating a new object\n     * @returns The size of the NineSliceSprite\n     * @see {@link NineSliceSprite#width} For getting just the width\n     * @see {@link NineSliceSprite#height} For getting just the height\n     * @see {@link NineSliceSprite#setSize} For setting both width and height efficiently\n     */\n    public override getSize(out?: Size): Size\n    {\n        out ||= {} as Size;\n        out.width = this._width;\n        out.height = this._height;\n\n        return out;\n    }\n\n    /**\n     * Width of the left vertical bar (A).\n     * Controls the size of the left edge that remains unscaled\n     * @example\n     * ```ts\n     * const sprite = new NineSliceSprite({ ..., leftWidth: 20 });\n     * sprite.leftWidth = 20; // Set left border width\n     * ```\n     * @default 10\n     */\n    get leftWidth(): number\n    {\n        return this._leftWidth;\n    }\n\n    set leftWidth(value: number)\n    {\n        this._leftWidth = value;\n\n        this.onViewUpdate();\n    }\n\n    /**\n     * Height of the top horizontal bar (C).\n     * Controls the size of the top edge that remains unscaled\n     * @example\n     * ```ts\n     * const sprite = new NineSliceSprite({ ..., topHeight: 20 });\n     * sprite.topHeight = 20; // Set top border height\n     * ```\n     * @default 10\n     */\n    get topHeight(): number\n    {\n        return this._topHeight;\n    }\n\n    set topHeight(value: number)\n    {\n        this._topHeight = value;\n        this.onViewUpdate();\n    }\n\n    /**\n     * Width of the right vertical bar (B).\n     * Controls the size of the right edge that remains unscaled\n     * @example\n     * ```ts\n     * const sprite = new NineSliceSprite({ ..., rightWidth: 20 });\n     * sprite.rightWidth = 20; // Set right border width\n     * ```\n     * @default 10\n     */\n    get rightWidth(): number\n    {\n        return this._rightWidth;\n    }\n\n    set rightWidth(value: number)\n    {\n        this._rightWidth = value;\n        this.onViewUpdate();\n    }\n\n    /**\n     * Height of the bottom horizontal bar (D).\n     * Controls the size of the bottom edge that remains unscaled\n     * @example\n     * ```ts\n     * const sprite = new NineSliceSprite({ ..., bottomHeight: 20 });\n     * sprite.bottomHeight = 20; // Set bottom border height\n     * ```\n     * @default 10\n     */\n    get bottomHeight(): number\n    {\n        return this._bottomHeight;\n    }\n\n    set bottomHeight(value: number)\n    {\n        this._bottomHeight = value;\n        this.onViewUpdate();\n    }\n\n    /**\n     * The texture to use on the NineSliceSprite.\n     * ```ts\n     * // Create a sprite with a texture\n     * const sprite = new NineSliceSprite({\n     *     texture: Texture.from('path/to/image.png')\n     * });\n     * // Update the texture later\n     * sprite.texture = Texture.from('path/to/another-image.png');\n     * ```\n     * @default Texture.EMPTY\n     */\n    get texture(): Texture\n    {\n        return this._texture;\n    }\n\n    set texture(value: Texture)\n    {\n        value ||= Texture.EMPTY;\n\n        const currentTexture = this._texture;\n\n        if (currentTexture === value) return;\n\n        if (currentTexture && currentTexture.dynamic) currentTexture.off('update', this.onViewUpdate, this);\n        if (value.dynamic) value.on('update', this.onViewUpdate, this);\n\n        this._texture = value;\n\n        this.onViewUpdate();\n    }\n\n    /**\n     * The original width of the texture before any nine-slice scaling.\n     * This is the width of the source texture used to create the nine-slice sprite.\n     * @example\n     * ```ts\n     * // Get original dimensions\n     * console.log(`Original size: ${sprite.originalWidth}x${sprite.originalHeight}`);\n     *\n     * // Use for relative scaling\n     * sprite.width = sprite.originalWidth * 2; // Double the original width\n     *\n     * // Reset to original size\n     * sprite.setSize(sprite.originalWidth, sprite.originalHeight);\n     * ```\n     * @readonly\n     * @see {@link NineSliceSprite#width} For the current displayed width\n     * @see {@link Texture#width} For direct texture width access\n     * @returns The original width of the texture\n     */\n    get originalWidth()\n    {\n        return this._texture.width;\n    }\n\n    /**\n     * The original height of the texture before any nine-slice scaling.\n     * This is the height of the source texture used to create the nine-slice sprite.\n     * @example\n     * ```ts\n     * // Get original dimensions\n     * console.log(`Original size: ${sprite.originalWidth}x${sprite.originalHeight}`);\n     *\n     * // Use for relative scaling\n     * sprite.height = sprite.originalHeight * 2; // Double the original height\n     *\n     * // Reset to original size\n     * sprite.setSize(sprite.originalWidth, sprite.originalHeight);\n     * ```\n     * @readonly\n     * @see {@link NineSliceSprite#height} For the current displayed height\n     * @see {@link Texture#height} For direct texture height access\n     * @returns The original height of the texture\n     */\n    get originalHeight()\n    {\n        return this._texture.height;\n    }\n\n    /**\n     * Destroys this sprite renderable and optionally its texture.\n     * @param options - Options parameter. A boolean will act as if all options\n     *  have been set to that value\n     * @example\n     * nineSliceSprite.destroy();\n     * nineSliceSprite.destroy(true);\n     * nineSliceSprite.destroy({ texture: true, textureSource: true });\n     */\n    public override destroy(options?: DestroyOptions): void\n    {\n        super.destroy(options);\n\n        const destroyTexture = typeof options === 'boolean' ? options : options?.texture;\n\n        if (destroyTexture)\n        {\n            const destroyTextureSource = typeof options === 'boolean' ? options : options?.textureSource;\n\n            this._texture.destroy(destroyTextureSource);\n        }\n\n        this._texture = null;\n    }\n\n    /** @private */\n    protected override updateBounds()\n    {\n        const bounds = this._bounds;\n\n        const anchor = this._anchor;\n\n        const width = this._width;\n        const height = this._height;\n\n        bounds.minX = -anchor._x * width;\n        bounds.maxX = bounds.minX + width;\n\n        bounds.minY = -anchor._y * height;\n        bounds.maxY = bounds.minY + height;\n    }\n}\n\n/**\n * Please use the {@link NineSliceSprite} class instead.\n * The NineSlicePlane is deprecated and will be removed in future versions.\n * @deprecated since 8.0.0\n * @category scene\n */\nexport class NineSlicePlane extends NineSliceSprite\n{\n    constructor(options: NineSliceSpriteOptions | Texture);\n    /** @deprecated since 8.0.0 */\n    constructor(texture: Texture, leftWidth: number, topHeight: number, rightWidth: number, bottomHeight: number);\n    constructor(...args: [NineSliceSpriteOptions | Texture] | [Texture, number, number, number, number])\n    {\n        let options = args[0];\n\n        if (options instanceof Texture)\n        {\n            // #if _DEBUG\n            // eslint-disable-next-line max-len\n            deprecation(v8_0_0, 'NineSlicePlane now uses the options object {texture, leftWidth, rightWidth, topHeight, bottomHeight}');\n            // #endif\n\n            options = {\n                texture: options,\n                leftWidth: args[1],\n                topHeight: args[2],\n                rightWidth: args[3],\n                bottomHeight: args[4],\n            };\n        }\n\n        // #if _DEBUG\n        deprecation(v8_0_0, 'NineSlicePlane is deprecated. Use NineSliceSprite instead.');\n        // #endif\n\n        super(options);\n    }\n}\n", "import { Container } from '../../container/Container';\nimport { CanvasTextMetrics } from '../../text/canvas/CanvasTextMetrics';\nimport { type TextStyle } from '../../text/TextStyle';\nimport { type SplitOptions } from '../../text-split/SplitText';\nimport { type TextSplitOutput } from '../../text-split/types';\nimport { BitmapFontManager } from '../BitmapFontManager';\nimport { BitmapText } from '../BitmapText';\nimport { getBitmapTextLayout } from './getBitmapTextLayout';\n\n/**\n * Splits a Text object into segments based on the text's layout and style,\n * and adds these segments as individual Text objects to a specified container.\n *\n * This function handles word wrapping, alignment, and letter spacing,\n * ensuring that each segment is rendered correctly according to the original text's style.\n * @param options - Configuration options for the text split operation.\n * @returns An array of Text objects representing the split segments.\n * @internal\n */\nexport function bitmapTextSplit(\n    options: Pick<SplitOptions, 'text' | 'style'> & { chars: BitmapText[] },\n): TextSplitOutput<BitmapText>\n{\n    const { text, style, chars: existingChars } = options;\n    const textStyle = style as TextStyle;\n    const font = BitmapFontManager.getFont(text, textStyle);\n\n    const segments = CanvasTextMetrics.graphemeSegmenter(text);\n    const layout = getBitmapTextLayout(segments, textStyle, font, true);\n    const scale = layout.scale;\n    const chars: BitmapText[] = [];\n    const words: Container[] = [];\n    const lines: Container[] = [];\n    const lineHeight = style.lineHeight ? style.lineHeight : font.lineHeight * scale;\n\n    let yOffset = 0;\n\n    for (const line of layout.lines)\n    {\n        // if the line is empty, skip it\n        if (line.chars.length === 0) continue;\n\n        const lineContainer = new Container({ label: 'line' });\n\n        lineContainer.y = yOffset;\n        lines.push(lineContainer);\n\n        let currentWordContainer = new Container({ label: 'word' });\n        let currentWordStartIndex = 0;\n\n        for (let i = 0; i < line.chars.length; i++)\n        {\n            const char = line.chars[i];\n\n            if (!char) continue;\n\n            const charData = font.chars[char];\n\n            if (!charData) continue;\n\n            const isSpace = char === ' ';\n            const isLastChar = i === line.chars.length - 1;\n\n            let charInstance: BitmapText;\n\n            if (existingChars.length > 0)\n            {\n                charInstance = existingChars.shift();\n                charInstance.text = char;\n                charInstance.style = textStyle;\n                charInstance.label = `char-${char}`;\n                charInstance.x = (line.charPositions[i]! * scale) - (line.charPositions[currentWordStartIndex]! * scale);\n            }\n            else\n            {\n                // Create a new BitmapText instance if no existing one is available\n                charInstance = new BitmapText({\n                    text: char,\n                    style: textStyle,\n                    label: `char-${char}`,\n                    x: (line.charPositions[i]! * scale) - (line.charPositions[currentWordStartIndex]! * scale),\n                });\n            }\n\n            if (!isSpace)\n            {\n                chars.push(charInstance);\n                // Add to word container\n                currentWordContainer.addChild(charInstance);\n            }\n\n            // Handle word breaks\n            if (isSpace || isLastChar)\n            {\n                if (currentWordContainer.children.length > 0)\n                {\n                    currentWordContainer.x = line.charPositions[currentWordStartIndex]! * scale;\n                    words.push(currentWordContainer);\n                    lineContainer.addChild(currentWordContainer);\n\n                    // Start new word container\n                    currentWordContainer = new Container({ label: 'word' });\n                    currentWordStartIndex = i + 1;\n                }\n            }\n        }\n\n        yOffset += lineHeight;\n    }\n\n    return { chars, lines, words };\n}\n", "import { type PointData } from '../../maths/point/PointData';\nimport { Container, type ContainerOptions } from '../container/Container';\nimport { type DestroyOptions } from '../container/destroyTypes';\nimport { TextStyle, type TextStyleOptions } from '../text/TextStyle';\nimport { type SplitableTextObject, type TextSplitOutput } from './types';\n\n/**\n * Configuration options for text splitting.\n * @category text\n * @standard\n */\nexport interface AbstractSplitOptions\n{\n    /** Text content to be split */\n    text: string;\n\n    /** Text styling - accepts TextStyle instance or style object */\n    style: TextStyle | Partial<TextStyleOptions>;\n\n    /**\n     * Enables automatic splitting on text/style changes\n     * @default true\n     */\n    autoSplit?: boolean;\n\n    /**\n     * Transform origin for line segments. Range: [0-1]\n     * @example\n     * ```ts\n     * lineAnchor: 0.5        // Center horizontally and vertically\n     * lineAnchor: { x: 0, y: 0.5 }  // Left-center alignment\n     *\n     * ```\n     * @default 0\n     */\n    lineAnchor?: number | PointData;\n\n    /**\n     * Transform origin for word segments. Range: [0-1]\n     * @example\n     * ```ts\n     * wordAnchor: { x: 1, y: 0 }  // Top-right alignment\n     * wordAnchor: 0.5  // Center alignment\n     * ```\n     * @default 0\n     */\n    wordAnchor?: number | PointData;\n\n    /**\n     * Transform origin for character segments. Range: [0-1]\n     * @example\n     * ```ts\n     * charAnchor: { x: 0.5, y: 1 }  // Bottom-center alignment\n     * charAnchor: 0.5  // Center alignment\n     * ```\n     * @default 0\n     */\n    charAnchor?: number | PointData;\n}\n\n/**\n * Configuration options for SplitText, combining container properties with text splitting settings.\n * @example Basic Usage\n * ```ts\n * const options: SplitTextOptions = {\n *   text: 'Hello World',\n *   style: { fontSize: 32, fill: 0xffffff },\n *   // Transform origins\n *   lineAnchor: 0.5,                // Center each line\n *   wordAnchor: { x: 0, y: 0.5 },  // Left-center each word\n *   charAnchor: { x: 0.5, y: 1 },  // Bottom-center each char\n * };\n * ```\n * @example Advanced Configuration\n * ```ts\n * const options: SplitTextOptions = {\n *   // Text content and style\n *   text: 'Multi\\nLine Text',\n *   style: new TextStyle({\n *     fontSize: 24,\n *     fill: 'white',\n *     strokeThickness: 2,\n *   }),\n *\n *   // Container properties\n *   x: 100,\n *   y: 100,\n *   alpha: 0.8,\n *\n *   // Splitting settings\n *   autoSplit: true,\n *\n *   // Transform origins (normalized 0-1)\n *   lineAnchor: { x: 1, y: 0 },    // Top-right\n *   wordAnchor: 0.5,               // Center\n *   charAnchor: { x: 0, y: 1 },    // Bottom-left\n * };\n * ```\n *\n * Properties:\n * - Container options from {@link ContainerOptions}\n * - Text split options from {@link AbstractSplitOptions}\n * @see {@link AbstractSplitText} For the main implementation\n * @see {@link ContainerOptions} For base container properties\n * @see {@link AbstractSplitOptions} For text splitting options\n * @category text\n * @standard\n */\nexport interface AbstractSplitTextOptions extends ContainerOptions, AbstractSplitOptions {}\n\n/**\n * @experimental\n * A container that splits text into individually manipulatable segments (lines, words, and characters)\n * for advanced text effects and animations.\n * @example Basic Usage\n * ```ts\n * const text = new SplitText({\n *   text: \"Hello World\",\n *   style: { fontSize: 24 },\n *   // Origin points for transformations (0-1 range)\n *   lineAnchor: 0.5,  // Center of each line\n *   wordAnchor: { x: 0, y: 0.5 },  // Left-center of each word\n *   charAnchor: { x: 0.5, y: 1 },  // Bottom-center of each character\n *   autoSplit: true  // Auto-update segments on text/style changes\n * });\n * ```\n *\n * Features:\n * - Hierarchical text splitting (lines  words  characters)\n * - Independent transformation origins for each segment level\n * - Automatic or manual segment updates\n * - Support for both canvas text and bitmap text\n * @example Animation Example\n * ```ts\n * // Character fade-in sequence\n * text.chars.forEach((char, i) => {\n *   gsap.from(char, {\n *     alpha: 0,\n *     delay: i * 0.1\n *   });\n * });\n *\n * // Word scale animation\n * text.words.forEach((word, i) => {\n *   gsap.to(word.scale, {\n *     x: 1.2, y: 1.2,\n *     yoyo: true,\n *     repeat: -1,\n *     delay: i * 0.2\n *   });\n * });\n *\n * // Line slide-in effect\n * text.lines.forEach((line, i) => {\n *   gsap.from(line, {\n *     x: -200,\n *     delay: i * 0.3\n *   });\n * });\n * ```\n *\n * Configuration Options:\n * - `text`: The string to render and segment\n * - `style`: TextStyle instance or configuration object\n * - `autoSplit`: Automatically update segments on changes (default: true)\n * - `lineAnchor`: Transform origin for lines (default: 0)\n * - `wordAnchor`: Transform origin for words (default: 0)\n * - `charAnchor`: Transform origin for characters (default: 0)\n *\n * > [!NOTE] Anchor points are normalized (0-1):\n * > - 0,0: Top-left\n * > - 0.5,0.5: Center\n * > - 1,1: Bottom-right\n *\n * > [!WARNING] Limitations\n * > - Character spacing may differ slightly from standard text due to browser\n * >   kerning being lost when characters are separated\n * @category text\n * @standard\n */\nexport abstract class AbstractSplitText<T extends SplitableTextObject> extends Container\n{\n    /**\n     * Individual character segments of the text.\n     * @example\n     * ```ts\n     * // Fade in characters sequentially\n     * text.chars.forEach((char, i) => {\n     *   char.alpha = 0;\n     *   gsap.to(char, {\n     *     alpha: 1,\n     *     delay: i * 0.1\n     *   });\n     * });\n     * ```\n     */\n    public chars: T[];\n\n    /**\n     * Word segments of the text, each containing one or more characters.\n     * @example\n     * ```ts\n     * // Scale words on hover\n     * text.words.forEach(word => {\n     *   word.interactive = true;\n     *   word.on('pointerover', () => {\n     *     gsap.to(word.scale, { x: 1.2, y: 1.2 });\n     *   });\n     *   word.on('pointerout', () => {\n     *     gsap.to(word.scale, { x: 1, y: 1 });\n     *   });\n     * });\n     * ```\n     */\n    public words: Container[];\n\n    /**\n     * Line segments of the text, each containing one or more words.\n     * @example\n     * ```ts\n     * // Stagger line entrance animations\n     * text.lines.forEach((line, i) => {\n     *   line.x = -200;\n     *   gsap.to(line, {\n     *     x: 0,\n     *     duration: 0.5,\n     *     delay: i * 0.2,\n     *     ease: 'back.out'\n     *   });\n     * });\n     * ```\n     */\n    public lines: Container[];\n\n    protected _originalText: string;\n    protected _lineAnchor: number | PointData;\n    protected _wordAnchor: number | PointData;\n    protected _charAnchor: number | PointData;\n    protected _autoSplit: boolean;\n    protected _style: TextStyle;\n\n    protected _dirty: boolean = false;\n    protected _canReuseChars: boolean = false;\n\n    constructor(config: AbstractSplitTextOptions)\n    {\n        const {\n            text,\n            style,\n            autoSplit,\n            lineAnchor,\n            wordAnchor,\n            charAnchor,\n            ...options\n        } = config;\n\n        super(options);\n        this.chars = [];\n        this.words = [];\n        this.lines = [];\n\n        this._originalText = text;\n        this._autoSplit = autoSplit;\n        this._lineAnchor = lineAnchor;\n        this._wordAnchor = wordAnchor;\n        this._charAnchor = charAnchor;\n\n        // setting the style will segment the text if autoSplit is true\n        this.style = style;\n    }\n\n    protected abstract splitFn(): TextSplitOutput<T>;\n\n    /**\n     * Splits the text into lines, words, and characters.\n     * Call this manually when autoSplit is false.\n     * @example Manual Splitting\n     * ```ts\n     * const text = new SplitText({\n     *   text: 'Manual Update',\n     *   autoSplit: false\n     * });\n     *\n     * text.text = 'New Content';\n     * text.style = { fontSize: 32 };\n     * text.split(); // Apply changes\n     * ```\n     */\n    public split(): void\n    {\n        const res: TextSplitOutput<T> = this.splitFn();\n\n        this.chars = res.chars;\n        this.words = res.words;\n        this.lines = res.lines;\n\n        this.addChild(...this.lines);\n\n        // force origin to be set\n        this.charAnchor = this._charAnchor;\n        this.wordAnchor = this._wordAnchor;\n        this.lineAnchor = this._lineAnchor;\n\n        this._dirty = false;\n        this._canReuseChars = true;\n    }\n\n    get text(): string\n    {\n        return this._originalText;\n    }\n    /**\n     * Gets or sets the text content.\n     * Setting new text triggers splitting if autoSplit is true.\n     * > [!NOTE] Setting this frequently can have a performance impact, especially with large texts and canvas text.\n     * @example Dynamic Text Updates\n     * ```ts\n     * const text = new SplitText({\n     *   text: 'Original',\n     *   autoSplit: true\n     * });\n     *\n     * // Auto-splits on change\n     * text.text = 'Updated Content';\n     *\n     * // Manual update\n     * text.autoSplit = false;\n     * text.text = 'Manual Update';\n     * text.split();\n     * ```\n     */\n    set text(value: string)\n    {\n        this._originalText = value;\n        this.lines.forEach((line) => line.destroy({ children: true }));\n        this.lines.length = 0;\n        this.words.length = 0;\n        this.chars.length = 0;\n        this._canReuseChars = false;\n        // You can't reuse chars if the text changes\n        this.onTextUpdate();\n    }\n\n    private _setOrigin(\n        value: number | PointData,\n        elements: Array<Container | T>,\n        property: '_lineAnchor' | '_wordAnchor' | '_charAnchor',\n    ): void\n    {\n        let originPoint: PointData;\n\n        if (typeof value === 'number')\n        {\n            originPoint = { x: value, y: value };\n        }\n        else\n        {\n            originPoint = { x: value.x, y: value.y };\n        }\n\n        elements.forEach((element) =>\n        {\n            const localBounds = element.getLocalBounds();\n\n            // Calculate origin position relative to the bounds\n            const originX = localBounds.minX + (localBounds.width * originPoint.x);\n            const originY = localBounds.minY + (localBounds.height * originPoint.y);\n\n            element.origin.set(originX, originY);\n        });\n\n        this[property] = value;\n    }\n\n    /**\n     * Gets or sets the transform anchor for line segments.\n     * The anchor point determines the center of rotation and scaling for each line.\n     * @example Setting Line Anchors\n     * ```ts\n     * // Center rotation/scaling\n     * text.lineAnchor = 0.5;\n     *\n     * // Rotate/scale from top-right corner\n     * text.lineAnchor = { x: 1, y: 0 };\n     *\n     * // Custom anchor point\n     * text.lineAnchor = {\n     *   x: 0.2, // 20% from left\n     *   y: 0.8  // 80% from top\n     * };\n     * ```\n     */\n    get lineAnchor(): number | PointData\n    {\n        return this._lineAnchor;\n    }\n    set lineAnchor(value: number | PointData)\n    {\n        this._setOrigin(value, this.lines, '_lineAnchor');\n    }\n\n    /**\n     * Gets or sets the transform anchor for word segments.\n     * The anchor point determines the center of rotation and scaling for each word.\n     * @example\n     * ```ts\n     * // Center each word\n     * text.wordAnchor = 0.5;\n     *\n     * // Scale from bottom-left\n     * text.wordAnchor = { x: 0, y: 1 };\n     *\n     * // Rotate around custom point\n     * text.wordAnchor = {\n     *   x: 0.75,  // 75% from left\n     *   y: 0.5    // Middle vertically\n     * };\n     * ```\n     */\n    get wordAnchor(): number | PointData\n    {\n        return this._wordAnchor;\n    }\n    set wordAnchor(value: number | PointData)\n    {\n        this._setOrigin(value, this.words, '_wordAnchor');\n    }\n\n    /**\n     * Gets or sets the transform anchor for character segments.\n     * The anchor point determines the center of rotation and scaling for each character.\n     * @example Setting Character Anchors\n     * ```ts\n     * // Center each character\n     * text.charAnchor = 0.5;\n     *\n     * // Rotate from top-center\n     * text.charAnchor = { x: 0.5, y: 0 };\n     *\n     * // Scale from bottom-right\n     * text.charAnchor = { x: 1, y: 1 };\n     * ```\n     * @example Animation with Anchors\n     * ```ts\n     * // Rotate characters around their centers\n     * text.charAnchor = 0.5;\n     * text.chars.forEach((char, i) => {\n     *   gsap.to(char, {\n     *     rotation: Math.PI * 2,\n     *     duration: 1,\n     *     delay: i * 0.1,\n     *     repeat: -1\n     *   });\n     * });\n     * ```\n     */\n    get charAnchor(): number | PointData\n    {\n        return this._charAnchor;\n    }\n    set charAnchor(value: number | PointData)\n    {\n        this._setOrigin(value, this.chars, '_charAnchor');\n    }\n\n    get style(): TextStyle\n    {\n        return this._style;\n    }\n\n    /**\n     * The style configuration for the text.\n     * Can be a TextStyle instance or a configuration object.\n     * @example\n     * ```ts\n     * const text = new Text({\n     *     text: 'Styled Text',\n     *     style: {\n     *         fontSize: 24,\n     *         fill: 0xff1010, // Red color\n     *         fontFamily: 'Arial',\n     *         align: 'center', // Center alignment\n     *         stroke: { color: '#4a1850', width: 5 }, // Purple stroke\n     *         dropShadow: {\n     *             color: '#000000', // Black shadow\n     *             blur: 4, // Shadow blur\n     *             distance: 6 // Shadow distance\n     *         }\n     *     }\n     * });\n     * // Update style dynamically\n     * text.style = {\n     *     fontSize: 30, // Change font size\n     *     fill: 0x00ff00, // Change color to green\n     *     align: 'right', // Change alignment to right\n     *     stroke: { color: '#000000', width: 2 }, // Add black stroke\n     * }\n     */\n    set style(style: TextStyle | Partial<TextStyle> | TextStyleOptions)\n    {\n        style ||= {};\n\n        this._style = new TextStyle(style);\n\n        this.styleChanged();\n    }\n\n    /**\n     * Used to notify the text that the style has changed.\n     * This will re-split the text and re-apply the style.\n     * @example\n     * ```ts\n     * text.style.fontSize = 32;\n     * text.styleChanged();\n     * ```\n     */\n    public styleChanged(): void\n    {\n        // tidy up word/line containers, characters can be reused\n        this.words.forEach((word) => word.destroy());\n        this.words.length = 0;\n\n        this.lines.forEach((line) => line.destroy());\n        this.lines.length = 0;\n\n        this._canReuseChars = true;\n\n        this.onTextUpdate();\n    }\n\n    protected onTextUpdate(): void\n    {\n        this._dirty = true;\n\n        if (this._autoSplit)\n        {\n            this.split();\n        }\n    }\n\n    /**\n     * Destroys the SplitText instance and all its resources.\n     * Cleans up all segment arrays, event listeners, and optionally the text style.\n     * @param options - Destroy configuration options\n     * @example\n     * ```ts\n     * // Clean up everything\n     * text.destroy({ children: true, texture: true, style: true });\n     *\n     * // Remove from parent but keep style\n     * text.destroy({ children: true, style: false });\n     * ```\n     */\n    public destroy(options?: DestroyOptions): void\n    {\n        super.destroy(options);\n        this.chars = [];\n        this.words = [];\n        this.lines = [];\n        if (typeof options === 'boolean' ? options : options?.style)\n        {\n            this._style.destroy(options);\n        }\n\n        this._style = null;\n        this._originalText = '';\n    }\n}\n", "import { type ContainerOptions } from '../container/Container';\nimport { TextStyle } from '../text/TextStyle';\nimport { type BitmapText } from '../text-bitmap/BitmapText';\nimport { bitmapTextSplit } from '../text-bitmap/utils/bitmapTextSplit';\nimport {\n    type AbstractSplitOptions,\n    AbstractSplitText\n} from './AbstractSplitText';\nimport { type TextSplitOutput } from './types';\n\n/**\n * Configuration options for BitmapText splitting.\n * @category text\n * @standard\n * @interface\n */\n// eslint-disable-next-line @typescript-eslint/no-empty-object-type\nexport interface SplitBitmapOptions extends AbstractSplitOptions {}\n\n/**\n * Configuration options for SplitBitmapText, combining container properties with text splitting settings.\n * @example Basic Usage\n * ```ts\n * const options: SplitBitmapTextOptions = {\n *   text: 'Hello World',\n *   style: { fontSize: 32, fill: 0xffffff },\n *   // Transform origins\n *   lineAnchor: 0.5,                // Center each line\n *   wordAnchor: { x: 0, y: 0.5 },  // Left-center each word\n *   charAnchor: { x: 0.5, y: 1 },  // Bottom-center each char\n * };\n * ```\n * @example Advanced Configuration\n * ```ts\n * const options: SplitBitmapTextOptions = {\n *   // Text content and style\n *   text: 'Multi\\nLine Text',\n *   style: new TextStyle({\n *     fontSize: 24,\n *     fill: 'white',\n *     strokeThickness: 2,\n *   }),\n *\n *   // Container properties\n *   x: 100,\n *   y: 100,\n *   alpha: 0.8,\n *\n *   // Splitting settings\n *   autoSplit: true,\n *\n *   // Transform origins (normalized 0-1)\n *   lineAnchor: { x: 1, y: 0 },    // Top-right\n *   wordAnchor: 0.5,               // Center\n *   charAnchor: { x: 0, y: 1 },    // Bottom-left\n * };\n * ```\n *\n * Properties:\n * - Container options from {@link ContainerOptions}\n * - Text splitting options from {@link SplitBitmapOptions}\n * - Additional PixiJS-specific options from PixiMixins.SplitBitmapText\n * @see {@link SplitBitmapText} For the main implementation\n * @see {@link ContainerOptions} For base container properties\n * @see {@link SplitBitmapOptions} For text splitting options\n * @category text\n * @standard\n */\nexport interface SplitBitmapTextOptions\n    extends PixiMixins.SplitBitmapText,\n    ContainerOptions,\n    SplitBitmapOptions {}\n\n/**\n * @experimental\n * A container that splits text into individually manipulatable segments (lines, words, and characters)\n * for advanced text effects and animations.\n * Converts each segment into a separate BitmapText object.\n * @example Basic Usage\n * ```ts\n * const text = new SplitBitmapText({\n *   text: \"Hello World\",\n *   style: { fontSize: 24 },\n *   // Origin points for transformations (0-1 range)\n *   lineAnchor: 0.5,  // Center of each line\n *   wordAnchor: { x: 0, y: 0.5 },  // Left-center of each word\n *   charAnchor: { x: 0.5, y: 1 },  // Bottom-center of each character\n *   autoSplit: true  // Auto-update segments on text/style changes\n * });\n * ```\n *\n * Features:\n * - Hierarchical text segmentation (lines  words  characters)\n * - Independent transformation origins for each segment level\n * - Automatic or manual segment updates\n * @example Animation Example\n * ```ts\n * // Character fade-in sequence\n * text.chars.forEach((char, i) => {\n *   gsap.from(char, {\n *     alpha: 0,\n *     delay: i * 0.1\n *   });\n * });\n *\n * // Word scale animation\n * text.words.forEach((word, i) => {\n *   gsap.to(word.scale, {\n *     x: 1.2, y: 1.2,\n *     yoyo: true,\n *     repeat: -1,\n *     delay: i * 0.2\n *   });\n * });\n *\n * // Line slide-in effect\n * text.lines.forEach((line, i) => {\n *   gsap.from(line, {\n *     x: -200,\n *     delay: i * 0.3\n *   });\n * });\n * ```\n *\n * Configuration Options:\n * - `text`: The string to render and segment\n * - `style`: TextStyle instance or configuration object\n * - `autoSplit`: Automatically update segments on changes (default: true)\n * - `lineAnchor`: Transform origin for lines (default: 0)\n * - `wordAnchor`: Transform origin for words (default: 0)\n * - `charAnchor`: Transform origin for characters (default: 0)\n *\n * > [!NOTE] Anchor points are normalized (0-1):\n * > - 0,0: Top-left\n * > - 0.5,0.5: Center\n * > - 1,1: Bottom-right\n *\n * > [!WARNING] Limitations\n * > - Character spacing may differ slightly from standard text due to browser\n * >   kerning being lost when characters are separated\n * @category text\n * @standard\n */\nexport class SplitBitmapText extends AbstractSplitText<BitmapText>\n{\n    /**\n     * Default configuration options for SplitBitmapText instances.\n     * @example\n     * ```ts\n     * // Override defaults globally\n     * SplitBitmapText.defaultOptions = {\n     *   autoSplit: false,\n     *   lineAnchor: 0.5,  // Center alignment\n     *   wordAnchor: { x: 0, y: 0.5 },  // Left-center\n     *   charAnchor: { x: 0.5, y: 1 }   // Bottom-center\n     * };\n     * ```\n     */\n    public static defaultOptions: Partial<SplitBitmapTextOptions> = {\n        autoSplit: true, // Auto-update on text/style changes\n        lineAnchor: 0, // Top-left alignment\n        wordAnchor: 0, // Top-left alignment\n        charAnchor: 0, // Top-left alignment\n    } as Partial<SplitBitmapTextOptions>;\n\n    constructor(config: SplitBitmapTextOptions)\n    {\n        const completeOptions: SplitBitmapTextOptions = {\n            ...SplitBitmapText.defaultOptions,\n            ...config,\n        };\n\n        completeOptions.style ??= {};\n        completeOptions.style.fill ??= 0xffffff;\n\n        super(completeOptions);\n    }\n\n    /**\n     * Creates a SplitBitmapText instance from an existing text object.\n     * Useful for converting standard Text or BitmapText objects into segmented versions.\n     * @param text - The source text object to convert\n     * @param options - Additional splitting options\n     * @returns A new SplitBitmapText instance\n     * @example\n     * ```ts\n     * const bitmapText = new BitmapText({\n     *   text: 'Bitmap Text',\n     *   style: { fontFamily: 'Arial' }\n     * });\n     *\n     * const segmented = SplitBitmapText.from(bitmapText);\n     *\n     * // with additional options\n     * const segmentedWithOptions = SplitBitmapText.from(bitmapText, {\n     *   autoSplit: false,\n     *   lineAnchor: 0.5,\n     *   wordAnchor: { x: 0, y: 0.5 },\n     * })\n     * ```\n     */\n    public static from(\n        text: BitmapText,\n        options?: Omit<SplitBitmapTextOptions, 'text' | 'style'>,\n    ): SplitBitmapText\n    {\n        const completeOptions: SplitBitmapTextOptions = {\n            ...SplitBitmapText.defaultOptions,\n            ...options,\n            text: text.text,\n            style: new TextStyle(text.style),\n        };\n\n        const splitText = new SplitBitmapText({\n            ...completeOptions,\n        });\n\n        // Transfer anchor behavior using pivot\n        const anchor = text.anchor;\n\n        if (anchor.x !== 0 || anchor.y !== 0)\n        {\n            splitText.pivot.set(\n                splitText.width * anchor.x,\n                splitText.height * anchor.y\n            );\n        }\n\n        return splitText;\n    }\n\n    protected splitFn(): TextSplitOutput<BitmapText>\n    {\n        return bitmapTextSplit({\n            text: this._originalText,\n            style: this._style,\n            chars: this._canReuseChars ? this.chars : [],\n        });\n    }\n}\n", "import { Matrix } from '../../../maths/matrix/Matrix';\nimport { Container } from '../../container/Container';\nimport { FillGradient } from '../../graphics/shared/fill/FillGradient';\nimport { type SplitOptions } from '../../text-split/SplitText';\nimport { type TextSplitOutput } from '../../text-split/types';\nimport { CanvasTextGenerator } from '../canvas/CanvasTextGenerator';\nimport { CanvasTextMetrics } from '../canvas/CanvasTextMetrics';\nimport { Text } from '../Text';\nimport { type TextStyle } from '../TextStyle';\n\ninterface Segment\n{\n    char: string;\n    metric: CanvasTextMetrics;\n}\n\ninterface GroupedSegment\n{\n    line: string;\n    chars: Segment[];\n    width: number;\n}\n\nfunction getAlignmentOffset(alignment: string, lineWidth: number, largestLine: number): number\n{\n    switch (alignment)\n    {\n        case 'center':\n            return (largestLine - lineWidth) / 2;\n        case 'right':\n            return largestLine - lineWidth;\n        case 'left':\n        default:\n            return 0;\n    }\n}\n\nfunction isNewlineCharacter(char: string): boolean\n{\n    return char === '\\r' || char === '\\n' || char === '\\r\\n';\n}\n\n/**\n * Groups text segments into lines based on measured text metrics\n * @param segments - Array of text segments to group\n * @param measuredText - The pre-measured text metrics\n * @param measuredText.lines\n * @param textStyle - The text style to use for measurements\n * @returns Array of grouped segments containing line information\n */\nfunction groupTextSegments(\n    segments: string[],\n    measuredText: { lines: string[] },\n    textStyle: TextStyle,\n): GroupedSegment[]\n{\n    const groupedSegments: GroupedSegment[] = [];\n    let currentLine = measuredText.lines[0];\n    let matchedLine = '';\n    let chars: Segment[] = [];\n    let lineCount = 0;\n\n    // Disable word wrap for individual character measurements\n    textStyle.wordWrap = false;\n\n    segments.forEach((segment) =>\n    {\n        const isWhitespace = (/^\\s*$/).test(segment);\n        const isNewline = isNewlineCharacter(segment);\n        const isSpaceAtStart = matchedLine.length === 0 && isWhitespace;\n\n        if (isWhitespace && !isNewline && isSpaceAtStart)\n        {\n            return;\n        }\n\n        if (!isNewline) matchedLine += segment;\n\n        const metric = CanvasTextMetrics.measureText(segment, textStyle);\n\n        chars.push({ char: segment, metric });\n\n        if (matchedLine.length >= currentLine.length)\n        {\n            groupedSegments.push({\n                line: matchedLine,\n                chars,\n                width: chars.reduce((acc, seg) => acc + seg.metric.width, 0),\n            });\n            chars = [];\n            matchedLine = '';\n            lineCount++;\n            currentLine = measuredText.lines[lineCount];\n        }\n    });\n\n    return groupedSegments;\n}\n\n/**\n * Splits a Text object into segments based on the text's layout and style,\n * and adds these segments as individual Text objects to a specified container.\n *\n * This function handles word wrapping, alignment, and letter spacing,\n * ensuring that each segment is rendered correctly according to the original text's style.\n * It uses the CanvasTextMetrics to measure text dimensions and segment the text into lines.\n * @param options - Configuration options for the text split operation.\n * @returns An array of Text objects representing the split segments.\n * @internal\n */\nexport function canvasTextSplit(\n    options: Pick<SplitOptions, 'text' | 'style'> & { chars: Text[] },\n): TextSplitOutput<Text>\n{\n    const { text, style, chars: existingChars } = options;\n    const textStyle = style as TextStyle;\n\n    // measure the entire text to get the layout\n    const measuredText = CanvasTextMetrics.measureText(text, textStyle);\n    // split the text into segments\n    const segments = CanvasTextMetrics.graphemeSegmenter(text);\n    // now group the segments into lines based on measured lines\n    const groupedSegments: GroupedSegment[] = groupTextSegments(segments, measuredText, textStyle.clone());\n\n    const alignment = textStyle.align;\n    const maxLineWidth = measuredText.lineWidths.reduce((max, line) => Math.max(max, line), 0);\n    const isSingleLine = measuredText.lines.length === 1;\n    // For single-line text, alignment has no effect (nothing to align relative to)\n    // Multi-line text uses wordWrapWidth when word wrap is enabled\n    const useWordWrapWidth = !isSingleLine && textStyle.wordWrap;\n    const alignWidth = useWordWrapWidth ? textStyle.wordWrapWidth : maxLineWidth;\n\n    // Check if fill or stroke contains a gradient that needs offset/bounds\n    const fillGradient = textStyle._fill?.fill;\n    const strokeGradient = textStyle._stroke?.fill;\n\n    const hasFillGradient = fillGradient instanceof FillGradient;\n    const hasStrokeGradient = strokeGradient instanceof FillGradient;\n    const hasGradient = hasFillGradient || hasStrokeGradient;\n    const hasLocalGradient = (hasFillGradient && fillGradient.textureSpace === 'local')\n        || (hasStrokeGradient && strokeGradient.textureSpace === 'local');\n\n    // Store full text dimensions for gradient calculation\n    const fullTextWidth = measuredText.width;\n    const fullTextHeight = measuredText.height;\n\n    // Clone style for individual characters with left alignment.\n    // Container-level positioning handles alignment via getAlignmentOffset().\n    // Without this, each character applies its own alignment offset within its measurement area.\n    const baseCharStyle = textStyle.clone();\n\n    baseCharStyle.align = 'left';\n\n    // When trim is enabled on the style, calculate the trim offset for the whole text block once,\n    // then disable trim on individual characters and offset all characters to compensate\n    let trimOffsetX = 0;\n    let trimOffsetY = 0;\n\n    if (baseCharStyle.trim)\n    {\n        const { frame, canvasAndContext } = CanvasTextGenerator.getCanvasAndContext({\n            text,\n            style: textStyle,\n            resolution: 1,\n        });\n\n        CanvasTextGenerator.returnCanvasAndContext(canvasAndContext);\n\n        trimOffsetX = -frame.x;\n        trimOffsetY = -frame.y;\n\n        // Disable trim for individual characters; we'll use the whole-text trim offset instead\n        baseCharStyle.trim = false;\n    }\n\n    // now create Text objects for each segment and add them to the container\n    const chars: Text[] = [];\n    const lineContainers: Container[] = [];\n    const wordContainers: Container[] = [];\n    let yOffset = 0;\n    const strokeWidth = textStyle._stroke?.width || 0;\n    const dropShadowDistance = textStyle.dropShadow?.distance || 0;\n\n    groupedSegments.forEach((group, lineIndex) =>\n    {\n        const lineContainer = new Container({ label: `line-${lineIndex}` });\n\n        lineContainer.y = yOffset + trimOffsetY;\n        lineContainers.push(lineContainer);\n\n        const lineWidth = measuredText.lineWidths[lineIndex];\n        let xOffset = getAlignmentOffset(alignment, lineWidth, alignWidth);\n\n        let currentWordContainer = new Container({ label: 'word' });\n\n        currentWordContainer.x = xOffset + trimOffsetX;\n\n        group.chars.forEach((segment, charIndex) =>\n        {\n            if (segment.metric.width === 0)\n            {\n                return; // skip zero-width segments\n            }\n\n            if (isNewlineCharacter(segment.char))\n            {\n                xOffset += segment.metric.width - strokeWidth;\n\n                return; // Skip newline characters\n            }\n\n            if (segment.char === ' ')\n            {\n                // Add current word container if it has content\n                if (currentWordContainer.children.length > 0)\n                {\n                    wordContainers.push(currentWordContainer);\n                    lineContainer.addChild(currentWordContainer);\n                }\n\n                // Start new word container\n                xOffset += segment.metric.width + textStyle.letterSpacing - strokeWidth;\n                currentWordContainer = new Container({ label: 'word' });\n                currentWordContainer.x = xOffset + trimOffsetX;\n            }\n            else\n            {\n                // Create style for this character\n                let charStyle = baseCharStyle;\n\n                if (hasGradient)\n                {\n                    charStyle = baseCharStyle.clone();\n                    // All gradients need offset to position correctly within split text\n                    charStyle._gradientOffset = { x: -xOffset, y: -yOffset };\n                    // Local gradients also need full text bounds for proper scaling\n                    if (hasLocalGradient)\n                    {\n                        charStyle._gradientBounds = { width: fullTextWidth, height: fullTextHeight };\n                    }\n                }\n\n                // if there are existing characters, reuse them\n                let char: Text;\n\n                if (existingChars.length > 0)\n                {\n                    char = existingChars.shift();\n\n                    char.text = segment.char;\n                    char.style = charStyle;\n                    char.setFromMatrix(Matrix.IDENTITY);\n                    char.x = xOffset - currentWordContainer.x + trimOffsetX - (dropShadowDistance * charIndex);\n                }\n                else\n                {\n                    char = new Text({\n                        text: segment.char,\n                        style: charStyle,\n                        x: xOffset - currentWordContainer.x + trimOffsetX - (dropShadowDistance * charIndex),\n                    });\n                }\n\n                chars.push(char);\n                currentWordContainer.addChild(char);\n                xOffset += segment.metric.width + textStyle.letterSpacing - strokeWidth;\n            }\n        });\n\n        // Add the last word container of the line if it has children\n        if (currentWordContainer.children.length > 0)\n        {\n            wordContainers.push(currentWordContainer);\n            lineContainer.addChild(currentWordContainer);\n        }\n\n        yOffset += measuredText.lineHeight;\n    });\n\n    return { chars, lines: lineContainers, words: wordContainers };\n}\n", "import { type ContainerOptions } from '../container/Container';\nimport { type Text } from '../text/Text';\nimport { TextStyle } from '../text/TextStyle';\nimport { canvasTextSplit } from '../text/utils/canvasTextSplit';\nimport { type AbstractSplitOptions, AbstractSplitText } from './AbstractSplitText';\nimport { type TextSplitOutput } from './types';\n\n/**\n * Configuration options for Text splitting.\n * @category text\n * @standard\n * @interface\n */\n// eslint-disable-next-line @typescript-eslint/no-empty-object-type\nexport interface SplitOptions extends AbstractSplitOptions {}\n\n/**\n * Configuration options for SplitText, combining container properties with text splitting settings.\n * @example Basic Usage\n * ```ts\n * const options: SplitTextOptions = {\n *   text: 'Hello World',\n *   style: { fontSize: 32, fill: 0xffffff },\n *   // Transform origins\n *   lineAnchor: 0.5,                // Center each line\n *   wordAnchor: { x: 0, y: 0.5 },  // Left-center each word\n *   charAnchor: { x: 0.5, y: 1 },  // Bottom-center each char\n * };\n * ```\n * @example Advanced Configuration\n * ```ts\n * const options: SplitTextOptions = {\n *   // Text content and style\n *   text: 'Multi\\nLine Text',\n *   style: new TextStyle({\n *     fontSize: 24,\n *     fill: 'white',\n *     strokeThickness: 2,\n *   }),\n *\n *   // Container properties\n *   x: 100,\n *   y: 100,\n *   alpha: 0.8,\n *\n *   // Splitting settings\n *   autoSplit: true,\n *\n *   // Transform origins (normalized 0-1)\n *   lineAnchor: { x: 1, y: 0 },    // Top-right\n *   wordAnchor: 0.5,               // Center\n *   charAnchor: { x: 0, y: 1 },    // Bottom-left\n * };\n * ```\n *\n * Properties:\n * - Container options from {@link ContainerOptions}\n * - Text splitting options from {@link SplitOptions}\n * - Additional PixiJS-specific options from PixiMixins.SplitText\n * @see {@link SplitText} For the main implementation\n * @see {@link ContainerOptions} For base container properties\n * @see {@link SplitOptions} For text splitting options\n * @category text\n * @standard\n */\nexport interface SplitTextOptions extends PixiMixins.SplitText, ContainerOptions, SplitOptions {}\n\n/**\n * @experimental\n * A container that splits text into individually manipulatable segments (lines, words, and characters)\n * for advanced text effects and animations.\n * Converts each segment into a separate Text object.\n * @example Basic Usage\n * ```ts\n * const text = new SplitText({\n *   text: \"Hello World\",\n *   style: { fontSize: 24 },\n *   // Origin points for transformations (0-1 range)\n *   lineAnchor: 0.5,  // Center of each line\n *   wordAnchor: { x: 0, y: 0.5 },  // Left-center of each word\n *   charAnchor: { x: 0.5, y: 1 },  // Bottom-center of each character\n *   autoSplit: true  // Auto-update segments on text/style changes\n * });\n * ```\n *\n * Features:\n * - Hierarchical text segmentation (lines  words  characters)\n * - Independent transformation origins for each segment level\n * - Automatic or manual segment updates\n * @example Animation Example\n * ```ts\n * // Character fade-in sequence\n * text.chars.forEach((char, i) => {\n *   gsap.from(char, {\n *     alpha: 0,\n *     delay: i * 0.1\n *   });\n * });\n *\n * // Word scale animation\n * text.words.forEach((word, i) => {\n *   gsap.to(word.scale, {\n *     x: 1.2, y: 1.2,\n *     yoyo: true,\n *     repeat: -1,\n *     delay: i * 0.2\n *   });\n * });\n *\n * // Line slide-in effect\n * text.lines.forEach((line, i) => {\n *   gsap.from(line, {\n *     x: -200,\n *     delay: i * 0.3\n *   });\n * });\n * ```\n *\n * Configuration Options:\n * - `text`: The string to render and segment\n * - `style`: TextStyle instance or configuration object\n * - `autoSplit`: Automatically update segments on changes (default: true)\n * - `lineAnchor`: Transform origin for lines (default: 0)\n * - `wordAnchor`: Transform origin for words (default: 0)\n * - `charAnchor`: Transform origin for characters (default: 0)\n *\n * > [!NOTE] Anchor points are normalized (0-1):\n * > - 0,0: Top-left\n * > - 0.5,0.5: Center\n * > - 1,1: Bottom-right\n *\n * > [!WARNING] Limitations\n * > - Character spacing may differ slightly from standard text due to browser\n * >   kerning being lost when characters are separated\n * @category text\n * @standard\n */\nexport class SplitText extends AbstractSplitText<Text>\n{\n    /**\n     * Default configuration options for SplitText instances.\n     * @example\n     * ```ts\n     * // Override defaults globally\n     * SplitText.defaultOptions = {\n     *   autoSplit: false,\n     *   lineAnchor: 0.5,  // Center alignment\n     *   wordAnchor: { x: 0, y: 0.5 },  // Left-center\n     *   charAnchor: { x: 0.5, y: 1 }   // Bottom-center\n     * };\n     * ```\n     */\n    public static defaultOptions: Partial<SplitTextOptions> = {\n        autoSplit: true, // Auto-update on text/style changes\n        lineAnchor: 0, // Top-left alignment\n        wordAnchor: 0, // Top-left alignment\n        charAnchor: 0, // Top-left alignment\n    } as Partial<SplitTextOptions>;\n\n    constructor(config: SplitTextOptions)\n    {\n        const completeOptions: SplitTextOptions = {\n            ...SplitText.defaultOptions,\n            ...config,\n        };\n\n        super(completeOptions);\n    }\n\n    /**\n     * Creates a SplitText instance from an existing text object.\n     * Useful for converting standard Text or Text objects into segmented versions.\n     * @param text - The source text object to convert\n     * @param options - Additional splitting options\n     * @returns A new SplitText instance\n     * @example\n     * ```ts\n     * const text = new Text({\n     *   text: 'Bitmap Text',\n     *   style: { fontFamily: 'Arial' }\n     * });\n     *\n     * const segmented = SplitText.from(text);\n     *\n     * // with additional options\n     * const segmentedWithOptions = SplitText.from(text, {\n     *   autoSplit: false,\n     *   lineAnchor: 0.5,\n     *   wordAnchor: { x: 0, y: 0.5 },\n     * })\n     * ```\n     */\n    public static from(text: Text, options?: Omit<SplitTextOptions, 'text' | 'style'>): SplitText\n    {\n        const completeOptions: SplitTextOptions = {\n            ...SplitText.defaultOptions,\n            ...options,\n            text: text.text,\n            style: new TextStyle(text.style),\n        };\n\n        const splitText = new SplitText({\n            ...completeOptions,\n        });\n\n        // Transfer anchor behavior using pivot\n        const anchor = text.anchor;\n\n        if (anchor.x !== 0 || anchor.y !== 0)\n        {\n            splitText.pivot.set(\n                splitText.width * anchor.x,\n                splitText.height * anchor.y\n            );\n        }\n\n        return splitText;\n    }\n\n    protected splitFn(): TextSplitOutput<Text>\n    {\n        return canvasTextSplit({\n            text: this._originalText,\n            style: this._style,\n            chars: this._canReuseChars ? this.chars : [],\n        });\n    }\n}\n", "import { Color } from '../../../color/Color';\nimport { type Filter } from '../../../filters/Filter';\n\nimport type { ConvertedFillStyle, ConvertedStrokeStyle } from '../../graphics/shared/FillTypes';\nimport type { HTMLTextStyle } from '../../text-html/HTMLTextStyle';\nimport type { TextStyle } from '../TextStyle';\n\nconst valuesToIterateForKeys: Partial<keyof TextStyle | keyof HTMLTextStyle>[] = [\n    'align',\n    'breakWords',\n    'cssOverrides',\n    'fontVariant',\n    'fontWeight',\n    'leading',\n    'letterSpacing',\n    'lineHeight',\n    'padding',\n    'textBaseline',\n    'trim',\n    'whiteSpace',\n    'wordWrap',\n    'wordWrapWidth',\n    'fontFamily',\n    'fontStyle',\n    'fontSize',\n] as const;\n\n/**\n * Generates a unique key for the text style.\n * @param style - The style to generate a key for.\n * @returns the key for the style.\n * @internal\n * @deprecated 8.12.0\n */\nexport function generateTextStyleKey(style: TextStyle): string\n{\n    const key = [];\n\n    let index = 0;\n\n    for (let i = 0; i < valuesToIterateForKeys.length; i++)\n    {\n        const prop = `_${valuesToIterateForKeys[i]}`;\n\n        key[index++] = style[prop as keyof typeof style];\n    }\n\n    index = addFillStyleKey(style._fill, key as string[], index);\n    index = addStokeStyleKey(style._stroke, key as string[], index);\n    index = addDropShadowKey(style.dropShadow, key as string[], index);\n    index = addFiltersKey(style.filters as Filter[], key as string[], index);\n\n    return key.join('-');\n}\n\nfunction addFiltersKey(filters: Filter[], key: (number | string)[], index: number)\n{\n    if (!filters) return index;\n\n    for (const filter of filters)\n    {\n        key[index++] = filter.uid;\n    }\n\n    return index;\n}\n\nfunction addFillStyleKey(fillStyle: ConvertedFillStyle, key: (number | string)[], index: number)\n{\n    if (!fillStyle) return index;\n\n    key[index++] = fillStyle.color;\n    key[index++] = fillStyle.alpha;\n    key[index++] = fillStyle.fill?.styleKey;\n\n    return index;\n}\n\nfunction addStokeStyleKey(strokeStyle: ConvertedStrokeStyle, key: (number | string)[], index: number)\n{\n    if (!strokeStyle) return index;\n\n    index = addFillStyleKey(strokeStyle, key, index);\n\n    key[index++] = strokeStyle.width;\n    key[index++] = strokeStyle.alignment;\n    key[index++] = strokeStyle.cap;\n    key[index++] = strokeStyle.join;\n    key[index++] = strokeStyle.miterLimit;\n\n    return index;\n}\n\nfunction addDropShadowKey(dropShadow: TextStyle['dropShadow'], key: (number | string)[], index: number)\n{\n    if (!dropShadow) return index;\n\n    key[index++] = dropShadow.alpha;\n    key[index++] = dropShadow.angle;\n    key[index++] = dropShadow.blur;\n    key[index++] = dropShadow.distance;\n    key[index++] = Color.shared.setValue(dropShadow.color).toNumber();\n\n    return index;\n}\n", "import { RendererType } from '../../rendering/renderers/types';\n\nimport type { WebGLRenderer } from '../../rendering/renderers/gl/WebGLRenderer';\nimport type { WebGPURenderer } from '../../rendering/renderers/gpu/WebGPURenderer';\nimport type { Texture } from '../../rendering/renderers/shared/texture/Texture';\nimport type { Renderer } from '../../rendering/renderers/types';\n\n/**\n * Logs a texture to the console as a base64 image.\n * This can be very useful for debugging issues with rendering.\n * @param texture - The texture to log\n * @param renderer - The renderer to use\n * @param size - The size of the texture to log in the console\n * @ignore\n */\nexport async function logDebugTexture(texture: Texture, renderer: Renderer, size = 200)\n{\n    const base64 = await renderer.extract.base64(texture);\n\n    if (renderer.type !== RendererType.CANVAS)\n    {\n        await (renderer as WebGLRenderer | WebGPURenderer).encoder.commandFinished;\n    }\n\n    const width = size;\n\n    // eslint-disable-next-line no-console\n    console.log(`logging texture ${texture.source.width}px ${texture.source.height}px`);\n\n    const style = [\n        'font-size: 1px;',\n        `padding: ${width}px ${300}px;`,\n        `background: url(${base64}) no-repeat;`,\n        'background-size: contain;',\n    ].join(' ');\n\n    // eslint-disable-next-line no-console\n    console.log('%c ', style);\n}\n", "/* eslint-disable no-console */\n\nimport { Sprite } from '../../scene/sprite/Sprite';\n\nimport type { Container } from '../../scene/container/Container';\nimport type { RenderGroup } from '../../scene/container/RenderGroup';\n\nconst colors = [\n    '#000080', // Navy Blue\n    '#228B22', // Forest Green\n    '#8B0000', // Dark Red\n    '#4169E1', // Royal Blue\n    '#008080', // Teal\n    '#800000', // Maroon\n    '#9400D3', // Dark Violet\n    '#FF8C00', // Dark Orange\n    '#556B2F', // Olive Green\n    '#8B008B' // Dark Magenta\n];\n\nlet colorTick = 0;\n\n/**\n * @param container\n * @param depth\n * @param data\n * @param data.color\n * @internal\n */\nexport function logScene(container: Container, depth = 0, data: {color?: string} = { color: '#000000' })\n{\n    if (container.renderGroup)\n    {\n        data.color = colors[colorTick++];\n    }\n\n    //    turn depth into number of spaces:\n    let spaces = '';\n\n    for (let i = 0; i < depth; i++)\n    {\n        spaces += '    ';\n    }\n\n    let label = container.label;\n\n    if (!label && container instanceof Sprite)\n    {\n        label = `sprite:${container.texture.label}`;\n    }\n\n    // eslint-disable-next-line max-len\n    let output = `%c ${spaces}|- ${label} (worldX:${container.worldTransform.tx}, relativeRenderX:${container.relativeGroupTransform.tx}, renderX:${container.groupTransform.tx}, localX:${container.x})`;\n\n    if (container.renderGroup)\n    {\n        output += ' (RenderGroup)';\n    }\n\n    if (container.filters)\n    {\n        output += '(*filters)';\n    }\n\n    console.log(output, `color:${data.color}; font-weight:bold;`);\n\n    depth++;\n\n    for (let i = 0; i < container.children.length; i++)\n    {\n        const child = container.children[i];\n\n        logScene(child, depth, { ...data });\n    }\n}\n\n/**\n * @param renderGroup\n * @param depth\n * @param data\n * @param data.index\n * @param data.color\n * @internal\n */\nexport function logRenderGroupScene(\n    renderGroup: RenderGroup, depth = 0,\n    data: {index: number, color?: string} = { index: 0, color: '#000000' }\n)\n{\n    // turn depth into number of spaces:\n    let spaces = '';\n\n    for (let i = 0; i < depth; i++)\n    {\n        spaces += '    ';\n    }\n\n    const output = `%c ${spaces}- ${data.index}: ${renderGroup.root.label} worldX:${renderGroup.worldTransform.tx}`;\n\n    console.log(output, `color:${data.color}; font-weight:bold;`);\n\n    depth++;\n\n    for (let i = 0; i < renderGroup.renderGroupChildren.length; i++)\n    {\n        const child = renderGroup.renderGroupChildren[i];\n\n        logRenderGroupScene(child, depth, { ...data, index: i });\n    }\n}\n", "import { browserExt } from './environment-browser/browserExt';\nimport { webworkerExt } from './environment-webworker/webworkerExt';\nimport { extensions } from './extensions/Extensions';\nimport './rendering/init';\nimport './spritesheet/init';\n\nexport * from './accessibility';\nexport * from './advanced-blend-modes';\nexport * from './app';\nexport * from './assets';\nexport * from './color';\nexport * from './compressed-textures';\nexport * from './culling';\nexport * from './dom';\nexport * from './environment';\nexport * from './environment-browser';\nexport * from './environment-webworker';\nexport * from './events';\nexport * from './extensions';\nexport * from './filters';\nexport * from './maths';\nexport * from './prepare';\nexport * from './rendering';\nexport * from './scene';\nexport * from './spritesheet';\nexport * from './ticker';\nexport * from './utils';\n\nextensions.add(browserExt, webworkerExt);\n"],
  "mappings": "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,CAAC,IAAI,EAAE,EAAE,IAAM,EAAE,CAAC,IAAI,EAAE,EAAE;AACtE,QAAI,CAAC,IAAK,EAAE,CAAC,IAAI,EAAE,CAAC,IAAM,EAAE,CAAC,IAAI,EAAE,CAAC,IAAM,EAAE,CAAC,IAAI,EAAE,EAAE,IAAM,EAAE,CAAC,IAAI,EAAE,EAAE;AACtE,QAAI,CAAC,IAAK,EAAE,CAAC,IAAI,EAAE,CAAC,IAAM,EAAE,CAAC,IAAI,EAAE,CAAC,IAAM,EAAE,CAAC,IAAI,EAAE,EAAE,IAAM,EAAE,CAAC,IAAI,EAAE,EAAE,IAAK,EAAE,CAAC;AAG9E,QAAI,CAAC,IAAK,EAAE,CAAC,IAAI,EAAE,CAAC,IAAM,EAAE,CAAC,IAAI,EAAE,CAAC,IAAM,EAAE,CAAC,IAAI,EAAE,EAAE,IAAM,EAAE,CAAC,IAAI,EAAE,EAAE;AACtE,QAAI,CAAC,IAAK,EAAE,CAAC,IAAI,EAAE,CAAC,IAAM,EAAE,CAAC,IAAI,EAAE,CAAC,IAAM,EAAE,CAAC,IAAI,EAAE,EAAE,IAAM,EAAE,CAAC,IAAI,EAAE,EAAE;AACtE,QAAI,CAAC,IAAK,EAAE,CAAC,IAAI,EAAE,CAAC,IAAM,EAAE,CAAC,IAAI,EAAE,CAAC,IAAM,EAAE,CAAC,IAAI,EAAE,EAAE,IAAM,EAAE,CAAC,IAAI,EAAE,EAAE;AACtE,QAAI,CAAC,IAAK,EAAE,CAAC,IAAI,EAAE,CAAC,IAAM,EAAE,CAAC,IAAI,EAAE,CAAC,IAAM,EAAE,CAAC,IAAI,EAAE,EAAE,IAAM,EAAE,CAAC,IAAI,EAAE,EAAE;AACtE,QAAI,CAAC,IAAK,EAAE,CAAC,IAAI,EAAE,CAAC,IAAM,EAAE,CAAC,IAAI,EAAE,CAAC,IAAM,EAAE,CAAC,IAAI,EAAE,EAAE,IAAM,EAAE,CAAC,IAAI,EAAE,EAAE,IAAK,EAAE,CAAC;AAG9E,QAAI,EAAE,IAAK,EAAE,EAAE,IAAI,EAAE,CAAC,IAAM,EAAE,EAAE,IAAI,EAAE,CAAC,IAAM,EAAE,EAAE,IAAI,EAAE,EAAE,IAAM,EAAE,EAAE,IAAI,EAAE,EAAE;AAC3E,QAAI,EAAE,IAAK,EAAE,EAAE,IAAI,EAAE,CAAC,IAAM,EAAE,EAAE,IAAI,EAAE,CAAC,IAAM,EAAE,EAAE,IAAI,EAAE,EAAE,IAAM,EAAE,EAAE,IAAI,EAAE,EAAE;AAC3E,QAAI,EAAE,IAAK,EAAE,EAAE,IAAI,EAAE,CAAC,IAAM,EAAE,EAAE,IAAI,EAAE,CAAC,IAAM,EAAE,EAAE,IAAI,EAAE,EAAE,IAAM,EAAE,EAAE,IAAI,EAAE,EAAE;AAC3E,QAAI,EAAE,IAAK,EAAE,EAAE,IAAI,EAAE,CAAC,IAAM,EAAE,EAAE,IAAI,EAAE,CAAC,IAAM,EAAE,EAAE,IAAI,EAAE,EAAE,IAAM,EAAE,EAAE,IAAI,EAAE,EAAE;AAC3E,QAAI,EAAE,IAAK,EAAE,EAAE,IAAI,EAAE,CAAC,IAAM,EAAE,EAAE,IAAI,EAAE,CAAC,IAAM,EAAE,EAAE,IAAI,EAAE,EAAE,IAAM,EAAE,EAAE,IAAI,EAAE,EAAE,IAAK,EAAE,EAAE;AAGpF,QAAI,EAAE,IAAK,EAAE,EAAE,IAAI,EAAE,CAAC,IAAM,EAAE,EAAE,IAAI,EAAE,CAAC,IAAM,EAAE,EAAE,IAAI,EAAE,EAAE,IAAM,EAAE,EAAE,IAAI,EAAE,EAAE;AAC3E,QAAI,EAAE,IAAK,EAAE,EAAE,IAAI,EAAE,CAAC,IAAM,EAAE,EAAE,IAAI,EAAE,CAAC,IAAM,EAAE,EAAE,IAAI,EAAE,EAAE,IAAM,EAAE,EAAE,IAAI,EAAE,EAAE;AAC3E,QAAI,EAAE,IAAK,EAAE,EAAE,IAAI,EAAE,CAAC,IAAM,EAAE,EAAE,IAAI,EAAE,CAAC,IAAM,EAAE,EAAE,IAAI,EAAE,EAAE,IAAM,EAAE,EAAE,IAAI,EAAE,EAAE;AAC3E,QAAI,EAAE,IAAK,EAAE,EAAE,IAAI,EAAE,CAAC,IAAM,EAAE,EAAE,IAAI,EAAE,CAAC,IAAM,EAAE,EAAE,IAAI,EAAE,EAAE,IAAM,EAAE,EAAE,IAAI,EAAE,EAAE;AAC3E,QAAI,EAAE,IAAK,EAAE,EAAE,IAAI,EAAE,CAAC,IAAM,EAAE,EAAE,IAAI,EAAE,CAAC,IAAM,EAAE,EAAE,IAAI,EAAE,EAAE,IAAM,EAAE,EAAE,IAAI,EA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",
  "names": ["source", "t", "hasDoctypeChildThatIsNotChild", "node", "Text", "XMLSerializer", "getTextContent", "source", "a", "end", "value", "DOMParser", "source", "sax", "gpuProgram", "glProgram", "source", "WebGPURenderer", "WebGLRenderer", "CanvasRenderer", "_Application", "i", "BitmapFont", "_Loader", "parser", "defaultValue", "source", "crossOrigin", "WORKER_CODE", "WORKER_URL", "WorkerInstance", "revokeObjectURL", "CheckImageBitmapWorker", "LoadImageBitmapWorker", "resolveResult", "_isWebGPUSupported", "_isWebGLSupported", "WORKER_CODE", "WORKER_URL", "WorkerInstance", "revokeObjectURL", "BasisWorker", "ktxWorker", "success", "DXGI_FORMAT", "D3D10_RESOURCE_DIMENSION", "D3DFMT", "GL_INTERNAL_FORMAT", "GL_FORMATS", "GL_TYPES", "WORKER_CODE", "WORKER_URL", "WorkerInstance", "revokeObjectURL", "urlHash", "KTXWorker", "ktxWorker", "gpuFormatToBasisTranscoderFormatMap", "supportedCompressedTextureFormats", "extensions", "_Culler", "transform", "fragment", "source", "_AlphaFilter", "gpuProgram", "source", "glProgram", "fragment", "vertex", "fragment", "source", "source", "_BlurFilterPass", "glProgram", "gpuProgram", "fragment", "source", "gpuProgram", "source", "glProgram", "fragment", "fragment", "vertex", "source", "glProgram", "vertex", "fragment", "gpuProgram", "source", "fragment", "source", "_NoiseFilter", "gpuProgram", "source", "glProgram", "fragment", "_PrepareBase", "_MeshGeometry", "transform", "_TilingSprite", "source", "tempBounds", "source", "source", "gpuProgram", "glProgram", "fontFamily", "resolve", "source", "DEPRECATED_WRAP_MODES", "DEPRECATED_SCALE_MODES", "source", "_RenderLayer", "_PlaneGeometry", "tempMatrix", "_PerspectiveMesh", "_RopeGeometry", "_MeshRope", "fragment", "vertex", "glProgram", "vertex", "fragment", "gpuProgram", "_Particle", "_ParticleContainer", "transform", "_NineSliceGeometry", "_NineSliceSprite", "_SplitBitmapText", "isNewline", "_SplitText"]
}
